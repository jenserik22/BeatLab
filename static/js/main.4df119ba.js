/*! For license information please see main.4df119ba.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var s=n(853),i=n(43),r=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(o(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),w=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var O=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function D(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case x:return"Suspense";case S:return"SuspenseList";case E:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case w:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:D(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return D(e(t))}catch(n){}}return null}var M=Array.isArray,N=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},I=[],q=-1;function L(e){return{current:e}}function V(e){0>q||(e.current=I[q],I[q]=null,q--)}function z(e,t){q++,I[q]=e.current,e.current=t}var U=L(null),B=L(null),W=L(null),H=L(null);function G(e,t){switch(z(W,t),z(B,e),z(U,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ih(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=rh(t=ih(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(U),z(U,e)}function Q(){V(U),V(B),V(W)}function K(e){null!==e.memoizedState&&z(H,e);var t=U.current,n=rh(t,e.type);t!==n&&(z(B,e),z(U,n))}function X(e){B.current===e&&(V(U),V(B)),H.current===e&&(V(H),Kh._currentValue=F)}var Y=Object.prototype.hasOwnProperty,$=s.unstable_scheduleCallback,J=s.unstable_cancelCallback,Z=s.unstable_shouldYield,ee=s.unstable_requestPaint,te=s.unstable_now,ne=s.unstable_getCurrentPriorityLevel,se=s.unstable_ImmediatePriority,ie=s.unstable_UserBlockingPriority,re=s.unstable_NormalPriority,oe=s.unstable_LowPriority,ae=s.unstable_IdlePriority,le=s.log,ce=s.unstable_setDisableYieldValue,ue=null,he=null;function de(e){if("function"===typeof le&&ce(e),he&&"function"===typeof he.setStrictMode)try{he.setStrictMode(ue,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(fe(e)/me|0)|0},fe=Math.log,me=Math.LN2;var ge=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t,n){var s=e.pendingLanes;if(0===s)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&s;return 0!==a?0!==(s=a&~r)?i=ve(s):0!==(o&=a)?i=ve(o):n||0!==(n=a&~e)&&(i=ve(n)):0!==(a=s&~r)?i=ve(a):0!==o?i=ve(o):n||0!==(n=s&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(n=t&-t)||32===r&&0!==(4194048&n))?t:i}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function xe(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Te(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-pe(t);e.entangledLanes|=t,e.entanglements[s]=1073741824|e.entanglements[s]|4194090&n}function Ee(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-pe(n),i=1<<s;i&t|e[s]&t&&(e[s]|=t),n&=~i}}function Ae(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Oe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Re(){var e=j.p;return 0!==e?e:void 0===(e=window.event)?32:cd(e.type)}var Pe=Math.random().toString(36).slice(2),De="__reactFiber$"+Pe,Me="__reactProps$"+Pe,Ne="__reactContainer$"+Pe,je="__reactEvents$"+Pe,Fe="__reactListeners$"+Pe,Ie="__reactHandles$"+Pe,qe="__reactResources$"+Pe,Le="__reactMarker$"+Pe;function Ve(e){delete e[De],delete e[Me],delete e[je],delete e[Fe],delete e[Ie]}function ze(e){var t=e[De];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ne]||n[De]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=_h(e);null!==e;){if(n=e[De])return n;e=_h(e)}return t}n=(e=n).parentNode}return null}function Ue(e){if(e=e[De]||e[Ne]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Be(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function We(e){var t=e[qe];return t||(t=e[qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function He(e){e[Le]=!0}var Ge=new Set,Qe={};function Ke(e,t){Xe(e,t),Xe(e+"Capture",t)}function Xe(e,t){for(Qe[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Ye,$e,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,Y.call(et,i)||!Y.call(Ze,i)&&(Je.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var s=t.toLowerCase().slice(0,5);if("data-"!==s&&"aria-"!==s)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function st(e,t,n,s){if(null===s)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+s)}}function it(e){if(void 0===Ye)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",$e=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+$e}var rt=!1;function ot(e,t){if(!e||rt)return"";rt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var s=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(r){s=r}e.call(n.prototype)}}else{try{throw Error()}catch(o){s=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&s&&"string"===typeof a.stack)return[a.stack,s.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),o=r[0],a=r[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(i=s=0;s<l.length&&!l[s].includes("DetermineComponentFrameRoot");)s++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(s===l.length||i===c.length)for(s=l.length-1,i=c.length-1;1<=s&&0<=i&&l[s]!==c[i];)i--;for(;1<=s&&0<=i;s--,i--)if(l[s]!==c[i]){if(1!==s||1!==i)do{if(s--,0>--i||l[s]!==c[i]){var u="\n"+l[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=s&&0<=i);break}}}finally{rt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){s=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=ut(e)?e.checked?"true":"false":e.value),(e=s)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function mt(e){return e.replace(ft,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,s,i,r,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?vt(e,o,ct(t)):null!=n?vt(e,o,ct(n)):null!=s&&e.removeAttribute("value"),null==i&&null!=r&&(e.defaultChecked=!!r),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function yt(e,t,n,s,i,r,o,a){if(null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.type=r),null!=t||null!=n){if(!("submit"!==r&&"reset"!==r||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}s="function"!==typeof(s=null!=s?s:i)&&"symbol"!==typeof s&&!!s,e.checked=a?e.checked:!!s,e.defaultChecked=!!s,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function vt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function _t(e,t,n,s){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&s&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(s&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function bt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,s){if(null==t){if(null!=s){if(null!=n)throw Error(o(92));if(M(s)){if(1<s.length)throw Error(o(93));s=s[0]}n=s}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(s=e.textContent)===n&&""!==s&&null!==s&&(e.value=s)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var s=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?s?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":s?e.setProperty(t,n):"number"!==typeof n||0===n||xt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var s in n)!n.hasOwnProperty(s)||null!=t&&t.hasOwnProperty(s)||(0===s.indexOf("--")?e.setProperty(s,""):"float"===s?e.cssFloat="":e[s]="");for(var i in t)s=t[i],t.hasOwnProperty(i)&&n[i]!==s&&St(e,i,s)}else for(var r in t)t.hasOwnProperty(r)&&St(e,r,t[r])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ot(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Rt=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dt=null,Mt=null;function Nt(e){var t=Ue(e);if(t&&(e=t.stateNode)){var n=e[Me]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var i=s[Me]||null;if(!i)throw Error(o(90));gt(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(s=n[t]).form===e.form&&dt(s)}break e;case"textarea":bt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&_t(e,!!n.multiple,t,!1)}}}var jt=!1;function Ft(e,t,n){if(jt)return e(t,n);jt=!0;try{return e(t)}finally{if(jt=!1,(null!==Dt||null!==Mt)&&(zc(),Dt&&(t=Dt,e=Mt,Mt=Dt=null,Nt(t),e)))for(t=0;t<e.length;t++)Nt(e[t])}}function It(e,t){var n=e.stateNode;if(null===n)return null;var s=n[Me]||null;if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var qt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Lt=!1;if(qt)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Md){Lt=!1}var zt=null,Ut=null,Bt=null;function Wt(){if(Bt)return Bt;var e,t,n=Ut,s=n.length,i="value"in zt?zt.value:zt.textContent,r=i.length;for(e=0;e<s&&n[e]===i[e];e++);var o=s-e;for(t=1;t<=o&&n[s-t]===i[r-t];t++);return Bt=i.slice(e,1<t?1-t:void 0)}function Ht(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Qt(){return!1}function Kt(e){function t(t,n,s,i,r){for(var o in this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Gt:Qt,this.isPropagationStopped=Qt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Xt,Yt,$t,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Kt(Jt),en=d({},Jt,{view:0,detail:0}),tn=Kt(en),nn=d({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$t&&($t&&"mousemove"===e.type?(Xt=e.screenX-$t.screenX,Yt=e.screenY-$t.screenY):Yt=Xt=0,$t=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),sn=Kt(nn),rn=Kt(d({},nn,{dataTransfer:0})),on=Kt(d({},en,{relatedTarget:0})),an=Kt(d({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Kt(d({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Kt(d({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function fn(){return pn}var mn=Kt(d({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ht(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?Ht(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ht(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Kt(d({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Kt(d({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),vn=Kt(d({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=Kt(d({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Kt(d({},Jt,{newState:0,oldState:0})),wn=[9,13,27,32],kn=qt&&"CompositionEvent"in window,xn=null;qt&&"documentMode"in document&&(xn=document.documentMode);var Sn=qt&&"TextEvent"in window&&!xn,Tn=qt&&(!kn||xn&&8<xn&&11>=xn),Cn=String.fromCharCode(32),En=!1;function An(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function On(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function Mn(e,t,n,s){Dt?Mt?Mt.push(s):Mt=[s]:Dt=s,0<(t=Wu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Nn=null,jn=null;function Fn(e){Fu(e,0)}function In(e){if(dt(Be(e)))return e}function qn(e,t){if("change"===e)return t}var Ln=!1;if(qt){var Vn;if(qt){var zn="oninput"in document;if(!zn){var Un=document.createElement("div");Un.setAttribute("oninput","return;"),zn="function"===typeof Un.oninput}Vn=zn}else Vn=!1;Ln=Vn&&(!document.documentMode||9<document.documentMode)}function Bn(){Nn&&(Nn.detachEvent("onpropertychange",Wn),jn=Nn=null)}function Wn(e){if("value"===e.propertyName&&In(jn)){var t=[];Mn(t,jn,e,Pt(e)),Ft(Fn,t)}}function Hn(e,t,n){"focusin"===e?(Bn(),jn=n,(Nn=t).attachEvent("onpropertychange",Wn)):"focusout"===e&&Bn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return In(jn)}function Qn(e,t){if("click"===e)return In(t)}function Kn(e,t){if("input"===e||"change"===e)return In(t)}var Xn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yn(e,t){if(Xn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!Y.call(t,i)||!Xn(e[i],t[i]))return!1}return!0}function $n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,s=$n(e);for(e=0;s;){if(3===s.nodeType){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=$n(s)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function es(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(s){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function ts(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ns=qt&&"documentMode"in document&&11>=document.documentMode,ss=null,is=null,rs=null,os=!1;function as(e,t,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;os||null==ss||ss!==pt(s)||("selectionStart"in(s=ss)&&ts(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},rs&&Yn(rs,s)||(rs=s,0<(s=Wu(is,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ss)))}function ls(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cs={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionrun:ls("Transition","TransitionRun"),transitionstart:ls("Transition","TransitionStart"),transitioncancel:ls("Transition","TransitionCancel"),transitionend:ls("Transition","TransitionEnd")},us={},hs={};function ds(e){if(us[e])return us[e];if(!cs[e])return e;var t,n=cs[e];for(t in n)if(n.hasOwnProperty(t)&&t in hs)return us[e]=n[t];return e}qt&&(hs=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);var ps=ds("animationend"),fs=ds("animationiteration"),ms=ds("animationstart"),gs=ds("transitionrun"),ys=ds("transitionstart"),vs=ds("transitioncancel"),_s=ds("transitionend"),bs=new Map,ws="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ks(e,t){bs.set(e,t),Ke(t,[e])}ws.push("scrollEnd");var xs=new WeakMap;function Ss(e,t){if("object"===typeof e&&null!==e){var n=xs.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},xs.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Ts=[],Cs=0,Es=0;function As(){for(var e=Cs,t=Es=Cs=0;t<e;){var n=Ts[t];Ts[t++]=null;var s=Ts[t];Ts[t++]=null;var i=Ts[t];Ts[t++]=null;var r=Ts[t];if(Ts[t++]=null,null!==s&&null!==i){var o=s.pending;null===o?i.next=i:(i.next=o.next,o.next=i),s.pending=i}0!==r&&Ds(n,i,r)}}function Os(e,t,n,s){Ts[Cs++]=e,Ts[Cs++]=t,Ts[Cs++]=n,Ts[Cs++]=s,Es|=s,e.lanes|=s,null!==(e=e.alternate)&&(e.lanes|=s)}function Rs(e,t,n,s){return Os(e,t,n,s),Ms(e)}function Ps(e,t){return Os(e,null,null,t),Ms(e)}function Ds(e,t,n){e.lanes|=n;var s=e.alternate;null!==s&&(s.lanes|=n);for(var i=!1,r=e.return;null!==r;)r.childLanes|=n,null!==(s=r.alternate)&&(s.childLanes|=n),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(i=!0)),e=r,r=r.return;return 3===e.tag?(r=e.stateNode,i&&null!==t&&(i=31-pe(n),null===(s=(e=r.hiddenUpdates)[i])?e[i]=[t]:s.push(t),t.lane=536870912|n),r):null}function Ms(e){if(50<Dc)throw Dc=0,Mc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ns={};function js(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fs(e,t,n,s){return new js(e,t,n,s)}function Is(e){return!(!(e=e.prototype)||!e.isReactComponent)}function qs(e,t){var n=e.alternate;return null===n?((n=Fs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ls(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vs(e,t,n,s,i,r){var a=0;if(s=e,"function"===typeof e)Is(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,U.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Fs(31,n,t,i)).elementType=E,e.lanes=r,e;case g:return zs(n.children,i,r,t);case y:a=8,i|=24;break;case v:return(e=Fs(12,n,t,2|i)).elementType=v,e.lanes=r,e;case x:return(e=Fs(13,n,t,i)).elementType=x,e.lanes=r,e;case S:return(e=Fs(19,n,t,i)).elementType=S,e.lanes=r,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:case w:a=10;break e;case b:a=9;break e;case k:a=11;break e;case T:a=14;break e;case C:a=16,s=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),s=null}return(t=Fs(a,n,t,i)).elementType=e,t.type=s,t.lanes=r,t}function zs(e,t,n,s){return(e=Fs(7,e,s,t)).lanes=n,e}function Us(e,t,n){return(e=Fs(6,e,null,t)).lanes=n,e}function Bs(e,t,n){return(t=Fs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ws=[],Hs=0,Gs=null,Qs=0,Ks=[],Xs=0,Ys=null,$s=1,Js="";function Zs(e,t){Ws[Hs++]=Qs,Ws[Hs++]=Gs,Gs=e,Qs=t}function ei(e,t,n){Ks[Xs++]=$s,Ks[Xs++]=Js,Ks[Xs++]=Ys,Ys=e;var s=$s;e=Js;var i=32-pe(s)-1;s&=~(1<<i),n+=1;var r=32-pe(t)+i;if(30<r){var o=i-i%5;r=(s&(1<<o)-1).toString(32),s>>=o,i-=o,$s=1<<32-pe(t)+i|n<<i|s,Js=r+e}else $s=1<<r|n<<i|s,Js=e}function ti(e){null!==e.return&&(Zs(e,1),ei(e,1,0))}function ni(e){for(;e===Gs;)Gs=Ws[--Hs],Ws[Hs]=null,Qs=Ws[--Hs],Ws[Hs]=null;for(;e===Ys;)Ys=Ks[--Xs],Ks[Xs]=null,Js=Ks[--Xs],Ks[Xs]=null,$s=Ks[--Xs],Ks[Xs]=null}var si=null,ii=null,ri=!1,oi=null,ai=!1,li=Error(o(519));function ci(e){throw mi(Ss(Error(o(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[De]=e,t[Me]=s,n){case"dialog":Iu("cancel",t),Iu("close",t);break;case"iframe":case"object":case"embed":Iu("load",t);break;case"video":case"audio":for(n=0;n<Nu.length;n++)Iu(Nu[n],t);break;case"source":Iu("error",t);break;case"img":case"image":case"link":Iu("error",t),Iu("load",t);break;case"details":Iu("toggle",t);break;case"input":Iu("invalid",t),yt(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),ht(t);break;case"select":Iu("invalid",t);break;case"textarea":Iu("invalid",t),wt(t,s.value,s.defaultValue,s.children),ht(t)}"string"!==typeof(n=s.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===s.suppressHydrationWarning||Yu(t.textContent,n)?(null!=s.popover&&(Iu("beforetoggle",t),Iu("toggle",t)),null!=s.onScroll&&Iu("scroll",t),null!=s.onScrollEnd&&Iu("scrollend",t),null!=s.onClick&&(t.onclick=$u),t=!0):t=!1,t||ci(e)}function hi(e){for(si=e.return;si;)switch(si.tag){case 5:case 13:return void(ai=!1);case 27:case 3:return void(ai=!0);default:si=si.return}}function di(e){if(e!==si)return!1;if(!ri)return hi(e),ri=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||oh(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),hi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=yh(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,ph(e.type)?(e=vh,vh=null,ii=e):ii=n):ii=si?yh(e.stateNode.nextSibling):null;return!0}function pi(){ii=si=null,ri=!1}function fi(){var e=oi;return null!==e&&(null===_c?_c=e:_c.push.apply(_c,e),oi=null),e}function mi(e){null===oi?oi=[e]:oi.push(e)}var gi=L(null),yi=null,vi=null;function _i(e,t,n){z(gi,t._currentValue),t._currentValue=n}function bi(e){e._currentValue=gi.current,V(gi)}function wi(e,t,n){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function ki(e,t,n,s){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var r=i.dependencies;if(null!==r){var a=i.child;r=r.firstContext;e:for(;null!==r;){var l=r;r=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){r.lanes|=n,null!==(l=r.alternate)&&(l.lanes|=n),wi(r.return,n,e),s||(a=null);break e}r=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(r=a.alternate)&&(r.lanes|=n),wi(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function xi(e,t,n,s){e=null;for(var i=t,r=!1;null!==i;){if(!r)if(0!==(524288&i.flags))r=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Xn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===H.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Kh):e=[Kh])}i=i.return}null!==e&&ki(t,e,n,s),t.flags|=262144}function Si(e){for(e=e.firstContext;null!==e;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ti(e){yi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ci(e){return Ai(yi,e)}function Ei(e,t){return null===yi&&Ti(e),Ai(e,t)}function Ai(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(o(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var Oi="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ri=s.unstable_scheduleCallback,Pi=s.unstable_NormalPriority,Di={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mi(){return{controller:new Oi,data:new Map,refCount:0}}function Ni(e){e.refCount--,0===e.refCount&&Ri(Pi,function(){e.controller.abort()})}var ji=null,Fi=0,Ii=0,qi=null;function Li(){if(0===--Fi&&null!==ji){null!==qi&&(qi.status="fulfilled");var e=ji;ji=null,Ii=0,qi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Vi=N.S;N.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===ji){var n=ji=[];Fi=0,Ii=Ou(),qi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Fi++,t.then(Li,Li)}(0,t),null!==Vi&&Vi(e,t)};var zi=L(null);function Ui(){var e=zi.current;return null!==e?e:sc.pooledCache}function Bi(e,t){z(zi,null===t?zi.current:t.pool)}function Wi(){var e=Ui();return null===e?null:{parent:Di._currentValue,pool:e}}var Hi=Error(o(460)),Gi=Error(o(474)),Qi=Error(o(542)),Ki={then:function(){}};function Xi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Yi(){}function $i(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Yi,Yi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw er(e=t.reason),e;default:if("string"===typeof t.status)t.then(Yi,Yi);else{if(null!==(e=sc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw er(e=t.reason),e}throw Ji=t,Hi}}var Ji=null;function Zi(){if(null===Ji)throw Error(o(459));var e=Ji;return Ji=null,e}function er(e){if(e===Hi||e===Qi)throw Error(o(483))}var tr=!1;function nr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ir(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function rr(e,t,n){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&nc)){var i=s.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),s.pending=t,t=Ms(e),Ds(e,null,n),t}return Os(e,s,t,n),Ms(e)}function or(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,Ee(e,n)}}function ar(e,t){var n=e.updateQueue,s=e.alternate;if(null!==s&&n===(s=s.updateQueue)){var i=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===r?i=r=o:r=r.next=o,n=n.next}while(null!==n);null===r?i=r=t:r=r.next=t}else i=r=t;return n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lr=!1;function cr(){if(lr){if(null!==qi)throw qi}}function ur(e,t,n,s){lr=!1;var i=e.updateQueue;tr=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?r=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==r){var h=i.baseState;for(o=0,u=c=l=null,a=r;;){var p=-536870913&a.lane,f=p!==a.lane;if(f?(rc&p)===p:(s&p)===p){0!==p&&p===Ii&&(lr=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;p=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(y,h,p);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=g.payload)?m.call(y,h,p):m)||void 0===p)break e;h=d({},h,p);break e;case 2:tr=!0}}null!==(p=a.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[p]:f.push(p))}else f={lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=p;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(f=a).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===r&&(i.shared.lanes=0),pc|=o,e.lanes=o,e.memoizedState=h}}function hr(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function dr(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)hr(n[e],t)}var pr=L(null),fr=L(0);function mr(e,t){z(fr,e=hc),z(pr,t),hc=e|t.baseLanes}function gr(){z(fr,hc),z(pr,pr.current)}function yr(){hc=fr.current,V(pr),V(fr)}var vr=0,_r=null,br=null,wr=null,kr=!1,xr=!1,Sr=!1,Tr=0,Cr=0,Er=null,Ar=0;function Or(){throw Error(o(321))}function Rr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function Pr(e,t,n,s,i,r){return vr=r,_r=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=null===e||null===e.memoizedState?Go:Qo,Sr=!1,r=n(s,i),Sr=!1,xr&&(r=Mr(t,n,s,i)),Dr(e),r}function Dr(e){N.H=Ho;var t=null!==br&&null!==br.next;if(vr=0,wr=br=_r=null,kr=!1,Cr=0,Er=null,t)throw Error(o(300));null===e||Ea||null!==(e=e.dependencies)&&Si(e)&&(Ea=!0)}function Mr(e,t,n,s){_r=e;var i=0;do{if(xr&&(Er=null),Cr=0,xr=!1,25<=i)throw Error(o(301));if(i+=1,wr=br=null,null!=e.updateQueue){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,null!=r.memoCache&&(r.memoCache.index=0)}N.H=Ko,r=t(n,s)}while(xr);return r}function Nr(){var e=N.H,t=e.useState()[0];return t="function"===typeof t.then?Vr(t):t,e=e.useState()[0],(null!==br?br.memoizedState:null)!==e&&(_r.flags|=1024),t}function jr(){var e=0!==Tr;return Tr=0,e}function Fr(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ir(e){if(kr){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}kr=!1}vr=0,wr=br=_r=null,xr=!1,Cr=Tr=0,Er=null}function qr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wr?_r.memoizedState=wr=e:wr=wr.next=e,wr}function Lr(){if(null===br){var e=_r.alternate;e=null!==e?e.memoizedState:null}else e=br.next;var t=null===wr?_r.memoizedState:wr.next;if(null!==t)wr=t,br=e;else{if(null===e){if(null===_r.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(br=e).memoizedState,baseState:br.baseState,baseQueue:br.baseQueue,queue:br.queue,next:null},null===wr?_r.memoizedState=wr=e:wr=wr.next=e}return wr}function Vr(e){var t=Cr;return Cr+=1,null===Er&&(Er=[]),e=$i(Er,e,t),t=_r,null===(null===wr?t.memoizedState:wr.next)&&(t=t.alternate,N.H=null===t||null===t.memoizedState?Go:Qo),e}function zr(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Vr(e);if(e.$$typeof===w)return Ci(e)}throw Error(o(438,String(e)))}function Ur(e){var t=null,n=_r.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var s=_r.alternate;null!==s&&(null!==(s=s.updateQueue)&&(null!=(s=s.memoCache)&&(t={data:s.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},_r.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=A;return t.index++,n}function Br(e,t){return"function"===typeof t?t(e):t}function Wr(e){return Hr(Lr(),br,e)}function Hr(e,t,n){var s=e.queue;if(null===s)throw Error(o(311));s.lastRenderedReducer=n;var i=e.baseQueue,r=s.pending;if(null!==r){if(null!==i){var a=i.next;i.next=r.next,r.next=a}t.baseQueue=i=r,s.pending=null}if(r=e.baseState,null===i)e.memoizedState=r;else{var l=a=null,c=null,u=t=i.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(rc&d)===d:(vr&d)===d){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Ii&&(h=!0);else{if((vr&p)===p){u=u.next,p===Ii&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,a=r):c=c.next=d,_r.lanes|=p,pc|=p}d=u.action,Sr&&n(r,d),r=u.hasEagerState?u.eagerState:n(r,d)}else p={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,a=r):c=c.next=p,_r.lanes|=d,pc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?a=r:c.next=l,!Xn(r,e.memoizedState)&&(Ea=!0,h&&null!==(n=qi)))throw n;e.memoizedState=r,e.baseState=a,e.baseQueue=c,s.lastRenderedState=r}return null===i&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Gr(e){var t=Lr(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var s=n.dispatch,i=n.pending,r=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{r=e(r,a.action),a=a.next}while(a!==i);Xn(r,t.memoizedState)||(Ea=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),n.lastRenderedState=r}return[r,s]}function Qr(e,t,n){var s=_r,i=Lr(),r=ri;if(r){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Xn((br||i).memoizedState,n);if(a&&(i.memoizedState=n,Ea=!0),i=i.queue,yo(2048,8,Yr.bind(null,s,i,e),[e]),i.getSnapshot!==t||a||null!==wr&&1&wr.memoizedState.tag){if(s.flags|=2048,fo(9,{destroy:void 0,resource:void 0},Xr.bind(null,s,i,n,t),null),null===sc)throw Error(o(349));r||0!==(124&vr)||Kr(s,t,n)}return n}function Kr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=_r.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},_r.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xr(e,t,n,s){t.value=n,t.getSnapshot=s,$r(t)&&Jr(e)}function Yr(e,t,n){return n(function(){$r(t)&&Jr(e)})}function $r(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch(s){return!0}}function Jr(e){var t=Ps(e,2);null!==t&&Fc(t,e,2)}function Zr(e){var t=qr();if("function"===typeof e){var n=e;if(e=n(),Sr){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:e},t}function eo(e,t,n,s){return e.baseState=n,Hr(e,br,"function"===typeof s?s:Br)}function to(e,t,n,s,i){if(Uo(e))throw Error(o(485));if(null!==(e=t.action)){var r={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){r.listeners.push(e)}};null!==N.T?n(!0):r.isTransition=!1,s(r),null===(n=t.pending)?(r.next=t.pending=r,no(t,r)):(r.next=n.next,t.pending=n.next=r)}}function no(e,t){var n=t.action,s=t.payload,i=e.state;if(t.isTransition){var r=N.T,o={};N.T=o;try{var a=n(i,s),l=N.S;null!==l&&l(o,a),so(e,t,a)}catch(c){ro(e,t,c)}finally{N.T=r}}else try{so(e,t,r=n(i,s))}catch(u){ro(e,t,u)}}function so(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){io(e,t,n)},function(n){return ro(e,t,n)}):io(e,t,n)}function io(e,t,n){t.status="fulfilled",t.value=n,oo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,no(e,n)))}function ro(e,t,n){var s=e.pending;if(e.pending=null,null!==s){s=s.next;do{t.status="rejected",t.reason=n,oo(t),t=t.next}while(t!==s)}e.action=null}function oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ao(e,t){return t}function lo(e,t){if(ri){var n=sc.formState;if(null!==n){e:{var s=_r;if(ri){if(ii){t:{for(var i=ii,r=ai;8!==i.nodeType;){if(!r){i=null;break t}if(null===(i=yh(i.nextSibling))){i=null;break t}}i="F!"===(r=i.data)||"F"===r?i:null}if(i){ii=yh(i.nextSibling),s="F!"===i.data;break e}}ci(s)}s=!1}s&&(t=n[0])}}return(n=qr()).memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},n.queue=s,n=Lo.bind(null,_r,s),s.dispatch=n,s=Zr(!1),r=zo.bind(null,_r,!1,s.queue),i={state:t,dispatch:null,action:e,pending:null},(s=qr()).queue=i,n=to.bind(null,_r,i,r,n),i.dispatch=n,s.memoizedState=e,[t,n,!1]}function co(e){return uo(Lr(),br,e)}function uo(e,t,n){if(t=Hr(e,t,ao)[0],e=Wr(Br)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var s=Vr(t)}catch(o){if(o===Hi)throw Qi;throw o}else s=t;var i=(t=Lr()).queue,r=i.dispatch;return n!==t.memoizedState&&(_r.flags|=2048,fo(9,{destroy:void 0,resource:void 0},ho.bind(null,i,n),null)),[s,r,e]}function ho(e,t){e.action=t}function po(e){var t=Lr(),n=br;if(null!==n)return uo(t,n,e);Lr(),t=t.memoizedState;var s=(n=Lr()).queue.dispatch;return n.memoizedState=e,[t,s,!1]}function fo(e,t,n,s){return e={tag:e,create:n,deps:s,inst:t,next:null},null===(t=_r.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},_r.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function mo(){return Lr().memoizedState}function go(e,t,n,s){var i=qr();s=void 0===s?null:s,_r.flags|=e,i.memoizedState=fo(1|t,{destroy:void 0,resource:void 0},n,s)}function yo(e,t,n,s){var i=Lr();s=void 0===s?null:s;var r=i.memoizedState.inst;null!==br&&null!==s&&Rr(s,br.memoizedState.deps)?i.memoizedState=fo(t,r,n,s):(_r.flags|=e,i.memoizedState=fo(1|t,r,n,s))}function vo(e,t){go(8390656,8,e,t)}function _o(e,t){yo(2048,8,e,t)}function bo(e,t){return yo(4,2,e,t)}function wo(e,t){return yo(4,4,e,t)}function ko(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function xo(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yo(4,4,ko.bind(null,t,e),n)}function So(){}function To(e,t){var n=Lr();t=void 0===t?null:t;var s=n.memoizedState;return null!==t&&Rr(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=Lr();t=void 0===t?null:t;var s=n.memoizedState;if(null!==t&&Rr(t,s[1]))return s[0];if(s=e(),Sr){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[s,t],s}function Eo(e,t,n){return void 0===n||0!==(1073741824&vr)?e.memoizedState=t:(e.memoizedState=n,e=jc(),_r.lanes|=e,pc|=e,n)}function Ao(e,t,n,s){return Xn(n,t)?n:null!==pr.current?(e=Eo(e,n,s),Xn(e,t)||(Ea=!0),e):0===(42&vr)?(Ea=!0,e.memoizedState=n):(e=jc(),_r.lanes|=e,pc|=e,t)}function Oo(e,t,n,s,i){var r=j.p;j.p=0!==r&&8>r?r:8;var o=N.T,a={};N.T=a,zo(e,!1,t,n);try{var l=i(),c=N.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Vo(e,t,function(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(s.status="rejected",s.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),s}(l,s),Nc());else Vo(e,t,s,Nc())}catch(u){Vo(e,t,{then:function(){},status:"rejected",reason:u},Nc())}finally{j.p=r,N.T=o}}function Ro(){}function Po(e,t,n,s){if(5!==e.tag)throw Error(o(476));var i=Do(e).queue;Oo(e,i,t,F,null===n?Ro:function(){return Mo(e),n(s)})}function Do(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:F},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Mo(e){Vo(e,Do(e).next.queue,{},Nc())}function No(){return Ci(Kh)}function jo(){return Lr().memoizedState}function Fo(){return Lr().memoizedState}function Io(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Nc(),s=rr(t,e=ir(n),n);return null!==s&&(Fc(s,t,n),or(s,t,n)),t={cache:Mi()},void(e.payload=t)}t=t.return}}function qo(e,t,n){var s=Nc();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Uo(e)?Bo(t,n):null!==(n=Rs(e,t,n,s))&&(Fc(n,e,s),Wo(n,t,s))}function Lo(e,t,n){Vo(e,t,n,Nc())}function Vo(e,t,n,s){var i={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uo(e))Bo(t,i);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=r(o,n);if(i.hasEagerState=!0,i.eagerState=a,Xn(a,o))return Os(e,t,i,0),null===sc&&As(),!1}catch(l){}if(null!==(n=Rs(e,t,i,s)))return Fc(n,e,s),Wo(n,t,s),!0}return!1}function zo(e,t,n,s){if(s={lane:2,revertLane:Ou(),action:s,hasEagerState:!1,eagerState:null,next:null},Uo(e)){if(t)throw Error(o(479))}else null!==(t=Rs(e,n,s,2))&&Fc(t,e,2)}function Uo(e){var t=e.alternate;return e===_r||null!==t&&t===_r}function Bo(e,t){xr=kr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wo(e,t,n){if(0!==(4194048&n)){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,Ee(e,n)}}var Ho={readContext:Ci,use:zr,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useLayoutEffect:Or,useInsertionEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useSyncExternalStore:Or,useId:Or,useHostTransitionStatus:Or,useFormState:Or,useActionState:Or,useOptimistic:Or,useMemoCache:Or,useCacheRefresh:Or},Go={readContext:Ci,use:zr,useCallback:function(e,t){return qr().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:vo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,go(4194308,4,ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return go(4194308,4,e,t)},useInsertionEffect:function(e,t){go(4,2,e,t)},useMemo:function(e,t){var n=qr();t=void 0===t?null:t;var s=e();if(Sr){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=qr();if(void 0!==n){var i=n(t);if(Sr){de(!0);try{n(t)}finally{de(!1)}}}else i=t;return s.memoizedState=s.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},s.queue=e,e=e.dispatch=qo.bind(null,_r,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},qr().memoizedState=e},useState:function(e){var t=(e=Zr(e)).queue,n=Lo.bind(null,_r,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:So,useDeferredValue:function(e,t){return Eo(qr(),e,t)},useTransition:function(){var e=Zr(!1);return e=Oo.bind(null,_r,e.queue,!0,!1),qr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=_r,i=qr();if(ri){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===sc)throw Error(o(349));0!==(124&rc)||Kr(s,t,n)}i.memoizedState=n;var r={value:n,getSnapshot:t};return i.queue=r,vo(Yr.bind(null,s,r,e),[e]),s.flags|=2048,fo(9,{destroy:void 0,resource:void 0},Xr.bind(null,s,r,n,t),null),n},useId:function(){var e=qr(),t=sc.identifierPrefix;if(ri){var n=Js;t="\xab"+t+"R"+(n=($s&~(1<<32-pe($s)-1)).toString(32)+n),0<(n=Tr++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ar++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:No,useFormState:lo,useActionState:lo,useOptimistic:function(e){var t=qr();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zo.bind(null,_r,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ur,useCacheRefresh:function(){return qr().memoizedState=Io.bind(null,_r)}},Qo={readContext:Ci,use:zr,useCallback:To,useContext:Ci,useEffect:_o,useImperativeHandle:xo,useInsertionEffect:bo,useLayoutEffect:wo,useMemo:Co,useReducer:Wr,useRef:mo,useState:function(){return Wr(Br)},useDebugValue:So,useDeferredValue:function(e,t){return Ao(Lr(),br.memoizedState,e,t)},useTransition:function(){var e=Wr(Br)[0],t=Lr().memoizedState;return["boolean"===typeof e?e:Vr(e),t]},useSyncExternalStore:Qr,useId:jo,useHostTransitionStatus:No,useFormState:co,useActionState:co,useOptimistic:function(e,t){return eo(Lr(),0,e,t)},useMemoCache:Ur,useCacheRefresh:Fo},Ko={readContext:Ci,use:zr,useCallback:To,useContext:Ci,useEffect:_o,useImperativeHandle:xo,useInsertionEffect:bo,useLayoutEffect:wo,useMemo:Co,useReducer:Gr,useRef:mo,useState:function(){return Gr(Br)},useDebugValue:So,useDeferredValue:function(e,t){var n=Lr();return null===br?Eo(n,e,t):Ao(n,br.memoizedState,e,t)},useTransition:function(){var e=Gr(Br)[0],t=Lr().memoizedState;return["boolean"===typeof e?e:Vr(e),t]},useSyncExternalStore:Qr,useId:jo,useHostTransitionStatus:No,useFormState:po,useActionState:po,useOptimistic:function(e,t){var n=Lr();return null!==br?eo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ur,useCacheRefresh:Fo},Xo=null,Yo=0;function $o(e){var t=Yo;return Yo+=1,null===Xo&&(Xo=[]),$i(Xo,e,t)}function Jo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zo(e,t){if(t.$$typeof===p)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ea(e){return(0,e._init)(e._payload)}function ta(e){function t(t,n){if(e){var s=t.deletions;null===s?(t.deletions=[n],t.flags|=16):s.push(n)}}function n(n,s){if(!e)return null;for(;null!==s;)t(n,s),s=s.sibling;return null}function s(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=qs(e,t)).index=0,e.sibling=null,e}function r(t,n,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<n?(t.flags|=67108866,n):s:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,s){return null===t||6!==t.tag?((t=Us(n,e.mode,s)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,s){var r=n.type;return r===g?h(e,t,n.props.children,s,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===C&&ea(r)===t.type)?(Jo(t=i(t,n.props),n),t.return=e,t):(Jo(t=Vs(n.type,n.key,n.props,null,e.mode,s),n),t.return=e,t)}function u(e,t,n,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bs(n,e.mode,s)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,s,r){return null===t||7!==t.tag?((t=zs(n,e.mode,s,r)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Us(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return Jo(n=Vs(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Bs(t,e.mode,n)).return=e,t;case C:return d(e,t=(0,t._init)(t._payload),n)}if(M(t)||R(t))return(t=zs(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,$o(t),n);if(t.$$typeof===w)return d(e,Ei(e,t),n);Zo(e,t)}return null}function p(e,t,n,s){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===i?c(e,t,n,s):null;case m:return n.key===i?u(e,t,n,s):null;case C:return p(e,t,n=(i=n._init)(n._payload),s)}if(M(n)||R(n))return null!==i?null:h(e,t,n,s,null);if("function"===typeof n.then)return p(e,t,$o(n),s);if(n.$$typeof===w)return p(e,t,Ei(e,n),s);Zo(e,n)}return null}function y(e,t,n,s,i){if("string"===typeof s&&""!==s||"number"===typeof s||"bigint"===typeof s)return l(t,e=e.get(n)||null,""+s,i);if("object"===typeof s&&null!==s){switch(s.$$typeof){case f:return c(t,e=e.get(null===s.key?n:s.key)||null,s,i);case m:return u(t,e=e.get(null===s.key?n:s.key)||null,s,i);case C:return y(e,t,n,s=(0,s._init)(s._payload),i)}if(M(s)||R(s))return h(t,e=e.get(n)||null,s,i,null);if("function"===typeof s.then)return y(e,t,n,$o(s),i);if(s.$$typeof===w)return y(e,t,n,Ei(t,s),i);Zo(t,s)}return null}function v(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var _=u.key;null!==c;){if(c.key===_){if((_=u.type)===g){if(7===c.tag){n(l,c.sibling),(h=i(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===_||"object"===typeof _&&null!==_&&_.$$typeof===C&&ea(_)===c.type){n(l,c.sibling),Jo(h=i(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((h=zs(u.props.children,l.mode,h,u.key)).return=l,l=h):(Jo(h=Vs(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return a(l);case m:e:{for(_=u.key;null!==c;){if(c.key===_){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=i(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Bs(u,l.mode,h)).return=l,l=h}return a(l);case C:return v(l,c,u=(_=u._init)(u._payload),h)}if(M(u))return function(i,o,a,l){for(var c=null,u=null,h=o,f=o=0,m=null;null!==h&&f<a.length;f++){h.index>f?(m=h,h=null):m=h.sibling;var g=p(i,h,a[f],l);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),o=r(g,o,f),null===u?c=g:u.sibling=g,u=g,h=m}if(f===a.length)return n(i,h),ri&&Zs(i,f),c;if(null===h){for(;f<a.length;f++)null!==(h=d(i,a[f],l))&&(o=r(h,o,f),null===u?c=h:u.sibling=h,u=h);return ri&&Zs(i,f),c}for(h=s(h);f<a.length;f++)null!==(m=y(h,i,f,a[f],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?f:m.key),o=r(m,o,f),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(i,e)}),ri&&Zs(i,f),c}(l,c,u,h);if(R(u)){if("function"!==typeof(_=R(u)))throw Error(o(150));return function(i,a,l,c){if(null==l)throw Error(o(151));for(var u=null,h=null,f=a,m=a=0,g=null,v=l.next();null!==f&&!v.done;m++,v=l.next()){f.index>m?(g=f,f=null):g=f.sibling;var _=p(i,f,v.value,c);if(null===_){null===f&&(f=g);break}e&&f&&null===_.alternate&&t(i,f),a=r(_,a,m),null===h?u=_:h.sibling=_,h=_,f=g}if(v.done)return n(i,f),ri&&Zs(i,m),u;if(null===f){for(;!v.done;m++,v=l.next())null!==(v=d(i,v.value,c))&&(a=r(v,a,m),null===h?u=v:h.sibling=v,h=v);return ri&&Zs(i,m),u}for(f=s(f);!v.done;m++,v=l.next())null!==(v=y(f,i,m,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),a=r(v,a,m),null===h?u=v:h.sibling=v,h=v);return e&&f.forEach(function(e){return t(i,e)}),ri&&Zs(i,m),u}(l,c,u=_.call(u),h)}if("function"===typeof u.then)return v(l,c,$o(u),h);if(u.$$typeof===w)return v(l,c,Ei(l,u),h);Zo(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=i(c,u)).return=l,l=h):(n(l,c),(h=Us(u,l.mode,h)).return=l,l=h),a(l)):n(l,c)}return function(e,t,n,s){try{Yo=0;var i=v(e,t,n,s);return Xo=null,i}catch(o){if(o===Hi||o===Qi)throw o;var r=Fs(29,o,null,e.mode);return r.lanes=s,r.return=e,r}}}var na=ta(!0),sa=ta(!1),ia=L(null),ra=null;function oa(e){var t=e.alternate;z(ua,1&ua.current),z(ia,e),null===ra&&(null===t||null!==pr.current||null!==t.memoizedState)&&(ra=e)}function aa(e){if(22===e.tag){if(z(ua,ua.current),z(ia,e),null===ra){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ra=e)}}else la()}function la(){z(ua,ua.current),z(ia,ia.current)}function ca(e){V(ia),ra===e&&(ra=null),V(ua)}var ua=L(0);function ha(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gh(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function da(e,t,n,s){n=null===(n=n(s,t=e.memoizedState))||void 0===n?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pa={enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Nc(),i=ir(s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=rr(e,i,s))&&(Fc(t,e,s),or(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Nc(),i=ir(s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=rr(e,i,s))&&(Fc(t,e,s),or(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Nc(),s=ir(n);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=rr(e,s,n))&&(Fc(t,e,n),or(t,e,n))}};function fa(e,t,n,s,i,r,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,r,o):!t.prototype||!t.prototype.isPureReactComponent||(!Yn(n,s)||!Yn(i,r))}function ma(e,t,n,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&pa.enqueueReplaceState(t,t.state,null)}function ga(e,t){var n=t;if("ref"in t)for(var s in n={},t)"ref"!==s&&(n[s]=t[s]);if(e=e.defaultProps)for(var i in n===t&&(n=d({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ya="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function va(e){ya(e)}function _a(e){console.error(e)}function ba(e){ya(e)}function wa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function ka(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function xa(e,t,n){return(n=ir(n)).tag=3,n.payload={element:null},n.callback=function(){wa(e,t)},n}function Sa(e){return(e=ir(e)).tag=3,e}function Ta(e,t,n,s){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var r=s.value;e.payload=function(){return i(r)},e.callback=function(){ka(t,n,s)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){ka(t,n,s),"function"!==typeof i&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=s.stack;this.componentDidCatch(s.value,{componentStack:null!==e?e:""})})}var Ca=Error(o(461)),Ea=!1;function Aa(e,t,n,s){t.child=null===e?sa(t,null,n,s):na(t,e.child,n,s)}function Oa(e,t,n,s,i){n=n.render;var r=t.ref;if("ref"in s){var o={};for(var a in s)"ref"!==a&&(o[a]=s[a])}else o=s;return Ti(t),s=Pr(e,t,n,o,r,i),a=jr(),null===e||Ea?(ri&&a&&ti(t),t.flags|=1,Aa(e,t,s,i),t.child):(Fr(e,t,i),Xa(e,t,i))}function Ra(e,t,n,s,i){if(null===e){var r=n.type;return"function"!==typeof r||Is(r)||void 0!==r.defaultProps||null!==n.compare?((e=Vs(n.type,null,s,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Pa(e,t,r,s,i))}if(r=e.child,!Ya(e,i)){var o=r.memoizedProps;if((n=null!==(n=n.compare)?n:Yn)(o,s)&&e.ref===t.ref)return Xa(e,t,i)}return t.flags|=1,(e=qs(r,s)).ref=t.ref,e.return=t,t.child=e}function Pa(e,t,n,s,i){if(null!==e){var r=e.memoizedProps;if(Yn(r,s)&&e.ref===t.ref){if(Ea=!1,t.pendingProps=s=r,!Ya(e,i))return t.lanes=e.lanes,Xa(e,t,i);0!==(131072&e.flags)&&(Ea=!0)}}return ja(e,t,n,s,i)}function Da(e,t,n){var s=t.pendingProps,i=s.children,r=null!==e?e.memoizedState:null;if("hidden"===s.mode){if(0!==(128&t.flags)){if(s=null!==r?r.baseLanes|n:n,null!==e){for(i=t.child=e.child,r=0;null!==i;)r=r|i.lanes|i.childLanes,i=i.sibling;t.childLanes=r&~s}else t.childLanes=0,t.child=null;return Ma(e,t,s,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ma(e,t,null!==r?r.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Bi(0,null!==r?r.cachePool:null),null!==r?mr(t,r):gr(),aa(t)}else null!==r?(Bi(0,r.cachePool),mr(t,r),la(),t.memoizedState=null):(null!==e&&Bi(0,null),gr(),la());return Aa(e,t,i,n),t.child}function Ma(e,t,n,s){var i=Ui();return i=null===i?null:{parent:Di._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Bi(0,null),gr(),aa(t),null!==e&&xi(e,t,s,!0),null}function Na(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function ja(e,t,n,s,i){return Ti(t),n=Pr(e,t,n,s,void 0,i),s=jr(),null===e||Ea?(ri&&s&&ti(t),t.flags|=1,Aa(e,t,n,i),t.child):(Fr(e,t,i),Xa(e,t,i))}function Fa(e,t,n,s,i,r){return Ti(t),t.updateQueue=null,n=Mr(t,s,n,i),Dr(e),s=jr(),null===e||Ea?(ri&&s&&ti(t),t.flags|=1,Aa(e,t,n,r),t.child):(Fr(e,t,r),Xa(e,t,r))}function Ia(e,t,n,s,i){if(Ti(t),null===t.stateNode){var r=Ns,o=n.contextType;"object"===typeof o&&null!==o&&(r=Ci(o)),r=new n(s,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=pa,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=s,r.state=t.memoizedState,r.refs={},nr(t),o=n.contextType,r.context="object"===typeof o&&null!==o?Ci(o):Ns,r.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(da(t,n,o,s),r.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(o=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),o!==r.state&&pa.enqueueReplaceState(r,r.state,null),ur(t,s,r,i),cr(),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308),s=!0}else if(null===e){r=t.stateNode;var a=t.memoizedProps,l=ga(n,a);r.props=l;var c=r.context,u=n.contextType;o=Ns,"object"===typeof u&&null!==u&&(o=Ci(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof r.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(a||c!==o)&&ma(t,r,s,o),tr=!1;var d=t.memoizedState;r.state=d,ur(t,s,r,i),cr(),c=t.memoizedState,a||d!==c||tr?("function"===typeof h&&(da(t,n,h,s),c=t.memoizedState),(l=tr||fa(t,n,l,s,d,c,o))?(u||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),r.props=s,r.state=c,r.context=o,s=l):("function"===typeof r.componentDidMount&&(t.flags|=4194308),s=!1)}else{r=t.stateNode,sr(e,t),u=ga(n,o=t.memoizedProps),r.props=u,h=t.pendingProps,d=r.context,c=n.contextType,l=Ns,"object"===typeof c&&null!==c&&(l=Ci(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o!==h||d!==l)&&ma(t,r,s,l),tr=!1,d=t.memoizedState,r.state=d,ur(t,s,r,i),cr();var p=t.memoizedState;o!==h||d!==p||tr||null!==e&&null!==e.dependencies&&Si(e.dependencies)?("function"===typeof a&&(da(t,n,a,s),p=t.memoizedState),(u=tr||fa(t,n,u,s,d,p,l)||null!==e&&null!==e.dependencies&&Si(e.dependencies))?(c||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(s,p,l),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(s,p,l)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),r.props=s,r.state=p,r.context=l,s=u):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),s=!1)}return r=s,Na(e,t),s=0!==(128&t.flags),r||s?(r=t.stateNode,n=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&s?(t.child=na(t,e.child,null,i),t.child=na(t,null,n,i)):Aa(e,t,n,i),t.memoizedState=r.state,e=t.child):e=Xa(e,t,i),e}function qa(e,t,n,s){return pi(),t.flags|=256,Aa(e,t,n,s),t.child}var La={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Va(e){return{baseLanes:e,cachePool:Wi()}}function za(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Ua(e,t,n){var s,i=t.pendingProps,r=!1,a=0!==(128&t.flags);if((s=a)||(s=(null===e||null!==e.memoizedState)&&0!==(2&ua.current)),s&&(r=!0,t.flags&=-129),s=0!==(32&t.flags),t.flags&=-33,null===e){if(ri){if(r?oa(t):la(),ri){var l,c=ii;if(l=c){e:{for(l=c,c=ai;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yh(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Ys?{id:$s,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},(l=Fs(18,null,null,0)).stateNode=c,l.return=t,t.child=l,si=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gh(c)?t.lanes=32:t.lanes=536870912,null;ca(t)}return c=i.children,i=i.fallback,r?(la(),c=Wa({mode:"hidden",children:c},r=t.mode),i=zs(i,r,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(r=t.child).memoizedState=Va(n),r.childLanes=za(e,s,n),t.memoizedState=La,i):(oa(t),Ba(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(oa(t),t.flags&=-257,t=Ha(e,t,n)):null!==t.memoizedState?(la(),t.child=e.child,t.flags|=128,t=null):(la(),r=i.fallback,c=t.mode,i=Wa({mode:"visible",children:i.children},c),(r=zs(r,c,n,null)).flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,na(t,e.child,null,n),(i=t.child).memoizedState=Va(n),i.childLanes=za(e,s,n),t.memoizedState=La,t=r);else if(oa(t),gh(c)){if(s=c.nextSibling&&c.nextSibling.dataset)var u=s.dgst;s=u,(i=Error(o(419))).stack="",i.digest=s,mi({value:i,source:null,stack:null}),t=Ha(e,t,n)}else if(Ea||xi(e,t,n,!1),s=0!==(n&e.childLanes),Ea||s){if(null!==(s=sc)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Ae(i))&(s.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Ps(e,i),Fc(s,e,i),Ca;"$?"===c.data||Qc(),t=Ha(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yh(c.nextSibling),si=t,ri=!0,oi=null,ai=!1,null!==e&&(Ks[Xs++]=$s,Ks[Xs++]=Js,Ks[Xs++]=Ys,$s=e.id,Js=e.overflow,Ys=t),(t=Ba(t,i.children)).flags|=4096);return t}return r?(la(),r=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=qs(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?r=qs(u,r):(r=zs(r,c,n,null)).flags|=2,r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,null===(c=e.child.memoizedState)?c=Va(n):(null!==(l=c.cachePool)?(u=Di._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Wi(),c={baseLanes:c.baseLanes|n,cachePool:l}),r.memoizedState=c,r.childLanes=za(e,s,n),t.memoizedState=La,i):(oa(t),e=(n=e.child).sibling,(n=qs(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Ba(e,t){return(t=Wa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Wa(e,t){return(e=Fs(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ha(e,t,n){return na(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ga(e,t,n){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),wi(e.return,t,n)}function Qa(e,t,n,s,i){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=n,r.tailMode=i)}function Ka(e,t,n){var s=t.pendingProps,i=s.revealOrder,r=s.tail;if(Aa(e,t,s.children,n),0!==(2&(s=ua.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ga(e,n,t);else if(19===e.tag)Ga(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(z(ua,s),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ha(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Qa(t,!1,i,n,r);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ha(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Qa(t,!0,n,null,r);break;case"together":Qa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(xi(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=qs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=qs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Si(e))}function $a(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ea=!0;else{if(!Ya(e,n)&&0===(128&t.flags))return Ea=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),_i(0,Di,e.memoizedState.cache),pi();break;case 27:case 5:K(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:_i(0,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(null!==s)return null!==s.dehydrated?(oa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(oa(t),null!==(e=Xa(e,t,n))?e.sibling:null);oa(t);break;case 19:var i=0!==(128&e.flags);if((s=0!==(n&t.childLanes))||(xi(e,t,n,!1),s=0!==(n&t.childLanes)),i){if(s)return Ka(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(ua,ua.current),s)break;return null;case 22:case 23:return t.lanes=0,Da(e,t,n);case 24:_i(0,Di,e.memoizedState.cache)}return Xa(e,t,n)}(e,t,n);Ea=0!==(131072&e.flags)}else Ea=!1,ri&&0!==(1048576&t.flags)&&ei(t,Qs,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,i=s._init;if(s=i(s._payload),t.type=s,"function"!==typeof s){if(void 0!==s&&null!==s){if((i=s.$$typeof)===k){t.tag=11,t=Oa(null,t,s,e,n);break e}if(i===T){t.tag=14,t=Ra(null,t,s,e,n);break e}}throw t=D(s)||s,Error(o(306,t,""))}Is(s)?(e=ga(s,e),t.tag=1,t=Ia(null,t,s,e,n)):(t.tag=0,t=ja(null,t,s,e,n))}return t;case 0:return ja(e,t,t.type,t.pendingProps,n);case 1:return Ia(e,t,s=t.type,i=ga(s,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(o(387));s=t.pendingProps;var r=t.memoizedState;i=r.element,sr(e,t),ur(t,s,null,n);var a=t.memoizedState;if(s=a.cache,_i(0,Di,s),s!==r.cache&&ki(t,[Di],n,!0),cr(),s=a.element,r.isDehydrated){if(r={element:s,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=qa(e,t,s,n);break e}if(s!==i){mi(i=Ss(Error(o(424)),t)),t=qa(e,t,s,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=yh(e.firstChild),si=t,ri=!0,oi=null,ai=!0,n=sa(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),s===i){t=Xa(e,t,n);break e}Aa(e,t,s,n)}t=t.child}return t;case 26:return Na(e,t),null===e?(n=Ah(t.type,null,t.pendingProps,null))?t.memoizedState=n:ri||(n=t.type,e=t.pendingProps,(s=sh(W.current).createElement(n))[De]=t,s[Me]=e,eh(s,n,e),He(s),t.stateNode=s):t.memoizedState=Ah(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&ri&&(s=t.stateNode=bh(t.type,t.pendingProps,W.current),si=t,ai=!0,i=ii,ph(t.type)?(vh=i,ii=yh(s.firstChild)):ii=i),Aa(e,t,t.pendingProps.children,n),Na(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ri&&((i=s=ii)&&(null!==(s=function(e,t,n,s){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(s){if(!e[Le])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(r=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(r!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((r=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var r=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===r)return e}if(null===(e=yh(e.nextSibling)))break}return null}(s,t.type,t.pendingProps,ai))?(t.stateNode=s,si=t,ii=yh(s.firstChild),ai=!1,i=!0):i=!1),i||ci(t)),K(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,s=r.children,oh(i,r)?s=null:null!==a&&oh(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Pr(e,t,Nr,null,null,n),Kh._currentValue=i),Na(e,t),Aa(e,t,s,n),t.child;case 6:return null===e&&ri&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yh(e.nextSibling)))return null}return e}(n,t.pendingProps,ai))?(t.stateNode=n,si=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return Ua(e,t,n);case 4:return G(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=na(t,null,s,n):Aa(e,t,s,n),t.child;case 11:return Oa(e,t,t.type,t.pendingProps,n);case 7:return Aa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Aa(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,_i(0,t.type,s.value),Aa(e,t,s.children,n),t.child;case 9:return i=t.type._context,s=t.pendingProps.children,Ti(t),s=s(i=Ci(i)),t.flags|=1,Aa(e,t,s,n),t.child;case 14:return Ra(e,t,t.type,t.pendingProps,n);case 15:return Pa(e,t,t.type,t.pendingProps,n);case 19:return Ka(e,t,n);case 31:return s=t.pendingProps,n=t.mode,s={mode:s.mode,children:s.children},null===e?((n=Wa(s,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=qs(e.child,s)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Da(e,t,n);case 24:return Ti(t),s=Ci(Di),null===e?(null===(i=Ui())&&(i=sc,r=Mi(),i.pooledCache=r,r.refCount++,null!==r&&(i.pooledCacheLanes|=n),i=r),t.memoizedState={parent:s,cache:i},nr(t),_i(0,Di,i)):(0!==(e.lanes&n)&&(sr(e,t),ur(t,null,null,n),cr()),i=e.memoizedState,r=t.memoizedState,i.parent!==s?(i={parent:s,cache:s},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),_i(0,Di,s)):(s=r.cache,_i(0,Di,s),s!==i.cache&&ki(t,[Di],n,!0))),Aa(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ja(e){e.flags|=4}function Za(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!zh(t)){if(null!==(t=ia.current)&&((4194048&rc)===rc?null!==ra:(62914560&rc)!==rc&&0===(536870912&rc)||t!==ra))throw Ji=Ki,Gi;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?xe():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!ri)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,s=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,s|=65011712&i.subtreeFlags,s|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function sl(e,t,n){var s=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),bi(Di),Q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(di(t)?Ja(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,fi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Ja(t),null!==n?(nl(t),Za(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ja(t),nl(t),Za(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==s&&Ja(t),nl(t),t.flags&=-16777217),null;case 27:X(t),n=W.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==s&&Ja(t);else{if(!s){if(null===t.stateNode)throw Error(o(166));return nl(t),null}e=U.current,di(t)?ui(t):(e=bh(i,s,n),t.stateNode=e,Ja(t))}return nl(t),null;case 5:if(X(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&Ja(t);else{if(!s){if(null===t.stateNode)throw Error(o(166));return nl(t),null}if(e=U.current,di(t))ui(t);else{switch(i=sh(W.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof s.is?i.createElement("select",{is:s.is}):i.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e="string"===typeof s.is?i.createElement(n,{is:s.is}):i.createElement(n)}}e[De]=t,e[Me]=s;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(eh(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ja(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==s&&Ja(t);else{if("string"!==typeof s&&null===t.stateNode)throw Error(o(166));if(e=W.current,di(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,null!==(i=si))switch(i.tag){case 27:case 5:s=i.memoizedProps}e[De]=t,(e=!!(e.nodeValue===n||null!==s&&!0===s.suppressHydrationWarning||Yu(e.nodeValue,n)))||ci(t)}else(e=sh(e).createTextNode(s))[De]=t,t.stateNode=e}return nl(t),null;case 13:if(s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=di(t),null!==s&&null!==s.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[De]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=fi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ca(t),t):(ca(t),null)}if(ca(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==s,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(s=t.child).alternate&&null!==s.alternate.memoizedState&&null!==s.alternate.memoizedState.cachePool&&(i=s.alternate.memoizedState.cachePool.pool);var r=null;null!==s.memoizedState&&null!==s.memoizedState.cachePool&&(r=s.memoizedState.cachePool.pool),r!==i&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return Q(),null===e&&Vu(t.stateNode.containerInfo),nl(t),null;case 10:return bi(t.type),nl(t),null;case 19:if(V(ua),null===(i=t.memoizedState))return nl(t),null;if(s=0!==(128&t.flags),null===(r=i.rendering))if(s)tl(i,!1);else{if(0!==dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(r=ha(e))){for(t.flags|=128,tl(i,!1),e=r.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ls(n,e),n=n.sibling;return z(ua,1&ua.current|2),t.child}e=e.sibling}null!==i.tail&&te()>kc&&(t.flags|=128,s=!0,tl(i,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ha(r))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!r.alternate&&!ri)return nl(t),null}else 2*te()-i.renderingStartTime>kc&&536870912!==n&&(t.flags|=128,s=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(r.sibling=t.child,t.child=r):(null!==(e=i.last)?e.sibling=r:t.child=r,i.last=r)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=ua.current,z(ua,s?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return ca(t),yr(),s=null!==t.memoizedState,null!==e?null!==e.memoizedState!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),s=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),null!==e&&V(zi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),bi(Di),nl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return bi(Di),Q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 13:if(ca(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(ua),null;case 4:return Q(),null;case 10:return bi(t.type),null;case 22:case 23:return ca(t),yr(),null!==e&&V(zi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return bi(Di),null;default:return null}}function rl(e,t){switch(ni(t),t.tag){case 3:bi(Di),Q();break;case 26:case 27:case 5:X(t);break;case 4:Q();break;case 13:ca(t);break;case 19:V(ua);break;case 10:bi(t.type);break;case 22:case 23:ca(t),yr(),null!==e&&V(zi);break;case 24:bi(Di)}}function ol(e,t){try{var n=t.updateQueue,s=null!==n?n.lastEffect:null;if(null!==s){var i=s.next;n=i;do{if((n.tag&e)===e){s=void 0;var r=n.create,o=n.inst;s=r(),o.destroy=s}n=n.next}while(n!==i)}}catch(a){uu(t,t.return,a)}}function al(e,t,n){try{var s=t.updateQueue,i=null!==s?s.lastEffect:null;if(null!==i){var r=i.next;s=r;do{if((s.tag&e)===e){var o=s.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(u){uu(i,l,u)}}}s=s.next}while(s!==r)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{dr(t,n)}catch(s){uu(e,e.return,s)}}}function cl(e,t,n){n.props=ga(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){uu(e,t,s)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;default:s=e.stateNode}"function"===typeof n?e.refCleanup=n(s):n.current=s}}catch(i){uu(e,t,i)}}function hl(e,t){var n=e.ref,s=e.refCleanup;if(null!==n)if("function"===typeof s)try{s()}catch(i){uu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(r){uu(e,t,r)}else n.current=null}function dl(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(i){uu(e,e.return,i)}}function pl(e,t,n){try{var s=e.stateNode;!function(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,a=null,l=null,c=null,u=null,h=null;for(f in n){var d=n[f];if(n.hasOwnProperty(f)&&null!=d)switch(f){case"checked":case"value":break;case"defaultValue":c=d;default:s.hasOwnProperty(f)||Ju(e,t,f,null,s,d)}}for(var p in s){var f=s[p];if(d=n[p],s.hasOwnProperty(p)&&(null!=f||null!=d))switch(p){case"type":r=f;break;case"name":i=f;break;case"checked":u=f;break;case"defaultChecked":h=f;break;case"value":a=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:f!==d&&Ju(e,t,p,f,s,d)}}return void gt(e,a,l,c,u,h,r,i);case"select":for(r in f=a=l=p=null,n)if(c=n[r],n.hasOwnProperty(r)&&null!=c)switch(r){case"value":break;case"multiple":f=c;default:s.hasOwnProperty(r)||Ju(e,t,r,null,s,c)}for(i in s)if(r=s[i],c=n[i],s.hasOwnProperty(i)&&(null!=r||null!=c))switch(i){case"value":p=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==c&&Ju(e,t,i,r,s,c)}return t=l,n=a,s=f,void(null!=p?_t(e,!!n,p,!1):!!s!==!!n&&(null!=t?_t(e,!!n,t,!0):_t(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!s.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Ju(e,t,l,null,s,i)}for(a in s)if(i=s[a],r=n[a],s.hasOwnProperty(a)&&(null!=i||null!=r))switch(a){case"value":p=i;break;case"defaultValue":f=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==r&&Ju(e,t,a,i,s,r)}return void bt(e,p,f);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!s.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Ju(e,t,m,null,s,p);for(c in s)if(p=s[c],f=n[c],s.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Ju(e,t,c,p,s,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!s.hasOwnProperty(g)&&Ju(e,t,g,null,s,p);for(u in s)if(p=s[u],f=n[u],s.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:Ju(e,t,u,p,s,f)}return;default:if(Ct(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!s.hasOwnProperty(y)&&Zu(e,t,y,void 0,s,p);for(h in s)p=s[h],f=n[h],!s.hasOwnProperty(h)||p===f||void 0===p&&void 0===f||Zu(e,t,h,p,s,f);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!s.hasOwnProperty(v)&&Ju(e,t,v,null,s,p);for(d in s)p=s[d],f=n[d],!s.hasOwnProperty(d)||p===f||null==p&&null==f||Ju(e,t,d,p,s,f)}(s,e.type,n,t),s[Me]=t}catch(i){uu(e,e.return,i)}}function fl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&ph(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&ph(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$u));else if(4!==s&&(27===s&&ph(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function yl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==s&&(27===s&&ph(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var s=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);eh(t,s,n),t[De]=e,t[Me]=n}catch(r){uu(e,e.return,r)}}var _l=!1,bl=!1,wl=!1,kl="function"===typeof WeakSet?WeakSet:Set,xl=null;function Sl(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Il(e,n),4&s&&ol(5,n);break;case 1:if(Il(e,n),4&s)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){uu(n,n.return,o)}else{var i=ga(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){uu(n,n.return,a)}}64&s&&ll(n),512&s&&ul(n,n.return);break;case 3:if(Il(e,n),64&s&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{dr(e,t)}catch(o){uu(n,n.return,o)}}break;case 27:null===t&&4&s&&vl(n);case 26:case 5:Il(e,n),null===t&&4&s&&dl(n),512&s&&ul(n,n.return);break;case 12:Il(e,n);break;case 13:Il(e,n),4&s&&Rl(e,n),64&s&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var s=function(){t(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}(e,n=fu.bind(null,n))));break;case 22:if(!(s=null!==n.memoizedState||_l)){t=null!==t&&null!==t.memoizedState||bl,i=_l;var r=bl;_l=s,(bl=t)&&!r?Ll(e,n,0!==(8772&n.subtreeFlags)):Il(e,n),_l=i,bl=r}break;case 30:break;default:Il(e,n)}}function Tl(e){var t=e.alternate;null!==t&&(e.alternate=null,Tl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ve(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,El=!1;function Al(e,t,n){for(n=n.child;null!==n;)Ol(e,t,n),n=n.sibling}function Ol(e,t,n){if(he&&"function"===typeof he.onCommitFiberUnmount)try{he.onCommitFiberUnmount(ue,n)}catch(r){}switch(n.tag){case 26:bl||hl(n,t),Al(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:bl||hl(n,t);var s=Cl,i=El;ph(n.type)&&(Cl=n.stateNode,El=!1),Al(e,t,n),wh(n.stateNode),Cl=s,El=i;break;case 5:bl||hl(n,t);case 6:if(s=Cl,i=El,Cl=null,Al(e,t,n),El=i,null!==(Cl=s))if(El)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(o){uu(n,t,o)}else try{Cl.removeChild(n.stateNode)}catch(o){uu(n,t,o)}break;case 18:null!==Cl&&(El?(fh(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ed(e)):fh(Cl,n.stateNode));break;case 4:s=Cl,i=El,Cl=n.stateNode.containerInfo,El=!0,Al(e,t,n),Cl=s,El=i;break;case 0:case 11:case 14:case 15:bl||al(2,n,t),bl||al(4,n,t),Al(e,t,n);break;case 1:bl||(hl(n,t),"function"===typeof(s=n.stateNode).componentWillUnmount&&cl(n,t,s)),Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:bl=(s=bl)||null!==n.memoizedState,Al(e,t,n),bl=s;break;default:Al(e,t,n)}}function Rl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ed(e)}catch(n){uu(t,t.return,n)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var s=mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(s,s))})}function Dl(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var i=n[s],r=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(ph(l.type)){Cl=l.stateNode,El=!1;break e}break;case 5:Cl=l.stateNode,El=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,El=!0;break e}l=l.return}if(null===Cl)throw Error(o(160));Ol(r,a,i),Cl=null,El=!1,null!==(r=i.alternate)&&(r.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Nl(t,e),t=t.sibling}var Ml=null;function Nl(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Dl(t,e),jl(e),4&s&&(al(3,e,e.return),ol(3,e),al(5,e,e.return));break;case 1:Dl(t,e),jl(e),512&s&&(bl||null===n||hl(n,n.return)),64&s&&_l&&(null!==(e=e.updateQueue)&&(null!==(s=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?s:n.concat(s))));break;case 26:var i=Ml;if(Dl(t,e),jl(e),512&s&&(bl||null===n||hl(n,n.return)),4&s){var r=null!==n?n.memoizedState:null;if(s=e.memoizedState,null===n)if(null===s)if(null===e.stateNode){e:{s=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":(!(r=i.getElementsByTagName("title")[0])||r[Le]||r[De]||"http://www.w3.org/2000/svg"===r.namespaceURI||r.hasAttribute("itemprop"))&&(r=i.createElement(s),i.head.insertBefore(r,i.querySelector("head > title"))),eh(r,s,n),r[De]=e,He(r),s=r;break e;case"link":var a=Lh("link","href",i).get(s+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((r=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&r.getAttribute("rel")===(null==n.rel?null:n.rel)&&r.getAttribute("title")===(null==n.title?null:n.title)&&r.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}eh(r=i.createElement(s),s,n),i.head.appendChild(r);break;case"meta":if(a=Lh("meta","content",i).get(s+(n.content||"")))for(l=0;l<a.length;l++)if((r=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&r.getAttribute("name")===(null==n.name?null:n.name)&&r.getAttribute("property")===(null==n.property?null:n.property)&&r.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&r.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}eh(r=i.createElement(s),s,n),i.head.appendChild(r);break;default:throw Error(o(468,s))}r[De]=e,He(r),s=r}e.stateNode=s}else Vh(i,e.type,e.stateNode);else e.stateNode=Nh(i,s,e.memoizedProps);else r!==s?(null===r?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):r.count--,null===s?Vh(i,e.type,e.stateNode):Nh(i,s,e.memoizedProps)):null===s&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Dl(t,e),jl(e),512&s&&(bl||null===n||hl(n,n.return)),null!==n&&4&s&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Dl(t,e),jl(e),512&s&&(bl||null===n||hl(n,n.return)),32&e.flags){i=e.stateNode;try{kt(i,"")}catch(f){uu(e,e.return,f)}}4&s&&null!=e.stateNode&&pl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&s&&(wl=!0);break;case 6:if(Dl(t,e),jl(e),4&s){if(null===e.stateNode)throw Error(o(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(f){uu(e,e.return,f)}}break;case 3:if(qh=null,i=Ml,Ml=Sh(t.containerInfo),Dl(t,e),Ml=i,jl(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Ed(t.containerInfo)}catch(f){uu(e,e.return,f)}wl&&(wl=!1,Fl(e));break;case 4:s=Ml,Ml=Sh(e.stateNode.containerInfo),Dl(t,e),jl(e),Ml=s;break;case 12:default:Dl(t,e),jl(e);break;case 13:Dl(t,e),jl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(wc=te()),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Pl(e,s)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=_l,h=bl;if(_l=u||i,bl=h||c,Dl(t,e),bl=h,_l=u,jl(e),8192&s)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||_l||bl||ql(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(r=c.stateNode,i)"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,p=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(f){uu(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(f){uu(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&s&&(null!==(s=e.updateQueue)&&(null!==(n=s.retryQueue)&&(s.retryQueue=null,Pl(e,n))));break;case 19:Dl(t,e),jl(e),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Pl(e,s)));case 30:case 21:}}function jl(e){var t=e.flags;if(2&t){try{for(var n,s=e.return;null!==s;){if(fl(s)){n=s;break}s=s.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,ml(e),i);break;case 5:var r=n.stateNode;32&n.flags&&(kt(r,""),n.flags&=-33),yl(e,ml(e),r);break;case 3:case 4:var a=n.stateNode.containerInfo;gl(e,ml(e),a);break;default:throw Error(o(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Fl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Il(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t.alternate,t),t=t.sibling}function ql(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),ql(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),ql(t);break;case 27:wh(t.stateNode);case 26:case 5:hl(t,t.return),ql(t);break;case 22:null===t.memoizedState&&ql(t);break;default:ql(t)}e=e.sibling}}function Ll(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var s=t.alternate,i=e,r=t,o=r.flags;switch(r.tag){case 0:case 11:case 15:Ll(i,r,n),ol(4,r);break;case 1:if(Ll(i,r,n),"function"===typeof(i=(s=r).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){uu(s,s.return,c)}if(null!==(i=(s=r).updateQueue)){var a=s.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)hr(l[i],a)}catch(c){uu(s,s.return,c)}}n&&64&o&&ll(r),ul(r,r.return);break;case 27:vl(r);case 26:case 5:Ll(i,r,n),n&&null===s&&4&o&&dl(r),ul(r,r.return);break;case 12:Ll(i,r,n);break;case 13:Ll(i,r,n),n&&4&o&&Rl(i,r);break;case 22:null===r.memoizedState&&Ll(i,r,n),ul(r,r.return);break;case 30:break;default:Ll(i,r,n)}t=t.sibling}}function Vl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ni(n))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ni(e))}function Ul(e,t,n,s){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Bl(e,t,n,s),t=t.sibling}function Bl(e,t,n,s){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Ul(e,t,n,s),2048&i&&ol(9,t);break;case 1:case 13:default:Ul(e,t,n,s);break;case 3:Ul(e,t,n,s),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ni(e)));break;case 12:if(2048&i){Ul(e,t,n,s),e=t.stateNode;try{var r=t.memoizedProps,o=r.id,a=r.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Ul(e,t,n,s);break;case 23:break;case 22:r=t.stateNode,o=t.alternate,null!==t.memoizedState?2&r._visibility?Ul(e,t,n,s):Hl(e,t):2&r._visibility?Ul(e,t,n,s):(r._visibility|=2,Wl(e,t,n,s,0!==(10256&t.subtreeFlags))),2048&i&&Vl(o,t);break;case 24:Ul(e,t,n,s),2048&i&&zl(t.alternate,t)}}function Wl(e,t,n,s,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var r=e,o=t,a=n,l=s,c=o.flags;switch(o.tag){case 0:case 11:case 15:Wl(r,o,a,l,i),ol(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?Wl(r,o,a,l,i):Hl(r,o):(u._visibility|=2,Wl(r,o,a,l,i)),i&&2048&c&&Vl(o.alternate,o);break;case 24:Wl(r,o,a,l,i),i&&2048&c&&zl(o.alternate,o);break;default:Wl(r,o,a,l,i)}t=t.sibling}}function Hl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,s=t,i=s.flags;switch(s.tag){case 22:Hl(n,s),2048&i&&Vl(s.alternate,s);break;case 24:Hl(n,s),2048&i&&zl(s.alternate,s);break;default:Hl(n,s)}t=t.sibling}}var Gl=8192;function Ql(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)Kl(e),e=e.sibling}function Kl(e){switch(e.tag){case 26:Ql(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,n){if(null===Uh)throw Error(o(475));var s=Uh;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Oh(n.href),r=e.querySelector(Rh(i));if(r)return null!==(e=r._p)&&"object"===typeof e&&"function"===typeof e.then&&(s.count++,s=Wh.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=r,void He(r);r=e.ownerDocument||e,n=Ph(n),(i=kh.get(i))&&Fh(n,i),He(r=r.createElement("link"));var a=r;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),eh(r,"link",n),t.instance=r}null===s.stylesheets&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(s.count++,t=Wh.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ml,e.memoizedState,e.memoizedProps);break;case 5:default:Ql(e);break;case 3:case 4:var t=Ml;Ml=Sh(e.stateNode.containerInfo),Ql(e),Ml=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,Ql(e),Gl=t):Ql(e))}}function Xl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var s=t[n];xl=s,Zl(s,e)}Xl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)$l(e),e=e.sibling}function $l(e){switch(e.tag){case 0:case 11:case 15:Yl(e),2048&e.flags&&al(9,e,e.return);break;case 3:case 12:default:Yl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Yl(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var s=t[n];xl=s,Zl(s,e)}Xl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:al(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Zl(e,t){for(;null!==xl;){var n=xl;switch(n.tag){case 0:case 11:case 15:al(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var s=n.memoizedState.cachePool.pool;null!=s&&s.refCount++}break;case 24:Ni(n.memoizedState.cache)}if(null!==(s=n.child))s.return=n,xl=s;else e:for(n=e;null!==xl;){var i=(s=xl).sibling,r=s.return;if(Tl(s),s===n){xl=null;break e}if(null!==i){i.return=r,xl=i;break e}xl=r}}}var ec={getCacheForType:function(e){var t=Ci(Di),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,sc=null,ic=null,rc=0,oc=0,ac=null,lc=!1,cc=!1,uc=!1,hc=0,dc=0,pc=0,fc=0,mc=0,gc=0,yc=0,vc=null,_c=null,bc=!1,wc=0,kc=1/0,xc=null,Sc=null,Tc=0,Cc=null,Ec=null,Ac=0,Oc=0,Rc=null,Pc=null,Dc=0,Mc=null;function Nc(){if(0!==(2&nc)&&0!==rc)return rc&-rc;if(null!==N.T){return 0!==Ii?Ii:Ou()}return Re()}function jc(){0===gc&&(gc=0===(536870912&rc)||ri?ke():536870912);var e=ia.current;return null!==e&&(e.flags|=32),gc}function Fc(e,t,n){(e!==sc||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(Bc(e,0),Vc(e,rc,gc,!1)),Te(e,n),0!==(2&nc)&&e===sc||(e===sc&&(0===(2&nc)&&(fc|=n),4===dc&&Vc(e,rc,gc,!1)),ku(e))}function Ic(e,t,n){if(0!==(6&nc))throw Error(o(327));for(var s=!n&&0===(124&t)&&0===(t&e.expiredLanes)||be(e,t),i=s?function(e,t){var n=nc;nc|=2;var s=Hc(),i=Gc();sc!==e||rc!==t?(xc=null,kc=te()+500,Bc(e,t)):cc=be(e,t);e:for(;;)try{if(0!==oc&&null!==ic){t=ic;var r=ac;t:switch(oc){case 1:oc=0,ac=null,Zc(e,t,r,1);break;case 2:case 9:if(Xi(r)){oc=0,ac=null,Jc(t);break}t=function(){2!==oc&&9!==oc||sc!==e||(oc=7),ku(e)},r.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Xi(r)?(oc=0,ac=null,Jc(t)):(oc=0,ac=null,Zc(e,t,r,7));break;case 5:var a=null;switch(ic.tag){case 26:a=ic.memoizedState;case 5:case 27:var l=ic;if(!a||zh(a)){oc=0,ac=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,eu(u)):ic=null}break t}}oc=0,ac=null,Zc(e,t,r,5);break;case 6:oc=0,ac=null,Zc(e,t,r,6);break;case 8:Uc(),dc=6;break e;default:throw Error(o(462))}}Yc();break}catch(h){Wc(e,h)}return vi=yi=null,N.H=s,N.A=i,nc=n,null!==ic?0:(sc=null,rc=0,As(),dc)}(e,t):Kc(e,t,!0),r=s;;){if(0===i){cc&&!s&&Vc(e,t,0,!1);break}if(n=e.current.alternate,!r||Lc(n)){if(2===i){if(r=t,e.errorRecoveryDisabledLanes&r)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=vc;var c=l.current.memoizedState.isDehydrated;if(c&&(Bc(l,a).flags|=256),2!==(a=Kc(l,a,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=r,fc|=r,i=4;break e}r=_c,_c=i,null!==r&&(null===_c?_c=r:_c.push.apply(_c,r))}i=a}if(r=!1,2!==i)continue}}if(1===i){Bc(e,0),Vc(e,t,0,!0);break}e:{switch(s=e,r=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Vc(s,t,gc,!lc);break e;case 2:_c=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=wc+300-te())){if(Vc(s,t,gc,!lc),0!==_e(s,0,!0))break e;s.timeoutHandle=lh(qc.bind(null,s,n,_c,xc,bc,t,gc,fc,yc,lc,r,2,-0,0),i)}else qc(s,n,_c,xc,bc,t,gc,fc,yc,lc,r,0,-0,0)}break}i=Kc(e,t,!1),r=!1}ku(e)}function qc(e,t,n,s,i,r,a,l,c,u,h,d,p,f){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||16785408===(16785408&d))&&(Uh={stylesheets:null,count:0,unsuspend:Bh},Kl(t),null!==(d=function(){if(null===Uh)throw Error(o(475));var e=Uh;return e.stylesheets&&0===e.count&&Gh(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Gh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=d(nu.bind(null,e,t,r,n,s,i,a,l,c,h,1,p,f)),void Vc(e,r,a,!u);nu(e,t,r,n,s,i,a,l,c)}function Lc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var s=0;s<n.length;s++){var i=n[s],r=i.getSnapshot;i=i.value;try{if(!Xn(r(),i))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vc(e,t,n,s){t&=~mc,t&=~fc,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var i=t;0<i;){var r=31-pe(i),o=1<<r;s[r]=-1,i&=~o}0!==n&&Ce(e,n,t)}function zc(){return 0!==(6&nc)||(xu(0,!1),!1)}function Uc(){if(null!==ic){if(0===oc)var e=ic.return;else vi=yi=null,Ir(e=ic),Xo=null,Yo=0,e=ic;for(;null!==e;)rl(e.alternate,e),e=e.return;ic=null}}function Bc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ch(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc(),sc=e,ic=n=qs(e.current,null),rc=t,oc=0,ac=null,lc=!1,cc=be(e,t),uc=!1,yc=gc=mc=fc=pc=dc=0,_c=vc=null,bc=!1,0!==(8&t)&&(t|=32&t);var s=e.entangledLanes;if(0!==s)for(e=e.entanglements,s&=t;0<s;){var i=31-pe(s),r=1<<i;t|=e[i],s&=~r}return hc=t,As(),n}function Wc(e,t){_r=null,N.H=Ho,t===Hi||t===Qi?(t=Zi(),oc=3):t===Gi?(t=Zi(),oc=4):oc=t===Ca?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ac=t,null===ic&&(dc=1,wa(e,Ss(t,e.current)))}function Hc(){var e=N.H;return N.H=Ho,null===e?Ho:e}function Gc(){var e=N.A;return N.A=ec,e}function Qc(){dc=4,lc||(4194048&rc)!==rc&&null!==ia.current||(cc=!0),0===(134217727&pc)&&0===(134217727&fc)||null===sc||Vc(sc,rc,gc,!1)}function Kc(e,t,n){var s=nc;nc|=2;var i=Hc(),r=Gc();sc===e&&rc===t||(xc=null,Bc(e,t)),t=!1;var o=dc;e:for(;;)try{if(0!==oc&&null!==ic){var a=ic,l=ac;switch(oc){case 8:Uc(),o=6;break e;case 3:case 2:case 9:case 6:null===ia.current&&(t=!0);var c=oc;if(oc=0,ac=null,Zc(e,a,l,c),n&&cc){o=0;break e}break;default:c=oc,oc=0,ac=null,Zc(e,a,l,c)}}Xc(),o=dc;break}catch(u){Wc(e,u)}return t&&e.shellSuspendCounter++,vi=yi=null,nc=s,N.H=i,N.A=r,null===ic&&(sc=null,rc=0,As()),o}function Xc(){for(;null!==ic;)$c(ic)}function Yc(){for(;null!==ic&&!Z();)$c(ic)}function $c(e){var t=$a(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Fa(n,t,t.pendingProps,t.type,void 0,rc);break;case 11:t=Fa(n,t,t.pendingProps,t.type.render,t.ref,rc);break;case 5:Ir(t);default:rl(n,t),t=$a(n,t=ic=Ls(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Zc(e,t,n,s){vi=yi=null,Ir(t),Xo=null,Yo=0;var i=t.return;try{if(function(e,t,n,s,i){if(n.flags|=32768,null!==s&&"object"===typeof s&&"function"===typeof s.then){if(null!==(t=n.alternate)&&xi(t,n,i,!0),null!==(n=ia.current)){switch(n.tag){case 13:return null===ra?Qc():null===n.alternate&&0===dc&&(dc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,s===Ki?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([s]):t.add(s),hu(e,s,i)),!1;case 22:return n.flags|=65536,s===Ki?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([s]):n.add(s),hu(e,s,i)),!1}throw Error(o(435,n.tag))}return hu(e,s,i),Qc(),!1}if(ri)return null!==(t=ia.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,s!==li&&mi(Ss(e=Error(o(422),{cause:s}),n))):(s!==li&&mi(Ss(t=Error(o(423),{cause:s}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,s=Ss(s,n),ar(e,i=xa(e.stateNode,s,i)),4!==dc&&(dc=2)),!1;var r=Error(o(520),{cause:s});if(r=Ss(r,n),null===vc?vc=[r]:vc.push(r),4!==dc&&(dc=2),null===t)return!0;s=Ss(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,ar(n,e=xa(n.stateNode,s,e)),!1;case 1:if(t=n.type,r=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==r&&"function"===typeof r.componentDidCatch&&(null===Sc||!Sc.has(r))))return n.flags|=65536,i&=-i,n.lanes|=i,Ta(i=Sa(i),e,n,s),ar(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,rc))return dc=1,wa(e,Ss(n,e.current)),void(ic=null)}catch(r){if(null!==i)throw ic=i,r;return dc=1,wa(e,Ss(n,e.current)),void(ic=null)}32768&t.flags?(ri||1===s?e=!0:cc||0!==(536870912&rc)?e=!1:(lc=e=!0,(2===s||9===s||3===s||6===s)&&(null!==(s=ia.current)&&13===s.tag&&(s.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=sl(t.alternate,t,hc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===dc&&(dc=5)}function tu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);dc=6,ic=null}function nu(e,t,n,s,i,r,a,l,c){e.cancelPendingCommit=null;do{au()}while(0!==Tc);if(0!==(6&nc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(r=t.lanes|t.childLanes,function(e,t,n,s,i,r){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-pe(n),h=1<<u;a[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var p=d[u];null!==p&&(p.lane&=-536870913)}n&=~h}0!==s&&Ce(e,s,0),0!==r&&0===i&&0!==e.tag&&(e.suspendedLanes|=r&~(o&~t))}(e,n,r|=Es,a,l,c),e===sc&&(ic=sc=null,rc=0),Ec=t,Cc=e,Ac=n,Oc=r,Rc=i,Pc=s,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,$(re,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),s=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||s){s=N.T,N.T=null,i=j.p,j.p=2,a=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,th=nd,ts(e=es(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{n.nodeType,r.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==r||0!==s&&3!==d.nodeType||(c=a+s),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===i&&(l=a),p===r&&++h===s&&(c=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nh={focusedElem:e,selectionRange:n},nd=!1,xl=t;null!==xl;)if(e=(t=xl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,xl=e;else for(;null!==xl;){switch(r=(t=xl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==r){e=void 0,n=t,i=r.memoizedProps,r=r.memoizedState,s=n.stateNode;try{var m=ga(n.type,i,(n.elementType,n.type));e=s.getSnapshotBeforeUpdate(m,r),s.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))mh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,xl=e;break}xl=t.return}}(e,t)}finally{nc=a,j.p=i,N.T=s}}Tc=1,su(),iu(),ru()}}function su(){if(1===Tc){Tc=0;var e=Cc,t=Ec,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=N.T,N.T=null;var s=j.p;j.p=2;var i=nc;nc|=4;try{Nl(t,e);var r=nh,o=es(e.containerInfo),a=r.focusedElem,l=r.selectionRange;if(o!==a&&a&&a.ownerDocument&&Zn(a.ownerDocument.documentElement,a)){if(null!==l&&ts(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var h=a.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var p=d.getSelection(),f=a.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(o=g,g=m,m=o);var y=Jn(a,m),v=Jn(a,g);if(y&&v&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var _=h.createRange();_.setStart(y.node,y.offset),p.removeAllRanges(),m>g?(p.addRange(_),p.extend(v.node,v.offset)):(_.setEnd(v.node,v.offset),p.addRange(_))}}}}for(h=[],p=a;p=p.parentNode;)1===p.nodeType&&h.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<h.length;a++){var b=h[a];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}nd=!!th,nh=th=null}finally{nc=i,j.p=s,N.T=n}}e.current=t,Tc=2}}function iu(){if(2===Tc){Tc=0;var e=Cc,t=Ec,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=N.T,N.T=null;var s=j.p;j.p=2;var i=nc;nc|=4;try{Sl(e,t.alternate,t)}finally{nc=i,j.p=s,N.T=n}}Tc=3}}function ru(){if(4===Tc||3===Tc){Tc=0,ee();var e=Cc,t=Ec,n=Ac,s=Pc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Tc=5:(Tc=0,Ec=Cc=null,ou(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Sc=null),Oe(n),t=t.stateNode,he&&"function"===typeof he.onCommitFiberRoot)try{he.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==s){t=N.T,i=j.p,j.p=2,N.T=null;try{for(var r=e.onRecoverableError,o=0;o<s.length;o++){var a=s[o];r(a.value,{componentStack:a.stack})}}finally{N.T=t,j.p=i}}0!==(3&Ac)&&au(),ku(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Mc?Dc++:(Dc=0,Mc=e):Dc=0,xu(0,!1)}}function ou(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ni(t)))}function au(e){return su(),iu(),ru(),lu()}function lu(){if(5!==Tc)return!1;var e=Cc,t=Oc;Oc=0;var n=Oe(Ac),s=N.T,i=j.p;try{j.p=32>n?32:n,N.T=null,n=Rc,Rc=null;var r=Cc,a=Ac;if(Tc=0,Ec=Cc=null,Ac=0,0!==(6&nc))throw Error(o(331));var l=nc;if(nc|=4,$l(r.current),Bl(r,r.current,a,n),nc=l,xu(0,!1),he&&"function"===typeof he.onPostCommitFiberRoot)try{he.onPostCommitFiberRoot(ue,r)}catch(c){}return!0}finally{j.p=i,N.T=s,ou(e,t)}}function cu(e,t,n){t=Ss(n,t),null!==(e=rr(e,t=xa(e.stateNode,t,2),2))&&(Te(e,2),ku(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Sc||!Sc.has(s))){e=Ss(n,e),null!==(s=rr(t,n=Sa(2),2))&&(Ta(n,s,t,e),Te(s,2),ku(s));break}}t=t.return}}function hu(e,t,n){var s=e.pingCache;if(null===s){s=e.pingCache=new tc;var i=new Set;s.set(t,i)}else void 0===(i=s.get(t))&&(i=new Set,s.set(t,i));i.has(n)||(uc=!0,i.add(n),e=du.bind(null,e,t,n),t.then(e,e))}function du(e,t,n){var s=e.pingCache;null!==s&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sc===e&&(rc&n)===n&&(4===dc||3===dc&&(62914560&rc)===rc&&300>te()-wc?0===(2&nc)&&Bc(e,0):mc|=n,yc===rc&&(yc=0)),ku(e)}function pu(e,t){0===t&&(t=xe()),null!==(e=Ps(e,t))&&(Te(e,t),ku(e))}function fu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function mu(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==s&&s.delete(t),pu(e,n)}var gu=null,yu=null,vu=!1,_u=!1,bu=!1,wu=0;function ku(e){e!==yu&&null===e.next&&(null===yu?gu=yu=e:yu=yu.next=e),_u=!0,vu||(vu=!0,hh(function(){0!==(6&nc)?$(se,Su):Tu()}))}function xu(e,t){if(!bu&&_u){bu=!0;do{for(var n=!1,s=gu;null!==s;){if(!t)if(0!==e){var i=s.pendingLanes;if(0===i)var r=0;else{var o=s.suspendedLanes,a=s.pingedLanes;r=(1<<31-pe(42|e)+1)-1,r=201326741&(r&=i&~(o&~a))?201326741&r|1:r?2|r:0}0!==r&&(n=!0,Au(s,r))}else r=rc,0===(3&(r=_e(s,s===sc?r:0,null!==s.cancelPendingCommit||-1!==s.timeoutHandle)))||be(s,r)||(n=!0,Au(s,r));s=s.next}}while(n);bu=!1}}function Su(){Tu()}function Tu(){_u=vu=!1;var e=0;0!==wu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ah&&(ah=e,!0);return ah=null,!1}()&&(e=wu),wu=0);for(var t=te(),n=null,s=gu;null!==s;){var i=s.next,r=Cu(s,t);0===r?(s.next=null,null===n?gu=i:n.next=i,null===i&&(yu=n)):(n=s,(0!==e||0!==(3&r))&&(_u=!0)),s=i}xu(e,!1)}function Cu(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var o=31-pe(r),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&s)||(i[o]=we(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}if(n=rc,n=_e(e,e===(t=sc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),s=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==s&&null!==s&&J(s),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||be(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==s&&J(s),Oe(n)){case 2:case 8:n=ie;break;case 32:default:n=re;break;case 268435456:n=ae}return s=Eu.bind(null,e),n=$(n,s),e.callbackPriority=t,e.callbackNode=n,t}return null!==s&&null!==s&&J(s),e.callbackPriority=2,e.callbackNode=null,2}function Eu(e,t){if(0!==Tc&&5!==Tc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(au()&&e.callbackNode!==n)return null;var s=rc;return 0===(s=_e(e,e===sc?s:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Ic(e,s,t),Cu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Eu.bind(null,e):null)}function Au(e,t){if(au())return null;Ic(e,t,!0)}function Ou(){return 0===wu&&(wu=ke()),wu}function Ru(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ot(""+e)}function Pu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Du=0;Du<ws.length;Du++){var Mu=ws[Du];ks(Mu.toLowerCase(),"on"+(Mu[0].toUpperCase()+Mu.slice(1)))}ks(ps,"onAnimationEnd"),ks(fs,"onAnimationIteration"),ks(ms,"onAnimationStart"),ks("dblclick","onDoubleClick"),ks("focusin","onFocus"),ks("focusout","onBlur"),ks(gs,"onTransitionRun"),ks(ys,"onTransitionStart"),ks(vs,"onTransitionCancel"),ks(_s,"onTransitionEnd"),Xe("onMouseEnter",["mouseout","mouseover"]),Xe("onMouseLeave",["mouseout","mouseover"]),Xe("onPointerEnter",["pointerout","pointerover"]),Xe("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ju=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nu));function Fu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var s=e[n],i=s.event;s=s.listeners;e:{var r=void 0;if(t)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&i.isPropagationStopped())break e;r=a,i.currentTarget=c;try{r(i)}catch(u){ya(u)}i.currentTarget=null,r=l}else for(o=0;o<s.length;o++){if(l=(a=s[o]).instance,c=a.currentTarget,a=a.listener,l!==r&&i.isPropagationStopped())break e;r=a,i.currentTarget=c;try{r(i)}catch(u){ya(u)}i.currentTarget=null,r=l}}}}function Iu(e,t){var n=t[je];void 0===n&&(n=t[je]=new Set);var s=e+"__bubble";n.has(s)||(zu(t,e,2,!1),n.add(s))}function qu(e,t,n){var s=0;t&&(s|=4),zu(n,e,s,t)}var Lu="_reactListening"+Math.random().toString(36).slice(2);function Vu(e){if(!e[Lu]){e[Lu]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(ju.has(t)||qu(t,!1,e),qu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Lu]||(t[Lu]=!0,qu("selectionchange",!1,t))}}function zu(e,t,n,s){switch(cd(t)){case 2:var i=sd;break;case 8:i=id;break;default:i=rd}n=i.bind(null,t,n,e),i=void 0,!Lt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),s?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Uu(e,t,n,s,i){var r=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var o=s.tag;if(3===o||4===o){var a=s.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=s.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=ze(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){s=r=o;continue e}a=a.parentNode}}s=s.return}Ft(function(){var s=r,i=Pt(n),o=[];e:{var a=bs.get(e);if(void 0!==a){var c=Zt,u=e;switch(e){case"keypress":if(0===Ht(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=on;break;case"focusout":u="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case ps:case fs:case ms:c=an;break;case _s:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=_n;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=bn}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),p=h?null!==a?a+"Capture":null:a;h=[];for(var f,m=s;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=It(m,p))&&h.push(Bu(m,g,f)),d)break;m=m.return}0<h.length&&(a=new c(a,u,null,n,i),o.push({event:a,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Rt||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[Ne])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=s,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=s),c!==u)){if(h=sn,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=gn,g="onPointerLeave",p="onPointerEnter",m="pointer"),d=null==c?a:Be(c),f=null==u?a:Be(u),(a=new h(g,m+"leave",c,n,i)).target=d,a.relatedTarget=f,g=null,ze(i)===s&&((h=new h(p,m+"enter",u,n,i)).target=f,h.relatedTarget=d,g=h),d=g,c&&u)e:{for(p=u,m=0,f=h=c;f;f=Hu(f))m++;for(f=0,g=p;g;g=Hu(g))f++;for(;0<m-f;)h=Hu(h),m--;for(;0<f-m;)p=Hu(p),f--;for(;m--;){if(h===p||null!==p&&h===p.alternate)break e;h=Hu(h),p=Hu(p)}h=null}else h=null;null!==c&&Gu(o,a,c,h,!1),null!==u&&null!==d&&Gu(o,d,u,h,!0)}if("select"===(c=(a=s?Be(s):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var y=qn;else if(Dn(a))if(Ln)y=Kn;else{y=Gn;var v=Hn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?s&&Ct(s.elementType)&&(y=qn):y=Qn;switch(y&&(y=y(e,s))?Mn(o,y,n,i):(v&&v(e,a,s),"focusout"===e&&s&&"number"===a.type&&null!=s.memoizedProps.value&&vt(a,"number",a.value)),v=s?Be(s):window,e){case"focusin":(Dn(v)||"true"===v.contentEditable)&&(ss=v,is=s,rs=null);break;case"focusout":rs=is=ss=null;break;case"mousedown":os=!0;break;case"contextmenu":case"mouseup":case"dragend":os=!1,as(o,n,i);break;case"selectionchange":if(ns)break;case"keydown":case"keyup":as(o,n,i)}var _;if(kn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Rn?An(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Tn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Rn&&(_=Wt()):(Ut="value"in(zt=i)?zt.value:zt.textContent,Rn=!0)),0<(v=Wu(s,b)).length&&(b=new cn(b,e,null,n,i),o.push({event:b,listeners:v}),_?b.data=_:null!==(_=On(n))&&(b.data=_))),(_=Sn?function(e,t){switch(e){case"compositionend":return On(t);case"keypress":return 32!==t.which?null:(En=!0,Cn);case"textInput":return(e=t.data)===Cn&&En?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!kn&&An(e,t)?(e=Wt(),Bt=Ut=zt=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=Wu(s,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,i),o.push({event:v,listeners:b}),v.data=_)),function(e,t,n,s,i){if("submit"===t&&n&&n.stateNode===i){var r=Ru((i[Me]||null).action),o=s.submitter;o&&null!==(t=(t=o[Me]||null)?Ru(t.formAction):o.getAttribute("formAction"))&&(r=t,o=null);var a=new Zt("action","action",null,s,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(0!==wu){var e=o?Pu(i,o):new FormData(i);Po(n,{pending:!0,data:e,method:i.method,action:r},null,e)}}else"function"===typeof r&&(a.preventDefault(),e=o?Pu(i,o):new FormData(i),Po(n,{pending:!0,data:e,method:i.method,action:r},r,e))},currentTarget:i}]})}}(o,e,s,n,i)}Fu(o,t)})}function Bu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",s=[];null!==e;){var i=e,r=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===r||(null!=(i=It(e,n))&&s.unshift(Bu(e,i,r)),null!=(i=It(e,t))&&s.push(Bu(e,i,r))),3===e.tag)return s;e=e.return}return[]}function Hu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gu(e,t,n,s,i){for(var r=t._reactName,o=[];null!==n&&n!==s;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===s)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=It(n,r))&&o.unshift(Bu(n,c,l)):i||null!=(c=It(n,r))&&o.push(Bu(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qu=/\r\n?/g,Ku=/\u0000|\uFFFD/g;function Xu(e){return("string"===typeof e?e:""+e).replace(Qu,"\n").replace(Ku,"")}function Yu(e,t){return t=Xu(t),Xu(e)===t}function $u(){}function Ju(e,t,n,s,i,r){switch(n){case"children":"string"===typeof s?"body"===t||"textarea"===t&&""===s||kt(e,s):("number"===typeof s||"bigint"===typeof s)&&"body"!==t&&kt(e,""+s);break;case"className":nt(e,"class",s);break;case"tabIndex":nt(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,s);break;case"style":Tt(e,s,r);break;case"data":if("object"!==t){nt(e,"data",s);break}case"src":case"href":if(""===s&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==s||"function"===typeof s||"symbol"===typeof s||"boolean"===typeof s){e.removeAttribute(n);break}s=Ot(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if("function"===typeof s){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof r&&("formAction"===n?("input"!==t&&Ju(e,t,"name",i.name,i,null),Ju(e,t,"formEncType",i.formEncType,i,null),Ju(e,t,"formMethod",i.formMethod,i,null),Ju(e,t,"formTarget",i.formTarget,i,null)):(Ju(e,t,"encType",i.encType,i,null),Ju(e,t,"method",i.method,i,null),Ju(e,t,"target",i.target,i,null))),null==s||"symbol"===typeof s||"boolean"===typeof s){e.removeAttribute(n);break}s=Ot(""+s),e.setAttribute(n,s);break;case"onClick":null!=s&&(e.onclick=$u);break;case"onScroll":null!=s&&Iu("scroll",e);break;case"onScrollEnd":null!=s&&Iu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!==typeof s||!("__html"in s))throw Error(o(61));if(null!=(n=s.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&"function"!==typeof s&&"symbol"!==typeof s;break;case"muted":e.muted=s&&"function"!==typeof s&&"symbol"!==typeof s;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==s||"function"===typeof s||"boolean"===typeof s||"symbol"===typeof s){e.removeAttribute("xlink:href");break}n=Ot(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===s?e.setAttribute(n,""):!1!==s&&null!=s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":null==s||"function"===typeof s||"symbol"===typeof s||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":Iu("beforetoggle",e),Iu("toggle",e),tt(e,"popover",s);break;case"xlinkActuate":st(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":st(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":st(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":st(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":st(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":st(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":st(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":st(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":st(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":tt(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Et.get(n)||n,s)}}function Zu(e,t,n,s,i,r){switch(n){case"style":Tt(e,s,r);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!==typeof s||!("__html"in s))throw Error(o(61));if(null!=(n=s.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof s?kt(e,s):("number"===typeof s||"bigint"===typeof s)&&kt(e,""+s);break;case"onScroll":null!=s&&Iu("scroll",e);break;case"onScrollEnd":null!=s&&Iu("scrollend",e);break;case"onClick":null!=s&&(e.onclick=$u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Qe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(r=null!=(r=e[Me]||null)?r[n]:null)&&e.removeEventListener(t,r,i),"function"!==typeof s)?n in e?e[n]=s:!0===s?e.setAttribute(n,""):tt(e,n,s):("function"!==typeof r&&null!==r&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,i)))}}function eh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Iu("error",e),Iu("load",e);var s,i=!1,r=!1;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(null!=a)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ju(e,t,s,a,n,null)}}return r&&Ju(e,t,"srcSet",n.srcSet,n,null),void(i&&Ju(e,t,"src",n.src,n,null));case"input":Iu("invalid",e);var l=s=a=r=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":r=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":s=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:Ju(e,t,i,h,n,null)}}return yt(e,s,l,c,u,a,r,!1),void ht(e);case"select":for(r in Iu("invalid",e),i=a=s=null,n)if(n.hasOwnProperty(r)&&null!=(l=n[r]))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Ju(e,t,r,l,n,null)}return t=s,n=a,e.multiple=!!i,void(null!=t?_t(e,!!i,t,!1):null!=n&&_t(e,!!i,n,!0));case"textarea":for(a in Iu("invalid",e),s=r=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Ju(e,t,a,l,n,null)}return wt(e,i,r,s),void ht(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Ju(e,t,c,i,n,null);return;case"dialog":Iu("beforetoggle",e),Iu("toggle",e),Iu("cancel",e),Iu("close",e);break;case"iframe":case"object":Iu("load",e);break;case"video":case"audio":for(i=0;i<Nu.length;i++)Iu(Nu[i],e);break;case"image":Iu("error",e),Iu("load",e);break;case"details":Iu("toggle",e);break;case"embed":case"source":case"link":Iu("error",e),Iu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ju(e,t,u,i,n,null)}return;default:if(Ct(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(i=n[h])&&Zu(e,t,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Ju(e,t,l,i,n,null))}var th=null,nh=null;function sh(e){return 9===e.nodeType?e:e.ownerDocument}function ih(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function oh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ah=null;var lh="function"===typeof setTimeout?setTimeout:void 0,ch="function"===typeof clearTimeout?clearTimeout:void 0,uh="function"===typeof Promise?Promise:void 0,hh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof uh?function(e){return uh.resolve(null).then(e).catch(dh)}:lh;function dh(e){setTimeout(function(){throw e})}function ph(e){return"head"===e}function fh(e,t){var n=t,s=0,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0<s&&8>s){n=s;var o=e.ownerDocument;if(1&n&&wh(o.documentElement),2&n&&wh(o.body),4&n)for(wh(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[Le]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===i)return e.removeChild(r),void Ed(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:s=n.charCodeAt(0)-48;else s=0;n=r}while(n);Ed(t)}function mh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":mh(n),Ve(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gh(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vh=null;function _h(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function bh(e,t,n){switch(t=sh(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function wh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ve(e)}var kh=new Map,xh=new Set;function Sh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Th=j.d;j.d={f:function(){var e=Th.f(),t=zc();return e||t},r:function(e){var t=Ue(e);null!==t&&5===t.tag&&"form"===t.type?Mo(t):Th.r(e)},D:function(e){Th.D(e),Eh("dns-prefetch",e,null)},C:function(e,t){Th.C(e,t),Eh("preconnect",e,t)},L:function(e,t,n){Th.L(e,t,n);var s=Ch;if(s&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var r=i;switch(t){case"style":r=Oh(e);break;case"script":r=Dh(e)}kh.has(r)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),kh.set(r,e),null!==s.querySelector(i)||"style"===t&&s.querySelector(Rh(r))||"script"===t&&s.querySelector(Mh(r))||(eh(t=s.createElement("link"),"link",e),He(t),s.head.appendChild(t)))}},m:function(e,t){Th.m(e,t);var n=Ch;if(n&&e){var s=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(s)+'"][href="'+mt(e)+'"]',r=i;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Dh(e)}if(!kh.has(r)&&(e=d({rel:"modulepreload",href:e},t),kh.set(r,e),null===n.querySelector(i))){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Mh(r)))return}eh(s=n.createElement("link"),"link",e),He(s),n.head.appendChild(s)}}},X:function(e,t){Th.X(e,t);var n=Ch;if(n&&e){var s=We(n).hoistableScripts,i=Dh(e),r=s.get(i);r||((r=n.querySelector(Mh(i)))||(e=d({src:e,async:!0},t),(t=kh.get(i))&&Ih(e,t),He(r=n.createElement("script")),eh(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}},S:function(e,t,n){Th.S(e,t,n);var s=Ch;if(s&&e){var i=We(s).hoistableStyles,r=Oh(e);t=t||"default";var o=i.get(r);if(!o){var a={loading:0,preload:null};if(o=s.querySelector(Rh(r)))a.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=kh.get(r))&&Fh(e,n);var l=o=s.createElement("link");He(l),eh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,jh(o,t,s)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(r,o)}}},M:function(e,t){Th.M(e,t);var n=Ch;if(n&&e){var s=We(n).hoistableScripts,i=Dh(e),r=s.get(i);r||((r=n.querySelector(Mh(i)))||(e=d({src:e,async:!0,type:"module"},t),(t=kh.get(i))&&Ih(e,t),He(r=n.createElement("script")),eh(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}};var Ch="undefined"===typeof document?null:document;function Eh(e,t,n){var s=Ch;if(s&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),xh.has(i)||(xh.add(i),e={rel:e,crossOrigin:n,href:t},null===s.querySelector(i)&&(eh(t=s.createElement("link"),"link",e),He(t),s.head.appendChild(t)))}}function Ah(e,t,n,s){var i,r,a,l,c=(c=W.current)?Sh(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Oh(n.href),(s=(n=We(c).hoistableStyles).get(t))||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Oh(n.href);var u=We(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(Rh(e)))&&!u._p&&(h.instance=u,h.state.loading=5),kh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kh.set(e,n),u||(i=c,r=e,a=n,l=h.state,i.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=i.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),eh(r,"link",a),He(r),i.head.appendChild(r))))),t&&null===s)throw Error(o(528,""));return h}if(t&&null!==s)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Dh(n),(s=(n=We(c).hoistableScripts).get(t))||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Oh(e){return'href="'+mt(e)+'"'}function Rh(e){return'link[rel="stylesheet"]['+e+"]"}function Ph(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Dh(e){return'[src="'+mt(e)+'"]'}function Mh(e){return"script[async]"+e}function Nh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(s)return t.instance=s,He(s),s;var i=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return He(s=(e.ownerDocument||e).createElement("style")),eh(s,"style",i),jh(s,n.precedence,e),t.instance=s;case"stylesheet":i=Oh(n.href);var r=e.querySelector(Rh(i));if(r)return t.state.loading|=4,t.instance=r,He(r),r;s=Ph(n),(i=kh.get(i))&&Fh(s,i),He(r=(e.ownerDocument||e).createElement("link"));var a=r;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),eh(r,"link",s),t.state.loading|=4,jh(r,n.precedence,e),t.instance=r;case"script":return r=Dh(n.src),(i=e.querySelector(Mh(r)))?(t.instance=i,He(i),i):(s=n,(i=kh.get(r))&&Ih(s=d({},n),i),He(i=(e=e.ownerDocument||e).createElement("script")),eh(i,"link",s),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(s=t.instance,t.state.loading|=4,jh(s,n.precedence,e));return t.instance}function jh(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=s.length?s[s.length-1]:null,r=i,o=0;o<s.length;o++){var a=s[o];if(a.dataset.precedence===t)r=a;else if(r!==i)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Fh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ih(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var qh=null;function Lh(e,t,n){if(null===qh){var s=new Map,i=qh=new Map;i.set(n,s)}else(s=(i=qh).get(n))||(s=new Map,i.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var r=n[i];if(!(r[Le]||r[De]||"link"===e&&"stylesheet"===r.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==r.namespaceURI){var o=r.getAttribute(t)||"";o=e+o;var a=s.get(o);a?a.push(r):s.set(o,[r])}}return s}function Vh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function zh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Uh=null;function Bh(){}function Wh(){if(this.count--,0===this.count)if(this.stylesheets)Gh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Hh=null;function Gh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Hh=new Map,t.forEach(Qh,e),Hh=null,Wh.call(e))}function Qh(e,t){if(!(4&t.state.loading)){var n=Hh.get(e);if(n)var s=n.get(null);else{n=new Map,Hh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var o=i[r];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),s=o)}s&&n.set(null,s)}o=(i=t.instance).getAttribute("data-precedence"),(r=n.get(o)||s)===s&&n.set(null,i),n.set(o,i),this.count++,s=Wh.bind(this),i.addEventListener("load",s),i.addEventListener("error",s),r?r.parentNode.insertBefore(i,r.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Kh={$$typeof:w,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function Xh(e,t,n,s,i,r,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=s,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Yh(e,t,n,s,i,r,o,a,l,c,u,h){return e=new Xh(e,t,n,o,a,l,c,h),t=1,!0===r&&(t|=24),r=Fs(3,null,null,t),e.current=r,r.stateNode=e,(t=Mi()).refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:s,isDehydrated:n,cache:t},nr(r),e}function $h(e){return e?e=Ns:Ns}function Jh(e,t,n,s,i,r){i=$h(i),null===s.context?s.context=i:s.pendingContext=i,(s=ir(t)).payload={element:n},null!==(r=void 0===r?null:r)&&(s.callback=r),null!==(n=rr(e,s,t))&&(Fc(n,0,t),or(n,e,t))}function Zh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ed(e,t){Zh(e,t),(e=e.alternate)&&Zh(e,t)}function td(e){if(13===e.tag){var t=Ps(e,67108864);null!==t&&Fc(t,0,67108864),ed(e,67108864)}}var nd=!0;function sd(e,t,n,s){var i=N.T;N.T=null;var r=j.p;try{j.p=2,rd(e,t,n,s)}finally{j.p=r,N.T=i}}function id(e,t,n,s){var i=N.T;N.T=null;var r=j.p;try{j.p=8,rd(e,t,n,s)}finally{j.p=r,N.T=i}}function rd(e,t,n,s){if(nd){var i=od(s);if(null===i)Uu(e,t,s,ad,n),vd(e,s);else if(function(e,t,n,s,i){switch(t){case"focusin":return hd=_d(hd,e,t,n,s,i),!0;case"dragenter":return dd=_d(dd,e,t,n,s,i),!0;case"mouseover":return pd=_d(pd,e,t,n,s,i),!0;case"pointerover":var r=i.pointerId;return fd.set(r,_d(fd.get(r)||null,e,t,n,s,i)),!0;case"gotpointercapture":return r=i.pointerId,md.set(r,_d(md.get(r)||null,e,t,n,s,i)),!0}return!1}(i,e,t,n,s))s.stopPropagation();else if(vd(e,s),4&t&&-1<yd.indexOf(e)){for(;null!==i;){var r=Ue(i);if(null!==r)switch(r.tag){case 3:if((r=r.stateNode).current.memoizedState.isDehydrated){var o=ve(r.pendingLanes);if(0!==o){var a=r;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-pe(o);a.entanglements[1]|=l,o&=~l}ku(r),0===(6&nc)&&(kc=te()+500,xu(0,!1))}}break;case 13:null!==(a=Ps(r,2))&&Fc(a,0,2),zc(),ed(r,2)}if(null===(r=od(s))&&Uu(e,t,s,ad,n),r===i)break;i=r}null!==i&&s.stopPropagation()}else Uu(e,t,s,null,n)}}function od(e){return ld(e=Pt(e))}var ad=null;function ld(e){if(ad=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ad=e,null}function cd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case se:return 2;case ie:return 8;case re:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var ud=!1,hd=null,dd=null,pd=null,fd=new Map,md=new Map,gd=[],yd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vd(e,t){switch(e){case"focusin":case"focusout":hd=null;break;case"dragenter":case"dragleave":dd=null;break;case"mouseover":case"mouseout":pd=null;break;case"pointerover":case"pointerout":fd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":md.delete(t.pointerId)}}function _d(e,t,n,s,i,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},null!==t&&(null!==(t=Ue(t))&&td(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function bd(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=j.p;try{return j.p=e,t()}finally{j.p=n}}(e.priority,function(){if(13===n.tag){var e=Nc();e=Ae(e);var t=Ps(n,e);null!==t&&Fc(t,0,e),ed(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=od(e.nativeEvent);if(null!==n)return null!==(t=Ue(n))&&td(t),e.blockedOn=n,!1;var s=new(n=e.nativeEvent).constructor(n.type,n);Rt=s,n.target.dispatchEvent(s),Rt=null,t.shift()}return!0}function kd(e,t,n){wd(e)&&n.delete(t)}function xd(){ud=!1,null!==hd&&wd(hd)&&(hd=null),null!==dd&&wd(dd)&&(dd=null),null!==pd&&wd(pd)&&(pd=null),fd.forEach(kd),md.forEach(kd)}function Sd(e,t){e.blockedOn===t&&(e.blockedOn=null,ud||(ud=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,xd)))}var Td=null;function Cd(e){Td!==e&&(Td=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Td===e&&(Td=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],i=e[t+2];if("function"!==typeof s){if(null===ld(s||n))continue;break}var r=Ue(n);null!==r&&(e.splice(t,3),t-=3,Po(r,{pending:!0,data:i,method:n.method,action:s},s,i))}}))}function Ed(e){function t(t){return Sd(t,e)}null!==hd&&Sd(hd,e),null!==dd&&Sd(dd,e),null!==pd&&Sd(pd,e),fd.forEach(t),md.forEach(t);for(var n=0;n<gd.length;n++){var s=gd[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<gd.length&&null===(n=gd[0]).blockedOn;)bd(n),null===n.blockedOn&&gd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(s=0;s<n.length;s+=3){var i=n[s],r=n[s+1],o=i[Me]||null;if("function"===typeof r)o||Cd(n);else if(o){var a=null;if(r&&r.hasAttribute("formAction")){if(i=r,o=r[Me]||null)a=o.formAction;else if(null!==ld(i))continue}else a=o.action;"function"===typeof a?n[s+1]=a:(n.splice(s,3),s-=3),Cd(n)}}}function Ad(e){this._internalRoot=e}function Od(e){this._internalRoot=e}Od.prototype.render=Ad.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Jh(t.current,Nc(),e,t,null,null)},Od.prototype.unmount=Ad.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jh(e.current,2,null,e,null,null),zc(),t[Ne]=null}},Od.prototype.unstable_scheduleHydration=function(e){if(e){var t=Re();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gd.length&&0!==t&&t<gd[n].priority;n++);gd.splice(n,0,e),0===n&&bd(e)}};var Rd=i.version;if("19.1.1"!==Rd)throw Error(o(527,Rd,"19.1.1"));j.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(null===i)break;var r=i.alternate;if(null===r){if(null!==(s=i.return)){n=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return u(i),e;if(r===s)return u(i),t;r=r.sibling}throw Error(o(188))}if(n.return!==s.return)n=i,s=r;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,s=r;break}if(c===s){a=!0,s=i,n=r;break}c=c.sibling}if(!a){for(c=r.child;c;){if(c===n){a=!0,n=r,s=i;break}if(c===s){a=!0,s=r,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==s)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Pd={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dd.isDisabled&&Dd.supportsFiber)try{ue=Dd.inject(Pd),he=Dd}catch(Nd){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,s="",i=va,r=_a,l=ba;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(r=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yh(e,1,!1,null,0,n,s,i,r,l,0,null),e[Ne]=t.current,Vu(e),new Ad(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var s=!1,i="",r=va,l=_a,c=ba,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(r=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Yh(e,1,!0,t,0,s,i,r,l,c,0,u)).context=$h(null),n=t.current,(i=ir(s=Ae(s=Nc()))).callback=null,rr(n,i,s),n=s,t.current.lanes=n,Te(t,n),ku(t),e[Ne]=t.current,Vu(e),new Od(t)},t.version="19.1.1"},43:(e,t,n)=>{"use strict";e.exports=n(288)},45:(e,t,n)=>{var s=n(738).default;e.exports=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=Array(t);n<t;n++)s[n]=e[n];return s},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,n)=>{var s=n(79);e.exports=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s,i,r,o,a=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(s=r.call(n)).done)&&(a.push(s.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},210:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(829)),r=s(n(355));class o{constructor(e){let{headers:t={},schema:n,fetch:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=s}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new i.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new o(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:s=!1,count:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o;let a;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;n||s?(a=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;l.searchParams.append(t,n)})):(a="POST",c=t);const u=new Headers(this.headers);return i&&u.set("Prefer","count=".concat(i)),new r.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(o=this.fetch)&&void 0!==o?o:fetch})}}t.default=o},286:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(630)),r=s(n(611));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,s,i;let o=null,a=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(a="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const i=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),r=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");i&&r&&r.length>1&&(l=parseInt(r[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:"Results contain ".concat(a.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{o=JSON.parse(t),Array.isArray(o)&&404===e.status&&(a=[],o=null,c=200,u="OK")}catch(h){404===e.status&&""===t?(c=204,u="No Content"):o={message:t}}if(o&&this.isMaybeSingle&&(null===(i=null===o||void 0===o?void 0:o.details)||void 0===i?void 0:i.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&this.shouldThrowOnError)throw new r.default(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,s;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(s=null===e||void 0===e?void 0:e.code)&&void 0!==s?s:"")},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=_.prototype=new v;b.constructor=_,m(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},x=Object.prototype.hasOwnProperty;function S(e,t,s,i,r,o){return s=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==s?s:null,props:o}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(){}function O(e,t,i,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case s:u=!0;break;case d:return O((u=e._init)(e._payload),t,i,r,o)}}if(u)return o=o(e),u=""===r?"."+E(e,0):r,w(o)?(i="",null!=u&&(i=u.replace(C,"$&/")+"/"),O(o,t,i,"",function(e){return e})):null!=o&&(T(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+u,o=S(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var h,f=""===r?".":r+":";if(w(e))for(var m=0;m<e.length;m++)u+=O(r=e[m],t,i,a=f+E(r,m),o);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=p&&h[p]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(r=e.next()).done;)u+=O(r=r.value,t,i,a=f+E(r,m++),o);else if("object"===a){if("function"===typeof e.then)return O(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(A,A):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,r,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function R(e,t,n){if(null==e)return e;var s=[],i=0;return O(e,s,"","",function(e){return t.call(n,e,i++)}),s}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function M(){}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=r,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key;if(null!=t)for(r in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!x.call(t,r)||"key"===r||"__self"===r||"__source"===r||"ref"===r&&void 0===t.ref||(s[r]=t[r]);var r=arguments.length-2;if(1===r)s.children=n;else if(1<r){for(var o=Array(r),a=0;a<r;a++)o[a]=arguments[a+2];s.children=o}return S(e.type,i,void 0,0,0,s)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var s,i={},r=null;if(null!=t)for(s in void 0!==t.key&&(r=""+t.key),t)x.call(t,s)&&"key"!==s&&"__self"!==s&&"__source"!==s&&(i[s]=t[s]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(s in o=e.defaultProps)void 0===i[s]&&(i[s]=o[s]);return S(e,r,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var s=e(),i=k.S;null!==i&&i(n,s),"object"===typeof s&&null!==s&&"function"===typeof s.then&&s.then(M,D)}catch(r){D(r)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var s=k.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.1.1"},355:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(374));class r extends i.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";"plain"===s?i="pl":"phrase"===s?i="ph":"websearch"===s&&(i="w");const r=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(i,"fts").concat(r,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=n?"".concat(n,".or"):"or";return this.url.searchParams.append(s,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=r},374:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(286));class r extends i.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=i?"".concat(i,".order"):"order",o=this.url.searchParams.get(r);return this.url.searchParams.set(r,"".concat(o?"".concat(o,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(s,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:s=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i="undefined"===typeof s?"offset":"".concat(s,".offset"),r="undefined"===typeof s?"limit":"".concat(s,".limit");return this.url.searchParams.set(i,"".concat(e)),this.url.searchParams.set(r,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:r="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var o;const a=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(o=this.headers.get("Accept"))&&void 0!==o?o:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(r,'; for="').concat(l,'"; options=').concat(a,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=r},383:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},393:(e,t,n)=>{var s,i=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={};function i(e,t){if(!s[e]){s[e]={};for(var n=0;n<e.length;n++)s[e][e.charAt(n)]=n}return s[e][t]}var r={compressToBase64:function(e){if(null==e)return"";var n=r._compress(e,6,function(e){return t.charAt(e)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:r._decompress(e.length,32,function(n){return i(t,e.charAt(n))})},compressToUTF16:function(t){return null==t?"":r._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:r._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=r.compress(e),n=new Uint8Array(2*t.length),s=0,i=t.length;s<i;s++){var o=t.charCodeAt(s);n[2*s]=o>>>8,n[2*s+1]=o%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return r.decompress(t);for(var n=new Array(t.length/2),s=0,i=n.length;s<i;s++)n[s]=256*t[2*s]+t[2*s+1];var o=[];return n.forEach(function(t){o.push(e(t))}),r.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":r._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),r._decompress(e.length,32,function(t){return i(n,e.charAt(t))}))},compress:function(t){return r._compress(t,16,function(t){return e(t)})},_compress:function(e,t,n){if(null==e)return"";var s,i,r,o={},a={},l="",c="",u="",h=2,d=3,p=2,f=[],m=0,g=0;for(r=0;r<e.length;r+=1)if(l=e.charAt(r),Object.prototype.hasOwnProperty.call(o,l)||(o[l]=d++,a[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(o,c))u=c;else{if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(s=0;s<p;s++)m<<=1,g==t-1?(g=0,f.push(n(m)),m=0):g++;for(i=u.charCodeAt(0),s=0;s<8;s++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}else{for(i=1,s=0;s<p;s++)m=m<<1|i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i=0;for(i=u.charCodeAt(0),s=0;s<16;s++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}0==--h&&(h=Math.pow(2,p),p++),delete a[u]}else for(i=o[u],s=0;s<p;s++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;0==--h&&(h=Math.pow(2,p),p++),o[c]=d++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(s=0;s<p;s++)m<<=1,g==t-1?(g=0,f.push(n(m)),m=0):g++;for(i=u.charCodeAt(0),s=0;s<8;s++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}else{for(i=1,s=0;s<p;s++)m=m<<1|i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i=0;for(i=u.charCodeAt(0),s=0;s<16;s++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}0==--h&&(h=Math.pow(2,p),p++),delete a[u]}else for(i=o[u],s=0;s<p;s++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;0==--h&&(h=Math.pow(2,p),p++)}for(i=2,s=0;s<p;s++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;for(;;){if(m<<=1,g==t-1){f.push(n(m));break}g++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:r._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,n,s){var i,r,o,a,l,c,u,h=[],d=4,p=4,f=3,m="",g=[],y={val:s(0),position:n,index:1};for(i=0;i<3;i+=1)h[i]=i;for(o=0,l=Math.pow(2,2),c=1;c!=l;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=s(y.index++)),o|=(a>0?1:0)*c,c<<=1;switch(o){case 0:for(o=0,l=Math.pow(2,8),c=1;c!=l;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=s(y.index++)),o|=(a>0?1:0)*c,c<<=1;u=e(o);break;case 1:for(o=0,l=Math.pow(2,16),c=1;c!=l;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=s(y.index++)),o|=(a>0?1:0)*c,c<<=1;u=e(o);break;case 2:return""}for(h[3]=u,r=u,g.push(u);;){if(y.index>t)return"";for(o=0,l=Math.pow(2,f),c=1;c!=l;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=s(y.index++)),o|=(a>0?1:0)*c,c<<=1;switch(u=o){case 0:for(o=0,l=Math.pow(2,8),c=1;c!=l;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=s(y.index++)),o|=(a>0?1:0)*c,c<<=1;h[p++]=e(o),u=p-1,d--;break;case 1:for(o=0,l=Math.pow(2,16),c=1;c!=l;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=s(y.index++)),o|=(a>0?1:0)*c,c<<=1;h[p++]=e(o),u=p-1,d--;break;case 2:return g.join("")}if(0==d&&(d=Math.pow(2,f),f++),h[u])m=h[u];else{if(u!==p)return null;m=r+r.charAt(0)}g.push(m),h[p++]=r+m.charAt(0),r=m,0==--d&&(d=Math.pow(2,f),f++)}}};return r}();void 0===(s=function(){return i}.call(t,n,t,e))||(e.exports=s)},579:(e,t,n)=>{var s=n(736);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>o,Request:()=>a,Response:()=>l,default:()=>r,fetch:()=>i});var s=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const i=s.fetch,r=s.fetch.bind(s),o=s.Headers,a=s.Request,l=s.Response},672:(e,t,n)=>{"use strict";var s=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var o={d:{f:r,r:function(){throw Error(i(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==s?null:""+s,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,s=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,r="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:s,integrity:i,fetchPriority:r}):"script"===n&&o.d.X(e,{crossOrigin:s,integrity:i,fetchPriority:r,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,s=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:s,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},715:(e,t,n)=>{var s=n(987),i=n(156),r=n(122),o=n(752);e.exports=function(e,t){return s(e)||i(e,t)||r(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,n)=>{var s=n(738).default,i=n(45);e.exports=function(e){var t=i(e,"string");return"symbol"==s(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function i(e,t,s){var i=null;if(void 0!==s&&(i=""+s),void 0!==t.key&&(i=""+t.key),"key"in t)for(var r in s={},t)"key"!==r&&(s[r]=t[r]);else s=t;return t=s.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:s}}t.Fragment=s,t.jsx=i,t.jsxs=i},829:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(355));t.default=class{constructor(e,t){let{headers:n={},schema:s,fetch:i}=t;this.url=e,this.headers=new Headers(n),this.schema=s,this.fetch=i}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t?"HEAD":"GET";let r=!1;const o=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!r?"":('"'===e&&(r=!r),e)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer","count=".concat(n)),new i.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;if(t&&this.headers.append("Prefer","count=".concat(t)),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o;if(this.headers.append("Prefer","resolution=".concat(n?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer","count=".concat(s)),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(o=this.fetch)&&void 0!==o?o:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return t&&this.headers.append("Prefer","count=".concat(t)),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,i=e[s];if(!(0<r(i,t)))break e;e[s]=t,e[n]=i,n=s}}function s(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,i=e.length,o=i>>>1;s<o;){var a=2*(s+1)-1,l=e[a],c=a+1,u=e[c];if(0>r(l,n))c<i&&0>r(u,l)?(e[s]=u,e[c]=n,s=c):(e[s]=l,e[a]=n,s=a);else{if(!(c<i&&0>r(u,n)))break e;e[s]=u,e[c]=n,s=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=s(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=s(u)}}function k(e){if(g=!1,w(e),!m)if(null!==s(c))m=!0,S||(S=!0,x());else{var t=s(u);null!==t&&D(k,t.startTime-e)}}var x,S=!1,T=-1,C=5,E=-1;function A(){return!!y||!(t.unstable_now()-E<C)}function O(){if(y=!1,S){var e=t.unstable_now();E=e;var n=!0;try{e:{m=!1,g&&(g=!1,_(T),T=-1),f=!0;var r=p;try{t:{for(w(e),d=s(c);null!==d&&!(d.expirationTime>e&&A());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var a=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,w(e),n=!0;break t}d===s(c)&&i(c),w(e)}else i(c);d=s(c)}if(null!==d)n=!0;else{var l=s(u);null!==l&&D(k,l.startTime-e),n=!1}}break e}finally{d=null,p=r,f=!1}n=void 0}}finally{n?x():S=!1}}}if("function"===typeof b)x=function(){b(O)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=O,x=function(){P.postMessage(null)}}else x=function(){v(O,0)};function D(e,n){T=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,r){var o=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?o+r:o:r=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:r,expirationTime:a=r+a,sortIndex:-1},r>o?(e.sortIndex=r,n(u,e),null===s(c)&&e===s(u)&&(g?(_(T),T=-1):g=!0,D(k,r-o))):(e.sortIndex=a,n(c,e),m||f||(m=!0,S||(S=!0,x()))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},960:(e,t,n)=>{"use strict";e.exports=n(799)},980:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const i=s(n(210));t.PostgrestClient=i.default;const r=s(n(829));t.PostgrestQueryBuilder=r.default;const o=s(n(355));t.PostgrestFilterBuilder=o.default;const a=s(n(374));t.PostgrestTransformBuilder=a.default;const l=s(n(286));t.PostgrestBuilder=l.default;const c=s(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:i.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default}},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},998:function(e,t,n){!function(e,t,n,s){"use strict";var i=function(e,t,n){return{endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}},r=function(e,t,n){return{endTime:t,insertTime:n,type:"linearRampToValue",value:e}},o=function(e,t){return{startTime:t,type:"setValue",value:e}},a=function(e,t,n){return{duration:n,startTime:t,type:"setValueCurve",values:e}},l=function(e,t,n){var s=n.startTime,i=n.target,r=n.timeConstant;return i+(t-i)*Math.exp((s-e)/r)},c=function(e){return"exponentialRampToValue"===e.type},u=function(e){return"linearRampToValue"===e.type},h=function(e){return c(e)||u(e)},d=function(e){return"setValue"===e.type},p=function(e){return"setValueCurve"===e.type},f=function(e,t,n,s){var i=e[t];return void 0===i?s:h(i)||d(i)?i.value:p(i)?i.values[i.values.length-1]:l(n,f(e,t-1,i.startTime,s),i)},m=function(e,t,n,s,i){return void 0===n?[s.insertTime,i]:h(n)?[n.endTime,n.value]:d(n)?[n.startTime,n.value]:p(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,f(e,t-1,n.startTime,i)]},g=function(e){return"cancelAndHold"===e.type},y=function(e){return"cancelScheduledValues"===e.type},v=function(e){return g(e)||y(e)?e.cancelTime:c(e)||u(e)?e.endTime:e.startTime},_=function(e,t,n,s){var i=s.endTime,r=s.value;return n===r?r:0<n&&0<r||n<0&&r<0?n*Math.pow(r/n,(e-t)/(i-t)):0},b=function(e,t,n,s){return n+(e-t)/(s.endTime-t)*(s.value-n)},w=function(e,t){var n=Math.floor(t),s=Math.ceil(t);return n===s?e[n]:(1-(t-n))*e[n]+(1-(s-t))*e[s]},k=function(e,t){var n=t.duration,s=t.startTime,i=t.values,r=(e-s)/n*(i.length-1);return w(i,r)},x=function(e){return"setTarget"===e.type},S=function(){function e(t){n(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return s(e,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(e){var t=v(e);if(g(e)||y(e)){var n=this._automationEvents.findIndex(function(n){return y(e)&&p(n)?n.startTime+n.duration>=t:v(n)>=t}),s=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),g(e)){var l=this._automationEvents[this._automationEvents.length-1];if(void 0!==s&&h(s)){if(void 0!==l&&x(l))throw new Error("The internal list is malformed.");var d=void 0===l?s.insertTime:p(l)?l.startTime+l.duration:v(l),f=void 0===l?this._defaultValue:p(l)?l.values[l.values.length-1]:l.value,m=c(s)?_(t,d,f,s):b(t,d,f,s),w=c(s)?i(m,t,this._currenTime):r(m,t,this._currenTime);this._automationEvents.push(w)}if(void 0!==l&&x(l)&&this._automationEvents.push(o(this.getValue(t),t)),void 0!==l&&p(l)&&l.startTime+l.duration>t){var k=t-l.startTime,S=(l.values.length-1)/l.duration,T=Math.max(2,1+Math.ceil(k*S)),C=k/(T-1)*S,E=l.values.slice(0,T);if(C<1)for(var A=1;A<T;A+=1){var O=C*A%1;E[A]=l.values[A-1]*(1-O)+l.values[A]*O}this._automationEvents[this._automationEvents.length-1]=a(E,l.startTime,k)}}}else{var R=this._automationEvents.findIndex(function(e){return v(e)>t}),P=-1===R?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[R-1];if(void 0!==P&&p(P)&&v(P)+P.duration>t)return!1;var D=c(e)?i(e.value,e.endTime,this._currenTime):u(e)?r(e.value,t,this._currenTime):e;if(-1===R)this._automationEvents.push(D);else{if(p(e)&&t+e.duration>v(this._automationEvents[R]))return!1;this._automationEvents.splice(R,0,D)}}return!0}},{key:"flush",value:function(e){var t=this._automationEvents.findIndex(function(t){return v(t)>e});if(t>1){var n=this._automationEvents.slice(t-1),s=n[0];x(s)&&n.unshift(o(f(this._automationEvents,t-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(e){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents.findIndex(function(t){return v(t)>e}),s=this._automationEvents[n],i=(-1===n?this._automationEvents.length:n)-1,r=this._automationEvents[i];if(void 0!==r&&x(r)&&(void 0===s||!h(s)||s.insertTime>e))return l(e,f(this._automationEvents,i-1,r.startTime,this._defaultValue),r);if(void 0!==r&&d(r)&&(void 0===s||!h(s)))return r.value;if(void 0!==r&&p(r)&&(void 0===s||!h(s)||r.startTime+r.duration>e))return e<r.startTime+r.duration?k(e,r):r.values[r.values.length-1];if(void 0!==r&&h(r)&&(void 0===s||!h(s)))return r.value;if(void 0!==s&&c(s)){var o=m(this._automationEvents,i,r,s,this._defaultValue),a=t(o,2),g=a[0],y=a[1];return _(e,g,y,s)}if(void 0!==s&&u(s)){var w=m(this._automationEvents,i,r,s,this._defaultValue),S=t(w,2),T=S[0],C=S[1];return b(e,T,C,s)}return this._defaultValue}}])}(),T=function(e){return{cancelTime:e,type:"cancelAndHold"}},C=function(e){return{cancelTime:e,type:"cancelScheduledValues"}},E=function(e,t){return{endTime:t,type:"exponentialRampToValue",value:e}},A=function(e,t){return{endTime:t,type:"linearRampToValue",value:e}},O=function(e,t,n){return{startTime:t,target:e,timeConstant:n,type:"setTarget"}};e.AutomationEventList=S,e.createCancelAndHoldAutomationEvent=T,e.createCancelScheduledValuesAutomationEvent=C,e.createExponentialRampToValueAutomationEvent=E,e.createLinearRampToValueAutomationEvent=A,e.createSetTargetAutomationEvent=O,e.createSetValueAutomationEvent=o,e.createSetValueCurveAutomationEvent=a}(t,n(715),n(383),n(579))}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,s)=>(n.f[s](e,t),t),[])),n.u=e=>"static/js/"+e+".593297dc.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="beatlab:";n.l=(s,i,r,o)=>{if(e[s])e[s].push(i);else{var a,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==s||h.getAttribute("data-webpack")==t+r){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+r),a.src=s),e[s]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var i=e[s];if(delete e[s],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(n)),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/BeatLab/",(()=>{var e={792:0};n.f.j=(t,s)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)s.push(i[2]);else{var r=new Promise((n,s)=>i=e[t]=[n,s]);s.push(i[2]=r);var o=n.p+n.u(t),a=new Error;n.l(o,s=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",a.name="ChunkLoadError",a.type=r,a.request=o,i[1](a)}},"chunk-"+t,t)}};var t=(t,s)=>{var i,r,o=s[0],a=s[1],l=s[2],c=0;if(o.some(t=>0!==e[t])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(s);c<o.length;c++)r=o[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0},s=self.webpackChunkbeatlab=self.webpackChunkbeatlab||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{assert:()=>ui,assertContextRunning:()=>di,assertRange:()=>hi,assertUsedScheduleTime:()=>gi,enterScheduledCallback:()=>mi,log:()=>_i,setLogger:()=>vi,warn:()=>bi});var t={};n.r(t);var s={};n.r(s),n.d(s,{AMOscillator:()=>vo,AMSynth:()=>Xo,Abs:()=>No,Add:()=>To,AmplitudeEnvelope:()=>Go,Analyser:()=>gl,AudioToGain:()=>go,AutoFilter:()=>Ma,AutoPanner:()=>ja,AutoWah:()=>Ia,BaseContext:()=>Ki,BiquadFilter:()=>Yo,BitCrusher:()=>La,Buffer:()=>Xl,BufferSource:()=>$l,Buffers:()=>Yl,Channel:()=>Sl,Chebyshev:()=>za,Chorus:()=>Ga,Clock:()=>qr,Compressor:()=>Ol,Context:()=>Xi,Convolver:()=>jl,CrossFade:()=>Ra,DCMeter:()=>bl,Delay:()=>Lr,Destination:()=>Vl,Distortion:()=>Qa,Draw:()=>Hl,DuoSynth:()=>ea,EQ3:()=>Nl,Emitter:()=>Qi,Envelope:()=>Uo,FFT:()=>_l,FMOscillator:()=>_o,FMSynth:()=>ta,FatOscillator:()=>wo,FeedbackCombFilter:()=>ha,FeedbackDelay:()=>Xa,Filter:()=>$o,Follower:()=>Fa,Freeverb:()=>el,Frequency:()=>_r,FrequencyClass:()=>gr,FrequencyEnvelope:()=>Jo,FrequencyShifter:()=>$a,Gain:()=>Rr,GainToAudio:()=>jo,Gate:()=>Rl,GrainPlayer:()=>Mo,GreaterThan:()=>Lo,GreaterThanZero:()=>qo,IntervalTimeline:()=>Yr,JCReverb:()=>il,LFO:()=>Ao,Limiter:()=>Pl,Listener:()=>Bl,Loop:()=>va,LowpassCombFilter:()=>pa,Master:()=>zl,MembraneSynth:()=>ia,Merge:()=>Ba,MetalSynth:()=>sa,Meter:()=>vl,MidSideCompressor:()=>Dl,MidSideMerge:()=>hl,MidSideSplit:()=>ul,Midi:()=>Gr,MidiClass:()=>Hr,Mono:()=>Tl,MonoSynth:()=>Zo,MultibandCompressor:()=>Ml,MultibandSplit:()=>Cl,Multiply:()=>yo,Negate:()=>Fo,Noise:()=>ao,NoiseSynth:()=>ra,Offline:()=>Br,OfflineContext:()=>er,OmniOscillator:()=>So,OnePoleFilter:()=>da,Oscillator:()=>mo,PWMOscillator:()=>ko,PanVol:()=>xl,Panner:()=>Na,Panner3D:()=>El,Param:()=>Sr,Part:()=>_a,Pattern:()=>Aa,Phaser:()=>ll,PingPongDelay:()=>ol,PitchShift:()=>al,Player:()=>Po,Players:()=>Do,PluckSynth:()=>fa,PolySynth:()=>ma,Pow:()=>to,PulseOscillator:()=>bo,Recorder:()=>Al,Reverb:()=>cl,Sampler:()=>ga,Scale:()=>Co,ScaleExp:()=>Vo,Sequence:()=>Oa,Signal:()=>Mr,Solo:()=>kl,Split:()=>Ua,StateTimeline:()=>xr,StereoWidener:()=>pl,Subtract:()=>Io,SyncedSignal:()=>zo,Synth:()=>Qo,Ticks:()=>Kr,TicksClass:()=>Qr,Time:()=>mr,TimeClass:()=>fr,Timeline:()=>Ui,ToneAudioBuffer:()=>Zi,ToneAudioBuffers:()=>Wr,ToneAudioNode:()=>Tr,ToneBufferSource:()=>oo,ToneEvent:()=>ya,ToneOscillatorNode:()=>fo,Transport:()=>ql,TransportTime:()=>wr,TransportTimeClass:()=>br,Tremolo:()=>fl,Unit:()=>t,UserMedia:()=>ho,Vibrato:()=>ml,Volume:()=>Vr,WaveShaper:()=>eo,Waveform:()=>wl,Zero:()=>Eo,connect:()=>Er,connectSeries:()=>Cr,connectSignal:()=>Nr,context:()=>Ql,dbToGain:()=>or,debug:()=>e,defaultArg:()=>Mi,disconnect:()=>Ar,fanIn:()=>Or,ftom:()=>ur,gainToDb:()=>ar,getContext:()=>sr,getDestination:()=>Ul,getDraw:()=>Gl,getListener:()=>Wl,getTransport:()=>Ll,immediate:()=>Il,intervalToFrequencyRatio:()=>lr,isArray:()=>ai,isBoolean:()=>oi,isDefined:()=>ni,isFunction:()=>si,isNote:()=>ci,isNumber:()=>ii,isObject:()=>ri,isString:()=>li,isUndef:()=>ti,loaded:()=>Kl,mtof:()=>dr,now:()=>Fl,optionsFromArguments:()=>Di,setContext:()=>ir,start:()=>rr,supported:()=>ei,version:()=>m});var i=n(43),r=n(391);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=o(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function l(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=n(393),d=n.n(h);const p=e=>{try{const t=JSON.stringify(e),n=d().compressToBase64(t);return n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")}catch(t){return console.error("Failed to encode pattern payload:",t),""}},f=e=>{try{const t=(e=>{const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-(t.length%4||4))%4;return t+"=".repeat(n)})(e),n=d().decompressFromBase64(t);return n?JSON.parse(n):null}catch(t){return console.error("Failed to decode pattern payload:",t),null}},m="15.1.22";var g=n(998);const y=new WeakSet,v=new WeakMap,_=new WeakMap,b=new WeakMap,w=new WeakMap,k=new WeakMap,x=new WeakMap,S=new WeakMap,T=new WeakMap,C=new WeakMap,E={construct:()=>E},A=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,O=(e,t)=>{const n=[];let s=e.replace(/^[\s]+/,""),i=s.match(A);for(;null!==i;){const e=i[1].slice(1,-1),r=i[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());n.push(r),s=s.slice(i[0].length).replace(/^[\s]+/,""),i=s.match(A)}return[n.join(";"),s]},R=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},P=e=>{if(!(e=>{try{new new Proxy(e,E)}catch(t){return!1}return!0})(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!==typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},D=(e,t)=>{const n=e.get(t);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},M=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[s]=n;return e.delete(s),s},N=(e,t,n,s)=>{const i=D(e,t),r=M(i,e=>e[0]===n&&e[1]===s);return 0===i.size&&e.delete(t),r},j=e=>D(x,e),F=e=>{if(y.has(e))throw new Error("The AudioNode is already stored.");y.add(e),j(e).forEach(e=>e(!0))},I=e=>"port"in e,q=e=>{if(!y.has(e))throw new Error("The AudioNode is not stored.");y.delete(e),j(e).forEach(e=>e(!1))},L=(e,t)=>{!I(e)&&t.every(e=>0===e.size)&&q(e)},V={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},z=(e,t)=>e.context===t,U=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch(t){return!1}return!0},B=()=>new DOMException("","IndexSizeError"),W=e=>{var t;e.getChannelData=(t=e.getChannelData,n=>{try{return t.call(e,n)}catch(s){if(12===s.code)throw B();throw s}})},H={numberOfChannels:1},G=-34028234663852886e22,Q=-G,K=e=>y.has(e),X={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Y=e=>D(v,e),$=e=>D(b,e),J=(e,t)=>{const{activeInputs:n}=Y(e);n.forEach(n=>n.forEach(n=>{let[s]=n;t.includes(e)||J(s,[...t,e])}));const s=(e=>"playbackRate"in e)(e)?[e.playbackRate]:I(e)?Array.from(e.parameters.values()):(e=>"frequency"in e&&"gain"in e)(e)?[e.Q,e.detune,e.frequency,e.gain]:(e=>"offset"in e)(e)?[e.offset]:(e=>!("frequency"in e)&&"gain"in e)(e)?[e.gain]:(e=>"detune"in e&&"frequency"in e&&!("gain"in e))(e)?[e.detune,e.frequency]:(e=>"pan"in e)(e)?[e.pan]:[];for(const i of s){const e=$(i);void 0!==e&&e.activeInputs.forEach(e=>{let[n]=e;return J(n,t)})}K(e)&&q(e)},Z=e=>{J(e.destination,[])},ee=e=>void 0===e||"number"===typeof e||"string"===typeof e&&("balanced"===e||"interactive"===e||"playback"===e),te=e=>"context"in e,ne=e=>te(e[0]),se=(e,t,n,s)=>{for(const i of e)if(n(i)){if(s)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},ie=(e,t,n,s)=>{let[i,r]=n;se(e,[t,i,r],e=>e[0]===t&&e[1]===i,s)},re=(e,t,n)=>{let[s,i,r]=t;const o=e.get(s);void 0===o?e.set(s,new Set([[i,r]])):se(o,[i,r],e=>e[0]===i,n)},oe=e=>"inputs"in e,ae=(e,t,n,s)=>{if(oe(t)){const i=t.inputs[s];return e.connect(i,n,0),[i,n,0]}return e.connect(t,n,s),[t,n,s]},le=(e,t,n)=>{for(const s of e)if(s[0]===t&&s[1]===n)return e.delete(s),s;return null},ce=(e,t)=>{if(!j(e).delete(t))throw new Error("Missing the expected event listener.")},ue=(e,t,n)=>{const s=D(e,t),i=M(s,e=>e[0]===n);return 0===s.size&&e.delete(t),i},he=(e,t,n,s)=>{oe(t)?e.disconnect(t.inputs[s],n,0):e.disconnect(t,n,s)},de=e=>D(_,e),pe=e=>D(w,e),fe=e=>S.has(e),me=e=>!y.has(e),ge=(e,t)=>new Promise(n=>{if(null!==t)n(!0);else{const t=e.createScriptProcessor(256,1,1),s=e.createGain(),i=e.createBuffer(1,2,44100),r=i.getChannelData(0);r[0]=1,r[1]=1;const o=e.createBufferSource();o.buffer=i,o.loop=!0,o.connect(t).connect(e.destination),o.connect(s),o.disconnect(s),t.onaudioprocess=s=>{const i=s.inputBuffer.getChannelData(0);Array.prototype.some.call(i,e=>1===e)?n(!0):n(!1),o.stop(),t.onaudioprocess=null,o.disconnect(t),t.disconnect(e.destination)},o.start()}}),ye=(e,t)=>{const n=new Map;for(const s of e)for(const e of s){const t=n.get(e);n.set(e,void 0===t?1:t+1)}n.forEach((e,n)=>t(n,e))},ve=e=>"context"in e,_e=e=>{const t=new Map;e.connect=(e=>function(n){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=ve(n)?e(n,s,i):e(n,s),o=t.get(n);return void 0===o?t.set(n,[{input:i,output:s}]):o.every(e=>e.input!==i||e.output!==s)&&o.push({input:i,output:s}),r})(e.connect.bind(e)),e.disconnect=(n=>(s,i,r)=>{if(n.apply(e),void 0===s)t.clear();else if("number"===typeof s)for(const[e,n]of t){const i=n.filter(e=>e.output!==s);0===i.length?t.delete(e):t.set(e,i)}else if(t.has(s))if(void 0===i)t.delete(s);else{const e=t.get(s);if(void 0!==e){const n=e.filter(e=>e.output!==i&&(e.input!==r||void 0===r));0===n.length?t.delete(s):t.set(s,n)}}for(const[n,o]of t)o.forEach(t=>{ve(n)?e.connect(n,t.output,t.input):e.connect(n,t.output)})})(e.disconnect)},be=(e,t,n,s)=>{const{activeInputs:i,passiveInputs:r}=$(t),{outputs:o}=Y(e),a=j(e),l=o=>{const a=de(e),l=pe(t);if(o){const t=ue(r,e,n);ie(i,e,t,!1),s||fe(e)||a.connect(l,n)}else{const t=((e,t,n)=>M(e,e=>e[0]===t&&e[1]===n))(i,e,n);re(r,t,!1),s||fe(e)||a.disconnect(l,n)}};return!!se(o,[t,n],e=>e[0]===t&&e[1]===n,!0)&&(a.add(l),K(e)?ie(i,e,[n,l],!0):re(r,[e,n,l],!0),!0)},we=(e,t,n,s,i)=>{const[r,o]=((e,t,n,s)=>{const{activeInputs:i,passiveInputs:r}=Y(t),o=le(i[s],e,n);if(null===o)return[N(r,e,n,s)[2],!1];return[o[2],!0]})(e,n,s,i);if(null!==r&&(ce(e,r),!o||t||fe(e)||he(de(e),de(n),s,i)),K(n)){const{activeInputs:e}=Y(n);L(n,e)}},ke=(e,t,n,s)=>{const[i,r]=((e,t,n)=>{const{activeInputs:s,passiveInputs:i}=$(t),r=le(s,e,n);if(null===r)return[ue(i,e,n)[1],!1];return[r[2],!0]})(e,n,s);null!==i&&(ce(e,i),!r||t||fe(e)||de(e).disconnect(pe(n),s))};class xe{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._map.forEach((n,s)=>e.call(t,n,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Se={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function Te(e,t,n,s,i){if("function"===typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],s,i);else{const r=e.getChannelData(s);if(0===t[n].byteLength)t[n]=r.slice(i,i+128);else{const e=new Float32Array(r.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(e)}}}const Ce=(e,t,n,s,i)=>{"function"===typeof e.copyToChannel?0!==t[n].byteLength&&e.copyToChannel(t[n],s,i):0!==t[n].byteLength&&e.getChannelData(s).set(t[n],i)},Ee=(e,t)=>{const n=[];for(let s=0;s<e;s+=1){const e=[],i="number"===typeof t?t:t[s];for(let t=0;t<i;t+=1)e.push(new Float32Array(128));n.push(e)}return n},Ae=async(e,t,n,s,i,r,o)=>{const a=null===t?128*Math.ceil(e.context.length/128):t.length,l=s.channelCount*s.numberOfInputs,c=i.reduce((e,t)=>e+t,0),h=0===c?null:n.createBuffer(c,a,n.sampleRate);if(void 0===r)throw new Error("Missing the processor constructor.");const d=Y(e),p=await((e,t)=>{const n=D(C,e),s=de(t);return D(n,s)})(n,e),f=Ee(s.numberOfInputs,s.channelCount),m=Ee(s.numberOfOutputs,i),g=Array.from(e.parameters.keys()).reduce((e,t)=>u(u({},e),{},{[t]:new Float32Array(128)}),{});for(let u=0;u<a;u+=128){if(s.numberOfInputs>0&&null!==t)for(let e=0;e<s.numberOfInputs;e+=1)for(let n=0;n<s.channelCount;n+=1)Te(t,f[e],n,n,u);void 0!==r.parameterDescriptors&&null!==t&&r.parameterDescriptors.forEach((e,n)=>{let{name:s}=e;Te(t,g,s,l+n,u)});for(let e=0;e<s.numberOfInputs;e+=1)for(let t=0;t<i[e];t+=1)0===m[e][t].byteLength&&(m[e][t]=new Float32Array(128));try{const e=f.map((e,t)=>0===d.activeInputs[t].size?[]:e),t=o(u/n.sampleRate,n.sampleRate,()=>p.process(e,m,g));if(null!==h)for(let n=0,r=0;n<s.numberOfOutputs;n+=1){for(let e=0;e<i[n];e+=1)Ce(h,m[n],e,r+e,u);r+=i[n]}if(!t)break}catch(y){e.dispatchEvent(new ErrorEvent("processorerror",{colno:y.colno,filename:y.filename,lineno:y.lineno,message:y.message}));break}}return h},Oe={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Re={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Pe={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},De={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Me={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Ne=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise(s=>{const i=()=>{n.onmessage=null,t.close(),n.close(),s()};n.onmessage=()=>i();try{t.postMessage(e,[e])}catch(r){}finally{i()}})},je={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Fe=(e,t,n)=>{const s=t[n];if(void 0===s)throw e();return s},Ie={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},qe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Le=()=>new DOMException("","InvalidStateError"),Ve=()=>new DOMException("","InvalidAccessError"),ze={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Ue=(e,t,n,s,i,r,o,a,l,c,u)=>{const h=c.length;let d=a;for(let p=0;p<h;p+=1){let a=n[0]*c[p];for(let t=1;t<i;t+=1){const s=d-t&l-1;a+=n[t]*r[s],a-=e[t]*o[s]}for(let e=i;e<s;e+=1)a+=n[e]*r[d-e&l-1];for(let n=i;n<t;n+=1)a-=e[n]*o[d-n&l-1];r[d]=c[p],o[d]=a,d=d+1&l-1,u[p]=a}return d},Be={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},We=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,()=>{});return void 0!==n&&(n.catch(()=>{}),!0)}catch(n){}return!1},He={numberOfChannels:1},Ge=(e,t,n)=>{const s=t[n];void 0!==s&&s!==e[n]&&(e[n]=s)},Qe=(e,t)=>{Ge(e,t,"channelCount"),Ge(e,t,"channelCountMode"),Ge(e,t,"channelInterpretation")},Ke=e=>"function"===typeof e.getFloatTimeDomainData,Xe=(e,t,n)=>{const s=t[n];void 0!==s&&s!==e[n].value&&(e[n].value=s)},Ye=e=>{e.start=(t=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if("number"===typeof i&&i<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,s,i)})(e.start)},$e=e=>{var t;e.stop=(t=e.stop,function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})},Je=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),Ze=async(e,t)=>{const n=await(e=>new Promise((t,n)=>{const{port1:s,port2:i}=new MessageChannel;s.onmessage=e=>{let{data:n}=e;s.close(),i.close(),t(n)},s.onmessageerror=e=>{let{data:t}=e;s.close(),i.close(),n(t)},i.postMessage(e)}))(t);return new e(n)},et=(e,t)=>{const n=e.createBiquadFilter();return Qe(n,t),Xe(n,t,"Q"),Xe(n,t,"detune"),Xe(n,t,"frequency"),Xe(n,t,"gain"),Ge(n,t,"type"),n},tt=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return Qe(n,t),(e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Le()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw Le()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw Le()}})})(n),n};function nt(e,t){if(null==e)return{};var n,s,i=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;n[s]=e[s]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const st=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),it=["offset"],rt=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return Qe(n,t),Xe(n,t,"delayTime"),n},ot=(e,t)=>{const n=e.createGain();return Qe(n,t),Xe(n,t,"gain"),n};function at(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function lt(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function ct(e,t){let n=[0,0];for(let s=e.length-1;s>=0;s-=1)n=lt(n,t),n[0]+=e[s];return n}const ut=["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"],ht=(e,t,n,s)=>e.createScriptProcessor(t,n,s),dt=["channelCount","channelCountMode","pan"],pt=["curve","oversample"],ft=()=>new DOMException("","NotSupportedError"),mt={numberOfChannels:1},gt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},yt={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},vt={disableNormalization:!1},_t={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},bt=()=>new DOMException("","UnknownError"),wt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},kt=(e,t,n)=>void 0===e.copyFromChannel?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),xt=e=>{if(null===e)return!1;const t=e.length;return t%2!==0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},St=(e,t,n,s)=>{let i=e;for(;!i.hasOwnProperty(t);)i=Object.getPrototypeOf(i);const{get:r,set:o}=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(e,t,{get:n(r),set:s(o)})},Tt=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(s){if(9!==s.code)throw s;Tt(e,t,n+1e-7)}},Ct=e=>{const t=e.createOscillator();try{t.start(-1)}catch(n){return n instanceof RangeError}return!1},Et=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch(s){return!1}},At=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(n){return n instanceof RangeError}return!1},Ot=()=>{try{new DOMException}catch(e){return!1}return!0},Rt=()=>new Promise(e=>{const t=new ArrayBuffer(0),{port1:n,port2:s}=new MessageChannel;n.onmessage=t=>{let{data:n}=t;return e(null!==n)},s.postMessage(t,[t])}),Pt=(e,t)=>{const n=t.createGain();e.connect(n);const s=(t=>()=>{t.call(e,n),e.removeEventListener("ended",s)})(e.disconnect);e.addEventListener("ended",s),st(e,n),e.stop=(t=>{let s=!1;return function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(s)try{t.call(e,i)}catch(r){n.gain.setValueAtTime(0,i)}else t.call(e,i),s=!0}})(e.stop)},Dt=(e,t)=>n=>{const s={value:e};return Object.defineProperties(n,{currentTarget:s,target:s}),"function"===typeof t?t.call(e,n):t.handleEvent.call(e,n)},Mt=(e=>(t,n,s,i)=>{let[r,o,a]=s;e(t[o],[n,r,a],e=>e[0]===n&&e[1]===r,i)})(se),Nt=(e=>(t,n,s,i)=>{let[r,o,a]=s;const l=t.get(r);void 0===l?t.set(r,new Set([[o,n,a]])):e(l,[o,n,a],e=>e[0]===o&&e[1]===n,i)})(se),jt=(e=>(t,n,s,i)=>e(t[i],e=>e[0]===n&&e[1]===s))(M),Ft=new WeakMap,It=(e=>t=>{var n;return null!==(n=e.get(t))&&void 0!==n?n:0})(Ft),qt=(Lt=new Map,Vt=new WeakMap,(e,t)=>{const n=Vt.get(e);if(void 0!==n)return n;const s=Lt.get(e);if(void 0!==s)return s;try{const n=t();return n instanceof Promise?(Lt.set(e,n),n.catch(()=>!1).then(t=>(Lt.delete(e),Vt.set(e,t),t))):(Vt.set(e,n),n)}catch(i){return Vt.set(e,!1),!1}});var Lt,Vt;const zt="undefined"===typeof window?null:window,Ut=((e,t)=>(n,s)=>{const i=n.createAnalyser();if(Qe(i,s),!(s.maxDecibels>s.minDecibels))throw t();return Ge(i,s,"fftSize"),Ge(i,s,"maxDecibels"),Ge(i,s,"minDecibels"),Ge(i,s,"smoothingTimeConstant"),e(Ke,()=>Ke(i))||(e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const s=Math.max(n.length,e.fftSize);for(let e=0;e<s;e+=1)t[e]=.0078125*(n[e]-128);return t}})(i),i})(qt,B),Bt=(e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(Y),Wt=((e,t,n)=>async(s,i,r)=>{const o=e(s);await Promise.all(o.activeInputs.map((e,o)=>Array.from(e).map(async e=>{let[a,l]=e;const c=t(a),u=await c.render(a,i),h=s.context.destination;n(a)||s===h&&n(s)||u.connect(r,l,o)})).reduce((e,t)=>[...e,...t],[]))})(Y,Bt,fe),Ht=((e,t,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=t(i);if(!z(o,r)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=e(r,t)}return s.set(r,o),await n(i,r,o),o})(i,r)}}})(Ut,de,Wt),Gt=(Qt=k,e=>{const t=Qt.get(e);if(void 0===t)throw Le();return t});var Qt;const Kt=(e=>null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null)(zt),Xt=(e=>t=>null!==e&&t instanceof e)(Kt),Yt=new WeakMap,$t=(e=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(t,n,s){if(null!==n){let i=this._listeners.get(n);void 0===i&&(i=e(this,n),"function"===typeof n&&this._listeners.set(n,i)),this._nativeEventTarget.addEventListener(t,i,s)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const s=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===s?null:s,n)}})(Dt),Jt=(e=>null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null)(zt),Zt=(e=>t=>null!==e&&t instanceof e)(Jt),en=(e=>t=>null!==e&&"function"===typeof e.AudioNode&&t instanceof e.AudioNode)(zt),tn=(e=>t=>null!==e&&"function"===typeof e.AudioParam&&t instanceof e.AudioParam)(zt),nn=(e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null)(zt),sn=((e,t,n,s,i,r,o,a,l,c,u,h,d,p,f,m)=>class extends c{constructor(t,s,i,r){super(i),this._context=t,this._nativeAudioNode=i;const o=u(t);h(o)&&!0!==n(ge,()=>ge(o,m))&&_e(i),_.set(this,i),x.set(this,new Set),"closed"!==t.state&&s&&F(this),e(this,r,i)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw i();const c=u(this._context),h=f(c);if(d(e)||p(e))throw r();if(te(e)){const i=de(e);try{const t=ae(this._nativeAudioNode,i,n,a),s=me(this);(h||s)&&this._nativeAudioNode.disconnect(...t),"closed"!==this.context.state&&!s&&me(e)&&F(e)}catch(g){if(12===g.code)throw r();throw g}if(t(this,e,n,a,h)){const t=l([this],e);ye(t,s(h))}return e}const m=pe(e);if("playbackRate"===m.name&&1024===m.maxValue)throw o();try{this._nativeAudioNode.connect(m,n),(h||me(this))&&this._nativeAudioNode.disconnect(m,n)}catch(g){if(12===g.code)throw r();throw g}if(be(this,e,n,h)){const t=l([this],e);ye(t,s(h))}}disconnect(e,t,n){let s;const o=u(this._context),c=f(o);if(void 0===e)s=((e,t)=>{const n=Y(e),s=[];for(const i of n.outputs)ne(i)?we(e,t,...i):ke(e,t,...i),s.push(i[0]);return n.outputs.clear(),s})(this,c);else if("number"===typeof e){if(e<0||e>=this.numberOfOutputs)throw i();s=((e,t,n)=>{const s=Y(e),i=[];for(const r of s.outputs)r[1]===n&&(ne(r)?we(e,t,...r):ke(e,t,...r),i.push(r[0]),s.outputs.delete(r));return i})(this,c,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw i();if(te(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw i();if(s=((e,t,n,s,i)=>{const r=Y(e);return Array.from(r.outputs).filter(e=>e[0]===n&&(void 0===s||e[1]===s)&&(void 0===i||e[2]===i)).map(n=>(ne(n)?we(e,t,...n):ke(e,t,...n),r.outputs.delete(n),n[0]))})(this,c,e,t,n),0===s.length)throw r()}for(const i of s){const e=l([this],i);ye(e,a)}}})((rn=v,(e,t,n)=>{const s=[];for(let i=0;i<n.numberOfInputs;i+=1)s.push(new Set);rn.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),((e,t,n,s,i,r,o,a,l,c,u,h,d)=>{const p=new WeakMap;return(f,m,g,y,v)=>{const{activeInputs:_,passiveInputs:b}=r(m),{outputs:w}=r(f),k=a(f),x=r=>{const a=l(m),c=l(f);if(r){const t=N(b,f,g,y);e(_,f,t,!1),v||h(f)||n(c,a,g,y),d(m)&&F(m)}else{const e=s(_,f,g,y);t(b,y,e,!1),v||h(f)||i(c,a,g,y);const n=o(m);if(0===n)u(m)&&L(m,_);else{const e=p.get(m);void 0!==e&&clearTimeout(e),p.set(m,setTimeout(()=>{u(m)&&L(m,_)},1e3*n))}}};return!!c(w,[m,g,y],e=>e[0]===m&&e[1]===g&&e[2]===y,!0)&&(k.add(x),u(f)?e(_,f,[g,y,x],!0):t(b,y,[f,g,x],!0),!0)}})(Mt,Nt,ae,jt,he,Y,It,j,de,se,K,fe,me),qt,((e,t,n,s,i,r)=>o=>(a,l)=>{const c=e.get(a);if(void 0===c){if(!o&&r(a)){const e=s(a),{outputs:r}=n(a);for(const n of r)if(ne(n)){const i=s(n[0]);t(e,i,n[1],n[2])}else{const t=i(n[0]);e.disconnect(t,n[1])}}e.set(a,l)}else e.set(a,c+l)})(S,he,Y,de,pe,K),B,Ve,ft,((e,t,n,s,i,r,o,a)=>(l,c)=>{const u=t.get(l);if(void 0===u)throw new Error("Missing the expected cycle count.");const h=r(l.context),d=a(h);if(u===c){if(t.delete(l),!d&&o(l)){const t=s(l),{outputs:r}=n(l);for(const n of r)if(ne(n)){const i=s(n[0]);e(t,i,n[1],n[2])}else{const e=i(n[0]);t.connect(e,n[1])}}}else t.set(l,u-c)})(ae,S,Y,de,pe,Gt,K,Xt),((e,t,n)=>function s(i,r){const o=te(r)?r:n(e,r);if((e=>"delayTime"in e)(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];const{outputs:a}=t(o);return Array.from(a).map(e=>s([...i,o],e[0])).reduce((e,t)=>e.concat(t),[])})(Yt,Y,D),$t,Gt,Zt,en,tn,Xt,nn);var rn;const on=((e,t,n,s,i,r)=>class extends e{constructor(e,n){const o=i(e),a=u(u({},V),n),l=s(o,a);super(e,!1,l,r(o)?t():null),this._nativeAnalyserNode=l}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}})(sn,Ht,B,Ut,Gt,Xt),an=new WeakSet,ln=(e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null)(zt),cn=(un=new Uint32Array(1),e=>(un[0]=e,un[0]));var un;const hn=((e,t)=>n=>{n.copyFromChannel=function(s,i){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(i);if(o>=n.numberOfChannels)throw t();const a=n.length,l=n.getChannelData(o),c=s.length;for(let e=r<0?-r:0;e+r<a&&e<c;e+=1)s[e]=l[e+r]},n.copyToChannel=function(s,i){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(i);if(o>=n.numberOfChannels)throw t();const a=n.length,l=n.getChannelData(o),c=s.length;for(let e=r<0?-r:0;e+r<a&&e<c;e+=1)l[e+r]=s[e]}})(cn,B),dn=(e=>t=>{t.copyFromChannel=(n=>function(s,i){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(i);if(r<t.length)return n.call(t,s,o,r)})(t.copyFromChannel),t.copyToChannel=(n=>function(s,i){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(i);if(r<t.length)return n.call(t,s,o,r)})(t.copyToChannel)})(cn),pn=((e,t,n,s,i,r,o,a)=>{let l=null;return class c{constructor(c){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:p}=u(u({},H),c);null===l&&(l=new i(1,1,44100));const f=null!==s&&t(r,r)?new s({length:h,numberOfChannels:d,sampleRate:p}):l.createBuffer(d,h,p);if(0===f.numberOfChannels)throw n();return"function"!==typeof f.copyFromChannel?(o(f),W(f)):t(U,()=>U(f))||a(f),e.add(f),f}static[Symbol.hasInstance](t){return null!==t&&"object"===typeof t&&Object.getPrototypeOf(t)===c.prototype||e.has(t)}}})(an,qt,ft,ln,Kt,(e=>()=>{if(null===e)return!1;try{new e({length:1,sampleRate:44100})}catch(t){return!1}return!0})(ln),hn,dn),fn=(e=>(t,n)=>{const s=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(t.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(s),s.disconnect()};n.addEventListener("ended",i)})(ot),mn=((e,t,n)=>async(s,i,r)=>{const o=t(s);await Promise.all(Array.from(o.activeInputs).map(async t=>{let[s,o]=t;const a=e(s),l=await a.render(s,i);n(s)||l.connect(r,o)}))})(Bt,$,fe),gn=(e=>(t,n,s)=>e(n,t,s))(mn),yn=((e,t,n,s,i,r,o,a,l,c,u)=>(h,d)=>{const p=h.createBufferSource();return Qe(p,d),Xe(p,d,"playbackRate"),Ge(p,d,"buffer"),Ge(p,d,"loop"),Ge(p,d,"loopEnd"),Ge(p,d,"loopStart"),t(n,()=>n(h))||(e=>{e.start=(t=>{let n=!1;return function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(n)throw Le();t.call(e,s,i,r),n=!0}})(e.start)})(p),t(s,()=>s(h))||l(p),t(i,()=>i(h))||c(p,h),t(r,()=>r(h))||Ye(p),t(o,()=>o(h))||u(p,h),t(a,()=>a(h))||$e(p),e(h,p),p})(fn,qt,e=>{const t=e.createBufferSource();t.start();try{t.start()}catch(n){return!0}return!1},e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch(s){return!1}return!0},e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch(n){return!1}return!0},Ct,Et,At,e=>{e.start=(t=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;const r=e.buffer,o=null===r?s:Math.min(r.duration,s);null!==r&&o>r.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,o,i)})(e.start)},(e=>(t,n)=>{const s=n.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=s),e(t,"buffer",e=>()=>{const n=e.call(t);return n===s?null:n},e=>n=>e.call(t,null===n?s:n))})(St),Pt),vn=((e,t)=>(n,s,i)=>(e(s).replay(i),t(s,n,i)))((e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})($),mn),_n=((e,t,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null;return{set start(e){o=e},set stop(e){a=e},render(l,c){const u=r.get(c);return void 0!==u?Promise.resolve(u):(async(l,c)=>{let u=n(l);const h=z(u,c);if(!h){const e={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,loop:u.loop,loopEnd:u.loopEnd,loopStart:u.loopStart,playbackRate:u.playbackRate.value};u=t(c,e),null!==o&&u.start(...o),null!==a&&u.stop(a)}return r.set(c,u),h?await e(c,l.playbackRate,u.playbackRate):await s(c,l.playbackRate,u.playbackRate),await i(l,c,u),u})(l,c)}}})(gn,yn,de,vn,Wt),bn=((e,t,n,s,i,r,o,a,l,c,u,h,d)=>function(p,f,m){let y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const _=m.value,b=new g.AutomationEventList(_),w=f?s(b):null,k={get defaultValue(){return _},get maxValue(){return null===y?m.maxValue:y},get minValue(){return null===v?m.minValue:v},get value(){return m.value},set value(e){m.value=e,k.setValueAtTime(e,p.context.currentTime)},cancelAndHoldAtTime(e){if("function"===typeof m.cancelAndHoldAtTime)null===w&&b.flush(p.context.currentTime),b.add(i(e)),m.cancelAndHoldAtTime(e);else{const t=Array.from(b).pop();null===w&&b.flush(p.context.currentTime),b.add(i(e));const n=Array.from(b).pop();m.cancelScheduledValues(e),t!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return k},cancelScheduledValues:e=>(null===w&&b.flush(p.context.currentTime),b.add(r(e)),m.cancelScheduledValues(e),k),exponentialRampToValueAtTime(e,t){if(0===e)throw new RangeError;if(!Number.isFinite(t)||t<0)throw new RangeError;const n=p.context.currentTime;return null===w&&b.flush(n),0===Array.from(b).length&&(b.add(c(_,n)),m.setValueAtTime(_,n)),b.add(o(e,t)),m.exponentialRampToValueAtTime(e,t),k},linearRampToValueAtTime(e,t){const n=p.context.currentTime;return null===w&&b.flush(n),0===Array.from(b).length&&(b.add(c(_,n)),m.setValueAtTime(_,n)),b.add(a(e,t)),m.linearRampToValueAtTime(e,t),k},setTargetAtTime:(e,t,n)=>(null===w&&b.flush(p.context.currentTime),b.add(l(e,t,n)),m.setTargetAtTime(e,t,n),k),setValueAtTime:(e,t)=>(null===w&&b.flush(p.context.currentTime),b.add(c(e,t)),m.setValueAtTime(e,t),k),setValueCurveAtTime(e,t,n){const s=e instanceof Float32Array?e:new Float32Array(e);if(null!==h&&"webkitAudioContext"===h.name){const e=t+n,i=p.context.sampleRate,r=Math.ceil(t*i),o=Math.floor(e*i),a=o-r,l=new Float32Array(a);for(let u=0;u<a;u+=1){const e=(s.length-1)/n*((r+u)/i-t),o=Math.floor(e),a=Math.ceil(e);l[u]=o===a?s[o]:(1-(e-o))*s[o]+(1-(a-e))*s[a]}null===w&&b.flush(p.context.currentTime),b.add(u(l,t,n)),m.setValueCurveAtTime(l,t,n);const c=o/i;c<e&&d(k,l[l.length-1],c),d(k,s[s.length-1],e)}else null===w&&b.flush(p.context.currentTime),b.add(u(s,t,n)),m.setValueCurveAtTime(s,t,n);return k}};return n.set(k,m),t.set(k,p),e(k,w),k})((wn=b,(e,t)=>{wn.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),Yt,w,e=>({replay(t){for(const n of e)if("exponentialRampToValue"===n.type){const{endTime:e,value:s}=n;t.exponentialRampToValueAtTime(s,e)}else if("linearRampToValue"===n.type){const{endTime:e,value:s}=n;t.linearRampToValueAtTime(s,e)}else if("setTarget"===n.type){const{startTime:e,target:s,timeConstant:i}=n;t.setTargetAtTime(s,e,i)}else if("setValue"===n.type){const{startTime:e,value:s}=n;t.setValueAtTime(s,e)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:s,values:i}=n;t.setValueCurveAtTime(i,s,e)}}}}),g.createCancelAndHoldAutomationEvent,g.createCancelScheduledValuesAutomationEvent,g.createExponentialRampToValueAutomationEvent,g.createLinearRampToValueAutomationEvent,g.createSetTargetAutomationEvent,g.createSetValueAutomationEvent,g.createSetValueCurveAutomationEvent,Jt,Tt);var wn;const kn=((e,t,n,s,i,r,o,a)=>class extends e{constructor(e,s){const a=r(e),l=u(u({},X),s),c=i(a,l),h=o(a),d=h?t():null;super(e,!1,c,d),this._audioBufferSourceNodeRenderer=d,this._isBufferNullified=!1,this._isBufferSet=null!==l.buffer,this._nativeAudioBufferSourceNode=c,this._onended=null,this._playbackRate=n(this,h,c.playbackRate,Q,G)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){if(this._nativeAudioBufferSourceNode.buffer=e,null!==e){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"===typeof e?a(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===t?e:n}get playbackRate(){return this._playbackRate}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(this._nativeAudioBufferSourceNode.start(e,t,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[e,t]:[e,t,n]),"closed"!==this.context.state){F(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),K(this)&&q(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}})(sn,_n,bn,Le,yn,Gt,Xt,Dt),xn=((e,t,n,s,i,r,o,a)=>class extends e{constructor(e,n){const s=r(e),l=o(s),c=i(s,n,l);super(e,!1,c,l?t(a):null),this._isNodeOfNativeOfflineAudioContext=l,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(sn,e=>{const t=new WeakMap;return{render(n,s){const i=t.get(s);return void 0!==i?Promise.resolve(i):(async(n,s)=>{const i=s.destination;return t.set(s,i),await e(n,s,i),i})(n,s)}}},B,Le,((e,t)=>(n,s,i)=>{const r=n.destination;if(r.channelCount!==s)try{r.channelCount=s}catch(a){}i&&"explicit"!==r.channelCountMode&&(r.channelCountMode="explicit"),0===r.maxChannelCount&&Object.defineProperty(r,"maxChannelCount",{value:s});const o=e(n,{channelCount:s,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});return t(o,"channelCount",e=>()=>e.call(o),e=>t=>{e.call(o,t);try{r.channelCount=t}catch(n){if(t>r.maxChannelCount)throw n}}),t(o,"channelCountMode",e=>()=>e.call(o),e=>t=>{e.call(o,t),r.channelCountMode=t}),t(o,"channelInterpretation",e=>()=>e.call(o),e=>t=>{e.call(o,t),r.channelInterpretation=t}),Object.defineProperty(o,"maxChannelCount",{get:()=>r.maxChannelCount}),o.connect(r),o})(ot,St),Gt,Xt,Wt),Sn=((e,t,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=z(l,a);if(!c){const e={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=t(a,e)}return r.set(a,l),c?(await e(a,o.Q,l.Q),await e(a,o.detune,l.detune),await e(a,o.frequency,l.frequency),await e(a,o.gain,l.gain)):(await s(a,o.Q,l.Q),await s(a,o.detune,l.detune),await s(a,o.frequency,l.frequency),await s(a,o.gain,l.gain)),await i(o,a,l),l})(o,a)}}})(gn,et,de,vn,Wt),Tn=(e=>(t,n)=>e.set(t,n))(Ft),Cn=((e,t,n,s,i,r,o,a)=>class extends e{constructor(e,s){const l=r(e),c=u(u({},Oe),s),h=i(l,c),d=o(l);super(e,!1,h,d?n():null),this._Q=t(this,d,h.Q,Q,G),this._detune=t(this,d,h.detune,1200*Math.log2(Q),-1200*Math.log2(Q)),this._frequency=t(this,d,h.frequency,e.sampleRate/2,0),this._gain=t(this,d,h.gain,40*Math.log10(Q),G),this._nativeBiquadFilterNode=h,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n)}catch(i){if(11===i.code)throw s();throw i}if(e.length!==t.length||t.length!==n.length)throw s()}})(sn,bn,Sn,Ve,et,Gt,Xt,Tn),En=((e,t)=>(n,s,i)=>{const r=new Set;return n.connect=(i=>function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const c=0===r.size;if(t(o))return i.call(n,o,a,l),e(r,[o,a,l],e=>e[0]===o&&e[1]===a&&e[2]===l,!0),c&&s(),o;i.call(n,o,a),e(r,[o,a],e=>e[0]===o&&e[1]===a,!0),c&&s()})(n.connect),n.disconnect=(e=>(s,o,a)=>{const l=r.size>0;if(void 0===s)e.apply(n),r.clear();else if("number"===typeof s){e.call(n,s);for(const e of r)e[1]===s&&r.delete(e)}else{t(s)?e.call(n,s,o,a):e.call(n,s,o);for(const e of r)e[0]!==s||void 0!==o&&e[1]!==o||void 0!==a&&e[2]!==a||r.delete(e)}const c=0===r.size;l&&c&&i()})(n.disconnect),n})(se,en),An=((e,t)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const i=n.createBufferSource();t(s,()=>{const e=s.numberOfInputs;for(let t=0;t<e;t+=1)i.connect(s,0,t)},()=>i.disconnect(s))})(Le,En),On=((e,t)=>(n,s)=>{const i=n.createChannelMerger(s.numberOfInputs);return null!==e&&"webkitAudioContext"===e.name&&t(n,i),Qe(i,s),i})(Jt,An),Rn=((e,t,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=t(i);if(!z(o,r)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=e(r,t)}return s.set(r,o),await n(i,r,o),o})(i,r)}}})(On,de,Wt),Pn=((e,t,n,s,i)=>class extends e{constructor(e,r){const o=s(e),a=u(u({},Re),r);super(e,!1,n(o,a),i(o)?t():null)}})(sn,Rn,On,Gt,Xt),Dn=((e,t,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=t(i);if(!z(o,r)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=e(r,t)}return s.set(r,o),await n(i,r,o),o})(i,r)}}})(tt,de,Wt),Mn=((e,t,n,s,i,r)=>class extends e{constructor(e,o){const a=s(e),l=r(u(u({},Pe),o));super(e,!1,n(a,l),i(a)?t():null)}})(sn,Dn,tt,Gt,Xt,e=>u(u({},e),{},{channelCount:e.numberOfOutputs})),Nn=((e,t,n,s)=>(i,r)=>{let{offset:o}=r,a=nt(r,it);const l=i.createBuffer(1,2,44100),c=t(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),h=n(i,u(u({},a),{},{gain:o})),d=l.getChannelData(0);d[0]=1,d[1]=1,c.buffer=l,c.loop=!0;const p={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(e){h.channelCount=e},get channelCountMode(){return h.channelCountMode},set channelCountMode(e){h.channelCountMode=e},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(e){h.channelInterpretation=e},get context(){return h.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get offset(){return h.gain},get onended(){return c.onended},set onended(e){c.onended=e},addEventListener(){return c.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return c.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return c.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;c.start.call(c,e)},stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;c.stop.call(c,e)}};return e(i,c),s(st(p,h),()=>c.connect(h),()=>c.disconnect(h))})(fn,yn,ot,En),jn=((e,t,n,s,i)=>(r,o)=>{if(void 0===r.createConstantSource)return n(r,o);const a=r.createConstantSource();return Qe(a,o),Xe(a,o,"offset"),t(s,()=>s(r))||Ye(a),t(i,()=>i(r))||$e(a),e(r,a),a})(fn,qt,Nn,Ct,At),Fn=((e,t,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null;return{set start(e){o=e},set stop(e){a=e},render(l,c){const u=r.get(c);return void 0!==u?Promise.resolve(u):(async(l,c)=>{let u=n(l);const h=z(u,c);if(!h){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,offset:u.offset.value};u=t(c,e),null!==o&&u.start(o),null!==a&&u.stop(a)}return r.set(c,u),h?await e(c,l.offset,u.offset):await s(c,l.offset,u.offset),await i(l,c,u),u})(l,c)}}})(gn,jn,de,vn,Wt),In=((e,t,n,s,i,r,o)=>class extends e{constructor(e,o){const a=i(e),l=u(u({},De),o),c=s(a,l),h=r(a),d=h?n():null;super(e,!1,c,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=c,this._offset=t(this,h,c.offset,Q,G),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){const t="function"===typeof e?o(this,e):null;this._nativeConstantSourceNode.onended=t;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===t?e:n}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=e),"closed"!==this.context.state){F(this);const e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),K(this)&&q(this)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}})(sn,bn,Fn,jn,Gt,Xt,Dt),qn=((e,t)=>(n,s)=>{const i=n.createConvolver();if(Qe(i,s),s.disableNormalization===i.normalize&&(i.normalize=!s.disableNormalization),Ge(i,s,"buffer"),s.channelCount>2)throw e();if(t(i,"channelCount",e=>()=>e.call(i),t=>n=>{if(n>2)throw e();return t.call(i,n)}),"max"===s.channelCountMode)throw e();return t(i,"channelCountMode",e=>()=>e.call(i),t=>n=>{if("max"===n)throw e();return t.call(i,n)}),i})(ft,St),Ln=((e,t,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=t(i);if(!z(o,r)){const t={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=e(r,t)}return s.set(r,o),oe(o)?await n(i,r,o.inputs[0]):await n(i,r,o),o})(i,r)}}})(qn,de,Wt),Vn=((e,t,n,s,i,r)=>class extends e{constructor(e,o){const a=s(e),l=u(u({},Me),o),c=n(a,l);super(e,!1,c,i(a)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=c,null!==l.buffer&&r(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0,r(this,0)}else this._isBufferNullified=!1,r(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}})(sn,Ln,qn,Gt,Xt,Tn),zn=((e,t,n,s,i)=>r=>{const o=new WeakMap;return{render(a,l){const c=o.get(l);return void 0!==c?Promise.resolve(c):(async(a,l)=>{let c=n(a);const u=z(c,l);if(!u){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,delayTime:c.delayTime.value,maxDelayTime:r};c=t(l,e)}return o.set(l,c),u?await e(l,a.delayTime,c.delayTime):await s(l,a.delayTime,c.delayTime),await i(a,l,c),c})(a,l)}}})(gn,rt,de,vn,Wt),Un=((e,t,n,s,i,r,o)=>class extends e{constructor(e,a){const l=i(e),c=u(u({},je),a),h=s(l,c),d=r(l);super(e,!1,h,d?n(c.maxDelayTime):null),this._delayTime=t(this,d,h.delayTime),o(this,c.maxDelayTime)}get delayTime(){return this._delayTime}})(sn,bn,zn,rt,Gt,Xt,Tn),Bn=(e=>(t,n)=>{const s=t.createDynamicsCompressor();if(Qe(s,n),n.channelCount>2)throw e();if("max"===n.channelCountMode)throw e();return Xe(s,n,"attack"),Xe(s,n,"knee"),Xe(s,n,"ratio"),Xe(s,n,"release"),Xe(s,n,"threshold"),s})(ft),Wn=((e,t,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=z(l,a);if(!c){const e={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=t(a,e)}return r.set(a,l),c?(await e(a,o.attack,l.attack),await e(a,o.knee,l.knee),await e(a,o.ratio,l.ratio),await e(a,o.release,l.release),await e(a,o.threshold,l.threshold)):(await s(a,o.attack,l.attack),await s(a,o.knee,l.knee),await s(a,o.ratio,l.ratio),await s(a,o.release,l.release),await s(a,o.threshold,l.threshold)),await i(o,a,l),l})(o,a)}}})(gn,Bn,de,vn,Wt),Hn=((e,t,n,s,i,r,o,a)=>class extends e{constructor(e,i){const l=r(e),c=u(u({},Ie),i),h=s(l,c),d=o(l);super(e,!1,h,d?n():null),this._attack=t(this,d,h.attack),this._knee=t(this,d,h.knee),this._nativeDynamicsCompressorNode=h,this._ratio=t(this,d,h.ratio),this._release=t(this,d,h.release),this._threshold=t(this,d,h.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"===typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(sn,bn,Wn,Bn,ft,Gt,Xt,Tn),Gn=((e,t,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=z(l,a);if(!c){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=t(a,e)}return r.set(a,l),c?await e(a,o.gain,l.gain):await s(a,o.gain,l.gain),await i(o,a,l),l})(o,a)}}})(gn,ot,de,vn,Wt),Qn=((e,t,n,s,i,r)=>class extends e{constructor(e,o){const a=i(e),l=u(u({},qe),o),c=s(a,l),h=r(a);super(e,!1,c,h?n():null),this._gain=t(this,h,c.gain,Q,G)}get gain(){return this._gain}})(sn,bn,Gn,ot,Gt,Xt),Kn=((e,t,n,s)=>(i,r,o)=>{let{channelCount:a,channelCountMode:l,channelInterpretation:c,feedback:u,feedforward:h}=o;const d=Je(r,i.sampleRate),p=u instanceof Float64Array?u:new Float64Array(u),f=h instanceof Float64Array?h:new Float64Array(h),m=p.length,g=f.length,y=Math.min(m,g);if(0===m||m>20)throw s();if(0===p[0])throw t();if(0===g||g>20)throw s();if(0===f[0])throw t();if(1!==p[0]){for(let e=0;e<g;e+=1)f[e]/=p[0];for(let e=1;e<m;e+=1)p[e]/=p[0]}const v=n(i,d,a,a);v.channelCount=a,v.channelCountMode=l,v.channelInterpretation=c;const _=[],b=[],w=[];for(let e=0;e<a;e+=1){_.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),b.push(e),w.push(t)}v.onaudioprocess=e=>{const t=e.inputBuffer,n=e.outputBuffer,s=t.numberOfChannels;for(let i=0;i<s;i+=1){const e=t.getChannelData(i),s=n.getChannelData(i);_[i]=Ue(p,m,f,g,y,b[i],w[i],_[i],32,e,s)}};const k=i.sampleRate/2;return st({get bufferSize(){return d},get channelCount(){return v.channelCount},set channelCount(e){v.channelCount=e},get channelCountMode(){return v.channelCountMode},set channelCountMode(e){v.channelCountMode=e},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(e){v.channelInterpretation=e},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(){return v.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return v.dispatchEvent(arguments.length<=0?void 0:arguments[0])},getFrequencyResponse(t,n,s){if(t.length!==n.length||n.length!==s.length)throw e();const i=t.length;for(let e=0;e<i;e+=1){const i=-Math.PI*(t[e]/k),r=[Math.cos(i),Math.sin(i)],o=at(ct(f,r),ct(p,r));n[e]=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s[e]=Math.atan2(o[1],o[0])}},removeEventListener(){return v.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},v)})(Ve,Le,ht,ft),Xn=((e,t,n,s)=>i=>e(We,()=>We(i))?Promise.resolve(e(s,s)).then(e=>{if(!e){const e=n(i,512,0,1);i.oncomplete=()=>{e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=()=>i.currentTime,e.connect(i.destination)}return i.startRendering()}):new Promise(e=>{const n=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=t=>{n.disconnect(),e(t.renderedBuffer)},n.connect(i.destination),i.startRendering()}))(qt,ot,ht,((e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),s=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(e=>{n.oncomplete=()=>{s.disconnect(),e(0!==n.currentTime)},n.startRendering()})})(ot,Kt)),Yn=((e,t,n,s,i)=>(r,o)=>{const a=new WeakMap;let l=null;const c=async(c,u)=>{let h=null,d=t(c);const p=z(d,u);if(void 0===u.createIIRFilter?h=e(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(d=u.createIIRFilter(o,r)),a.set(u,null===h?d:h),null!==h){if(null===l){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new n(c.context.destination.channelCount,c.context.length,u.sampleRate);l=(async()=>{await s(c,e,e.destination);return((e,t,n,s)=>{const i=n instanceof Float64Array?n:new Float64Array(n),r=s instanceof Float64Array?s:new Float64Array(s),o=i.length,a=r.length,l=Math.min(o,a);if(1!==i[0]){for(let e=0;e<o;e+=1)r[e]/=i[0];for(let e=1;e<a;e+=1)i[e]/=i[0]}const c=new Float32Array(32),u=new Float32Array(32),h=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),d=e.numberOfChannels;for(let p=0;p<d;p+=1){const t=e.getChannelData(p),n=h.getChannelData(p);c.fill(0),u.fill(0),Ue(i,o,r,a,l,c,u,0,32,t,n)}return h})(await i(e),u,r,o)})()}const e=await l;return h.buffer=e,h.start(0),h}return await s(c,u,d),d};return{render(e,t){const n=a.get(t);return void 0!==n?Promise.resolve(n):c(e,t)}}})(yn,de,Kt,Wt,Xn),$n=(e=>(t,n,s)=>{if(void 0===t.createIIRFilter)return e(t,n,s);const i=t.createIIRFilter(s.feedforward,s.feedback);return Qe(i,s),i})(Kn),Jn=((e,t,n,s,i,r)=>class extends e{constructor(e,o){const a=s(e),l=i(a),c=u(u({},ze),o),h=t(a,l?null:e.baseLatency,c);super(e,!1,h,l?n(c.feedback,c.feedforward):null),(e=>{var t;e.getFrequencyResponse=(t=e.getFrequencyResponse,(n,s,i)=>{if(n.length!==s.length||s.length!==i.length)throw Ve();return t.call(e,n,s,i)})})(h),this._nativeIIRFilterNode=h,r(this,1)}getFrequencyResponse(e,t,n){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,n)}})(sn,$n,Yn,Gt,Xt,Tn),Zn=((e,t,n,s,i,r,o,a)=>(l,c)=>{const u=c.listener,{forwardX:h,forwardY:d,forwardZ:p,positionX:f,positionY:m,positionZ:g,upX:y,upY:v,upZ:_}=void 0===u.forwardX?(()=>{const h=new Float32Array(1),d=t(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),p=o(c);let f=!1,m=[0,0,-1,0,1,0],g=[0,0,0];const y=()=>{if(f)return;f=!0;const e=s(c,256,9,0);e.onaudioprocess=e=>{let{inputBuffer:t}=e;const n=[r(t,h,0),r(t,h,1),r(t,h,2),r(t,h,3),r(t,h,4),r(t,h,5)];n.some((e,t)=>e!==m[t])&&(u.setOrientation(...n),m=n);const s=[r(t,h,6),r(t,h,7),r(t,h,8)];s.some((e,t)=>e!==g[t])&&(u.setPosition(...s),g=s)},d.connect(e)},v=e=>t=>{t!==m[e]&&(m[e]=t,u.setOrientation(...m))},_=e=>t=>{t!==g[e]&&(g[e]=t,u.setPosition(...g))},b=(t,s,r)=>{const o=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:s});o.connect(d,0,t),o.start(),Object.defineProperty(o.offset,"defaultValue",{get:()=>s});const u=e({context:l},p,o.offset,Q,G);var h,f,m,g,v,_,b;return a(u,"value",e=>()=>e.call(u),e=>t=>{try{e.call(u,t)}catch(n){if(9!==n.code)throw n}y(),p&&r(t)}),u.cancelAndHoldAtTime=(h=u.cancelAndHoldAtTime,p?()=>{throw i()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=h.apply(u,t);return y(),s}),u.cancelScheduledValues=(f=u.cancelScheduledValues,p?()=>{throw i()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=f.apply(u,t);return y(),s}),u.exponentialRampToValueAtTime=(m=u.exponentialRampToValueAtTime,p?()=>{throw i()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=m.apply(u,t);return y(),s}),u.linearRampToValueAtTime=(g=u.linearRampToValueAtTime,p?()=>{throw i()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=g.apply(u,t);return y(),s}),u.setTargetAtTime=(v=u.setTargetAtTime,p?()=>{throw i()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=v.apply(u,t);return y(),s}),u.setValueAtTime=(_=u.setValueAtTime,p?()=>{throw i()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=_.apply(u,t);return y(),s}),u.setValueCurveAtTime=(b=u.setValueCurveAtTime,p?()=>{throw i()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=b.apply(u,t);return y(),s}),u};return{forwardX:b(0,0,v(0)),forwardY:b(1,0,v(1)),forwardZ:b(2,-1,v(2)),positionX:b(6,0,_(0)),positionY:b(7,0,_(1)),positionZ:b(8,0,_(2)),upX:b(3,0,v(3)),upY:b(4,1,v(4)),upZ:b(5,0,v(5))}})():u;return{get forwardX(){return h},get forwardY(){return d},get forwardZ(){return p},get positionX(){return f},get positionY(){return m},get positionZ(){return g},get upX(){return y},get upY(){return v},get upZ(){return _}}})(bn,On,jn,ht,ft,kt,Xt,St),es=new WeakMap,ts=((e,t,n,s,i,r)=>class extends n{constructor(n,r){super(n),this._nativeContext=n,k.set(this,n),s(n)&&i.set(n,new Set),this._destination=new e(this,r),this._listener=t(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){const t="function"===typeof e?r(this,e):null;this._nativeContext.onstatechange=t;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===t?e:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(xn,Zn,$t,Xt,es,Dt),ns=((e,t,n,s,i,r)=>(o,a)=>{const l=o.createOscillator();return Qe(l,a),Xe(l,a,"detune"),Xe(l,a,"frequency"),void 0!==a.periodicWave?l.setPeriodicWave(a.periodicWave):Ge(l,a,"type"),t(n,()=>n(o))||Ye(l),t(s,()=>s(o))||r(l,o),t(i,()=>i(o))||$e(l),e(o,l),l})(fn,qt,Ct,Et,At,Pt),ss=((e,t,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null,l=null;return{set periodicWave(e){o=e},set start(e){a=e},set stop(e){l=e},render(c,u){const h=r.get(u);return void 0!==h?Promise.resolve(h):(async(c,u)=>{let h=n(c);const d=z(h,u);if(!d){const e={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:null===o?void 0:o,type:h.type};h=t(u,e),null!==a&&h.start(a),null!==l&&h.stop(l)}return r.set(u,h),d?(await e(u,c.detune,h.detune),await e(u,c.frequency,h.frequency)):(await s(u,c.detune,h.detune),await s(u,c.frequency,h.frequency)),await i(c,u,h),h})(c,u)}}})(gn,ns,de,vn,Wt),is=((e,t,n,s,i,r,o)=>class extends e{constructor(e,o){const a=i(e),l=u(u({},gt),o),c=n(a,l),h=r(a),d=h?s():null,p=e.sampleRate/2;super(e,!1,c,d),this._detune=t(this,h,c.detune,153600,-153600),this._frequency=t(this,h,c.frequency,p,-p),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=d,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"===typeof e?o(this,e):null;this._nativeOscillatorNode.onended=t;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===t?e:n}get type(){return this._nativeOscillatorNode.type}set type(e){this._nativeOscillatorNode.type=e,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=e),"closed"!==this.context.state){F(this);const e=()=>{this._nativeOscillatorNode.removeEventListener("ended",e),K(this)&&q(this)};this._nativeOscillatorNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}})(sn,bn,ns,ss,Gt,Xt,Dt),rs=(e=>(t,n)=>{const s=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=t.createBuffer(1,2,44100);return s.buffer=i,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}})(yn),os=((e,t,n,s,i)=>(r,o)=>{let{curve:a,oversample:l}=o,c=nt(o,pt);const h=r.createWaveShaper(),d=r.createWaveShaper();Qe(h,c),Qe(d,c);const p=n(r,u(u({},c),{},{gain:1})),f=n(r,u(u({},c),{},{gain:-1})),m=n(r,u(u({},c),{},{gain:1})),g=n(r,u(u({},c),{},{gain:-1}));let y=null,v=!1,_=null;const b={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(e){p.channelCount=e,f.channelCount=e,h.channelCount=e,m.channelCount=e,d.channelCount=e,g.channelCount=e},get channelCountMode(){return h.channelCountMode},set channelCountMode(e){p.channelCountMode=e,f.channelCountMode=e,h.channelCountMode=e,m.channelCountMode=e,d.channelCountMode=e,g.channelCountMode=e},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(e){p.channelInterpretation=e,f.channelInterpretation=e,h.channelInterpretation=e,m.channelInterpretation=e,d.channelInterpretation=e,g.channelInterpretation=e},get context(){return h.context},get curve(){return _},set curve(n){if(null!==n&&n.length<2)throw t();if(null===n)h.curve=n,d.curve=n;else{const e=n.length,t=new Float32Array(e+2-e%2),s=new Float32Array(e+2-e%2);t[0]=n[0],s[0]=-n[e-1];const i=Math.ceil((e+1)/2),r=(e+1)/2-1;for(let o=1;o<i;o+=1){const a=o/i*r,l=Math.floor(a),c=Math.ceil(a);t[o]=l===c?n[l]:(1-(a-l))*n[l]+(1-(c-a))*n[c],s[o]=l===c?-n[e-1-l]:-(1-(a-l))*n[e-1-l]-(1-(c-a))*n[e-1-c]}t[i]=e%2===1?n[i-1]:(n[i-2]+n[i-1])/2,h.curve=t,d.curve=s}_=n,v&&(s(_)&&null===y?y=e(r,p):null!==y&&(y(),y=null))},get inputs(){return[p]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get oversample(){return h.oversample},set oversample(e){h.oversample=e,d.oversample=e},addEventListener(){return p.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return p.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return p.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};null!==a&&(b.curve=a instanceof Float32Array?a:new Float32Array(a)),l!==b.oversample&&(b.oversample=l);return i(st(b,m),()=>{p.connect(h).connect(m),p.connect(f).connect(d).connect(g).connect(m),v=!0,s(_)&&(y=e(r,p))},()=>{p.disconnect(h),h.disconnect(m),p.disconnect(f),f.disconnect(d),d.disconnect(g),g.disconnect(m),v=!1,null!==y&&(y(),y=null)})})(rs,Le,ot,xt,En),as=((e,t,n,s,i,r,o)=>(a,l)=>{const c=a.createWaveShaper();if(null!==r&&"webkitAudioContext"===r.name&&void 0===a.createGain().gain.automationRate)return n(a,l);Qe(c,l);const u=null===l.curve||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(null!==u&&u.length<2)throw t();Ge(c,{curve:u},"curve"),Ge(c,l,"oversample");let h=null,d=!1;o(c,"curve",e=>()=>e.call(c),t=>n=>(t.call(c,n),d&&(s(n)&&null===h?h=e(a,c):s(n)||null===h||(h(),h=null)),n));return i(c,()=>{d=!0,s(c.curve)&&(h=e(a,c))},()=>{d=!1,null!==h&&(h(),h=null)})})(rs,Le,os,xt,En,Jt,St),ls=((e,t,n,s,i,r,o,a,l,c)=>(h,d)=>{let{coneInnerAngle:p,coneOuterAngle:f,coneOuterGain:m,distanceModel:g,maxDistance:y,orientationX:v,orientationY:_,orientationZ:b,panningModel:w,positionX:k,positionY:x,positionZ:S,refDistance:T,rolloffFactor:C}=d,E=nt(d,ut);const A=h.createPanner();if(E.channelCount>2)throw o();if("max"===E.channelCountMode)throw o();Qe(A,E);const O={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},R=n(h,u(u({},O),{},{channelInterpretation:"speakers",numberOfInputs:6})),P=s(h,u(u({},E),{},{gain:1})),D=s(h,u(u({},O),{},{gain:1})),M=s(h,u(u({},O),{},{gain:0})),N=s(h,u(u({},O),{},{gain:0})),j=s(h,u(u({},O),{},{gain:0})),F=s(h,u(u({},O),{},{gain:0})),I=s(h,u(u({},O),{},{gain:0})),q=i(h,256,6,1),L=r(h,u(u({},O),{},{curve:new Float32Array([1,1]),oversample:"none"}));let V=[v,_,b],z=[k,x,S];const U=new Float32Array(1);q.onaudioprocess=e=>{let{inputBuffer:t}=e;const n=[l(t,U,0),l(t,U,1),l(t,U,2)];n.some((e,t)=>e!==V[t])&&(A.setOrientation(...n),V=n);const s=[l(t,U,3),l(t,U,4),l(t,U,5)];s.some((e,t)=>e!==z[t])&&(A.setPosition(...s),z=s)},Object.defineProperty(M.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0});const B={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(e){if(e>2)throw o();P.channelCount=e,A.channelCount=e},get channelCountMode(){return A.channelCountMode},set channelCountMode(e){if("max"===e)throw o();P.channelCountMode=e,A.channelCountMode=e},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(e){P.channelInterpretation=e,A.channelInterpretation=e},get coneInnerAngle(){return A.coneInnerAngle},set coneInnerAngle(e){A.coneInnerAngle=e},get coneOuterAngle(){return A.coneOuterAngle},set coneOuterAngle(e){A.coneOuterAngle=e},get coneOuterGain(){return A.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();A.coneOuterGain=e},get context(){return A.context},get distanceModel(){return A.distanceModel},set distanceModel(e){A.distanceModel=e},get inputs(){return[P]},get maxDistance(){return A.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;A.maxDistance=e},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get orientationX(){return D.gain},get orientationY(){return M.gain},get orientationZ(){return N.gain},get panningModel(){return A.panningModel},set panningModel(e){A.panningModel=e},get positionX(){return j.gain},get positionY(){return F.gain},get positionZ(){return I.gain},get refDistance(){return A.refDistance},set refDistance(e){if(e<0)throw new RangeError;A.refDistance=e},get rolloffFactor(){return A.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;A.rolloffFactor=e},addEventListener(){return P.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return P.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return P.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};p!==B.coneInnerAngle&&(B.coneInnerAngle=p),f!==B.coneOuterAngle&&(B.coneOuterAngle=f),m!==B.coneOuterGain&&(B.coneOuterGain=m),g!==B.distanceModel&&(B.distanceModel=g),y!==B.maxDistance&&(B.maxDistance=y),v!==B.orientationX.value&&(B.orientationX.value=v),_!==B.orientationY.value&&(B.orientationY.value=_),b!==B.orientationZ.value&&(B.orientationZ.value=b),w!==B.panningModel&&(B.panningModel=w),k!==B.positionX.value&&(B.positionX.value=k),x!==B.positionY.value&&(B.positionY.value=x),S!==B.positionZ.value&&(B.positionZ.value=S),T!==B.refDistance&&(B.refDistance=T),C!==B.rolloffFactor&&(B.rolloffFactor=C),1===V[0]&&0===V[1]&&0===V[2]||A.setOrientation(...V),0===z[0]&&0===z[1]&&0===z[2]||A.setPosition(...z);return c(st(B,A),()=>{P.connect(A),e(P,L,0,0),L.connect(D).connect(R,0,0),L.connect(M).connect(R,0,1),L.connect(N).connect(R,0,2),L.connect(j).connect(R,0,3),L.connect(F).connect(R,0,4),L.connect(I).connect(R,0,5),R.connect(q).connect(h.destination)},()=>{P.disconnect(A),a(P,L,0,0),L.disconnect(D),D.disconnect(R),L.disconnect(M),M.disconnect(R),L.disconnect(N),N.disconnect(R),L.disconnect(j),j.disconnect(R),L.disconnect(F),F.disconnect(R),L.disconnect(I),I.disconnect(R),R.disconnect(q),q.disconnect(h.destination)})})(ae,Le,On,ot,ht,as,ft,he,kt,En),cs=(e=>(t,n)=>{const s=t.createPanner();return void 0===s.orientationX?e(t,n):(Qe(s,n),Xe(s,n,"orientationX"),Xe(s,n,"orientationY"),Xe(s,n,"orientationZ"),Xe(s,n,"positionX"),Xe(s,n,"positionY"),Xe(s,n,"positionZ"),Ge(s,n,"coneInnerAngle"),Ge(s,n,"coneOuterAngle"),Ge(s,n,"coneOuterGain"),Ge(s,n,"distanceModel"),Ge(s,n,"maxDistance"),Ge(s,n,"panningModel"),Ge(s,n,"refDistance"),Ge(s,n,"rolloffFactor"),s)})(ls),us=((e,t,n,s,i,r,o,a,l,c)=>()=>{const h=new WeakMap;let d=null;return{render(p,f){const m=h.get(f);return void 0!==m?Promise.resolve(m):(async(p,f)=>{let m=null,g=r(p);const y={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},v=u(u({},y),{},{coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor}),_=z(g,f);if("bufferSize"in g)m=s(f,u(u({},y),{},{gain:1}));else if(!_){const e=u(u({},v),{},{orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value});g=i(f,e)}if(h.set(f,null===m?g:m),null!==m){if(null===d){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new o(6,p.context.length,f.sampleRate),s=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});s.connect(e.destination),d=(async()=>{const t=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(t,s)=>{const i=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===s?1:0});return await a(e,t,i.offset),i}));for(let e=0;e<6;e+=1)t[e].connect(s,0,e),t[e].start(0);return c(e)})()}const e=await d,r=s(f,u(u({},y),{},{gain:1}));await l(p,f,r);const h=[];for(let t=0;t<e.numberOfChannels;t+=1)h.push(e.getChannelData(t));let g=[h[0][0],h[1][0],h[2][0]],_=[h[3][0],h[4][0],h[5][0]],b=s(f,u(u({},y),{},{gain:1})),w=i(f,u(u({},v),{},{orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:_[0],positionY:_[1],positionZ:_[2]}));r.connect(b).connect(w.inputs[0]),w.connect(m);for(let t=128;t<e.length;t+=128){const e=[h[0][t],h[1][t],h[2][t]],n=[h[3][t],h[4][t],h[5][t]];if(e.some((e,t)=>e!==g[t])||n.some((e,t)=>e!==_[t])){g=e,_=n;const o=t/f.sampleRate;b.gain.setValueAtTime(0,o),b=s(f,u(u({},y),{},{gain:0})),w=i(f,u(u({},v),{},{orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:_[0],positionY:_[1],positionZ:_[2]})),b.gain.setValueAtTime(1,o),r.connect(b).connect(w.inputs[0]),w.connect(m)}}return m}return _?(await e(f,p.orientationX,g.orientationX),await e(f,p.orientationY,g.orientationY),await e(f,p.orientationZ,g.orientationZ),await e(f,p.positionX,g.positionX),await e(f,p.positionY,g.positionY),await e(f,p.positionZ,g.positionZ)):(await a(f,p.orientationX,g.orientationX),await a(f,p.orientationY,g.orientationY),await a(f,p.orientationZ,g.orientationZ),await a(f,p.positionX,g.positionX),await a(f,p.positionY,g.positionY),await a(f,p.positionZ,g.positionZ)),oe(g)?await l(p,f,g.inputs[0]):await l(p,f,g),g})(p,f)}}})(gn,On,jn,ot,cs,de,Kt,vn,Wt,Xn),hs=((e,t,n,s,i,r,o)=>class extends e{constructor(e,a){const l=i(e),c=u(u({},yt),a),h=n(l,c),d=r(l);super(e,!1,h,d?s():null),this._nativePannerNode=h,this._orientationX=t(this,d,h.orientationX,Q,G),this._orientationY=t(this,d,h.orientationY,Q,G),this._orientationZ=t(this,d,h.orientationZ,Q,G),this._positionX=t(this,d,h.positionX,Q,G),this._positionY=t(this,d,h.positionY,Q,G),this._positionZ=t(this,d,h.positionZ,Q,G),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}})(sn,bn,cs,us,Gt,Xt,Tn),ds=(e=>(t,n)=>{let{disableNormalization:s,imag:i,real:r}=n;const o=i instanceof Float32Array?i:new Float32Array(i),a=r instanceof Float32Array?r:new Float32Array(r),l=t.createPeriodicWave(a,o,{disableNormalization:s});if(Array.from(i).length<2)throw e();return l})(B),ps=((e,t,n,s)=>class i{constructor(i,r){const o=t(i),a=s(u(u({},vt),r)),l=e(o,a);return n.add(l),l}static[Symbol.hasInstance](e){return null!==e&&"object"===typeof e&&Object.getPrototypeOf(e)===i.prototype||n.has(e)}})(ds,Gt,new WeakSet,e=>{const{imag:t,real:n}=e;return u(u({},e),{},void 0===t?void 0===n?{imag:[0,0],real:[0,0]}:{imag:Array.from(n,()=>0),real:n}:void 0===n?{imag:t,real:Array.from(t,()=>0)}:{imag:t,real:n})}),fs=((e,t,n,s,i,r)=>{const o=16385,a=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},h=u(u({},c),{},{oversample:"none"}),d=(e,r,d,p,f)=>{if(1===r)return((e,t,i,r)=>{const d=new Float32Array(o),p=new Float32Array(o);for(let n=0;n<o;n+=1){const e=n/16384*l;d[n]=Math.cos(e),p[n]=Math.sin(e)}const f=n(e,u(u({},c),{},{gain:0})),m=s(e,u(u({},h),{},{curve:d})),g=s(e,u(u({},h),{},{curve:a})),y=n(e,u(u({},c),{},{gain:0})),v=s(e,u(u({},h),{},{curve:p}));return{connectGraph(){t.connect(f),t.connect(void 0===g.inputs?g:g.inputs[0]),t.connect(y),g.connect(i),i.connect(void 0===m.inputs?m:m.inputs[0]),i.connect(void 0===v.inputs?v:v.inputs[0]),m.connect(f.gain),v.connect(y.gain),f.connect(r,0,0),y.connect(r,0,1)},disconnectGraph(){t.disconnect(f),t.disconnect(void 0===g.inputs?g:g.inputs[0]),t.disconnect(y),g.disconnect(i),i.disconnect(void 0===m.inputs?m:m.inputs[0]),i.disconnect(void 0===v.inputs?v:v.inputs[0]),m.disconnect(f.gain),v.disconnect(y.gain),f.disconnect(r,0,0),y.disconnect(r,0,1)}}})(e,d,p,f);if(2===r)return((e,i,r,d)=>{const p=new Float32Array(o),f=new Float32Array(o),m=new Float32Array(o),g=new Float32Array(o),y=Math.floor(8192.5);for(let t=0;t<o;t+=1)if(t>y){const e=(t-y)/(16384-y)*l;p[t]=Math.cos(e),f[t]=Math.sin(e),m[t]=0,g[t]=1}else{const e=t/(16384-y)*l;p[t]=1,f[t]=0,m[t]=Math.cos(e),g[t]=Math.sin(e)}const v=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),_=n(e,u(u({},c),{},{gain:0})),b=s(e,u(u({},h),{},{curve:p})),w=n(e,u(u({},c),{},{gain:0})),k=s(e,u(u({},h),{},{curve:f})),x=s(e,u(u({},h),{},{curve:a})),S=n(e,u(u({},c),{},{gain:0})),T=s(e,u(u({},h),{},{curve:m})),C=n(e,u(u({},c),{},{gain:0})),E=s(e,u(u({},h),{},{curve:g}));return{connectGraph(){i.connect(v),i.connect(void 0===x.inputs?x:x.inputs[0]),v.connect(_,0),v.connect(w,0),v.connect(S,1),v.connect(C,1),x.connect(r),r.connect(void 0===b.inputs?b:b.inputs[0]),r.connect(void 0===k.inputs?k:k.inputs[0]),r.connect(void 0===T.inputs?T:T.inputs[0]),r.connect(void 0===E.inputs?E:E.inputs[0]),b.connect(_.gain),k.connect(w.gain),T.connect(S.gain),E.connect(C.gain),_.connect(d,0,0),S.connect(d,0,0),w.connect(d,0,1),C.connect(d,0,1)},disconnectGraph(){i.disconnect(v),i.disconnect(void 0===x.inputs?x:x.inputs[0]),v.disconnect(_,0),v.disconnect(w,0),v.disconnect(S,1),v.disconnect(C,1),x.disconnect(r),r.disconnect(void 0===b.inputs?b:b.inputs[0]),r.disconnect(void 0===k.inputs?k:k.inputs[0]),r.disconnect(void 0===T.inputs?T:T.inputs[0]),r.disconnect(void 0===E.inputs?E:E.inputs[0]),b.disconnect(_.gain),k.disconnect(w.gain),T.disconnect(S.gain),E.disconnect(C.gain),_.disconnect(d,0,0),S.disconnect(d,0,0),w.disconnect(d,0,1),C.disconnect(d,0,1)}}})(e,d,p,f);throw i()};return(t,s)=>{let{channelCount:o,channelCountMode:a,pan:l}=s,c=nt(s,dt);if("max"===a)throw i();const h=e(t,u(u({},c),{},{channelCount:1,channelCountMode:a,numberOfInputs:2})),p=n(t,u(u({},c),{},{channelCount:o,channelCountMode:a,gain:1})),f=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:l});let{connectGraph:m,disconnectGraph:g}=d(t,o,p,f,h);Object.defineProperty(f.gain,"defaultValue",{get:()=>0}),Object.defineProperty(f.gain,"maxValue",{get:()=>1}),Object.defineProperty(f.gain,"minValue",{get:()=>-1});const y={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(e){p.channelCount!==e&&(v&&g(),({connectGraph:m,disconnectGraph:g}=d(t,e,p,f,h)),v&&m()),p.channelCount=e},get channelCountMode(){return p.channelCountMode},set channelCountMode(e){if("clamped-max"===e||"max"===e)throw i();p.channelCountMode=e},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(e){p.channelInterpretation=e},get context(){return p.context},get inputs(){return[p]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get pan(){return f.gain},addEventListener(){return p.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return p.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return p.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};let v=!1;return r(st(y,h),()=>{m(),v=!0},()=>{g(),v=!1})}})(On,tt,ot,as,ft,En),ms=((e,t)=>(n,s)=>{const i=s.channelCountMode;if("clamped-max"===i)throw t();if(void 0===n.createStereoPanner)return e(n,s);const r=n.createStereoPanner();return Qe(r,s),Xe(r,s,"pan"),Object.defineProperty(r,"channelCountMode",{get:()=>i,set:e=>{if(e!==i)throw t()}}),r})(fs,ft),gs=((e,t,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=z(l,a);if(!c){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=t(a,e)}return r.set(a,l),c?await e(a,o.pan,l.pan):await s(a,o.pan,l.pan),oe(l)?await i(o,a,l.inputs[0]):await i(o,a,l),l})(o,a)}}})(gn,ms,de,vn,Wt),ys=((e,t,n,s,i,r)=>class extends e{constructor(e,o){const a=i(e),l=u(u({},_t),o),c=n(a,l),h=r(a);super(e,!1,c,h?s():null),this._pan=t(this,h,c.pan)}get pan(){return this._pan}})(sn,bn,ms,gs,Gt,Xt),vs=((e,t,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=t(i);if(!z(o,r)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=e(r,t)}return s.set(r,o),oe(o)?await n(i,r,o.inputs[0]):await n(i,r,o),o})(i,r)}}})(as,de,Wt),_s=((e,t,n,s,i,r,o)=>class extends e{constructor(e,t){const a=i(e),l=u(u({},wt),t),c=n(a,l);super(e,!0,c,r(a)?s():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=c,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}})(sn,Le,as,vs,Gt,Xt,Tn),bs=(e=>null!==e&&e.isSecureContext)(zt),ws=(e=>(t,n,s)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(t*n)},currentTime:{configurable:!0,get:()=>t}});try{return s()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}})(zt),ks=new WeakMap,xs=((e,t)=>n=>{let s=e.get(n);if(void 0!==s)return s;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new t(1,1,44100),e.set(n,s),s})(ks,Kt),Ss=bs?((e,t,n,s,i,r,o,a,l,c,u,h,d)=>{let p=0;return function(f,m){let g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{credentials:"omit"};const y=u.get(f);if(void 0!==y&&y.has(m))return Promise.resolve();const v=c.get(f);if(void 0!==v){const e=v.get(m);if(void 0!==e)return e}const _=r(f),b=void 0===_.audioWorklet?i(m).then(e=>{let[t,s]=e;const[i,r]=O(t,s),o="".concat(i,";((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{").concat(r,"\n})})(window,'_AWGS')");return n(o)}).then(()=>{const e=d._AWGS.pop();if(void 0===e)throw new SyntaxError;s(_.currentTime,_.sampleRate,()=>e(class{},void 0,(e,n)=>{if(""===e.trim())throw t();const s=T.get(_);if(void 0!==s){if(s.has(e))throw t();P(n),R(n.parameterDescriptors),s.set(e,n)}else P(n),R(n.parameterDescriptors),T.set(_,new Map([[e,n]]))},_.sampleRate,void 0,void 0))}):Promise.all([i(m),Promise.resolve(e(h,h))]).then(e=>{let[[t,n],s]=e;const i=p+1;p=i;const[r,c]=O(t,n),u=s?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}",h=s?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));",d=s?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));",f="".concat(r,";((AudioWorkletProcessor,registerProcessor)=>{").concat(c,"\n})(").concat(u,",(n,p)=>registerProcessor(n,class extends p{").concat(h,"process(i,o,p){").concat(d,"return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac").concat(i,"',class extends AudioWorkletProcessor{process(){return !1}})"),m=new Blob([f],{type:"application/javascript; charset=utf-8"}),y=URL.createObjectURL(m);return _.audioWorklet.addModule(y,g).then(()=>{if(a(_))return _;const e=o(_);return e.audioWorklet.addModule(y,g).then(()=>e)}).then(e=>{if(null===l)throw new SyntaxError;try{new l(e,"__sac".concat(i))}catch(t){throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(y))});return void 0===v?c.set(f,new Map([[m,b]])):v.set(m,b),b.then(()=>{const e=u.get(f);void 0===e?u.set(f,new Set([m])):e.add(m)}).finally(()=>{const e=c.get(f);void 0!==e&&e.delete(m)}),b}})(qt,ft,(e=>t=>new Promise((n,s)=>{if(null===e)return void s(new SyntaxError);const i=e.document.head;if(null===i)s(new SyntaxError);else{const r=e.document.createElement("script"),o=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(o),l=e.onerror,c=()=>{e.onerror=l,URL.revokeObjectURL(a)};e.onerror=(t,n,i,r,o)=>n===a||n===e.location.href&&1===i&&1===r?(c(),s(o),!1):null!==l?l(t,n,i,r,o):void 0,r.onerror=()=>{c(),s(new SyntaxError)},r.onload=()=>{c(),n()},r.src=a,r.type="module",i.appendChild(r)}}))(zt),ws,(e=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch(n){}throw e()})(()=>new DOMException("","AbortError")),Gt,xs,Xt,nn,new WeakMap,new WeakMap,((e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),i=URL.createObjectURL(n);let r=!1,o=!1;try{await s.audioWorklet.addModule(i);const t=new e(s,"a",{numberOfOutputs:0}),n=s.createOscillator();t.port.onmessage=()=>r=!0,t.onprocessorerror=()=>o=!0,n.connect(t),n.start(0),await s.startRendering(),await new Promise(e=>setTimeout(e))}catch(a){}finally{URL.revokeObjectURL(i)}return r&&!o})(nn,Kt),zt):void 0,Ts=((e,t)=>n=>e(n)||t(n))(Zt,Xt),Cs=((e,t,n,s,i,r,o,a,l,c,u)=>(h,d)=>{const p=o(h)?h:r(h);if(i.has(d)){const e=n();return Promise.reject(e)}try{i.add(d)}catch(f){}return t(l,()=>l(p))?p.decodeAudioData(d).then(n=>(Ne(d).catch(()=>{}),t(a,()=>a(n))||u(n),e.add(n),n)):new Promise((t,n)=>{const i=async()=>{try{await Ne(d)}catch(e){}},r=e=>{n(e),i()};try{p.decodeAudioData(d,n=>{"function"!==typeof n.copyFromChannel&&(c(n),W(n)),e.add(n),i().then(()=>t(n))},e=>{r(null===e?s():e)})}catch(o){r(o)}})})(an,qt,()=>new DOMException("","DataCloneError"),()=>new DOMException("","EncodingError"),new WeakSet,Gt,Ts,U,We,hn,dn),Es=((e,t,n,s,i,r,o,a,l,c,h,d,p,f,m,g,y,v,_,b)=>class extends m{constructor(t,n){super(t,n),this._nativeContext=t,this._audioWorklet=void 0===e?void 0:{addModule:(t,n)=>e(this,t,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new i(this)}createBuffer(e,t,s){return new n({length:t,numberOfChannels:e,sampleRate:s})}createBufferSource(){return new s(this)}createChannelMerger(){return new r(this,{numberOfInputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createChannelSplitter(){return new o(this,{numberOfOutputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(){return new h(this,{maxDelayTime:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1})}createDynamicsCompressor(){return new d(this)}createGain(){return new p(this)}createIIRFilter(e,t){return new f(this,{feedback:t,feedforward:e})}createOscillator(){return new g(this)}createPanner(){return new y(this)}createPeriodicWave(e,t){return new v(this,u(u({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableNormalization:!1}),{},{imag:t,real:e}))}createStereoPanner(){return new _(this)}createWaveShaper(){return new b(this)}decodeAudioData(e,t,n){return c(this._nativeContext,e).then(e=>("function"===typeof t&&t(e),e),e=>{throw"function"===typeof n&&n(e),e})}})(Ss,on,pn,kn,Cn,Pn,Mn,In,Vn,Cs,Un,Hn,Qn,Jn,ts,is,hs,ps,ys,_s),As=((e,t,n,s)=>class extends e{constructor(e,i){const r=n(e),o=t(r,i);if(s(r))throw TypeError();super(e,!0,o,null),this._nativeMediaElementAudioSourceNode=o}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(sn,(e,t)=>e.createMediaElementSource(t.mediaElement),Gt,Xt),Os=((e,t,n,s)=>class extends e{constructor(e,i){const r=n(e);if(s(r))throw new TypeError;const o=u(u({},Be),i),a=t(r,o);super(e,!1,a,null),this._nativeMediaStreamAudioDestinationNode=a}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(sn,(e,t)=>{const n=e.createMediaStreamDestination();return Qe(n,t),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},Gt,Xt),Rs=((e,t,n,s)=>class extends e{constructor(e,i){const r=n(e),o=t(r,i);if(s(r))throw new TypeError;super(e,!0,o,null),this._nativeMediaStreamAudioSourceNode=o}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(sn,(e,t)=>{let{mediaStream:n}=t;const s=n.getAudioTracks();s.sort((e,t)=>e.id<t.id?-1:e.id>t.id?1:0);const i=s.slice(0,1),r=e.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(r,"mediaStream",{value:n}),r},Gt,Xt),Ps=((e,t)=>(n,s)=>{let{mediaStreamTrack:i}=s;if("function"===typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(i);const r=new MediaStream([i]),o=n.createMediaStreamSource(r);if("audio"!==i.kind)throw e();if(t(n))throw new TypeError;return o})(Le,Xt),Ds=((e,t,n)=>class extends e{constructor(e,s){const i=n(e);super(e,!0,t(i,s),null)}})(sn,Ps,Gt),Ms=((e,t,n,s,i,r,o,a,l)=>class extends e{constructor(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null===l)throw new Error("Missing the native AudioContext constructor.");try{e=new l(t)}catch(o){if(12===o.code&&"sampleRate is not in range"===o.message)throw n();throw o}if(null===e)throw s();if(!ee(t.latencyHint))throw new TypeError("The provided value '".concat(t.latencyHint,"' is not a valid enum value of type AudioContextLatencyCategory."));if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:i}=t,{sampleRate:r}=e;if(this._baseLatency="number"===typeof e.baseLatency?e.baseLatency:"balanced"===i?512/r:"interactive"===i||void 0===i?256/r:"playback"===i?1024/r:128*Math.max(2,Math.min(128,Math.round(i*r/128)))/r,this._nativeAudioContext=e,"webkitAudioContext"===l.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw t()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Z(this)}))}createMediaElementSource(e){return new i(this,{mediaElement:e})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(e){return new o(this,{mediaStream:e})}createMediaStreamTrackSource(e){return new a(this,{mediaStreamTrack:e})}resume(){return"suspended"===this._state?new Promise((e,t)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?e():this.resume().then(e,t)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(e=>{if(void 0===e||15===e.code)throw t();throw e})}suspend(){return this._nativeAudioContext.suspend().catch(e=>{if(void 0===e)throw t();throw e})}})(Es,Le,ft,bt,As,Os,Rs,Ds,Jt),Ns=(e=>t=>{const n=e.get(t);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(es),js=(e=>(t,n)=>{e(t).add(n)})(Ns),Fs=(e=>function(t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=t[arguments.length>2&&void 0!==arguments[2]?arguments[2]:0];if(void 0===i)throw e();return ve(n)?i.connect(n,0,s):i.connect(n,0)})(B),Is=(e=>(t,n)=>{e(t).delete(n)})(Ns),qs=(e=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return void 0===n?t.forEach(e=>e.disconnect()):"number"===typeof n?Fe(e,t,n).disconnect():ve(n)?void 0===s?t.forEach(e=>e.disconnect(n)):void 0===i?Fe(e,t,s).disconnect(n,0):Fe(e,t,s).disconnect(n,0,i):void 0===s?t.forEach(e=>e.disconnect(n)):Fe(e,t,s).disconnect(n,0)})(B),Ls=new WeakMap,Vs=((e,t)=>n=>t(e,n))(Ls,D),zs=((e,t,n,s,i,r,o,a,l,c,h,d,p)=>(f,m,g,y)=>{if(0===y.numberOfInputs&&0===y.numberOfOutputs)throw l();const v=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(v.some(e=>e<1))throw l();if(v.length!==y.numberOfOutputs)throw t();if("explicit"!==y.channelCountMode)throw l();const _=y.channelCount*y.numberOfInputs,b=v.reduce((e,t)=>e+t,0),w=void 0===g.parameterDescriptors?0:g.parameterDescriptors.length;if(_+w>6||b>6)throw l();const k=new MessageChannel,x=[],S=[];for(let e=0;e<y.numberOfInputs;e+=1)x.push(o(f,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),S.push(i(f,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const T=[];if(void 0!==g.parameterDescriptors)for(const{defaultValue:e,maxValue:t,minValue:n,name:s}of g.parameterDescriptors){const i=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==y.parameterData[s]?y.parameterData[s]:void 0===e?0:e});Object.defineProperties(i.offset,{defaultValue:{get:()=>void 0===e?0:e},maxValue:{get:()=>void 0===t?Q:t},minValue:{get:()=>void 0===n?G:n}}),T.push(i)}const E=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,_+w)}),A=Je(m,f.sampleRate),O=a(f,A,_+w,Math.max(1,b)),R=i(f,{channelCount:Math.max(1,b),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,b)}),P=[];for(let e=0;e<y.numberOfOutputs;e+=1)P.push(s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[e]}));for(let e=0;e<y.numberOfInputs;e+=1){x[e].connect(S[e]);for(let t=0;t<y.channelCount;t+=1)S[e].connect(E,t,e*y.channelCount+t)}const D=new xe(void 0===g.parameterDescriptors?[]:g.parameterDescriptors.map((e,t)=>{let{name:n}=e;const s=T[t];return s.connect(E,0,_+t),s.start(0),[n,s.offset]}));E.connect(O);let M=y.channelInterpretation,N=null;const j=0===y.numberOfOutputs?[O]:P,F={get bufferSize(){return A},get channelCount(){return y.channelCount},set channelCount(e){throw n()},get channelCountMode(){return y.channelCountMode},set channelCountMode(e){throw n()},get channelInterpretation(){return M},set channelInterpretation(e){for(const t of x)t.channelInterpretation=e;M=e},get context(){return O.context},get inputs(){return x},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},get onprocessorerror(){return N},set onprocessorerror(e){"function"===typeof N&&F.removeEventListener("processorerror",N),N="function"===typeof e?e:null,"function"===typeof N&&F.addEventListener("processorerror",N)},get parameters(){return D},get port(){return k.port2},addEventListener(){return O.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},connect:e.bind(null,j),disconnect:c.bind(null,j),dispatchEvent(){return O.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return O.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},I=new Map;var q,L;k.port1.addEventListener=(q=k.port1.addEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("message"===t[0]){const e="function"===typeof t[1]?t[1]:"object"===typeof t[1]&&null!==t[1]&&"function"===typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=I.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{h(f.currentTime,f.sampleRate,()=>e(t))},I.set(e,t[1]))}}return q.call(k.port1,t[0],t[1],t[2])}),k.port1.removeEventListener=(L=k.port1.removeEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("message"===t[0]){const e=I.get(t[1]);void 0!==e&&(I.delete(t[1]),t[1]=e)}return L.call(k.port1,t[0],t[1],t[2])});let V=null;Object.defineProperty(k.port1,"onmessage",{get:()=>V,set:e=>{"function"===typeof V&&k.port1.removeEventListener("message",V),V="function"===typeof e?e:null,"function"===typeof V&&(k.port1.addEventListener("message",V),k.port1.start())}}),g.prototype.port=k.port1;let z=null;const U=((e,t,n,s)=>{let i=C.get(e);void 0===i&&(i=new WeakMap,C.set(e,i));const r=Ze(n,s);return i.set(t,r),r})(f,F,g,y);U.then(e=>z=e);const B=Ee(y.numberOfInputs,y.channelCount),W=Ee(y.numberOfOutputs,v),H=void 0===g.parameterDescriptors?[]:g.parameterDescriptors.reduce((e,t)=>{let{name:n}=t;return u(u({},e),{},{[n]:new Float32Array(128)})},{});let K=!0;const X=()=>{y.numberOfOutputs>0&&O.disconnect(R);for(let e=0,t=0;e<y.numberOfOutputs;e+=1){const n=P[e];for(let s=0;s<v[e];s+=1)R.disconnect(n,t+s,s);t+=v[e]}},Y=new Map;O.onaudioprocess=e=>{let{inputBuffer:t,outputBuffer:n}=e;if(null!==z){const e=d(F);for(let i=0;i<A;i+=128){for(let e=0;e<y.numberOfInputs;e+=1)for(let n=0;n<y.channelCount;n+=1)Te(t,B[e],n,n,i);void 0!==g.parameterDescriptors&&g.parameterDescriptors.forEach((e,n)=>{let{name:s}=e;Te(t,H,s,_+n,i)});for(let e=0;e<y.numberOfInputs;e+=1)for(let t=0;t<v[e];t+=1)0===W[e][t].byteLength&&(W[e][t]=new Float32Array(128));try{const t=B.map((t,n)=>{if(e[n].size>0)return Y.set(n,A/128),t;const s=Y.get(n);return void 0===s?[]:(t.every(e=>e.every(e=>0===e))&&(1===s?Y.delete(n):Y.set(n,s-1)),t)}),s=h(f.currentTime+i/f.sampleRate,f.sampleRate,()=>z.process(t,W,H));K=s;for(let e=0,r=0;e<y.numberOfOutputs;e+=1){for(let t=0;t<v[e];t+=1)Ce(n,W[e],t,r+t,i);r+=v[e]}}catch(s){K=!1,F.dispatchEvent(new ErrorEvent("processorerror",{colno:s.colno,filename:s.filename,lineno:s.lineno,message:s.message}))}if(!K){for(let e=0;e<y.numberOfInputs;e+=1){x[e].disconnect(S[e]);for(let t=0;t<y.channelCount;t+=1)S[i].disconnect(E,t,e*y.channelCount+t)}if(void 0!==g.parameterDescriptors){const e=g.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=T[t];e.disconnect(E,0,_+t),e.stop()}}E.disconnect(O),O.onaudioprocess=null,$?X():ee();break}}}};let $=!1;const J=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Z=()=>O.connect(J).connect(f.destination),ee=()=>{O.disconnect(J),J.disconnect()};return Z(),p(F,()=>{if(K){ee(),y.numberOfOutputs>0&&O.connect(R);for(let e=0,t=0;e<y.numberOfOutputs;e+=1){const n=P[e];for(let s=0;s<v[e];s+=1)R.connect(n,t+s,s);t+=v[e]}}$=!0},()=>{K&&(Z(),X()),$=!1})})(Fs,B,Le,On,tt,jn,ot,ht,ft,qs,ws,Vs,En),Us=((e,t,n,s,i)=>(r,o,a,l,c,h)=>{if(null!==a)try{const t=new a(r,l,h),s=new Map;let o=null;if(Object.defineProperties(t,{channelCount:{get:()=>h.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>o,set:e=>{"function"===typeof o&&t.removeEventListener("processorerror",o),o="function"===typeof e?e:null,"function"===typeof o&&t.addEventListener("processorerror",o)}}}),t.addEventListener=(p=t.addEventListener,function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if("processorerror"===n[0]){const e="function"===typeof n[1]?n[1]:"object"===typeof n[1]&&null!==n[1]&&"function"===typeof n[1].handleEvent?n[1].handleEvent:null;if(null!==e){const t=s.get(n[1]);void 0!==t?n[1]=t:(n[1]=t=>{"error"===t.type?(Object.defineProperties(t,{type:{value:"processorerror"}}),e(t)):e(new ErrorEvent(n[0],u({},t)))},s.set(e,n[1]))}}return p.call(t,"error",n[1],n[2]),p.call(t,...n)}),t.removeEventListener=(d=t.removeEventListener,function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if("processorerror"===n[0]){const e=s.get(n[1]);void 0!==e&&(s.delete(n[1]),n[1]=e)}return d.call(t,"error",n[1],n[2]),d.call(t,n[0],n[1],n[2])}),0!==h.numberOfOutputs){const e=n(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(e).connect(r.destination);return i(t,()=>e.disconnect(),()=>e.connect(r.destination))}return t}catch(f){if(11===f.code)throw s();throw f}var d,p;if(void 0===c)throw s();return(e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}})(h),t(r,o,c,h)})(Le,zs,ot,ft,En),Bs=((e,t,n,s,i,r,o,a,l,c,u,h,d,p,f,m)=>(g,y,v)=>{const _=new WeakMap;let b=null;return{render(w,k){a(k,w);const x=_.get(k);return void 0!==x?Promise.resolve(x):(async(a,w)=>{let k=u(a),x=null;const S=z(k,w),T=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(null===h){const e=T.reduce((e,t)=>e+t,0),n=i(w,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),r=[];for(let t=0;t<a.numberOfOutputs;t+=1)r.push(s(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:T[t]}));const c=o(w,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1});c.connect=t.bind(null,r),c.disconnect=l.bind(null,r),x=[n,r,c]}else S||(k=new h(w,g));if(_.set(w,null===x?k:x[2]),null!==x){if(null===b){if(void 0===v)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const e=a.channelCount*a.numberOfInputs,t=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length,n=e+t,l=async()=>{const l=new d(n,128*Math.ceil(a.context.length/128),w.sampleRate),c=[],u=[];for(let e=0;e<y.numberOfInputs;e+=1)c.push(o(l,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),u.push(i(l,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const h=await Promise.all(Array.from(a.parameters.values()).map(async e=>{const t=r(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value});return await p(l,e,t.offset),t})),g=s(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,e+t)});for(let e=0;e<y.numberOfInputs;e+=1){c[e].connect(u[e]);for(let t=0;t<y.channelCount;t+=1)u[e].connect(g,t,e*y.channelCount+t)}for(const[t,n]of h.entries())n.connect(g,0,e+t),n.start(0);return g.connect(l.destination),await Promise.all(c.map(e=>f(a,l,e))),m(l)};b=Ae(a,0===n?null:await l(),w,y,T,v,c)}const e=await b,t=n(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,u,h]=x;null!==e&&(t.buffer=e,t.start(0)),t.connect(l);for(let n=0,s=0;n<a.numberOfOutputs;n+=1){const e=u[n];for(let t=0;t<T[n];t+=1)l.connect(e,s+t,t);s+=T[n]}return h}if(S)for(const[t,n]of a.parameters.entries())await e(w,n,k.parameters.get(t));else for(const[e,t]of a.parameters.entries())await p(w,t,k.parameters.get(e));return await f(a,w,k),k})(w,k)}}})(gn,Fs,yn,On,tt,jn,ot,Is,qs,ws,de,nn,Kt,vn,Wt,Xn),Ws=(e=>t=>e.get(t))(ks),Hs=(e=>(t,n)=>{e.set(t,n)})(Ls),Gs=bs?((e,t,n,s,i,r,o,a,l,c,h,d,p,f)=>class extends t{constructor(t,f,m){var g;const y=a(t),v=l(y),_=h(u(u({},Se),m));p(_);const b=T.get(y),w=null===b||void 0===b?void 0:b.get(f),k=v||"closed"!==y.state?y:null!==(g=o(y))&&void 0!==g?g:y,x=i(k,v?null:t.baseLatency,c,f,w,_);super(t,!0,x,v?s(f,_,w):null);const S=[];x.parameters.forEach((e,t)=>{const s=n(this,v,e);S.push([t,s])}),this._nativeAudioWorkletNode=x,this._onprocessorerror=null,this._parameters=new xe(S),v&&e(y,this);const{activeInputs:C}=r(this);d(x,C)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(e){const t="function"===typeof e?f(this,e):null;this._nativeAudioWorkletNode.onprocessorerror=t;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===t?e:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(js,sn,bn,Bs,Us,Y,Ws,Gt,Xt,nn,e=>u(u({},e),{},{outputChannelCount:void 0!==e.outputChannelCount?e.outputChannelCount:1===e.numberOfInputs&&1===e.numberOfOutputs?[e.channelCount]:Array.from({length:e.numberOfOutputs},()=>1)}),Hs,e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}},Dt):void 0,Qs=(((e,t,n,s,i)=>{})(Le,ft,bt,ts,Jt),((e,t)=>(n,s,i)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(n,s,i)}catch(r){if("SyntaxError"===r.name)throw e();throw r}})(ft,Kt)),Ks=((e,t,n,s,i,r,o,a)=>(l,c)=>n(l).render(l,c).then(()=>Promise.all(Array.from(s(c)).map(e=>n(e).render(e,c)))).then(()=>i(c)).then(n=>("function"!==typeof n.copyFromChannel?(o(n),W(n)):t(r,()=>r(n))||a(n),e.add(n),n)))(an,qt,Bt,Ns,Xn,U,hn,dn),Xs=(((e,t,n,s,i)=>{})(qt,Le,Qs,ts,Ks),((e,t,n,s,i)=>class extends e{constructor(e,n,i){let r;if("number"===typeof e&&void 0!==n&&void 0!==i)r={length:n,numberOfChannels:e,sampleRate:i};else{if("object"!==typeof e)throw new Error("The given parameters are not valid.");r=e}const{length:o,numberOfChannels:a,sampleRate:l}=u(u({},mt),r),c=s(a,o,l);t(We,()=>We(c))||c.addEventListener("statechange",(()=>{let e=0;const t=n=>{"running"===this._state&&(e>0?(c.removeEventListener("statechange",t),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):e+=1)};return t})()),super(c,a),this._length=o,this._nativeOfflineAudioContext=c,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Z(this)}))}_waitForThePromiseToSettle(e){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(e):setTimeout(()=>this._waitForThePromiseToSettle(e))}})(Es,qt,Le,Qs,Ks)),Ys=((e,t)=>n=>{const s=e.get(n);return t(s)||t(n)})(k,Zt),$s=((e,t)=>n=>e.has(n)||t(n))(_,en),Js=((e,t)=>n=>e.has(n)||t(n))(w,tn),Zs=((e,t)=>n=>{const s=e.get(n);return t(s)||t(n)})(k,Xt),ei=()=>(async(e,t,n,s,i,r,o,a,l,c,u,h,d,p,f,m)=>{if(e(t,t)&&e(n,n)&&e(i,i)&&e(r,r)&&e(a,a)&&e(l,l)&&e(c,c)&&e(u,u)&&e(h,h)&&e(d,d)&&e(p,p))return(await Promise.all([e(s,s),e(o,o),e(f,f),e(m,m)])).every(e=>e);return!1})(qt,(e=>()=>{if(null===e)return!1;const t=new e(1,1,44100).createBuffer(1,1,44100);if(void 0===t.copyToChannel)return!0;const n=new Float32Array(2);try{t.copyFromChannel(n,0,0)}catch(s){return!1}return!0})(Kt),(e=>()=>{if(null===e)return!1;if(void 0!==e.prototype&&void 0!==e.prototype.close)return!0;const t=new e,n=void 0!==t.close;try{t.close()}catch(s){}return n})(Jt),(e=>()=>{if(null===e)return Promise.resolve(!1);const t=new e(1,1,44100);return new Promise(e=>{let n=!0;const s=s=>{n&&(n=!1,t.startRendering(),e(s instanceof TypeError))};let i;try{i=t.decodeAudioData(null,()=>{},s)}catch(r){s(r)}void 0!==i&&i.catch(s)})})(Kt),(e=>()=>{if(null===e)return!1;let t;try{t=new e({latencyHint:"balanced"})}catch(n){return!1}return t.close(),!0})(Jt),(e=>()=>{if(null===e)return!1;const t=new e(1,1,44100).createGain(),n=t.connect(t)===t;return t.disconnect(t),n})(Kt),((e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const n=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new MessageChannel,i=new t(1,128,44100),r=URL.createObjectURL(n);let o=!1;try{await i.audioWorklet.addModule(r);const t=new e(i,"a",{numberOfOutputs:0}),n=i.createOscillator();await new Promise(e=>{t.port.onmessage=()=>e(),t.port.postMessage(s.port2,[s.port2])}),t.port.onmessage=()=>o=!0,n.connect(t),n.start(0),await i.startRendering(),o=await new Promise(e=>{s.port1.onmessage=t=>{let{data:n}=t;return e(1===n)},s.port1.postMessage(0)})}catch(a){}finally{s.port1.close(),URL.revokeObjectURL(r)}return o})(nn,Kt),(e=>()=>{if(null===e)return!1;const t=new e(1,1,44100).createChannelMerger();if("max"===t.channelCountMode)return!0;try{t.channelCount=2}catch(n){return!0}return!1})(Kt),(e=>()=>{if(null===e)return!1;const t=new e(1,1,44100);return void 0===t.createConstantSource||t.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY})(Kt),(e=>()=>{if(null===e)return!1;const t=new e(1,1,44100),n=t.createConvolver();n.buffer=t.createBuffer(1,1,t.sampleRate);try{n.buffer=t.createBuffer(1,1,t.sampleRate)}catch(s){return!1}return!0})(Kt),(e=>()=>{if(null===e)return!1;const t=new e(1,1,44100).createConvolver();try{t.channelCount=1}catch(n){return!1}return!0})(Kt),Ot,(e=>()=>null!==e&&e.hasOwnProperty("isSecureContext"))(zt),(e=>()=>{if(null===e)return!1;const t=new e;try{return t.createMediaStreamSource(new MediaStream),!1}catch(n){return!0}finally{t.close()}})(Jt),(e=>()=>{if(null===e)return Promise.resolve(!1);const t=new e(1,1,44100);if(void 0===t.createStereoPanner)return Promise.resolve(!0);if(void 0===t.createConstantSource)return Promise.resolve(!0);const n=t.createConstantSource(),s=t.createStereoPanner();return n.channelCount=1,n.offset.value=1,s.channelCount=1,n.start(),n.connect(s).connect(t.destination),t.startRendering().then(e=>1!==e.getChannelData(0)[0])})(Kt),Rt);function ti(e){return void 0===e}function ni(e){return void 0!==e}function si(e){return"function"===typeof e}function ii(e){return"number"===typeof e}function ri(e){return"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object}function oi(e){return"boolean"===typeof e}function ai(e){return Array.isArray(e)}function li(e){return"string"===typeof e}function ci(e){return li(e)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(e)}function ui(e,t){if(!e)throw new Error(t)}function hi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;if(!(t<=e&&e<=n))throw new RangeError("Value must be within [".concat(t,", ").concat(n,"], got: ").concat(e))}function di(e){e.isOffline||"running"===e.state||bi('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let pi=!1,fi=!1;function mi(e){pi=e}function gi(e){ti(e)&&pi&&!fi&&(fi=!0,bi("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let yi=console;function vi(e){yi=e}function _i(){yi.log(...arguments)}function bi(){yi.warn(...arguments)}const wi="object"===typeof self?self:null,ki=wi&&(wi.hasOwnProperty("AudioContext")||wi.hasOwnProperty("webkitAudioContext"));function xi(e,t,n,s){var i,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,n,o):i(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function Si(e,t,n,s){return new(n||(n=Promise))(function(i,r){function o(e){try{l(s.next(e))}catch(t){r(t)}}function a(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;class Ti{constructor(e,t,n,s){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){const e=new Blob(["\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ".concat((1e3*this._updateInterval).toFixed(1),";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t")],{type:"text/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(e){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),"worker"===this._type&&(null===(t=this._worker)||void 0===t||t.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Ci(e){return Js(e)}function Ei(e){return $s(e)}function Ai(e){return Zs(e)}function Oi(e){return Ys(e)}function Ri(e,t){return"value"===e||Ci(t)||Ei(t)||function(e){return e instanceof pn}(t)}function Pi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(!n.length)return e;const i=n.shift();if(ri(e)&&ri(i))for(const r in i)Ri(r,i[r])?e[r]=i[r]:ri(i[r])?(e[r]||Object.assign(e,{[r]:{}}),Pi(e[r],i[r])):Object.assign(e,{[r]:i[r]});return Pi(e,...n)}function Di(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0;const i={},r=Array.from(t);if(ri(r[0])&&s&&!Reflect.has(r[0],s)){Object.keys(r[0]).some(t=>Reflect.has(e,t))||(Pi(i,{[s]:r[0]}),n.splice(n.indexOf(s),1),r.shift())}if(1===r.length&&ri(r[0]))Pi(i,r[0]);else for(let o=0;o<n.length;o++)ni(r[o])&&(i[n[o]]=r[o]);return Pi(e,i)}function Mi(e,t){return ti(e)?t:e}function Ni(e,t){return t.forEach(t=>{Reflect.has(e,t)&&delete e[t]}),e}class ji{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(){if(this.debug||wi&&this.toString()===wi.TONE_DEBUG_CLASS){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];_i(this,...t)}}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}ji.version=m;const Fi=1e-6;function Ii(e,t){return e>t+Fi}function qi(e,t){return Ii(e,t)||Vi(e,t)}function Li(e,t){return e+Fi<t}function Vi(e,t){return Math.abs(e-t)<Fi}function zi(e,t,n){return Math.max(Math.min(e,n),t)}class Ui extends ji{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Di(Ui.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(ui(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];ui(qi(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(e){const t=this._timeline.indexOf(e);return-1!==t&&this._timeline.splice(t,1),this}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";const n=this._search(e,t);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";const n=this._search(e,t);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const n=this._search(e);return n-1>=0?this._timeline[n-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Vi(this._timeline[t].time,e)){for(let n=t;n>=0&&Vi(this._timeline[n].time,e);n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else 1===this._timeline.length&&qi(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";if(0===this._timeline.length)return-1;let n=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][t]<=e)return s-1;for(;n<i;){let s=Math.floor(n+(i-n)/2);const r=this._timeline[s],o=this._timeline[s+1];if(Vi(r[t],e)){for(let n=s;n<this._timeline.length;n++){if(!Vi(this._timeline[n][t],e))break;s=n}return s}if(Li(r[t],e)&&Ii(o[t],e))return s;Ii(r[t],e)?i=s:n=s+1}return-1}_iterate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._timeline.length-1;this._timeline.slice(t,n+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const n=this._search(e);return-1!==n&&this._iterate(t,0,n),this}forEachAfter(e,t){const n=this._search(e);return this._iterate(t,n+1),this}forEachBetween(e,t,n){let s=this._search(e),i=this._search(t);return-1!==s&&-1!==i?(this._timeline[s].time!==e&&(s+=1),this._timeline[i].time===t&&(i-=1),this._iterate(n,s,i)):-1===s&&this._iterate(n,0,i),this}forEachFrom(e,t){let n=this._search(e);for(;n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this}forEachAtTime(e,t){const n=this._search(e);if(-1!==n&&Vi(this._timeline[n].time,e)){let s=n;for(let t=n;t>=0&&Vi(this._timeline[t].time,e);t--)s=t;this._iterate(e=>{t(e)},s,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Bi=[];function Wi(e){Bi.push(e)}const Hi=[];function Gi(e){Hi.push(e)}class Qi extends ji{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(e=>{ti(this._events)&&(this._events={}),this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].push(t)}),this}once(e,t){var n=this;const s=function(){t(...arguments),n.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(e=>{if(ti(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(ti(t))this._events[e]=[];else{const n=this._events[e];for(let e=n.length-1;e>=0;e--)n[e]===t&&n.splice(e,1)}}),this}emit(e){if(this._events&&this._events.hasOwnProperty(e)){const i=this._events[e].slice(0);for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];for(let e=0,t=i.length;e<t;e++)i[e].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const n=Object.getOwnPropertyDescriptor(Qi.prototype,t);Object.defineProperty(e.prototype,t,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class Ki extends Qi{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Xi extends Ki{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new Ui,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const n=Di(Xi.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=(null===(e=arguments[0])||void 0===e?void 0:e.latencyHint)||""):(this._context=function(e){return new Ms(e)}({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new Ti(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[(null===(t=arguments[0])||void 0===t?void 0:t.hasOwnProperty("updateInterval"))?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var e;return this._initialized||(e=this,Bi.forEach(t=>t(e)),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,n){return this._context.createBuffer(e,t,n)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,n){return this._context.createPeriodicWave(e,t,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){ui(Oi(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamSource(e)}createMediaElementSource(e){ui(Oi(this._context),"Not available if OfflineAudioContext");return this._context.createMediaElementSource(e)}createMediaStreamDestination(){ui(Oi(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){ui(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){ui(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){ui(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){ui(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return function(e,t,n){return ui(ni(Gs),"AudioWorkletNode only works in a secure context (https or localhost)"),new(e instanceof(null===wi||void 0===wi?void 0:wi.BaseAudioContext)?null===wi||void 0===wi?void 0:wi.AudioWorkletNode:Gs)(e,t,n)}(this.rawContext,e,t)}addAudioWorkletModule(e){return Si(this,void 0,void 0,function*(){ui(ni(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return Si(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Oi(this._context)?this._context.resume():Promise.resolve()}close(){return Si(this,void 0,void 0,function*(){var e;Oi(this._context)&&"closed"!==this.state&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&(e=this,Hi.forEach(t=>t(e)))})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0);for(let i=0;i<n.length;i++)n[i]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=t,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,e=>{e.callback(),this._timeouts.remove(e)})}setTimeout(e,t){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const n=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),s()},id:n,time:i+t})};return s(),n}}function Yi(e,t){ai(t)?t.forEach(t=>Yi(e,t)):Object.defineProperty(e,t,{enumerable:!0,writable:!1})}function $i(e,t){ai(t)?t.forEach(t=>$i(e,t)):Object.defineProperty(e,t,{writable:!0})}const Ji=()=>{};class Zi extends ji{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ji;const e=Di(Zi.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,li(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Ji,onload:Ji,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:sr().sampleRate}set(e){return e instanceof Zi?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Si(this,void 0,void 0,function*(){const t=Zi.load(e).then(e=>{this.set(e),this.onload(this)});Zi.downloads.push(t);try{yield t}finally{const e=Zi.downloads.indexOf(t);Zi.downloads.splice(e,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=ai(e)&&e[0].length>0,n=t?e.length:1,s=t?e[0].length:e.length,i=sr(),r=i.createBuffer(n,s,i.sampleRate),o=t||1!==n?e:[e];for(let a=0;a<n;a++)r.copyToChannel(o[a],a);return this._buffer=r,this}toMono(e){if(ii(e))this.fromArray(this.toArray(e));else{let e=new Float32Array(this.length);const t=this.numberOfChannels;for(let n=0;n<t;n++){const t=this.toArray(n);for(let n=0;n<t.length;n++)e[n]+=t[n]}e=e.map(e=>e/t),this.fromArray(e)}return this}toArray(e){if(ii(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);{const e=[];for(let t=0;t<this.numberOfChannels;t++)e[t]=this.getChannelData(t);return e}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration;ui(this.loaded,"Buffer is not loaded");const n=Math.floor(e*this.sampleRate),s=Math.floor(t*this.sampleRate);ui(n<s,"The start time must be less than the end time");const i=s-n,r=sr().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let o=0;o<this.numberOfChannels;o++)r.copyToChannel(this.getChannelData(o).subarray(n,s),o);return new Zi(r)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return(new Zi).fromArray(e)}static fromUrl(e){return Si(this,void 0,void 0,function*(){const t=new Zi;return yield t.load(e)})}static load(e){return Si(this,void 0,void 0,function*(){const t=""===Zi.baseUrl||Zi.baseUrl.endsWith("/")?Zi.baseUrl:Zi.baseUrl+"/",n=yield fetch(t+e);if(!n.ok)throw new Error("could not load url: ".concat(e));const s=yield n.arrayBuffer();return yield sr().decodeAudioData(s)})}static supportsType(e){const t=e.split("."),n=t[t.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return Si(this,void 0,void 0,function*(){for(yield Promise.resolve();Zi.downloads.length;)yield Zi.downloads[0]})}}Zi.baseUrl="",Zi.downloads=[];class er extends Xi{constructor(){var e,t,n;super({clockSource:"offline",context:Ai(arguments[0])?arguments[0]:(e=arguments[0],t=arguments[1]*arguments[2],n=arguments[2],new Xs(e,t,n)),lookAhead:0,updateInterval:Ai(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Ai(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Si(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const n=Math.floor(this.sampleRate/128);e&&t%n===0&&(yield new Promise(e=>setTimeout(e,1)))}})}render(){return Si(this,arguments,void 0,function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){yield e.workletsAreReady(),yield e._renderClock(t);const n=yield e._context.startRendering();return new Zi(n)}()})}close(){return Promise.resolve()}}const tr=new class extends Ki{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,n){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return Si(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}};let nr=tr;function sr(){return nr===tr&&ki&&ir(new Xi),nr}function ir(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&nr.dispose(),nr=Oi(e)?new Xi(e):Ai(e)?new er(e):e}function rr(){return nr.resume()}if(wi&&!wi.TONE_SILENCE_LOGGING){let e="v";"dev"===m&&(e="");const t=" * Tone.js ".concat(e).concat(m," * ");console.log("%c".concat(t),"background: #000; color: #fff")}function or(e){return Math.pow(10,e/20)}function ar(e){return Math.log(e)/Math.LN10*20}function lr(e){return Math.pow(2,e/12)}let cr=440;function ur(e){return Math.round(hr(e))}function hr(e){return 69+12*Math.log2(e/cr)}function dr(e){return cr*Math.pow(2,(e-69)/12)}class pr extends ji{constructor(e,t,n){super(),this.defaultUnits="s",this._val=t,this._units=n,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const n=parseInt(e,10),s="."===t?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/n)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(3*Math.floor(t)))},regexp:/^(\d+)t$/i},tr:{method:(e,t,n)=>{let s=0;return e&&"0"!==e&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(s+=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(s+=this._beatsToUnits(parseFloat(n)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof pr&&this.fromType(this._val),ti(this._val))return this._noArg();if(li(this._val)&&ti(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(ri(this._val)){let e=0;for(const t in this._val)if(ni(this._val[t])){const n=this._val[t];e+=new this.constructor(this.context,t).valueOf()*n}return e}if(ni(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}return li(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class fr extends pr{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new fr(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=new this.constructor(this.context,e).valueOf(),s=this.valueOf();return s+(Math.round(s/n)*n-s)*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const e=Math.pow(2,i);t.push(e+"n."),t.push(e+"n"),t.push(e+"t")}t.push("0");let n=t[0],s=new fr(this.context,t[0]).toSeconds();return t.forEach(t=>{const i=new fr(this.context,t).toSeconds();Math.abs(i-e)<Math.abs(s-e)&&(n=t,s=i)}),n}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const n=Math.floor(t/this._getTimeSignature());let s=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=s.toString();i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3)));return[n,t,s].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return ur(this.toFrequency())}_now(){return this.context.now()}}function mr(e,t){return new fr(sr(),e,t)}class gr extends fr{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return cr}static set A4(e){!function(e){cr=e}(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return"midi"===this.defaultUnits?e:gr.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const n=yr[e.toLowerCase()]+12*(parseInt(t,10)+1);return"midi"===this.defaultUnits?n:gr.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,n){let s=1;return e&&"0"!==e&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(s*=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(s*=this._beatsToUnits(parseFloat(n)/4)),s}}})}transpose(e){return new gr(this.context,this.valueOf()*lr(e))}harmonize(e){return e.map(e=>this.transpose(e))}toMidi(){return ur(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/gr.A4);let n=Math.round(12*t)+57;const s=Math.floor(n/12);s<0&&(n+=-12*s);return vr[n%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(60*e/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return dr(e)}static ftom(e){return ur(e)}}const yr={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},vr=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function _r(e,t){return new gr(sr(),e,t)}class br extends fr{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function wr(e,t){return new br(sr(),e,t)}class kr extends ji{constructor(){super();const e=Di(kr.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:sr()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return gi(e),new fr(this.context,e).toSeconds()}toFrequency(e){return new gr(this.context,e).toFrequency()}toTicks(e){return new br(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(n=>{ti(e[n])&&delete t[n]}),t}get(){const e=this.constructor.getDefaults();return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const n=this[t];ni(n)&&ni(n.value)&&ni(n.setValueAtTime)?e[t]=n.value:n instanceof kr?e[t]=n._getPartialProperties(e[t]):ai(n)||ii(n)||li(n)||oi(n)?e[t]=n:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&ni(this[t])&&(this[t]&&ni(this[t].value)&&ni(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof kr?this[t].set(e[t]):this[t]=e[t])}),this}}class xr extends Ui{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stopped";super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return null!==t?t.state:this._initial}setStateAtTime(e,t,n){return hi(t,0),this.add(Object.assign({},n,{state:e,time:t})),this}getLastState(e,t){for(let n=this._search(t);n>=0;n--){const t=this._timeline[n];if(t.state===e)return t}}getNextState(e,t){const n=this._search(t);if(-1!==n)for(let s=n;s<this._timeline.length;s++){const t=this._timeline[s];if(t.state===e)return t}}}class Sr extends kr{constructor(){const e=Di(Sr.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,ui(ni(e.param)&&(Ci(e.param)||e.param instanceof Sr),"param must be an AudioParam");!Ci(e.param);)e.param=e.param._param;this._swappable=!!ni(e.swappable)&&e.swappable,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Ui(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,ni(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(kr.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return ni(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return ni(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return ni(this.maxValue)&&ni(this.minValue)&&hi(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?or(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&"decibels"===this.units?ar(e):e}setValueAtTime(e,t){const n=this.toSeconds(t),s=this._fromType(e);return ui(isFinite(s)&&isFinite(n),"Invalid argument(s) to setValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._assertRange(s),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),n=this._events.getAfter(t),s=this._events.get(t);let i=this._initialValue;if(null===s)i=this._initialValue;else if("setTargetAtTime"!==s.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)i=s.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let e=s.value;if("setTargetAtTime"===s.type){const t=this._events.getBefore(s.time);e=null===t?this._initialValue:t.value}i="linearRampToValueAtTime"===n.type?this._linearInterpolate(s.time,e,n.time,n.value,t):this._exponentialInterpolate(s.time,e,n.time,n.value,t)}else i=s.value;else{const e=this._events.getBefore(s.time);let n;n=null===e?this._initialValue:e.value,"setTargetAtTime"===s.type&&(i=this._exponentialApproach(s.time,n,s.value,s.constant,t))}return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),0===this._fromType(t)&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const n=this._fromType(e),s=this.toSeconds(t);return ui(isFinite(n)&&isFinite(s),"Invalid argument(s) to linearRampToValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._assertRange(n),this._events.add({time:s,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(n,s),this}exponentialRampToValueAtTime(e,t){let n=this._fromType(e);n=Vi(n,0)?this._minOutput:n,this._assertRange(n);const s=this.toSeconds(t);return ui(isFinite(n)&&isFinite(s),"Invalid argument(s) to exponentialRampToValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(n,s),this}exponentialRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this}linearRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this}targetRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,t),this}exponentialApproachValueAtTime(e,t,n){t=this.toSeconds(t),n=this.toSeconds(n);const s=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,t,s),this.cancelAndHoldAtTime(t+.9*n),this.linearRampToValueAtTime(e,t+n),this}setTargetAtTime(e,t,n){const s=this._fromType(e);ui(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(s),ui(isFinite(s)&&isFinite(i),"Invalid argument(s) to setTargetAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,i,n),this._param.setTargetAtTime(s,i,n),this}setValueCurveAtTime(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n=this.toSeconds(n),t=this.toSeconds(t);const i=this._fromType(e[0])*s;this.setValueAtTime(this._toType(i),t);const r=n/(e.length-1);for(let o=1;o<e.length;o++){const n=this._fromType(e[o])*s;this.linearRampToValueAtTime(this._toType(n),t+o*r)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return ui(isFinite(t),"Invalid argument to cancelScheduledValues: ".concat(JSON.stringify(e))),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),n=this._fromType(this.getValueAtTime(t));ui(isFinite(t),"Invalid argument to cancelAndHoldAtTime: ".concat(JSON.stringify(e))),this.log(this.units,"cancelAndHoldAtTime",t,"value="+n);const s=this._events.get(t),i=this._events.getAfter(t);return s&&Vi(s.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(n),t):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(n),t)),this._events.add({time:t,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,t),this}rampTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments.length>2?arguments[2]:void 0;return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(e,t,n):this.linearRampTo(e,t,n),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const n=this._events.get(t);if(n&&"setTargetAtTime"===n.type){const s=this._events.getAfter(n.time),i=s?s.time:t+2,r=(i-t)/10;for(let n=t;n<i;n+=r)e.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,t=>{"cancelScheduledValues"===t.type?e.cancelScheduledValues(t.time):"setTargetAtTime"===t.type?e.setTargetAtTime(t.value,t.time,t.constant):e[t.type](t.value,t.time)}),this}setParam(e){ui(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,n,s,i){return n+(t-n)*Math.exp(-(i-e)/s)}_linearInterpolate(e,t,n,s,i){return t+(i-e)/(n-e)*(s-t)}_exponentialInterpolate(e,t,n,s,i){return t*Math.pow(s/t,(i-e)/(n-e))}}class Tr extends kr{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return ni(this.input)?Ci(this.input)||this.input instanceof Sr?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ni(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return ni(e)&&(e instanceof Tr||Ei(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(t=>{t.channelCount=e.channelCount,t.channelCountMode=e.channelCountMode,t.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();ui(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e){return Er(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return bi("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e){return Ar(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}chain(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Cr(this,...t),this}fan(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),ni(this.input)&&(this.input instanceof Tr?this.input.dispose():Ei(this.input)&&this.input.disconnect()),ni(this.output)&&(this.output instanceof Tr?this.output.dispose():Ei(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Cr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=t.shift();t.reduce((e,t)=>(e instanceof Tr?e.connect(t):Ei(e)&&Er(e,t),t),s)}function Er(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(ui(ni(e),"Cannot connect from undefined node"),ui(ni(t),"Cannot connect to undefined node"),(t instanceof Tr||Ei(t))&&ui(t.numberOfInputs>0,"Cannot connect to node with no inputs"),ui(e.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof Tr||t instanceof Sr;)ni(t.input)&&(t=t.input);for(;e instanceof Tr;)ni(e.output)&&(e=e.output);Ci(t)?e.connect(t,n):e.connect(t,n,s)}function Ar(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(ni(t))for(;t instanceof Tr;)t=t.input;for(;!Ei(e);)ni(e.output)&&(e=e.output);Ci(t)?e.disconnect(t,n):Ei(t)?e.disconnect(t,n,s):e.disconnect()}function Or(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=t.pop();ni(s)&&t.forEach(e=>Er(e,s))}class Rr extends Tr{constructor(){const e=Di(Rr.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Sr({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Yi(this,"gain")}static getDefaults(){return Object.assign(Tr.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Pr extends Tr{constructor(e){super(e),this.onended=Ji,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Rr({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const t=this.toSeconds(e);return-1!==this._startTime&&t>=this._startTime&&(-1===this._stopTime||t<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(Tr.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ji})}_startGain(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ui(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(t,e+n):this._gainNode.gain.exponentialApproachValueAtTime(t,e,n)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){ui(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const e="exponential"===this._curve?2*t:0;this._stopSource(this.now()+e),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ji&&(this.onended(this),this.onended=Ji,!this.context.isOffline)){const e=()=>this.dispose();"undefined"!==typeof requestIdleCallback?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ui(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Ji,this}}class Dr extends Pr{constructor(){const e=Di(Dr.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Er(this._source,this._gainNode),this.offset=new Sr({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Pr.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Mr extends Tr{constructor(){const e=Di(Mr.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new Dr({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Tr.getDefaults(),{convert:!0,units:"number",value:0})}connect(e){return Nr(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,n){return this._param.exponentialRampTo(e,t,n),this}linearRampTo(e,t,n){return this._param.linearRampTo(e,t,n),this}targetRampTo(e,t,n){return this._param.targetRampTo(e,t,n),this}exponentialApproachValueAtTime(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this}setTargetAtTime(e,t,n){return this._param.setTargetAtTime(e,t,n),this}setValueCurveAtTime(e,t,n,s){return this._param.setValueCurveAtTime(e,t,n,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,n){return this._param.rampTo(e,t,n),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Nr(e,t,n,s){(t instanceof Sr||Ci(t)||t instanceof Mr&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Mr&&(t.overridden=!0)),Er(e,t,n,s)}class jr extends Sr{constructor(){const e=Di(jr.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Ui(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Sr.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,n){t=this.toSeconds(t),this.setRampPoint(t);const s=this._fromType(e),i=this._events.get(t),r=Math.round(Math.max(1/n,1));for(let o=0;o<=r;o++){const e=n*o+t,r=this._exponentialApproach(i.time,i.value,s,n,e);this.linearRampToValueAtTime(this._toType(r),e)}return this}setValueAtTime(e,t){const n=this.toSeconds(t);super.setValueAtTime(e,t);const s=this._events.get(n),i=this._events.previousEvent(s),r=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(r,0),this}linearRampToValueAtTime(e,t){const n=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const s=this._events.get(n),i=this._events.previousEvent(s),r=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(r,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const n=this._fromType(e),s=this._events.get(t),i=Math.round(Math.max(10*(t-s.time),1)),r=(t-s.time)/i;for(let o=0;o<=i;o++){const e=r*o+s.time,i=this._exponentialInterpolate(s.time,s.value,t,n,e);this.linearRampToValueAtTime(this._toType(i),e)}return this}_getTicksUntilEvent(e,t){if(null===e)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(ti(e.ticks)){const t=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(t,e.time)}const n=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&"setValueAtTime"===i.type&&(s=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(n+s)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),n=this._events.get(t);return Math.max(this._getTicksUntilEvent(n,t),0)}getDurationOfTicks(e,t){const n=this.toSeconds(t),s=this.getTicksAtTime(t);return this.getTimeOfTick(s+e)-n}getTimeOfTick(e){const t=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&n&&"linearRampToValueAtTime"===n.type&&t.value!==n.value){const s=this._fromType(this.getValueAtTime(t.time)),i=(this._fromType(this.getValueAtTime(n.time))-s)/(n.time-t.time),r=Math.sqrt(Math.pow(s,2)-2*i*(t.ticks-e)),o=(-s+r)/i;return(o>0?o:(-s-r)/i)+t.time}return t?0===t.value?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const n=this.toSeconds(t),s=this.toSeconds(e),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+s)-i}_fromType(e){return"bpm"===this.units&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return"bpm"===this.units&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Fr extends Mr{constructor(){const e=Di(Fr.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new jr({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Mr.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Ir extends kr{constructor(){const e=Di(Ir.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new xr,this._tickOffset=new Ui,this._ticksAtTime=new Ui,this._secondsAtTime=new Ui,this.frequency=new Fr({context:this.context,units:e.units,value:e.frequency}),Yi(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},kr.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const n=this.toSeconds(e);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),ni(t)&&this.setTicksAtTime(t,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(e){const t=this.toSeconds(e);if("stopped"===this._state.getValueAtTime(t)){const e=this._state.get(t);e&&e.time>0&&(this._tickOffset.cancel(e.time),this._state.cancel(e.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),n=this._state.getLastState("stopped",t),s=this._ticksAtTime.get(t),i={state:"paused",time:t};this._state.add(i);let r=s||n,o=s?s.ticks:0,a=null;return this._state.forEachBetween(r.time,t+this.sampleTime,e=>{let t=r.time;const n=this._tickOffset.get(e.time);n&&n.time>=r.time&&(o=n.ticks,t=n.time),"started"===r.state&&"started"!==e.state&&(o+=this.frequency.getTicksAtTime(e.time)-this.frequency.getTicksAtTime(t),e.time!==i.time&&(a={state:e.state,time:e.time,ticks:o})),r=e}),this._state.remove(i),a&&this._ticksAtTime.add(a),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),n=this.frequency.timeToTicks(e,t);this.setTicksAtTime(n,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);const s=this._secondsAtTime.get(e);let i=s||t,r=s?s.seconds:0,o=null;return this._state.forEachBetween(i.time,e+this.sampleTime,e=>{let t=i.time;const s=this._tickOffset.get(e.time);s&&s.time>=i.time&&(r=s.seconds,t=s.time),"started"===i.state&&"started"!==e.state&&(r+=e.time-t,e.time!==n.time&&(o={state:e.state,time:e.time,seconds:r})),i=e}),this._state.remove(n),o&&this._secondsAtTime.add(o),r}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();const n=this._tickOffset.get(t),s=this._state.get(t),i=Math.max(n.time,s.time),r=this.frequency.getTicksAtTime(i)+e-n.ticks;return this.frequency.getTimeOfTick(r)}forEachTickBetween(e,t,n){let s=this._state.get(e);this._state.forEachBetween(e,t,t=>{s&&"started"===s.state&&"started"!==t.state&&this.forEachTickBetween(Math.max(s.time,e),t.time-this.sampleTime,n),s=t});let i=null;if(s&&"started"===s.state){const o=Math.max(s.time,e),a=this.frequency.getTicksAtTime(o),l=a-this.frequency.getTicksAtTime(s.time);let c=Math.ceil(l)-l;c=Vi(c,1)?0:c;let u=this.frequency.getTimeOfTick(a+c);for(;u<t;){try{n(u,Math.round(this.getTicksAtTime(u)))}catch(r){i=r;break}u+=this.frequency.getDurationOfTicks(1,u)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class qr extends kr{constructor(){const e=Di(qr.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=Ji,this._lastUpdate=0,this._state=new xr("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new Ir({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Yi(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(kr.getDefaults(),{callback:Ji,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){di(this.context);const n=this.toSeconds(e);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,t),n<this._lastUpdate&&this.emit("start",n,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const n=this.toSeconds(t),s=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(s+e,n)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,e=>{switch(e.state){case"started":const t=this._tickSource.getTicksAtTime(e.time);this.emit("start",e.time,t);break;case"stopped":0!==e.time&&this.emit("stop",e.time);break;case"paused":this.emit("pause",e.time)}}),this._tickSource.forEachTickBetween(e,t,(e,t)=>{this.callback(e,t)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Qi.mixin(qr);class Lr extends Tr{constructor(){const e=Di(Lr.getDefaults(),arguments,["delayTime","maxDelay"]);super(e),this.name="Delay";const t=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(t,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(t),this.delayTime=new Sr({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),Yi(this,"delayTime")}static getDefaults(){return Object.assign(Tr.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Vr extends Tr{constructor(){const e=Di(Vr.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Rr({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Yi(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(Tr.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class zr extends Tr{constructor(){const e=Di(zr.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Vr({context:this.context}),this.output=new Rr({context:this.context}),this.volume=this.input.volume,Cr(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Tr.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(){this.input.disconnect();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift(this.input),t.push(this.output),Cr(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Wi(e=>{e.destination=new zr({context:e})}),Gi(e=>{e.destination.dispose()});class Ur extends Tr{constructor(){super(...arguments),this.name="Listener",this.positionX=new Sr({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Sr({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Sr({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Sr({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Sr({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Sr({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Sr({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Sr({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Sr({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Tr.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}function Br(e,t){return Si(this,arguments,void 0,function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:sr().sampleRate;return function*(){const i=sr(),r=new er(n,t,s);ir(r),yield e(r);const o=r.render();ir(i);const a=yield o;return new Zi(a)}()})}Wi(e=>{e.listener=new Ur({context:e})}),Gi(e=>{e.listener.dispose()});class Wr extends ji{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Di(Wr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const n=e.urls[t];this.add(t,n,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ji,onload:Ji,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return ui(this.has(e),"ToneAudioBuffers has no buffer named: ".concat(e)),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,0===this._loadingCount&&e&&e()}get loaded(){return Array.from(this._buffers).every(e=>{let[t,n]=e;return n.loaded})}add(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ji,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ji;return li(t)?(this.baseUrl&&"data:audio/"===t.trim().substring(0,11).toLowerCase()&&(this.baseUrl=""),this._buffers.set(e.toString(),new Zi(this.baseUrl+t,n,s))):this._buffers.set(e.toString(),new Zi(t,n,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Hr extends gr{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return ur(super._frequencyToUnits(e))}_ticksToUnits(e){return ur(super._ticksToUnits(e))}_beatsToUnits(e){return ur(super._beatsToUnits(e))}_secondsToUnits(e){return ur(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return dr(this.toMidi())}transpose(e){return new Hr(this.context,this.toMidi()+e)}}function Gr(e,t){return new Hr(sr(),e,t)}class Qr extends br{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function Kr(e,t){return new Qr(sr(),e,t)}class Xr extends kr{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ui,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Wi(e=>{e.draw=new Xr({context:e})}),Gi(e=>{e.draw.dispose()});class Yr extends ji{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){ui(ni(e.time),"Events must have a time property"),ui(ni(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new $r(e.time,e.time+e.duration,e);for(null===this._root?this._root=t:this._root.insert(t),this._length++;null!==t;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(null!==this._root){const t=[];this._root.search(e.time,t);for(const n of t)if(n.event===e){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,e=>this.remove(e)),this}_setRoot(e){this._root=e,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(e,t){null!==e.parent?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(null===e.left&&null===e.right)this._replaceNodeInParent(e,null);else if(null===e.right)this._replaceNodeInParent(e,e.left);else if(null===e.left)this._replaceNodeInParent(e,e.right);else{let t,n=null;if(e.getBalance()>0)if(null===e.left.right)t=e.left,t.right=e.right,n=t;else{for(t=e.left.right;null!==t.right;)t=t.right;t.parent&&(t.parent.right=t.left,n=t.parent,t.left=e.left,t.right=e.right)}else if(null===e.right.left)t=e.right,t.left=e.left,n=t;else{for(t=e.right.left;null!==t.left;)t=t.left;t.parent&&(t.parent.left=t.right,n=t.parent,t.left=e.left,t.right=e.right)}null!==e.parent?e.isLeftChild()?e.parent.left=t:e.parent.right=t:this._setRoot(t),n&&this._rebalance(n)}e.dispose()}_rotateLeft(e){const t=e.parent,n=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),null!==t?n?t.left=s:t.right=s:this._setRoot(s)}_rotateRight(e){const t=e.parent,n=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),null!==t?n?t.left=s:t.right=s:this._setRoot(s)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(null!==this._root){const t=[];if(this._root.search(e,t),t.length>0){let e=t[0];for(let n=1;n<t.length;n++)t[n].low>e.low&&(e=t[n]);return e.event}}return null}forEach(e){if(null!==this._root){const t=[];this._root.traverse(e=>t.push(e)),t.forEach(t=>{t.event&&e(t.event)})}return this}forEachAtTime(e,t){if(null!==this._root){const n=[];this._root.search(e,n),n.forEach(e=>{e.event&&t(e.event)})}return this}forEachFrom(e,t){if(null!==this._root){const n=[];this._root.searchAfter(e,n),n.forEach(e=>{e.event&&t(e.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class $r{constructor(e,t,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?null===this.left?this.left=e:this.left.insert(e):null===this.right?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(null!==this.left&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),this.low>e||null!==this.right&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),null!==this.left&&this.left.searchAfter(e,t)),null!==this.right&&this.right.searchAfter(e,t)}traverse(e){e(this),null!==this.left&&this.left.traverse(e),null!==this.right&&this.right.traverse(e)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return null!==this.left&&null!==this.right?e=this.left.height-this.right.height:null!==this.left?e=this.left.height+1:null!==this.right&&(e=-(this.right.height+1)),e}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Jr extends ji{constructor(e){super(),this.name="TimelineValue",this._timeline=new Ui({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Zr extends Tr{constructor(){super(Di(Zr.getDefaults(),arguments,["context"]))}connect(e){return Nr(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}}class eo extends Zr{constructor(){const e=Di(eo.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,ai(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):si(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Mr.getDefaults(),{length:1024})}setMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=new Float32Array(t);for(let s=0,i=t;s<i;s++){const t=s/(i-1)*2-1;n[s]=e(t,s)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){ui(["none","2x","4x"].some(t=>t.includes(e)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class to extends Zr{constructor(){const e=Di(to.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new eo({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Zr.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class no{constructor(e,t){this.id=no._eventId++,this._remainderTime=0;const n=Object.assign(no.getDefaults(),t);this.transport=e,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:Ji,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}no._eventId=0;class so extends no{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(so.getDefaults(),t);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},no.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Li(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Qr(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Li(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Qr(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Ii(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class io extends kr{constructor(){const e=Di(io.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new Jr(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ui,this._repeatedEvents=new Yr,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new qr({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Yi(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(kr.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(2*this._swingTicks)!==0){const n=t%(2*this._swingTicks)/(2*this._swingTicks),s=Math.sin(n*Math.PI)*this._swingAmount;e+=new Qr(this.context,2*this._swingTicks/3).toSeconds()*s}mi(!0),this._timeline.forEachAtTime(t,t=>t.invoke(e)),mi(!1)}schedule(e,t){const n=new no(this,{callback:e,time:new br(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const i=new so(this,{callback:e,duration:new fr(this.context,s).toTicks(),interval:new fr(this.context,t).toTicks(),time:new br(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const n=new no(this,{callback:e,once:!0,time:new br(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=this.toTicks(e);return this._timeline.forEachFrom(t,e=>this.clear(e.id)),this._repeatedEvents.forEachFrom(t,e=>this.clear(e.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Qr(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let n;return this.context.resume(),ni(t)&&(n=this.toTicks(t)),this._clock.start(e,n),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),"started"!==this._clock.getStateAtTime(e)?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){ai(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new fr(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new fr(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Qr(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Qr(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),n=this._clock.frequency.timeToTicks(e,t);this.ticks=n}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(t),s=t+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,t);this.emit("stop",s),this._clock.setTicksAtTime(e,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),"started"!==this.state)return 0;{const t=this.now(),n=e-this.getTicksAtTime(t)%e;return this._clock.nextTickTime(n,t)}}syncSignal(e,t){const n=this.now();let s=this.bpm,i=1/(60/s.getValueAtTime(n)/this.PPQ),r=[];if("time"===e.units){const e=1/64/i,t=new Rr(e),n=new to(-1),o=new Rr(e);s.chain(t,n,o),s=o,i=1/i,r=[t,n,o]}t||(t=0!==e.getValueAtTime(n)?e.getValueAtTime(n)/i:0);const o=new Rr(t);return s.connect(o),o.connect(e._param),r.push(o),this._syncedSignals.push({initial:e.value,nodes:r,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const n=this._syncedSignals[t];n.signal===e&&(n.nodes.forEach(e=>e.dispose()),n.signal.value=n.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),$i(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Qi.mixin(io),Wi(e=>{e.transport=new io({context:e})}),Gi(e=>{e.transport.dispose()});class ro extends Tr{constructor(e){super(e),this.input=void 0,this._state=new xr("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ji,this._syncedStop=Ji,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Vr({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Yi(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(Tr.getDefaults(),{mute:!1,onstop:Ji,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,n){let s=ti(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),this._synced||"started"!==this._state.getValueAtTime(s))if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const e=this._state.get(s);e&&(e.offset=this.toSeconds(Mi(t,0)),e.duration=n?this.toSeconds(n):void 0);const i=this.context.transport.schedule(e=>{this._start(e,t,n)},s);this._scheduled.push(i),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else di(this.context),this._start(s,t,n);else ui(Ii(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,t,n);return this}stop(e){let t=ti(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),"started"===this._state.getValueAtTime(t)||ni(this._state.getNextState("started",t))){if(this.log("stop",t),this._synced){const e=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(e)}else this._stop(t);this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,n){return e=this.toSeconds(e),"started"===this._state.getValueAtTime(e)&&(this._state.cancel(e),this._restart(e,t,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Ii(t,0)){const n=this._state.get(t);if(n&&"started"===n.state&&n.time!==t){const s=t-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-s),this._start(e,this.toSeconds(n.offset)+s,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));"started"===this._state.getValueAtTime(t)&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ji,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class oo extends Pr{constructor(){const e=Di(oo.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Er(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Sr({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Zi(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Pr.getDefaults(),{url:new Zi,loop:!1,loopEnd:0,loopStart:0,onload:Ji,onerror:Ji,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;ui(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,s),t=this.loop?Mi(t,this.loopStart):Mi(t,0);let r=Math.max(this.toSeconds(t),0);if(this.loop){const e=this.toSeconds(this.loopEnd)||this.buffer.duration,t=this.toSeconds(this.loopStart),n=e-t;qi(r,e)&&(r=(r-t)%n+t),Vi(r,this.buffer.duration)&&(r=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Li(r,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,r)),ni(n)){let e=this.toSeconds(n);e=Math.max(e,0),this.stop(i+e)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class ao extends ro{constructor(){const e=Di(ao.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(ro.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(ui(e in uo,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,"started"===this.state)){const e=this.now();this._stop(e),this._start(e)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=uo[this._type];this._source=new oo({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const lo=220500,co={brown:null,pink:null,white:null},uo={get brown(){if(!co.brown){const e=[];for(let t=0;t<2;t++){const n=new Float32Array(lo);e[t]=n;let s=0;for(let e=0;e<lo;e++){const t=2*Math.random()-1;n[e]=(s+.02*t)/1.02,s=n[e],n[e]*=3.5}}co.brown=(new Zi).fromArray(e)}return co.brown},get pink(){if(!co.pink){const e=[];for(let t=0;t<2;t++){const n=new Float32Array(lo);let s,i,r,o,a,l,c;e[t]=n,s=i=r=o=a=l=c=0;for(let e=0;e<lo;e++){const t=2*Math.random()-1;s=.99886*s+.0555179*t,i=.99332*i+.0750759*t,r=.969*r+.153852*t,o=.8665*o+.3104856*t,a=.55*a+.5329522*t,l=-.7616*l-.016898*t,n[e]=s+i+r+o+a+l+c+.5362*t,n[e]*=.11,c=.115926*t}}co.pink=(new Zi).fromArray(e)}return co.pink},get white(){if(!co.white){const e=[];for(let t=0;t<2;t++){const n=new Float32Array(lo);e[t]=n;for(let e=0;e<lo;e++)n[e]=2*Math.random()-1}co.white=(new Zi).fromArray(e)}return co.white}};class ho extends Tr{constructor(){const e=Di(ho.getDefaults(),arguments,["volume"]);super(e),this.name="UserMedia",this._volume=this.output=new Vr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Yi(this,"volume"),this.mute=e.mute}static getDefaults(){return Object.assign(Tr.getDefaults(),{mute:!1,volume:0})}open(e){return Si(this,void 0,void 0,function*(){ui(ho.supported,"UserMedia is not supported"),"started"===this.state&&this.close();const t=yield ho.enumerateDevices();ii(e)?this._device=t[e]:(this._device=t.find(t=>t.label===e||t.deviceId===e),!this._device&&t.length>0&&(this._device=t[0]),ui(ni(this._device),"No matching device ".concat(e)));const n={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(n.audio.deviceId=this._device.deviceId);const s=yield navigator.mediaDevices.getUserMedia(n);if(!this._stream){this._stream=s;const e=this.context.createMediaStreamSource(s);Er(e,this.output),this._mediaStream=e}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(e=>{e.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return Si(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind)})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){return this._device?this._device.deviceId:void 0}get groupId(){return this._device?this._device.groupId:void 0}get label(){return this._device?this._device.label:void 0}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return ni(navigator.mediaDevices)&&ni(navigator.mediaDevices.getUserMedia)}}function po(e,t){return Si(this,void 0,void 0,function*(){const n=t/e.context.sampleRate,s=new er(1,n,e.context.sampleRate);new e.constructor(Object.assign(e.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0);return(yield s.render()).getChannelData(0)})}class fo extends Pr{constructor(){const e=Di(fo.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Er(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Sr({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Sr({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Yi(this,["frequency","detune"])}static getDefaults(){return Object.assign(Pr.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class mo extends ro{constructor(){const e=Di(mo.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new Mr({context:this.context,units:"frequency",value:e.frequency}),Yi(this,"frequency"),this.detune=new Mr({context:this.context,units:"cents",value:e.detune}),Yi(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&"custom"!==e.type&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(ro.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),n=new fo({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type){return mo._periodicWaveCache.find(e=>{return e.phase===this._phase&&(t=e.partials,n=this._partials,t.length===n.length&&t.every((e,t)=>n[t]===e));var t,n})}{const e=mo._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=-1!==["sine","square","sawtooth","triangle"].indexOf(e);if(0===this._phase&&t)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=e);else{const t=this._getCachedPeriodicWave();if(ni(t)){const{partials:e,wave:n}=t;this._wave=n,this._partials=e,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[t,n]=this._getRealImaginary(e,this._phase),s=this.context.createPeriodicWave(t,n);this._wave=s,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),mo._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:t,type:this._type,wave:this._wave}),mo._periodicWaveCache.length>100&&mo._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&"custom"!==this._type&&"custom"!==e?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){hi(e,0);let t=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(t=n[1]),"custom"!==this._type)this.type=0===e?t:t+e.toString();else{const t=new Float32Array(e);this._partials.forEach((e,n)=>t[n]=e),this._partials=Array.from(t),this.type=this._type}}_getRealImaginary(e,t){let n=2048;const s=new Float32Array(n),i=new Float32Array(n);let r=1;if("custom"===e){if(r=this._partials.length+1,this._partialCount=this._partials.length,n=r,0===this._partials.length)return[s,i]}else{const t=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);t?(r=parseInt(t[2],10)+1,this._partialCount=parseInt(t[2],10),e=t[1],r=Math.max(r,2),n=r):this._partialCount=0,this._partials=[]}for(let o=1;o<n;++o){const n=2/(o*Math.PI);let a;switch(e){case"sine":a=o<=r?1:0,this._partials[o-1]=a;break;case"square":a=1&o?2*n:0,this._partials[o-1]=a;break;case"sawtooth":a=n*(1&o?1:-1),this._partials[o-1]=a;break;case"triangle":a=1&o?n*n*2*(o-1>>1&1?-1:1):0,this._partials[o-1]=a;break;case"custom":a=this._partials[o-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}0!==a?(s[o]=-a*Math.sin(t*o),i[o]=a*Math.cos(t*o)):(s[o]=0,i[o]=0)}return[s,i]}_inverseFFT(e,t,n){let s=0;const i=e.length;for(let r=0;r<i;r++)s+=e[r]*Math.cos(r*n)+t[r]*Math.sin(r*n);return s}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let n=0;const s=2*Math.PI;for(let i=0;i<32;i++)n=Math.max(this._inverseFFT(e,t,i/32*s),n);return zi(-this._inverseFFT(e,t,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return Si(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return po(e,t)}()})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}mo._periodicWaveCache=[];class go extends Zr{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new eo({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class yo extends Mr{constructor(){const e=Di(yo.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Rr({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Mr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class vo extends ro{constructor(){const e=Di(vo.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new go({context:this.context}),this._modulationNode=new Rr({context:this.context}),this._carrier=new mo({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new mo({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new yo({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Yi(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(mo.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return Si(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return po(e,t)}()})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class _o extends ro{constructor(){const e=Di(_o.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Rr({context:this.context,gain:0}),this._carrier=new mo({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Mr({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new mo({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new yo({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new yo({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Yi(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(mo.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return Si(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return po(e,t)}()})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class bo extends ro{constructor(){const e=Di(bo.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Rr({context:this.context,gain:0}),this._thresh=new eo({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new Mr({context:this.context,units:"audioRange",value:e.width}),this._triangle=new mo({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Yi(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ro.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return Si(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return po(e,t)}()})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class wo extends ro{constructor(){const e=Di(wo.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new Mr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Mr({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Yi(this,["frequency","detune"])}static getDefaults(){return Object.assign(mo.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,n=e/(this._oscillators.length-1);this._forEach((e,s)=>e.detune.value=t+n*s)}}get count(){return this._oscillators.length}set count(e){if(hi(e,1),this._oscillators.length!==e){this._forEach(e=>e.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const n=new mo({context:this.context,volume:-6-1.1*e,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:0===t?()=>this.onstop(this):Ji});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[t]=n}this.spread=this._spread,"started"===this.state&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((e,t)=>e.phase=this._phase+t/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return Si(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return po(e,t)}()})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class ko extends ro{constructor(){const e=Di(ko.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new yo({context:this.context,value:2}),this._pulse=new bo({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new mo({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Yi(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ro.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return Si(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return po(e,t)}()})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const xo={am:vo,fat:wo,fm:_o,oscillator:mo,pulse:bo,pwm:ko};class So extends ro{constructor(){const e=Di(So.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new Mr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Mr({context:this.context,units:"cents",value:e.detune}),Yi(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(mo.getDefaults(),_o.getDefaults(),vo.getDefaults(),wo.getDefaults(),bo.getDefaults(),ko.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(e=this._sourceType),e+this._oscillator.type}set type(e){"fm"===e.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"am"===e.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"fat"===e.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):"pwm"===e?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===e?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=xo[e],n=this.now();if(this._oscillator){const e=this._oscillator;e.stop(n),this.context.setTimeout(()=>e.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(t=this._oscillator.type),"fm"===e?this.type="fm"+t:"am"===e?this.type="am"+t:"fat"===e?this.type="fat"+t:"oscillator"===e?this.type=t:"pulse"===e?this.type="pulse":"pwm"===e&&(this.type="pwm")}_getOscType(e,t){return e instanceof xo[t]}get baseType(){return this._oscillator.baseType}set baseType(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===e||"pwm"===e||(this._oscillator.baseType=e)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(e){this._getOscType(this._oscillator,"fat")&&ii(e)&&(this._oscillator.count=e)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(e){this._getOscType(this._oscillator,"fat")&&ii(e)&&(this._oscillator.spread=e)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&li(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(){return Si(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return po(e,t)}()})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class To extends Mr{constructor(){super(Di(To.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Rr({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Cr(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Mr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Co extends Zr{constructor(){const e=Di(Co.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new yo({context:this.context,value:e.max-e.min}),this._add=this.output=new To({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Zr.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Eo extends Zr{constructor(){super(Di(Eo.getDefaults(),arguments)),this.name="Zero",this._gain=new Rr({context:this.context}),this.output=this._gain,this.input=void 0,Er(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),Ar(this.context.getConstant(0),this._gain),this}}class Ao extends Tr{constructor(){const e=Di(Ao.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Sr.prototype._fromType,this._toType=Sr.prototype._toType,this._is=Sr.prototype._is,this._clampValue=Sr.prototype._clampValue,this._oscillator=new mo(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Rr({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Mr({context:this.context,units:"audioRange",value:0}),this._zeros=new Eo({context:this.context}),this._a2g=new go({context:this.context}),this._scaler=this.output=new Co({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Yi(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(mo.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const t=this.min,n=this.max;this._units=e,this.min=t,this.max=n}get state(){return this._oscillator.state}connect(e,t,n){return(e instanceof Sr||e instanceof Mr)&&(this.convert=e.convert,this.units=e.units),Nr(this,e,t,n),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function Oo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){hi(s,e,t),n.set(this,s)}})}}function Ro(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){hi(this.toSeconds(s),e,t),n.set(this,s)}})}}class Po extends ro{constructor(){const e=Di(Po.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Zi({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(ro.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ji,onerror:Ji,playbackRate:1,reverse:!1})}load(e){return Si(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ji)(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,n){return super.start(e,t,n),this}_start(e,t,n){t=this._loop?Mi(t,this._loopStart):Mi(t,0);const s=this.toSeconds(t),i=n;n=Mi(n,Math.max(this._buffer.duration-s,0));let r=this.toSeconds(n);r/=this._playbackRate,e=this.toSeconds(e);const o=new oo({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(e+r),this._state.setStateAtTime("stopped",e+r,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&ti(i)?o.start(e,s):o.start(e,s,r-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(e=>e.stop(t))}restart(e,t,n){return super.restart(e,t,n),this}_restart(e,t,n){var s;null===(s=[...this._activeSources].pop())||void 0===s||s.stop(e),this._start(e,t,n)}seek(e,t){const n=this.toSeconds(t);if("started"===this._state.getValueAtTime(n)){const t=this.toSeconds(e);this._stop(n),this._start(n,t)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&hi(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&hi(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),n=this._state.getNextState("stopped",t);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(e=>e.cancelStop())),this._activeSources.forEach(n=>{n.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}xi([Ro(0)],Po.prototype,"fadeIn",void 0),xi([Ro(0)],Po.prototype,"fadeOut",void 0);class Do extends Tr{constructor(){const e=Di(Do.getDefaults(),arguments,["urls","onload"],"urls");super(e),this.name="Players",this.input=void 0,this._players=new Map,this._volume=this.output=new Vr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Yi(this,"volume"),this._buffers=new Wr({urls:e.urls,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.mute=e.mute,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(ro.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:Ji,onerror:Ji,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._players.forEach(t=>{t.fadeIn=e})}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._players.forEach(t=>{t.fadeOut=e})}get state(){return Array.from(this._players).some(e=>{let[t,n]=e;return"started"===n.state})?"started":"stopped"}has(e){return this._buffers.has(e)}player(e){if(ui(this.has(e),"No Player with the name ".concat(e," exists on this object")),!this._players.has(e)){const t=new Po({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(e)}).connect(this.output);this._players.set(e,t)}return this._players.get(e)}get loaded(){return this._buffers.loaded}add(e,t,n){return ui(!this._buffers.has(e),"A buffer with that name already exists on this object"),this._buffers.add(e,t,n),this}stopAll(e){return this._players.forEach(t=>t.stop(e)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(e=>e.dispose()),this._buffers.dispose(),this}}class Mo extends ro{constructor(){const e=Di(Mo.getDefaults(),arguments,["url","onload"]);super(e),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[],this.buffer=new Zi({onload:e.onload,onerror:e.onerror,reverse:e.reverse,url:e.url}),this._clock=new qr({context:this.context,callback:this._tick.bind(this),frequency:1/e.grainSize}),this._playbackRate=e.playbackRate,this._grainSize=e.grainSize,this._overlap=e.overlap,this.detune=e.detune,this.overlap=e.overlap,this.loop=e.loop,this.playbackRate=e.playbackRate,this.grainSize=e.grainSize,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.reverse=e.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(ro.getDefaults(),{onload:Ji,onerror:Ji,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(e,t,n){t=Mi(t,0),t=this.toSeconds(t),e=this.toSeconds(e);const s=1/this._clock.frequency.getValueAtTime(e);this._clock.start(e,t/s),n&&this.stop(e+this.toSeconds(n))}restart(e,t,n){return super.restart(e,t,n),this}_restart(e,t,n){this._stop(e),this._start(e,t,n)}_stop(e){this._clock.stop(e)}_onstop(e){this._activeSources.forEach(t=>{t.fadeOut=0,t.stop(e)}),this.onstop(this)}_tick(e){const t=this._clock.getTicksAtTime(e),n=t*this._grainSize;if(this.log("offset",n),!this.loop&&n>this.buffer.duration)return void this.stop(e);const s=n<this._overlap?0:this._overlap,i=new oo({context:this.context,url:this.buffer,fadeIn:s,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:lr(this.detune/100)}).connect(this.output);i.start(e,this._grainSize*t),i.stop(e+this._grainSize/this.playbackRate),this._activeSources.push(i),i.onended=()=>{const e=this._activeSources.indexOf(i);-1!==e&&this._activeSources.splice(e,1)}}get playbackRate(){return this._playbackRate}set playbackRate(e){hi(e,.001),this._playbackRate=e,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(e){this.buffer.loaded&&hi(this.toSeconds(e),0,this.buffer.duration),this._loopStart=this.toSeconds(e)}get loopEnd(){return this._loopEnd}set loopEnd(e){this.buffer.loaded&&hi(this.toSeconds(e),0,this.buffer.duration),this._loopEnd=this.toSeconds(e)}get reverse(){return this.buffer.reverse}set reverse(e){this.buffer.reverse=e}get grainSize(){return this._grainSize}set grainSize(e){this._grainSize=this.toSeconds(e),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(e){const t=this.toSeconds(e);hi(t,0),this._overlap=t}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(e=>e.dispose()),this}}class No extends Zr{constructor(){super(...arguments),this.name="Abs",this._abs=new eo({context:this.context,mapping:e=>Math.abs(e)<.001?0:Math.abs(e)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class jo extends Zr{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new eo({context:this.context,mapping:e=>2*Math.abs(e)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Fo extends Zr{constructor(){super(...arguments),this.name="Negate",this._multiply=new yo({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class Io extends Mr{constructor(){super(Di(Io.getDefaults(),arguments,["value"])),this.override=!1,this.name="Subtract",this._sum=new Rr({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new Fo({context:this.context}),this.subtrahend=this._param,Cr(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(Mr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class qo extends Zr{constructor(){super(Di(qo.getDefaults(),arguments)),this.name="GreaterThanZero",this._thresh=this.output=new eo({context:this.context,length:127,mapping:e=>e<=0?0:1}),this._scale=this.input=new yo({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class Lo extends Mr{constructor(){const e=Di(Lo.getDefaults(),arguments,["value"]);super(e),this.name="GreaterThan",this.override=!1,this._subtract=this.input=new Io({context:this.context,value:e.value}),this._gtz=this.output=new qo({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,Yi(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(Mr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class Vo extends Co{constructor(){const e=Di(Vo.getDefaults(),arguments,["min","max","exponent"]);super(e),this.name="ScaleExp",this.input=this._exp=new to({context:this.context,value:e.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(Co.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(e){this._exp.value=e}dispose(){return super.dispose(),this._exp.dispose(),this}}class zo extends Mr{constructor(){const e=Di(Mr.getDefaults(),arguments,["value","units"]);super(e),this.name="SyncedSignal",this.override=!1,this._lastVal=e.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new Dr({context:this.context,offset:e.value,units:e.units}).start(0),this.setValueAtTime(e.value,0)}_onTick(e){const t=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==t&&(this._lastVal=t,this._constantSource.offset.setValueAtTime(t,e))}_anchorValue(e){const t=super.getValueAtTime(this.context.transport.seconds);this._lastVal=t,this._constantSource.offset.cancelAndHoldAtTime(e),this._constantSource.offset.setValueAtTime(t,e)}getValueAtTime(e){const t=new br(this.context,e).toSeconds();return super.getValueAtTime(t)}setValueAtTime(e,t){const n=new br(this.context,t).toSeconds();return super.setValueAtTime(e,n),this}linearRampToValueAtTime(e,t){const n=new br(this.context,t).toSeconds();return super.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,t){const n=new br(this.context,t).toSeconds();return super.exponentialRampToValueAtTime(e,n),this}setTargetAtTime(e,t,n){const s=new br(this.context,t).toSeconds();return super.setTargetAtTime(e,s,n),this}cancelScheduledValues(e){const t=new br(this.context,e).toSeconds();return super.cancelScheduledValues(t),this}setValueCurveAtTime(e,t,n,s){const i=new br(this.context,t).toSeconds();return n=this.toSeconds(n),super.setValueCurveAtTime(e,i,n,s),this}cancelAndHoldAtTime(e){const t=new br(this.context,e).toSeconds();return super.cancelAndHoldAtTime(t),this}setRampPoint(e){const t=new br(this.context,e).toSeconds();return super.setRampPoint(t),this}exponentialRampTo(e,t,n){const s=new br(this.context,n).toSeconds();return super.exponentialRampTo(e,t,s),this}linearRampTo(e,t,n){const s=new br(this.context,n).toSeconds();return super.linearRampTo(e,t,s),this}targetRampTo(e,t,n){const s=new br(this.context,n).toSeconds();return super.targetRampTo(e,t,s),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class Uo extends Tr{constructor(){const e=Di(Uo.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new Mr({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(Tr.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(li(e))return e;{let n;for(n in Bo)if(Bo[n][t]===e)return n;return e}}_setCurve(e,t,n){if(li(n)&&Reflect.has(Bo,n)){const s=Bo[n];ri(s)?"_decayCurve"!==e&&(this[e]=s[t]):this[e]=s}else{if(!ai(n)||"_decayCurve"===e)throw new Error("Envelope: invalid curve: "+n);this[e]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.log("triggerAttack",e,t),e=this.toSeconds(e);let n=this.toSeconds(this.attack);const s=this.toSeconds(this.decay),i=this.getValueAtTime(e);if(i>0){n=(1-i)/(1/n)}if(n<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if("linear"===this._attackCurve)this._sig.linearRampTo(t,n,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(t,n,e);else{this._sig.cancelAndHoldAtTime(e);let s=this._attackCurve;for(let e=1;e<s.length;e++)if(s[e-1]<=i&&i<=s[e]){s=this._attackCurve.slice(e),s[0]=i;break}this._sig.setValueCurveAtTime(s,e,n,t)}if(s&&this.sustain<1){const i=t*this.sustain,r=e+n;this.log("decay",r),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(i,s+r):this._sig.exponentialApproachValueAtTime(i,r,s)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,e):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,e):(ui(ai(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e){return Nr(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}asArray(){return Si(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){const n=t/e.context.sampleRate,s=new er(1,n,e.context.sampleRate),i=e.toSeconds(e.attack)+e.toSeconds(e.decay),r=i+e.toSeconds(e.release),o=.1*r,a=r+o,l=new e.constructor(Object.assign(e.get(),{attack:n*e.toSeconds(e.attack)/a,decay:n*e.toSeconds(e.decay)/a,release:n*e.toSeconds(e.release)/a,context:s}));l._sig.toDestination(),l.triggerAttackRelease(n*(i+o)/a,0);return(yield s.render()).getChannelData(0)}()})}dispose(){return super.dispose(),this._sig.dispose(),this}}xi([Ro(0)],Uo.prototype,"attack",void 0),xi([Ro(0)],Uo.prototype,"decay",void 0),xi([Oo(0,1)],Uo.prototype,"sustain",void 0),xi([Ro(0)],Uo.prototype,"release",void 0);const Bo=(()=>{const e=128;let t,n;const s=[];for(t=0;t<e;t++)s[t]=Math.sin(t/127*(Math.PI/2));const i=[];for(t=0;t<127;t++){n=t/127;const e=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;i[t]=e/10+.83*n}i[127]=1;const r=[];for(t=0;t<e;t++)r[t]=Math.ceil(t/127*5)/5;const o=[];for(t=0;t<e;t++)n=t/127,o[t]=.5*(1-Math.cos(Math.PI*n));const a=[];for(t=0;t<e;t++){n=t/127;const e=4*Math.pow(n,3)+.2,s=Math.cos(e*Math.PI*2*n);a[t]=Math.abs(s*(1-n))}function l(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=1-e[n];return t}return{bounce:{In:l(a),Out:a},cosine:{In:s,Out:(c=s,c.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:i,Out:l(i)},sine:{In:o,Out:l(o)},step:{In:r,Out:l(r)}};var c})();class Wo extends Tr{constructor(){const e=Di(Wo.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new Vr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Yi(this,"volume")}static getDefaults(){return Object.assign(Tr.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){var n=this;const s=this["_original_"+e]=this[e];this[e]=function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];const o=i[t],a=n.context.transport.schedule(e=>{i[t]=e,s.apply(n,i)},o);n._scheduledEvents.push(a)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,n,s){const i=this.toSeconds(n),r=this.toSeconds(t);return this.triggerAttack(e,i,s),this.triggerRelease(i+r),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Ho extends Wo{constructor(){const e=Di(Ho.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Wo.getDefaults(),{detune:0,onsilence:Ji,portamento:0})}triggerAttack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.log("triggerAttack",e,t,n);const s=this.toSeconds(t);return this._triggerEnvelopeAttack(s,n),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const n=this.toSeconds(t),s=e instanceof gr?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const e=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,e,n)}else this.frequency.setValueAtTime(s,n);return this}}xi([Ro(0)],Ho.prototype,"portamento",void 0);class Go extends Uo{constructor(){super(Di(Go.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Rr({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Qo extends Ho{constructor(){const e=Di(Qo.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new So(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Go(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Yi(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Ho.getDefaults(),{envelope:Object.assign(Ni(Uo.getDefaults(),Object.keys(Tr.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Ni(So.getDefaults(),[...Object.keys(ro.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),0===this.envelope.sustain){const t=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+t+n)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Ko extends Ho{constructor(){const e=Di(Ko.getDefaults(),arguments);super(e),this.name="ModulationSynth",this._carrier=new Qo({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Qo({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Mr({context:this.context,units:"frequency"}),this.detune=new Mr({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new yo({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new Rr({context:this.context,gain:0}),Yi(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Ho.getDefaults(),{harmonicity:3,oscillator:Object.assign(Ni(So.getDefaults(),[...Object.keys(ro.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(Ni(Uo.getDefaults(),Object.keys(Tr.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(Ni(So.getDefaults(),[...Object.keys(ro.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(Ni(Uo.getDefaults(),Object.keys(Tr.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class Xo extends Ko{constructor(){super(Di(Xo.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new go({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class Yo extends Tr{constructor(){const e=Di(Yo.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Sr({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Sr({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Sr({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Sr({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(Tr.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){ui(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e),"Invalid filter type: ".concat(e)),this._filter.type=e}getFrequencyResponse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;const t=new Float32Array(e);for(let r=0;r<e;r++){const n=19980*Math.pow(r/e,2)+20;t[r]=n}const n=new Float32Array(e),s=new Float32Array(e),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(t,n,s),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class $o extends Tr{constructor(){const e=Di($o.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new Rr({context:this.context}),this.output=new Rr({context:this.context}),this._filters=[],this._filters=[],this.Q=new Mr({context:this.context,units:"positive",value:e.Q}),this.frequency=new Mr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Mr({context:this.context,units:"cents",value:e.detune}),this.gain=new Mr({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Yi(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(Tr.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){ui(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e),"Invalid filter type: ".concat(e)),this._type=e,this._filters.forEach(t=>t.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=ii(e)?e:parseInt(e,10),n=[-12,-24,-48,-96];let s=n.indexOf(t);ui(-1!==s,"rolloff can only be ".concat(n.join(", "))),s+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(e=>e.disconnect()),this._filters=new Array(s);for(let i=0;i<s;i++){const e=new Yo({context:this.context});e.type=this._type,this.frequency.connect(e.frequency),this.detune.connect(e.detune),this.Q.connect(e.Q),this.gain.connect(e.gain),this._filters[i]=e}this._internalChannels=this._filters,Cr(this.input,...this._internalChannels,this.output)}getFrequencyResponse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;const t=new Yo({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((e,t)=>n[t]*=e)}),t.dispose(),n}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),$i(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Jo extends Uo{constructor(){const e=Di(Jo.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="FrequencyEnvelope",this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new to({context:this.context,value:e.exponent}),this._scale=this.output=new Co({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Uo.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);hi(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Zo extends Ho{constructor(){const e=Di(Zo.getDefaults(),arguments);super(e),this.name="MonoSynth",this.oscillator=new So(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new $o(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new Jo(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new Go(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Yi(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Ho.getDefaults(),{envelope:Object.assign(Ni(Uo.getDefaults(),Object.keys(Tr.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(Ni($o.getDefaults(),Object.keys(Tr.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(Ni(Jo.getDefaults(),Object.keys(Tr.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(Ni(So.getDefaults(),Object.keys(ro.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),0===this.envelope.sustain){const t=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+t+n)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class ea extends Ho{constructor(){const e=Di(ea.getDefaults(),arguments);super(e),this.name="DuoSynth",this.voice0=new Zo(Object.assign(e.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new Zo(Object.assign(e.voice1,{context:this.context})),this.harmonicity=new yo({context:this.context,units:"positive",value:e.harmonicity}),this._vibrato=new Ao({frequency:e.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new Rr({context:this.context,units:"normalRange",gain:e.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Mr({context:this.context,units:"frequency",value:440}),this.detune=new Mr({context:this.context,units:"cents",value:e.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),Yi(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(e){return e=this.toSeconds(e),this.voice0.envelope.getValueAtTime(e)+this.voice1.envelope.getValueAtTime(e)}static getDefaults(){return Pi(Ho.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:Pi(Ni(Zo.getDefaults(),Object.keys(Ho.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:Pi(Ni(Zo.getDefaults(),Object.keys(Ho.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(e,t){this.voice0._triggerEnvelopeAttack(e,t),this.voice1._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this.voice0._triggerEnvelopeRelease(e),this.voice1._triggerEnvelopeRelease(e),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class ta extends Ko{constructor(){const e=Di(ta.getDefaults(),arguments);super(e),this.name="FMSynth",this.modulationIndex=new yo({context:this.context,value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(Ko.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const na=[1,1.483,1.932,2.546,2.63,3.897];class sa extends Ho{constructor(){const e=Di(sa.getDefaults(),arguments);super(e),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new Mr({context:this.context,units:"cents",value:e.detune}),this.frequency=new Mr({context:this.context,units:"frequency"}),this._amplitude=new Rr({context:this.context,gain:0}).connect(this.output),this._highpass=new $o({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let t=0;t<na.length;t++){const n=new _o({context:this.context,harmonicity:e.harmonicity,modulationIndex:e.modulationIndex,modulationType:"square",onstop:0===t?()=>this.onsilence(this):Ji,type:"square"});n.connect(this._highpass),this._oscillators[t]=n;const s=new yo({context:this.context,value:na[t]});this._freqMultipliers[t]=s,this.frequency.chain(s,n.frequency),this.detune.connect(n.detune)}this._filterFreqScaler=new Co({context:this.context,max:7e3,min:this.toFrequency(e.resonance)}),this.envelope=new Uo({attack:e.envelope.attack,attackCurve:"linear",context:this.context,decay:e.envelope.decay,release:e.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=e.octaves,this.octaves=e.octaves}static getDefaults(){return Pi(Ho.getDefaults(),{envelope:Object.assign(Ni(Uo.getDefaults(),Object.keys(Tr.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.envelope.triggerAttack(e,t),this._oscillators.forEach(t=>t.start(e)),0===this.envelope.sustain&&this._oscillators.forEach(t=>{t.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach(t=>t.stop(e+this.toSeconds(this.envelope.release))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach(t=>t.modulationIndex.value=e)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach(t=>t.harmonicity.value=e)}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach(e=>e.dispose()),this._freqMultipliers.forEach(e=>e.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class ia extends Qo{constructor(){const e=Di(ia.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Yi(this,["oscillator","envelope"])}static getDefaults(){return Pi(Ho.getDefaults(),Qo.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const n=this.toSeconds(t),s=this.toFrequency(e instanceof gr?e.toFrequency():e),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(s,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}xi([Oo(0)],ia.prototype,"octaves",void 0),xi([Ro(0)],ia.prototype,"pitchDecay",void 0);class ra extends Wo{constructor(){const e=Di(ra.getDefaults(),arguments);super(e),this.name="NoiseSynth",this.noise=new ao(Object.assign({context:this.context},e.noise)),this.envelope=new Go(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Wo.getDefaults(),{envelope:Object.assign(Ni(Uo.getDefaults(),Object.keys(Tr.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(Ni(ao.getDefaults(),Object.keys(ro.getDefaults())),{type:"white"})})}triggerAttack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e=this.toSeconds(e),this.envelope.triggerAttack(e,t),this.noise.start(e),0===this.envelope.sustain&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t=this.toSeconds(t),e=this.toSeconds(e),this.triggerAttack(t,n),this.triggerRelease(t+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const oa=new Set;function aa(e){oa.add(e)}function la(e,t){const n='registerProcessor("'.concat(e,'", ').concat(t,")");oa.add(n)}class ca extends Tr{constructor(e){super(e),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=Ji;const t=URL.createObjectURL(new Blob([Array.from(oa).join("\n")],{type:"text/javascript"})),n=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(t).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(n,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}aa('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n');aa("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n");aa("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");const ua="feedback-comb-filter";la(ua,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class ha extends ca{constructor(){const e=Di(ha.getDefaults(),arguments,["delayTime","resonance"]);super(e),this.name="FeedbackCombFilter",this.input=new Rr({context:this.context}),this.output=new Rr({context:this.context}),this.delayTime=new Sr({context:this.context,value:e.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new Sr({context:this.context,value:e.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),Yi(this,["resonance","delayTime"])}_audioWorkletName(){return ua}static getDefaults(){return Object.assign(Tr.getDefaults(),{delayTime:.1,resonance:.5})}onReady(e){Cr(this.input,e,this.output);const t=e.parameters.get("delayTime");this.delayTime.setParam(t);const n=e.parameters.get("feedback");this.resonance.setParam(n)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class da extends Tr{constructor(){const e=Di(da.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OnePoleFilter",this._frequency=e.frequency,this._type=e.type,this.input=new Rr({context:this.context}),this.output=new Rr({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(Tr.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const e=this._filter,t=this.toFrequency(this._frequency),n=1/(2*Math.PI*t);if("lowpass"===this._type){const e=1/(n*this.context.sampleRate),t=e-1;this._filter=this.context.createIIRFilter([e,0],[1,t])}else{const e=1/(n*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,e])}this.input.chain(this._filter,this.output),e&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(e),e.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(e){this._frequency=e,this._createFilter()}get type(){return this._type}set type(e){this._type=e,this._createFilter()}getFrequencyResponse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;const t=new Float32Array(e);for(let i=0;i<e;i++){const n=19980*Math.pow(i/e,2)+20;t[i]=n}const n=new Float32Array(e),s=new Float32Array(e);return this._filter.getFrequencyResponse(t,n,s),n}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class pa extends Tr{constructor(){const e=Di(pa.getDefaults(),arguments,["delayTime","resonance","dampening"]);super(e),this.name="LowpassCombFilter",this._combFilter=this.output=new ha({context:this.context,delayTime:e.delayTime,resonance:e.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new da({context:this.context,frequency:e.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(Tr.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(e){this._lowpass.frequency=e}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class fa extends Wo{constructor(){const e=Di(fa.getDefaults(),arguments);super(e),this.name="PluckSynth",this._noise=new ao({context:this.context,type:"pink"}),this.attackNoise=e.attackNoise,this._lfcf=new pa({context:this.context,dampening:e.dampening,resonance:e.resonance}),this.resonance=e.resonance,this.release=e.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return Pi(Wo.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(e){this._lfcf.dampening=e}triggerAttack(e,t){const n=this.toFrequency(e);t=this.toSeconds(t);const s=1/n;return this._lfcf.delayTime.setValueAtTime(s,t),this._noise.start(t),this._noise.stop(t+s*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(t),this._lfcf.resonance.setValueAtTime(this.resonance,t),this}triggerRelease(e){return this._lfcf.resonance.linearRampTo(0,this.release,e),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class ma extends Wo{constructor(){const e=Di(ma.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=e=>this.releaseAll(e),ui(!ii(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Wo.getDefaults(),{maxPolyphony:32,options:{},voice:Qo})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(t=>t.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return ui(e instanceof Ho,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}bi("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,n){e.forEach(e=>{const s=new Hr(this.context,e).toMidi(),i=this._getNextAvailableVoice();i&&(i.triggerAttack(e,t,n),this._activeVoices.push({midi:s,voice:i,released:!1}),this.log("triggerAttack",e,t))})}_triggerRelease(e,t){e.forEach(e=>{const n=new Hr(this.context,e).toMidi(),s=this._activeVoices.find(e=>{let{midi:t,released:s}=e;return t===n&&!s});s&&(s.voice.triggerRelease(t),s.released=!0,this.log("triggerRelease",e,t))})}_scheduleEvent(e,t,n,s){ui(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===e?this._triggerAttack(t,n,s):this._triggerRelease(t,n):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,n,s)},n-this.now())}triggerAttack(e,t,n){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("attack",e,s,n),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const n=this.toSeconds(t);return this._scheduleEvent("release",e,n),this}triggerAttackRelease(e,t,n,s){const i=this.toSeconds(n);if(this.triggerAttack(e,i,s),ai(t)){ui(ai(e),"If the duration is an array, the notes must also be an array");for(let n=0;n<e.length;n++){const s=t[Math.min(n,t.length-1)],r=this.toSeconds(s);ui(r>0,"The duration must be greater than 0"),this.triggerRelease(e[n],i+r)}}else{const n=this.toSeconds(t);ui(n>0,"The duration must be greater than 0"),this.triggerRelease(e,i+n)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=Ni(e,["onsilence","context"]);return this.options=Pi(this.options,t),this._voices.forEach(e=>e.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(e=>{let{voice:n}=e;n.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class ga extends Wo{constructor(){const e=Di(ga.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(n=>{const s=parseInt(n,10);if(ui(ci(n)||ii(s)&&isFinite(s),"url key is neither a note or midi pitch: ".concat(n)),ci(n)){const s=new gr(this.context,n).toMidi();t[s]=e.urls[n]}else ii(s)&&isFinite(s)&&(t[s]=e.urls[s])}),this._buffers=new Wr({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Wo.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ji,onerror:Ji,release:.1,urls:{}})}_findClosest(e){let t=0;for(;t<96;){if(this._buffers.has(e+t))return-t;if(this._buffers.has(e-t))return t;t++}throw new Error("No available buffers for note: ".concat(e))}triggerAttack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.log("triggerAttack",e,t,n),Array.isArray(e)||(e=[e]),e.forEach(e=>{const s=hr(new gr(this.context,e).toFrequency()),i=Math.round(s),r=s-i,o=this._findClosest(i),a=i-o,l=this._buffers.get(a),c=lr(o+r),u=new oo({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:c}).connect(this.output);u.start(t,0,l.duration/c,n),ai(this._activeSources.get(i))||this._activeSources.set(i,[]),this._activeSources.get(i).push(u),u.onended=()=>{if(this._activeSources&&this._activeSources.has(i)){const e=this._activeSources.get(i),t=e.indexOf(u);-1!==t&&e.splice(t,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(e=>{const n=new gr(this.context,e).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const e=this._activeSources.get(n);t=this.toSeconds(t),e.forEach(e=>{e.stop(t)}),this._activeSources.set(n,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(e=>{for(;e.length;){e.shift().stop(t)}}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=this.toSeconds(n);return this.triggerAttack(e,i,s),ai(t)?(ui(ai(e),"notes must be an array when duration is array"),e.forEach((e,n)=>{const s=t[Math.min(n,t.length-1)];this.triggerRelease(e,i+this.toSeconds(s))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,n){if(ui(ci(e)||isFinite(e),"note must be a pitch or midi: ".concat(e)),ci(e)){const s=new gr(this.context,e).toMidi();this._buffers.add(s,t,n)}else this._buffers.add(e,t,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}xi([Ro(0)],ga.prototype,"attack",void 0),xi([Ro(0)],ga.prototype,"release",void 0);class ya extends kr{constructor(){const e=Di(ya.getDefaults(),arguments,["callback","value"]);super(e),this.name="ToneEvent",this._state=new xr("stopped"),this._startOffset=0,this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(kr.getDefaults(),{callback:Ji,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._state.forEachFrom(e,e=>{let t;if("started"===e.state){-1!==e.id&&this.context.transport.clear(e.id);const n=e.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||ii(this._loop)&&this._loop>1){t=1/0,ii(this._loop)&&(t=this._loop*this._getLoopDuration());const s=this._state.getAfter(n);null!==s&&(t=Math.min(t,s.time-n)),t!==1/0&&(t=new Qr(this.context,t));const i=new Qr(this.context,this._getLoopDuration());e.id=this.context.transport.scheduleRepeat(this._tick.bind(this),i,new Qr(this.context,n),t)}else e.id=this.context.transport.schedule(this._tick.bind(this),new Qr(this.context,n))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const t=this.toTicks(e);return"stopped"===this._state.getValueAtTime(t)&&(this._state.add({id:-1,state:"started",time:t}),this._rescheduleEvents(t)),this}stop(e){this.cancel(e);const t=this.toTicks(e);if("started"===this._state.getValueAtTime(t)){this._state.setStateAtTime("stopped",t,{id:-1});const e=this._state.getBefore(t);let n=t;null!==e&&(n=e.time),this._rescheduleEvents(n)}return this}cancel(e){e=Mi(e,-1/0);const t=this.toTicks(e);return this._state.forEachFrom(t,e=>{this.context.transport.clear(e.id)}),this._state.cancel(t),this}_tick(e){const t=this.context.transport.getTicksAtTime(e);if(!this.mute&&"started"===this._state.getValueAtTime(t)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let t=.02;oi(this.humanize)||(t=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*t}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new Qr(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new Qr(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,t=this._state.get(e);if(null!==t&&"started"===t.state){const n=this._getLoopDuration();return(e-t.time)%n/n}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class va extends kr{constructor(){const e=Di(va.getDefaults(),arguments,["callback","interval"]);super(e),this.name="Loop",this._event=new ya({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability,humanize:e.humanize}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(kr.getDefaults(),{interval:"4n",callback:Ji,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(e){return this._event.start(e),this}stop(e){return this._event.stop(e),this}cancel(e){return this._event.cancel(e),this}_tick(e){this.callback(e)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(e){this._event.loopEnd=e}get playbackRate(){return this._event.playbackRate}set playbackRate(e){this._event.playbackRate=e}get humanize(){return this._event.humanize}set humanize(e){this._event.humanize=e}get probability(){return this._event.probability}set probability(e){this._event.probability=e}get mute(){return this._event.mute}set mute(e){this._event.mute=e}get iterations(){return!0===this._event.loop?1/0:this._event.loop}set iterations(e){this._event.loop=e===1/0||e}dispose(){return super.dispose(),this._event.dispose(),this}}class _a extends ya{constructor(){const e=Di(_a.getDefaults(),arguments,["callback","events"]);super(e),this.name="Part",this._state=new xr("stopped"),this._events=new Set,this._state.increasing=!0,e.events.forEach(e=>{ai(e)?this.add(e[0],e[1]):this.add(e)})}static getDefaults(){return Object.assign(ya.getDefaults(),{events:[]})}start(e,t){const n=this.toTicks(e);if("started"!==this._state.getValueAtTime(n)){t=Mi(t,this._loop?this._loopStart:0),t=this._loop?Mi(t,this._loopStart):Mi(t,0);const e=this.toTicks(t);this._state.add({id:-1,offset:e,state:"started",time:n}),this._forEach(t=>{this._startNote(t,n,e)})}return this}_startNote(e,t,n){t-=n,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<n&&(t+=this._getLoopDuration()),e.start(new Qr(this.context,t))):e.startOffset<this._loopStart&&e.startOffset>=n&&(e.loop=!1,e.start(new Qr(this.context,t))):e.startOffset>=n&&e.start(new Qr(this.context,t))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(e=>{e.startOffset+=this._startOffset})}stop(e){const t=this.toTicks(e);return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._forEach(t=>{t.stop(e)}),this}at(e,t){const n=new br(this.context,e).toTicks(),s=new Qr(this.context,1).toSeconds(),i=this._events.values();let r=i.next();for(;!r.done;){const e=r.value;if(Math.abs(n-e.startOffset)<s)return ni(t)&&(e.value=t),e;r=i.next()}return ni(t)?(this.add(e,t),this.at(e)):null}add(e,t){e instanceof Object&&Reflect.has(e,"time")&&(e=(t=e).time);const n=this.toTicks(e);let s;return t instanceof ya?(s=t,s.callback=this._tick.bind(this)):s=new ya({callback:this._tick.bind(this),context:this.context,value:t}),s.startOffset=n,s.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(s),this._restartEvent(s),this}_restartEvent(e){this._state.forEach(t=>{"started"===t.state?this._startNote(e,t.time,t.offset):e.stop(new Qr(this.context,t.time))})}remove(e,t){return ri(e)&&e.hasOwnProperty("time")&&(e=(t=e).time),e=this.toTicks(e),this._events.forEach(n=>{n.startOffset===e&&(ti(t)||ni(t)&&n.value===t)&&(this._events.delete(n),n.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(t=>t.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(t=>{t instanceof _a?t._forEach(e):e(t)}),this}_setAll(e,t){this._forEach(n=>{n[e]=t})}_tick(e,t){this.mute||this.callback(e,t)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):"stopped"===e.state&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(t=>{t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.loop=e,this._testLoopBoundries(t)})}get loopEnd(){return new Qr(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(t=>{t.loopEnd=e,this._testLoopBoundries(t)})}get loopStart(){return new Qr(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(e=>{e.loopStart=this.loopStart,this._testLoopBoundries(e)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*ba(e){let t=0;for(;t<e;)t=zi(t,0,e-1),yield t,t++}function*wa(e){let t=e-1;for(;t>=0;)t=zi(t,0,e-1),yield t,t--}function*ka(e,t){for(;;)yield*t(e)}function*xa(e,t){let n=t?0:e-1;for(;;)n=zi(n,0,e-1),yield n,t?(n++,n>=e-1&&(t=!1)):(n--,n<=0&&(t=!0))}function*Sa(e){let t=0,n=0;for(;t<e;)t=zi(t,0,e-1),yield t,n++,t+=n%2?2:-1}function*Ta(e){let t=e-1,n=0;for(;t>=0;)t=zi(t,0,e-1),yield t,n++,t+=n%2?-2:1}function*Ca(e){const t=[];for(let n=0;n<e;n++)t.push(n);for(;t.length>0;){const n=zi(t.splice(Math.floor(t.length*Math.random()),1)[0],0,e-1);yield n}}function Ea(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"up";return function*(){switch(ui(e>=1,"The number of values must be at least one"),t){case"up":yield*ka(e,ba);case"down":yield*ka(e,wa);case"upDown":yield*xa(e,!0);case"downUp":yield*xa(e,!1);case"alternateUp":yield*ka(e,Sa);case"alternateDown":yield*ka(e,Ta);case"random":yield*function*(e){for(;;){const t=Math.floor(Math.random()*e);yield t}}(e);case"randomOnce":yield*ka(e,Ca);case"randomWalk":yield*function*(e){let t=Math.floor(Math.random()*e);for(;;)0===t?t++:t===e-1||Math.random()<.5?t--:t++,yield t}(e)}}()}class Aa extends va{constructor(){const e=Di(Aa.getDefaults(),arguments,["callback","values","pattern"]);super(e),this.name="Pattern",this.callback=e.callback,this._values=e.values,this._pattern=Ea(e.values.length,e.pattern),this._type=e.pattern}static getDefaults(){return Object.assign(va.getDefaults(),{pattern:"up",values:[],callback:Ji})}_tick(e){const t=this._pattern.next();this._index=t.value,this._value=this._values[t.value],this.callback(e,this._value)}get values(){return this._values}set values(e){this._values=e,this.pattern=this._type}get value(){return this._value}get index(){return this._index}get pattern(){return this._type}set pattern(e){this._type=e,this._pattern=Ea(this._values.length,this._type)}}class Oa extends ya{constructor(){const e=Di(Oa.getDefaults(),arguments,["callback","events","subdivision"]);super(e),this.name="Sequence",this._part=new _a({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[],this._subdivision=this.toTicks(e.subdivision),this.events=e.events,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.playbackRate=e.playbackRate,this.probability=e.probability,this.humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate}static getDefaults(){return Object.assign(Ni(ya.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(e,t){null===t||this.mute||this.callback(e,t)}get events(){return this._events}set events(e){this.clear(),this._eventsArray=e,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(e,t){return this._part.start(e,t?this._indexTime(t):t),this}stop(e){return this._part.stop(e),this}get subdivision(){return new Qr(this.context,this._subdivision).toSeconds()}_createSequence(e){return new Proxy(e,{get:(e,t)=>e[t],set:(e,t,n)=>(li(t)&&isFinite(parseInt(t,10))&&ai(n)?e[t]=this._createSequence(n):e[t]=n,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(e,t,n){e.forEach((e,s)=>{const i=s*t+n;if(ai(e))this._rescheduleSequence(e,t/e.length,i);else{const t=new Qr(this.context,i,"i").toSeconds();this._part.add(t,e)}})}_indexTime(e){return new Qr(this.context,e*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(e){this._part.loop=e}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this._part.loopStart=this._indexTime(e)}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this._part.loopEnd=0===e?this._indexTime(this._eventsArray.length):this._indexTime(e)}get startOffset(){return this._part.startOffset}set startOffset(e){this._part.startOffset=e}get playbackRate(){return this._part.playbackRate}set playbackRate(e){this._part.playbackRate=e}get probability(){return this._part.probability}set probability(e){this._part.probability=e}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(e){this._part.humanize=e}get length(){return this._part.length}}class Ra extends Tr{constructor(){const e=Di(Ra.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new jo({context:this.context}),this.a=new Rr({context:this.context,gain:0}),this.b=new Rr({context:this.context,gain:0}),this.output=new Rr({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new Mr({context:this.context,units:"normalRange",value:e.fade}),Yi(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Er(this._split,this.a.gain,0),Er(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(Tr.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Pa extends Tr{constructor(e){super(e),this.name="Effect",this._dryWet=new Ra({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Rr({context:this.context}),this.effectReturn=new Rr({context:this.context}),this.input=new Rr({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Yi(this,"wet")}static getDefaults(){return Object.assign(Tr.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Da extends Pa{constructor(e){super(e),this.name="LFOEffect",this._lfo=new Ao({context:this.context,frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=e.type,Yi(this,["frequency","depth"])}static getDefaults(){return Object.assign(Pa.getDefaults(),{frequency:1,type:"sine",depth:1})}start(e){return this._lfo.start(e),this}stop(e){return this._lfo.stop(e),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Ma extends Da{constructor(){const e=Di(Ma.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);super(e),this.name="AutoFilter",this.filter=new $o(Object.assign(e.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency}static getDefaults(){return Object.assign(Da.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(e){this._lfo.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._lfo.max=this._lfo.min*Math.pow(2,e)}dispose(){return super.dispose(),this.filter.dispose(),this}}class Na extends Tr{constructor(){const e=Di(Na.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Sr({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Yi(this,"pan")}static getDefaults(){return Object.assign(Tr.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class ja extends Da{constructor(){const e=Di(ja.getDefaults(),arguments,["frequency"]);super(e),this.name="AutoPanner",this._panner=new Na({context:this.context,channelCount:e.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(Da.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class Fa extends Tr{constructor(){const e=Di(Fa.getDefaults(),arguments,["smoothing"]);super(e),this.name="Follower",this._abs=this.input=new No({context:this.context}),this._lowpass=this.output=new da({context:this.context,frequency:1/this.toSeconds(e.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=e.smoothing}static getDefaults(){return Object.assign(Tr.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(e){this._smoothing=e,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class Ia extends Pa{constructor(){const e=Di(Ia.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);super(e),this.name="AutoWah",this._follower=new Fa({context:this.context,smoothing:e.follower}),this._sweepRange=new Vo({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this._inputBoost=new Rr({context:this.context}),this._bandpass=new $o({context:this.context,rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new $o({context:this.context,type:"peaking"}),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,Yi(this,["gain","Q"])}static getDefaults(){return Object.assign(Pa.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(e){this._follower.smoothing=e}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._setSweepRange()}get sensitivity(){return ar(1/this._inputBoost.gain.value)}set sensitivity(e){this._inputBoost.gain.value=1/or(e)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const qa="bit-crusher";la(qa,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class La extends Pa{constructor(){const e=Di(La.getDefaults(),arguments,["bits"]);super(e),this.name="BitCrusher",this._bitCrusherWorklet=new Va({context:this.context,bits:e.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(Pa.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class Va extends ca{constructor(){const e=Di(Va.getDefaults(),arguments);super(e),this.name="BitCrusherWorklet",this.input=new Rr({context:this.context}),this.output=new Rr({context:this.context}),this.bits=new Sr({context:this.context,value:e.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(ca.getDefaults(),{bits:12})}_audioWorkletName(){return qa}onReady(e){Cr(this.input,e,this.output);const t=e.parameters.get("bits");this.bits.setParam(t)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class za extends Pa{constructor(){const e=Di(za.getDefaults(),arguments,["order"]);super(e),this.name="Chebyshev",this._shaper=new eo({context:this.context,length:4096}),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample}static getDefaults(){return Object.assign(Pa.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(e,t,n){return n.has(t)||(0===t?n.set(t,0):1===t?n.set(t,e):n.set(t,2*e*this._getCoefficient(e,t-1,n)-this._getCoefficient(e,t-2,n))),n.get(t)}get order(){return this._order}set order(e){ui(Number.isInteger(e),"'order' must be an integer"),this._order=e,this._shaper.setMap(t=>this._getCoefficient(t,e,new Map))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Ua extends Tr{constructor(){const e=Di(Ua.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(Tr.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Ba extends Tr{constructor(){const e=Di(Ba.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(Tr.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Wa extends Tr{constructor(e){super(e),this.name="StereoEffect",this.input=new Rr({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new Ra({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new Ua({context:this.context,channels:2}),this._merge=new Ba({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Yi(this,["wet"])}connectEffectLeft(){var e;this._split.connect(arguments.length<=0?void 0:arguments[0],0,0),Cr(...arguments),Er((e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e],this._merge,0,0)}connectEffectRight(){var e;this._split.connect(arguments.length<=0?void 0:arguments[0],1,0),Cr(...arguments),Er((e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e],this._merge,0,1)}static getDefaults(){return Object.assign(Tr.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Ha extends Wa{constructor(e){super(e),this.feedback=new Mr({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new Rr({context:this.context}),this._feedbackR=new Rr({context:this.context}),this._feedbackSplit=new Ua({context:this.context,channels:2}),this._feedbackMerge=new Ba({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Yi(this,["feedback"])}static getDefaults(){return Object.assign(Wa.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Ga extends Ha{constructor(){const e=Di(Ga.getDefaults(),arguments,["frequency","delayTime","depth"]);super(e),this.name="Chorus",this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new Ao({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new Ao({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new Lr({context:this.context}),this._delayNodeR=new Lr({context:this.context}),this.frequency=this._lfoL.frequency,Yi(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign(Ha.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;const t=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-t,0),this._lfoL.max=this._delayTime+t,this._lfoR.min=Math.max(this._delayTime-t,0),this._lfoR.max=this._delayTime+t}get delayTime(){return 1e3*this._delayTime}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Qa extends Pa{constructor(){const e=Di(Qa.getDefaults(),arguments,["distortion"]);super(e),this.name="Distortion",this._shaper=new eo({context:this.context,length:4096}),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample}static getDefaults(){return Object.assign(Pa.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(e){this._distortion=e;const t=100*e,n=Math.PI/180;this._shaper.setMap(e=>Math.abs(e)<.001?0:(3+t)*e*20*n/(Math.PI+t*Math.abs(e)))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Ka extends Pa{constructor(e){super(e),this.name="FeedbackEffect",this._feedbackGain=new Rr({context:this.context,gain:e.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,Yi(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Pa.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Xa extends Ka{constructor(){const e=Di(Xa.getDefaults(),arguments,["delayTime","feedback"]);super(e),this.name="FeedbackDelay",this._delayNode=new Lr({context:this.context,delayTime:e.delayTime,maxDelay:e.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),Yi(this,"delayTime")}static getDefaults(){return Object.assign(Ka.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class Ya extends Tr{constructor(e){super(e),this.name="PhaseShiftAllpass",this.input=new Rr({context:this.context}),this.output=new Rr({context:this.context}),this.offset90=new Rr({context:this.context});this._bank0=this._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),this._bank1=this._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),Cr(this.input,...this._bank0,this._oneSampleDelay,this.output),Cr(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(e){return e.map(e=>{const t=[[e*e,0,-1],[1,0,-e*e]];return this.context.createIIRFilter(t[0],t[1])})}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(e=>e.disconnect()),this._bank1.forEach(e=>e.disconnect()),this._oneSampleDelay.disconnect(),this}}class $a extends Pa{constructor(){const e=Di($a.getDefaults(),arguments,["frequency"]);super(e),this.name="FrequencyShifter",this.frequency=new Mr({context:this.context,units:"frequency",value:e.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new fo({context:this.context,type:"sine"}),this._cosine=new mo({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new yo({context:this.context}),this._cosineMultiply=new yo({context:this.context}),this._negate=new Fo({context:this.context}),this._add=new To({context:this.context}),this._phaseShifter=new Ya({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const t=this.immediate();this._sine.start(t),this._cosine.start(t)}static getDefaults(){return Object.assign(Pa.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const Ja=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],Za=[225,556,441,341];class el extends Wa{constructor(){const e=Di(el.getDefaults(),arguments,["roomSize","dampening"]);super(e),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[],this.roomSize=new Mr({context:this.context,value:e.roomSize,units:"normalRange"}),this._allpassFiltersL=Za.map(e=>{const t=this.context.createBiquadFilter();return t.type="allpass",t.frequency.value=e,t}),this._allpassFiltersR=Za.map(e=>{const t=this.context.createBiquadFilter();return t.type="allpass",t.frequency.value=e,t}),this._combFilters=Ja.map((t,n)=>{const s=new pa({context:this.context,dampening:e.dampening,delayTime:t});return n<Ja.length/2?this.connectEffectLeft(s,...this._allpassFiltersL):this.connectEffectRight(s,...this._allpassFiltersR),this.roomSize.connect(s.resonance),s}),Yi(this,["roomSize"])}static getDefaults(){return Object.assign(Wa.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(e){this._combFilters.forEach(t=>t.dampening=e)}dispose(){return super.dispose(),this._allpassFiltersL.forEach(e=>e.disconnect()),this._allpassFiltersR.forEach(e=>e.disconnect()),this._combFilters.forEach(e=>e.dispose()),this.roomSize.dispose(),this}}const tl=[.06748,.06404,.08212,.09004],nl=[.773,.802,.753,.733],sl=[347,113,37];class il extends Wa{constructor(){const e=Di(il.getDefaults(),arguments,["roomSize"]);super(e),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[],this.roomSize=new Mr({context:this.context,value:e.roomSize,units:"normalRange"}),this._scaleRoomSize=new Co({context:this.context,min:-.733,max:.197}),this._allpassFilters=sl.map(e=>{const t=this.context.createBiquadFilter();return t.type="allpass",t.frequency.value=e,t}),this._feedbackCombFilters=tl.map((e,t)=>{const n=new ha({context:this.context,delayTime:e});return this._scaleRoomSize.connect(n.resonance),n.resonance.value=nl[t],t<tl.length/2?this.connectEffectLeft(...this._allpassFilters,n):this.connectEffectRight(...this._allpassFilters,n),n}),this.roomSize.connect(this._scaleRoomSize),Yi(this,["roomSize"])}static getDefaults(){return Object.assign(Wa.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(e=>e.disconnect()),this._feedbackCombFilters.forEach(e=>e.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class rl extends Ha{constructor(e){super(e),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),Yi(this,["feedback"])}}class ol extends rl{constructor(){const e=Di(ol.getDefaults(),arguments,["delayTime","feedback"]);super(e),this.name="PingPongDelay",this._leftDelay=new Lr({context:this.context,maxDelay:e.maxDelay}),this._rightDelay=new Lr({context:this.context,maxDelay:e.maxDelay}),this._rightPreDelay=new Lr({context:this.context,maxDelay:e.maxDelay}),this.delayTime=new Mr({context:this.context,units:"time",value:e.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),Yi(this,["delayTime"])}static getDefaults(){return Object.assign(rl.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class al extends Ka{constructor(){const e=Di(al.getDefaults(),arguments,["pitch"]);super(e),this.name="PitchShift",this._frequency=new Mr({context:this.context}),this._delayA=new Lr({maxDelay:1,context:this.context}),this._lfoA=new Ao({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new Lr({maxDelay:1,context:this.context}),this._lfoB=new Ao({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new Ra({context:this.context}),this._crossFadeLFO=new Ao({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new Lr({delayTime:e.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,Yi(this,"delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const t=this.now();this._lfoA.start(t),this._lfoB.start(t),this._crossFadeLFO.start(t),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(Ka.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(e){this._pitch=e;let t=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,t=lr(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,t=lr(e)-1),this._frequency.value=t*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(e){this._windowSize=this.toSeconds(e),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class ll extends Wa{constructor(){const e=Di(ll.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);super(e),this.name="Phaser",this._lfoL=new Ao({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new Ao({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this.Q=new Mr({context:this.context,value:e.Q,units:"positive"}),this._filtersL=this._makeFilters(e.stages,this._lfoL),this._filtersR=this._makeFilters(e.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),Yi(this,["frequency","Q"])}static getDefaults(){return Object.assign(Wa.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(e,t){const n=[];for(let s=0;s<e;s++){const e=this.context.createBiquadFilter();e.type="allpass",this.Q.connect(e.Q),t.connect(e.frequency),n.push(e)}return n}get octaves(){return this._octaves}set octaves(e){this._octaves=e;const t=this._baseFrequency*Math.pow(2,e);this._lfoL.max=t,this._lfoR.max=t}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(e=>e.disconnect()),this._filtersR.forEach(e=>e.disconnect()),this.frequency.dispose(),this}}class cl extends Pa{constructor(){const e=Di(cl.getDefaults(),arguments,["decay"]);super(e),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const t=this.toSeconds(e.decay);hi(t,.001),this._decay=t;const n=this.toSeconds(e.preDelay);hi(n,0),this._preDelay=n,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Pa.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){hi(e=this.toSeconds(e),.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){hi(e=this.toSeconds(e),0),this._preDelay=e,this.generate()}generate(){return Si(this,void 0,void 0,function*(){const e=this.ready,t=new er(2,this._decay+this._preDelay,this.context.sampleRate),n=new ao({context:t}),s=new ao({context:t}),i=new Ba({context:t});n.connect(i,0,0),s.connect(i,0,1);const r=new Rr({context:t}).toDestination();i.connect(r),n.start(0),s.start(0),r.gain.setValueAtTime(0,0),r.gain.setValueAtTime(1,this._preDelay),r.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const o=t.render();return this.ready=o.then(Ji),yield e,this._convolver.buffer=(yield o).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class ul extends Tr{constructor(){super(Di(ul.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new Ua({channels:2,context:this.context}),this._midAdd=new To({context:this.context}),this.mid=new yo({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new Io({context:this.context}),this.side=new yo({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class hl extends Tr{constructor(){super(Di(hl.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new Rr({context:this.context}),this.side=new Rr({context:this.context}),this._left=new To({context:this.context}),this._leftMult=new yo({context:this.context,value:Math.SQRT1_2}),this._right=new Io({context:this.context}),this._rightMult=new yo({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new Ba({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class dl extends Pa{constructor(e){super(e),this.name="MidSideEffect",this._midSideMerge=new hl({context:this.context}),this._midSideSplit=new ul({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._midSend.chain(...t,this._midReturn)}connectEffectSide(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._sideSend.chain(...t,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class pl extends dl{constructor(){const e=Di(pl.getDefaults(),arguments,["width"]);super(e),this.name="StereoWidener",this.width=new Mr({context:this.context,value:e.width,units:"normalRange"}),Yi(this,["width"]),this._twoTimesWidthMid=new yo({context:this.context,value:2}),this._twoTimesWidthSide=new yo({context:this.context,value:2}),this._midMult=new yo({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new Io({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),Er(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new yo({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(dl.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class fl extends Wa{constructor(){const e=Di(fl.getDefaults(),arguments,["frequency","depth"]);super(e),this.name="Tremolo",this._lfoL=new Ao({context:this.context,type:e.type,min:1,max:0}),this._lfoR=new Ao({context:this.context,type:e.type,min:1,max:0}),this._amplitudeL=new Rr({context:this.context}),this._amplitudeR=new Rr({context:this.context}),this.frequency=new Mr({context:this.context,value:e.frequency,units:"frequency"}),this.depth=new Mr({context:this.context,value:e.depth,units:"normalRange"}),Yi(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=e.spread}static getDefaults(){return Object.assign(Wa.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class ml extends Pa{constructor(){const e=Di(ml.getDefaults(),arguments,["frequency","depth"]);super(e),this.name="Vibrato",this._delayNode=new Lr({context:this.context,delayTime:0,maxDelay:e.maxDelay}),this._lfo=new Ao({context:this.context,type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,Yi(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(Pa.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class gl extends Tr{constructor(){const e=Di(gl.getDefaults(),arguments,["type","size"]);super(e),this.name="Analyser",this._analysers=[],this._buffers=[],this.input=this.output=this._gain=new Rr({context:this.context}),this._split=new Ua({context:this.context,channels:e.channels}),this.input.connect(this._split),hi(e.channels,1);for(let t=0;t<e.channels;t++)this._analysers[t]=this.context.createAnalyser(),this._split.connect(this._analysers[t],t,0);this.size=e.size,this.type=e.type,this.smoothing=e.smoothing}static getDefaults(){return Object.assign(Tr.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((e,t)=>{const n=this._buffers[t];"fft"===this._type?e.getFloatFrequencyData(n):"waveform"===this._type&&e.getFloatTimeDomainData(n)}),1===this.channels?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(e){this._analysers.forEach((t,n)=>{t.fftSize=2*e,this._buffers[n]=new Float32Array(e)})}get channels(){return this._analysers.length}get type(){return this._type}set type(e){ui("waveform"===e||"fft"===e,"Analyser: invalid type: ".concat(e)),this._type=e}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(e){this._analysers.forEach(t=>t.smoothingTimeConstant=e)}dispose(){return super.dispose(),this._analysers.forEach(e=>e.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class yl extends Tr{constructor(){super(Di(yl.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new gl({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class vl extends yl{constructor(){const e=Di(vl.getDefaults(),arguments,["smoothing"]);super(e),this.name="Meter",this.input=this.output=this._analyser=new gl({context:this.context,size:256,type:"waveform",channels:e.channelCount}),this.smoothing=e.smoothing,this.normalRange=e.normalRange,this._rms=new Array(e.channelCount),this._rms.fill(0)}static getDefaults(){return Object.assign(yl.getDefaults(),{smoothing:.8,normalRange:!1,channelCount:1})}getLevel(){return bi("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const e=this._analyser.getValue(),t=(1===this.channels?[e]:e).map((e,t)=>{const n=e.reduce((e,t)=>e+t*t,0),s=Math.sqrt(n/e.length);return this._rms[t]=Math.max(s,this._rms[t]*this.smoothing),this.normalRange?this._rms[t]:ar(this._rms[t])});return 1===this.channels?t[0]:t}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class _l extends yl{constructor(){const e=Di(_l.getDefaults(),arguments,["size"]);super(e),this.name="FFT",this.normalRange=e.normalRange,this._analyser.type="fft",this.size=e.size}static getDefaults(){return Object.assign(Tr.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(e=>this.normalRange?or(e):e)}get size(){return this._analyser.size}set size(e){this._analyser.size=e}get smoothing(){return this._analyser.smoothing}set smoothing(e){this._analyser.smoothing=e}getFrequencyOfIndex(e){return ui(0<=e&&e<this.size,"index must be greater than or equal to 0 and less than ".concat(this.size)),e*this.context.sampleRate/(2*this.size)}}class bl extends yl{constructor(){super(Di(bl.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class wl extends yl{constructor(){const e=Di(wl.getDefaults(),arguments,["size"]);super(e),this.name="Waveform",this._analyser.type="waveform",this.size=e.size}static getDefaults(){return Object.assign(yl.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(e){this._analyser.size=e}}class kl extends Tr{constructor(){const e=Di(kl.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Rr({context:this.context}),kl._allSolos.has(this.context)||kl._allSolos.set(this.context,new Set),kl._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(Tr.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),kl._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){kl._soloed.has(this.context)||kl._soloed.set(this.context,new Set),kl._soloed.get(this.context).add(this)}_removeSolo(){kl._soloed.has(this.context)&&kl._soloed.get(this.context).delete(this)}_isSoloed(){return kl._soloed.has(this.context)&&kl._soloed.get(this.context).has(this)}_noSolos(){return!kl._soloed.has(this.context)||kl._soloed.has(this.context)&&0===kl._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),kl._allSolos.get(this.context).delete(this),this._removeSolo(),this}}kl._allSolos=new Map,kl._soloed=new Map;class xl extends Tr{constructor(){const e=Di(xl.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Na({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Vr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Yi(this,["pan","volume"])}static getDefaults(){return Object.assign(Tr.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Sl extends Tr{constructor(){const e=Di(Sl.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new kl({solo:e.solo,context:this.context}),this._panVol=this.output=new xl({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Yi(this,["pan","volume"])}static getDefaults(){return Object.assign(Tr.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Sl.buses.has(e)||Sl.buses.set(e,new Rr({context:this.context})),Sl.buses.get(e)}send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this._getBus(e),s=new Rr({context:this.context,units:"decibels",gain:t});return this.connect(s),s.connect(n),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Sl.buses=new Map;class Tl extends Tr{constructor(){super(Di(Tl.getDefaults(),arguments)),this.name="Mono",this.input=new Rr({context:this.context}),this._merge=this.output=new Ba({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class Cl extends Tr{constructor(){const e=Di(Cl.getDefaults(),arguments,["lowFrequency","highFrequency"]);super(e),this.name="MultibandSplit",this.input=new Rr({context:this.context}),this.output=void 0,this.low=new $o({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new $o({context:this.context,frequency:0,type:"highpass"}),this.mid=new $o({context:this.context,frequency:0,type:"lowpass"}),this.high=new $o({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high],this.lowFrequency=new Mr({context:this.context,units:"frequency",value:e.lowFrequency}),this.highFrequency=new Mr({context:this.context,units:"frequency",value:e.highFrequency}),this.Q=new Mr({context:this.context,units:"positive",value:e.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),Yi(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(Tr.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),$i(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class El extends Tr{constructor(){const e=Di(El.getDefaults(),arguments,["positionX","positionY","positionZ"]);super(e),this.name="Panner3D",this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=e.panningModel,this.maxDistance=e.maxDistance,this.distanceModel=e.distanceModel,this.coneOuterGain=e.coneOuterGain,this.coneOuterAngle=e.coneOuterAngle,this.coneInnerAngle=e.coneInnerAngle,this.refDistance=e.refDistance,this.rolloffFactor=e.rolloffFactor,this.positionX=new Sr({context:this.context,param:this._panner.positionX,value:e.positionX}),this.positionY=new Sr({context:this.context,param:this._panner.positionY,value:e.positionY}),this.positionZ=new Sr({context:this.context,param:this._panner.positionZ,value:e.positionZ}),this.orientationX=new Sr({context:this.context,param:this._panner.orientationX,value:e.orientationX}),this.orientationY=new Sr({context:this.context,param:this._panner.orientationY,value:e.orientationY}),this.orientationZ=new Sr({context:this.context,param:this._panner.orientationZ,value:e.orientationZ})}static getDefaults(){return Object.assign(Tr.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(e,t,n){return this.positionX.value=e,this.positionY.value=t,this.positionZ.value=n,this}setOrientation(e,t,n){return this.orientationX.value=e,this.orientationY.value=t,this.orientationZ.value=n,this}get panningModel(){return this._panner.panningModel}set panningModel(e){this._panner.panningModel=e}get refDistance(){return this._panner.refDistance}set refDistance(e){this._panner.refDistance=e}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(e){this._panner.rolloffFactor=e}get distanceModel(){return this._panner.distanceModel}set distanceModel(e){this._panner.distanceModel=e}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(e){this._panner.coneInnerAngle=e}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(e){this._panner.coneOuterAngle=e}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(e){this._panner.coneOuterGain=e}get maxDistance(){return this._panner.maxDistance}set maxDistance(e){this._panner.maxDistance=e}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class Al extends Tr{constructor(){const e=Di(Al.getDefaults(),arguments);super(e),this.name="Recorder",this.input=new Rr({context:this.context}),ui(Al.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:e.mimeType})}static getDefaults(){return Tr.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return null!==wi&&Reflect.has(wi,"MediaRecorder")}get state(){return"inactive"===this._recorder.state?"stopped":"paused"===this._recorder.state?"paused":"started"}start(){return Si(this,void 0,void 0,function*(){ui("started"!==this.state,"Recorder is already started");const e=new Promise(e=>{const t=()=>{this._recorder.removeEventListener("start",t,!1),e()};this._recorder.addEventListener("start",t,!1)});return"stopped"===this.state?this._recorder.start():this._recorder.resume(),yield e})}stop(){return Si(this,void 0,void 0,function*(){ui("stopped"!==this.state,"Recorder is not started");const e=new Promise(e=>{const t=n=>{this._recorder.removeEventListener("dataavailable",t,!1),e(n.data)};this._recorder.addEventListener("dataavailable",t,!1)});return this._recorder.stop(),yield e})}pause(){return ui("started"===this.state,"Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class Ol extends Tr{constructor(){const e=Di(Ol.getDefaults(),arguments,["threshold","ratio"]);super(e),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor,this.threshold=new Sr({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:e.threshold}),this.attack=new Sr({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:e.attack}),this.release=new Sr({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:e.release}),this.knee=new Sr({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:e.knee}),this.ratio=new Sr({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:e.ratio}),Yi(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(Tr.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class Rl extends Tr{constructor(){const e=Di(Rl.getDefaults(),arguments,["threshold","smoothing"]);super(e),this.name="Gate",this._follower=new Fa({context:this.context,smoothing:e.smoothing}),this._gt=new Lo({context:this.context,value:or(e.threshold)}),this.input=new Rr({context:this.context}),this._gate=this.output=new Rr({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(Tr.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return ar(this._gt.value)}set threshold(e){this._gt.value=or(e)}get smoothing(){return this._follower.smoothing}set smoothing(e){this._follower.smoothing=e}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class Pl extends Tr{constructor(){const e=Di(Pl.getDefaults(),arguments,["threshold"]);super(e),this.name="Limiter",this._compressor=this.input=this.output=new Ol({context:this.context,ratio:20,attack:.003,release:.01,threshold:e.threshold}),this.threshold=this._compressor.threshold,Yi(this,"threshold")}static getDefaults(){return Object.assign(Tr.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class Dl extends Tr{constructor(){const e=Di(Dl.getDefaults(),arguments);super(e),this.name="MidSideCompressor",this._midSideSplit=this.input=new ul({context:this.context}),this._midSideMerge=this.output=new hl({context:this.context}),this.mid=new Ol(Object.assign(e.mid,{context:this.context})),this.side=new Ol(Object.assign(e.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),Yi(this,["mid","side"])}static getDefaults(){return Object.assign(Tr.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class Ml extends Tr{constructor(){const e=Di(Ml.getDefaults(),arguments);super(e),this.name="MultibandCompressor",this._splitter=this.input=new Cl({context:this.context,lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new Rr({context:this.context}),this.low=new Ol(Object.assign(e.low,{context:this.context})),this.mid=new Ol(Object.assign(e.mid,{context:this.context})),this.high=new Ol(Object.assign(e.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),Yi(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(Tr.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class Nl extends Tr{constructor(){const e=Di(Nl.getDefaults(),arguments,["low","mid","high"]);super(e),this.name="EQ3",this.output=new Rr({context:this.context}),this._internalChannels=[],this.input=this._multibandSplit=new Cl({context:this.context,highFrequency:e.highFrequency,lowFrequency:e.lowFrequency}),this._lowGain=new Rr({context:this.context,gain:e.low,units:"decibels"}),this._midGain=new Rr({context:this.context,gain:e.mid,units:"decibels"}),this._highGain=new Rr({context:this.context,gain:e.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),Yi(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(Tr.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),$i(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class jl extends Tr{constructor(){const e=Di(jl.getDefaults(),arguments,["url","onload"]);super(e),this.name="Convolver",this._convolver=this.context.createConvolver(),this._buffer=new Zi(e.url,t=>{this.buffer=t,e.onload()}),this.input=new Rr({context:this.context}),this.output=new Rr({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=e.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(Tr.getDefaults(),{normalize:!0,onload:Ji})}load(e){return Si(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(e)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(e){e&&this._buffer.set(e),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const t=this._buffer.get();this._convolver.buffer=t||null}get normalize(){return this._convolver.normalize}set normalize(e){this._convolver.normalize=e}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function Fl(){return sr().now()}function Il(){return sr().immediate()}const ql=sr().transport;function Ll(){return sr().transport}const Vl=sr().destination,zl=sr().destination;function Ul(){return sr().destination}const Bl=sr().listener;function Wl(){return sr().listener}const Hl=sr().draw;function Gl(){return sr().draw}const Ql=sr();function Kl(){return Zi.loaded()}const Xl=Zi,Yl=Wr,$l=oo;var Jl=n(960);const Zl=e=>{let{drumSounds:t,pattern:n,currentStep:s,toggleStep:i}=e;return(0,Jl.jsxs)("div",{className:"sequencer-card",children:[(0,Jl.jsx)("h3",{children:"Sequencer"}),(0,Jl.jsx)("div",{className:"sequencer-grid",children:t.map(e=>(0,Jl.jsxs)("div",{className:"drum-row",children:[(0,Jl.jsx)("div",{className:"drum-label",children:e.name}),(0,Jl.jsx)("div",{className:"steps",children:n[e.name].map((t,n)=>(0,Jl.jsx)("div",{className:"step ".concat(t?"active":""," ").concat(s===n?"current":""),onClick:()=>i(e.name,n)},n))})]},e.name))})]})},ec={BPM:120,STEP_COUNT:16,VOLUME_DB:-10,VOLUME_MIN:-40,VOLUME_MAX:0,FILTER_FREQ:2e4,FILTER_Q:1},tc=[{id:"loop1",label:"Synth Arp"},{id:"loop2",label:"Piano"},{id:"loop3",label:"Techno"},{id:"loop4",label:"Ambient Pad"},{id:"loop5",label:"Pluck Synth"},{id:"loop6",label:"Glitchy Perc"}],nc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ec.VOLUME_MIN,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ec.VOLUME_MAX;if(!Number.isFinite(e))return 0;const s=Math.min(Math.max(e,t),n);return Math.round((s-t)/(n-t)*100)},sc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ec.VOLUME_MIN,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ec.VOLUME_MAX;return t+Math.min(Math.max(e,0),100)/100*(n-t)},ic=e=>{let{drumSounds:t,bpm:n,stepCount:s,pattern:r,drumVolumes:o,masterVolume:a,filterFreq:l,filterQ:c,loopPlaying:u,loopVolume:h,loop1:d,loop2:p,loop3:f,loop4:m,loop5:g,loop6:y}=e;const[v,_]=(0,i.useState)(!1),[b,w]=(0,i.useState)("wav"),[k,x]=(0,i.useState)("rounds"),[S,T]=(0,i.useState)("4"),[C,E]=(0,i.useState)("beatlab-pattern"),[A,O]=(0,i.useState)(!1),[R,P]=(0,i.useState)(0),[D,M]=(0,i.useState)(null),N=(0,i.useCallback)(()=>{if("rounds"===k){return 60*s/(4*n)*parseInt(S,10)}return parseInt(S,10)},[n,s,k,S]),j=(0,i.useCallback)(async()=>{const e=N(),i=s/4*(60/n),u=Math.ceil(e/i),h=60/(4*n);return await Br(s=>{let{transport:d}=s;const p=new Vr(a||-10);p.toDestination();const f=new $o(l||15e3,"lowpass").connect(p);f.Q.value=c||1;const m={};t.forEach(e=>{const t=new Vr(o[e.name]||-10).connect(f);"membrane"===e.type?m[e.name]=new ia({envelope:{attack:.005,decay:.4,sustain:0,release:.1}}).connect(t):m[e.name]=new ra({noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:.01,release:.05}}).connect(t)});for(let e=0;e<u;e++)t.forEach(t=>{const n=r[t.name];n&&Array.isArray(n)&&n.forEach((n,s)=>{if(n){const n=e*i+s*h;"membrane"===t.type?m[t.name].triggerAttackRelease(t.note,"8n",n):m[t.name].triggerAttackRelease("8n",n)}})});d.bpm.value=n,d.schedule(t=>{const n=t/e*100;P(Math.min(n,99))},[e]),d.start(0).stop(e)},e)},[N,t,r,o,a,l,c,s,n]),F=(0,i.useCallback)(async()=>{O(!0),P(0),M(null);try{const e=await j();if(!e)return M("Failed to render audio: buffer is empty"),void O(!1);((e,t)=>{const n=URL.createObjectURL(e),s=document.createElement("a");s.href=n,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)})((e=>{const t=e.sampleRate,n=e.numberOfChannels,s=e.length*n*2,i=new ArrayBuffer(44+s),r=new DataView(i),o=[];let a=0,l=0;const c=e=>{r.setUint16(l,e,!0),l+=2},u=e=>{r.setUint32(l,e,!0),l+=4};u(1179011410),u(36+s),u(1163280727),u(544501094),u(16),c(1),c(n),u(t),u(t*n*2),c(2*n),c(16),u(1635017060),u(s);for(let h=0;h<e.numberOfChannels;h++)o.push(e.getChannelData(h));for(;a<e.length&&l<r.byteLength;){for(let e=0;e<n;e++){const t=Math.max(-1,Math.min(1,o[e][a])),n=t<0?32768*t:32767*t;r.setInt16(l,n,!0),l+=2}a++}return new Blob([i],{type:"audio/wav"})})(e),"".concat(C,".wav")),P(100),setTimeout(()=>{_(!1),O(!1),P(0)},500)}catch(e){M("Export failed: ".concat(e.message)),O(!1)}},[C,j]);return(0,Jl.jsxs)(Jl.Fragment,{children:[(0,Jl.jsx)("button",{className:"export-button",onClick:()=>{_(!0),E("beatab-pattern-".concat(Date.now()))},disabled:A,children:"Export"}),v&&(0,Jl.jsx)("div",{className:"export-modal-overlay",children:(0,Jl.jsxs)("div",{className:"export-modal",children:[(0,Jl.jsx)("h3",{children:"Export Pattern to Audio"}),(0,Jl.jsxs)("div",{className:"export-option",children:[(0,Jl.jsx)("label",{children:"Format:"}),(0,Jl.jsxs)("select",{value:b,onChange:e=>w(e.target.value),children:[(0,Jl.jsx)("option",{value:"wav",children:"WAV"}),(0,Jl.jsx)("option",{value:"mp3",children:"MP3"})]})]}),(0,Jl.jsxs)("div",{className:"export-option",children:[(0,Jl.jsx)("label",{children:"Duration Mode:"}),(0,Jl.jsxs)("select",{value:k,onChange:e=>x(e.target.value),children:[(0,Jl.jsx)("option",{value:"rounds",children:"Pattern Rounds"}),(0,Jl.jsx)("option",{value:"seconds",children:"Approximate Seconds"})]})]}),(0,Jl.jsxs)("div",{className:"export-option",children:[(0,Jl.jsx)("label",{children:"Duration:"}),(0,Jl.jsxs)("div",{className:"number-input-group",children:[(0,Jl.jsx)("button",{className:"increment-btn",onClick:()=>T(Math.max(1,parseInt(S)-1).toString()),disabled:A,children:"-"}),(0,Jl.jsx)("input",{type:"number",className:"number-input",value:S,onChange:e=>{T(e.target.value)},min:"1",disabled:A}),(0,Jl.jsx)("button",{className:"increment-btn",onClick:()=>T((parseInt(S)+1).toString()),disabled:A,children:"+"}),(0,Jl.jsx)("span",{className:"duration-unit",children:"rounds"===k?"rounds":"seconds"})]})]}),(0,Jl.jsxs)("div",{className:"export-option",children:[(0,Jl.jsx)("label",{children:"File Name:"}),(0,Jl.jsx)("input",{type:"text",value:C,onChange:e=>E(e.target.value),placeholder:"beatlab-pattern"})]}),A&&(0,Jl.jsxs)("div",{className:"export-progress",children:[(0,Jl.jsx)("div",{className:"progress-bar",children:(0,Jl.jsx)("div",{className:"progress-fill",style:{width:"".concat(R,"%")}})}),(0,Jl.jsxs)("p",{children:["Rendering audio... ",Math.round(R),"%"]})]}),D&&(0,Jl.jsx)("div",{className:"export-error",children:D}),(0,Jl.jsxs)("div",{className:"export-modal-buttons",children:[(0,Jl.jsx)("button",{onClick:F,disabled:A||!C.trim(),children:A?"Exporting...":"Confirm Export"}),(0,Jl.jsx)("button",{onClick:()=>_(!1),disabled:A,children:"Cancel"})]})]})})]})},rc=e=>{let{isPlaying:t,isLooping:n,bpm:s,stepCount:r,masterVolume:o,handlePlay:a,handleStop:l,toggleLoop:c,handleBpmChange:u,handleStepCountChange:h,handleMasterVolumeChange:d,getSharablePatternUrl:p,drumSounds:f,pattern:m,drumVolumes:g,filterFreq:y,filterQ:v,loopPlaying:_,loopVolume:b,loop1:w,loop2:k,loop3:x,loop4:S,loop5:T,loop6:C}=e;const[E,A]=(0,i.useState)(null),O=(0,i.useRef)(null);(0,i.useEffect)(()=>()=>{O.current&&(clearTimeout(O.current),O.current=null)},[]);const R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;O.current&&clearTimeout(O.current),A({message:e,tone:t,url:n}),O.current=setTimeout(()=>{A(null),O.current=null},3e3)};return(0,Jl.jsxs)("div",{className:"transport-controls",children:[(0,Jl.jsx)("button",{onClick:a,disabled:t,children:"Play"}),(0,Jl.jsx)("button",{onClick:l,disabled:!t,children:"Stop"}),(0,Jl.jsx)("button",{onClick:async()=>{try{const e=await p();await(async e=>{try{var t;if(null!==(t=navigator.clipboard)&&void 0!==t&&t.writeText)return await navigator.clipboard.writeText(e),!0}catch(i){}const n=document.createElement("textarea");n.value=e,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n),n.select();const s=document.execCommand("copy");return document.body.removeChild(n),s})(e.url)?R(e.isFallback?"Copied fallback share link (offline mode).":"Share link copied to clipboard."):R("Copy this link manually:","error",e.url)}catch(e){console.error("Failed to copy sharable URL:",e),R("Unable to copy share link. Try again.","error")}},children:"Share"}),(0,Jl.jsx)(ic,{drumSounds:f,bpm:s,stepCount:r,pattern:m,drumVolumes:g,masterVolume:o,filterFreq:y,filterQ:void 0,loopPlaying:_,loopVolume:b,loop1:w,loop2:k,loop3:x,loop4:S,loop5:T,loop6:C}),(0,Jl.jsxs)("div",{className:"bpm-control",children:[(0,Jl.jsxs)("label",{htmlFor:"bpm",children:["BPM: ",s]}),(0,Jl.jsx)("input",{type:"range",id:"bpm",min:"60",max:"180",value:s,onChange:u})]}),(0,Jl.jsxs)("div",{className:"stepcount-control",children:[(0,Jl.jsxs)("label",{htmlFor:"step-count",children:["Steps: ",r]}),(0,Jl.jsx)("select",{id:"step-count",value:r,onChange:h,children:[8,12,16,24,32].map(e=>(0,Jl.jsx)("option",{value:e,children:e},e))})]}),(0,Jl.jsxs)("div",{className:"volume-control",children:[(0,Jl.jsxs)("label",{htmlFor:"master-volume",children:["Volume: ",nc(o),"%"]}),(0,Jl.jsx)("input",{type:"range",id:"master-volume",min:"0",max:"100",step:"1",value:nc(o),onChange:e=>{const t=sc(parseFloat(e.target.value),ec.VOLUME_MIN,ec.VOLUME_MAX);d({target:{value:t}})}})]}),E&&(0,Jl.jsxs)("div",{className:"share-status share-status--".concat(E.tone),role:"status",children:[(0,Jl.jsx)("span",{children:E.message}),E.url&&(0,Jl.jsxs)("span",{className:"share-status__url",children:[" ",E.url]})]})]})},oc=e=>{let{drumSounds:t,drumVolumes:n,filterFreq:s,filterQ:i,loopPlaying:r,loopVolume:o,handleDrumVolumeChange:a,handleFilterFreqChange:l,handleFilterQChange:c,toggleLoopAt:u,handleLoopVolumeChangeAt:h,swing:d,handleSwingChange:p}=e;return(0,Jl.jsxs)("div",{className:"mixer-controls",children:[(0,Jl.jsxs)("div",{className:"drum-mix",children:[(0,Jl.jsx)("h3",{children:"Drum Mix"}),(0,Jl.jsx)("div",{className:"mix-controls",children:t.map(e=>(0,Jl.jsxs)("div",{className:"mix-control",children:[(0,Jl.jsx)("label",{htmlFor:"".concat(e.name,"-volume"),children:e.name}),(0,Jl.jsx)("input",{type:"range",id:"".concat(e.name,"-volume"),min:0,max:100,step:"1",value:nc(n[e.name]),onChange:t=>a(e.name,sc(parseFloat(t.target.value),ec.VOLUME_MIN,ec.VOLUME_MAX))}),(0,Jl.jsxs)("span",{children:[nc(n[e.name]),"%"]})]},e.name))})]}),(0,Jl.jsxs)("div",{className:"filter-controls",children:[(0,Jl.jsx)("h3",{children:"Global Filter"}),(0,Jl.jsxs)("div",{className:"mix-controls",children:[(0,Jl.jsxs)("div",{className:"mix-control",children:[(0,Jl.jsx)("label",{htmlFor:"filter-freq",children:"Frequency"}),(0,Jl.jsx)("input",{type:"range",id:"filter-freq",min:"20",max:"20000",step:"1",value:s,onChange:l}),(0,Jl.jsxs)("span",{children:[s," Hz"]})]}),(0,Jl.jsxs)("div",{className:"mix-control",children:[(0,Jl.jsx)("label",{htmlFor:"filter-q",children:"Resonance"}),(0,Jl.jsx)("input",{type:"range",id:"filter-q",min:"0.1",max:"20",step:"0.1",value:i,onChange:c}),(0,Jl.jsx)("span",{children:i})]}),(0,Jl.jsxs)("div",{className:"mix-control",children:[(0,Jl.jsx)("label",{htmlFor:"swing",children:"Swing"}),(0,Jl.jsx)("input",{type:"range",id:"swing",min:"0",max:"0.5",step:"0.01",value:d,onChange:p}),(0,Jl.jsxs)("span",{children:[Math.round(100*d),"%"]})]})]})]}),(0,Jl.jsxs)("div",{className:"background-loops",children:[(0,Jl.jsx)("h3",{children:"Background Loops"}),tc.map((e,t)=>{var n,s;return(0,Jl.jsxs)("div",{className:"loop-control",children:[(0,Jl.jsx)("button",{onClick:()=>u(t),className:null!==r&&void 0!==r&&r[t]?"active":"",children:e.label}),(0,Jl.jsxs)("div",{className:"volume-control",children:[(0,Jl.jsxs)("label",{htmlFor:"".concat(e.id,"-volume"),children:["Volume: ",nc(null!==(n=null===o||void 0===o?void 0:o[t])&&void 0!==n?n:ec.VOLUME_DB),"%"]}),(0,Jl.jsx)("input",{type:"range",id:"".concat(e.id,"-volume"),min:0,max:100,step:"1",value:nc(null!==(s=null===o||void 0===o?void 0:o[t])&&void 0!==s?s:ec.VOLUME_DB),onChange:e=>{const n=sc(parseFloat(e.target.value),ec.VOLUME_MIN,ec.VOLUME_MAX);h(t,{target:{value:n}})}})]})]},e.id)})]})]})},ac=e=>{let{isPlaying:t=!1,analyser:n}=e;const s=(0,i.useRef)(null),r=(0,i.useRef)(null),o=(0,i.useRef)(new Array(64).fill(0));return(0,i.useEffect)(()=>{const e=s.current,i=e.getContext("2d"),a=()=>{if(i.clearRect(0,0,e.width,e.height),t&&n){const t=n.getValue(),s=e.width/64,r=.1*e.height,a=e.height-r,l=o.current;for(let n=0;n<64;n++){const r=t[2*n]||-100,o=Math.max(0,Math.min(100,2.5*(r+100)))/100*a;l[n]=.6*l[n]+.4*o;const c=n*s,u=e.height-l[n],h=i.createLinearGradient(c,u,c,u+l[n]);h.addColorStop(0,"#ff00ff"),h.addColorStop(1,"#00ffff"),i.fillStyle=h,i.fillRect(c+2,u,s-4,l[n])}}t&&(r.current=requestAnimationFrame(a))};return t?a():(i.clearRect(0,0,e.width,e.height),o.current=new Array(64).fill(0)),()=>{r.current&&cancelAnimationFrame(r.current)}},[t,n]),(0,Jl.jsxs)("div",{className:"frequency-spectrum",children:[(0,Jl.jsxs)("div",{className:"spectrum-header",children:[(0,Jl.jsx)("h3",{children:"FREQUENCY SPECTRUM"}),(0,Jl.jsx)("span",{className:"status ".concat(t?"active":"idle"),children:t?"\u25cf ANALYZING":"\u25cb READY"})]}),(0,Jl.jsx)("canvas",{ref:s,width:640,height:120,style:{width:"100%",height:"120px",background:"#222"}})]})},lc=()=>(0,Jl.jsxs)("div",{className:"pulsing-background",children:[(0,Jl.jsx)("div",{className:"pulse-circle"}),(0,Jl.jsx)("div",{className:"pulse-circle"}),(0,Jl.jsx)("div",{className:"pulse-circle"}),(0,Jl.jsx)("div",{className:"pulse-circle"})]}),cc=e=>{let{predefinedPatterns:t,currentPatternName:n,loadPattern:s,savePattern:i,savedPatterns:r,deletePattern:o}=e;return(0,Jl.jsxs)("div",{className:"pattern-controls",children:[(0,Jl.jsxs)("h3",{children:["Patterns: ",n]}),(0,Jl.jsx)("div",{className:"predefined-patterns",children:Object.entries(t).map(e=>{let[t,i]=e;return(0,Jl.jsx)("button",{onClick:()=>s(t,i),disabled:n===t,children:t},t)})}),(0,Jl.jsx)("div",{className:"saved-patterns",children:Object.entries(r).map(e=>{let[t,i]=e;return(0,Jl.jsxs)("div",{className:"saved-pattern-item",children:[(0,Jl.jsx)("button",{onClick:()=>s(t,i),disabled:n===t,children:t}),(0,Jl.jsx)("button",{onClick:()=>o(t),className:"delete-button",children:"X"})]},t)})}),(0,Jl.jsx)("button",{onClick:i,children:"Save Current Pattern"})]})},uc=[{id:"classic",name:"Classic",description:"Original BeatLab drums - classic electronic sounds",defaultBpm:120,defaultSwing:0,defaultFilterFreq:2e4,defaultFilterQ:1,masterVolume:-10,demoPattern:"Rock Beat",velocityShapes:{Kick:[1,1,1,1],Snare:[1,1],"Closed Hi-Hat":[1,1,1,1],"Open Hi-Hat":[1,1],Clap:[1,1],Crash:[1],"Tom Low":[1,1],"Tom High":[1,1]},drums:{Kick:{type:"MembraneSynth",options:{envelope:{attack:.005,decay:.4,sustain:0,release:.1}},effects:[]},Snare:{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:.01,release:.05}},effects:[]},"Closed Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.05,sustain:.01,release:.02}},effects:[]},"Open Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.2,sustain:.05,release:.05}},effects:[]},Clap:{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:.01,release:.05}},effects:[]},Crash:{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.005,decay:.5,sustain:.1,release:.5}},effects:[]},"Tom Low":{type:"MembraneSynth",options:{envelope:{attack:.005,decay:.3,sustain:0,release:.1}},effects:[]},"Tom High":{type:"MembraneSynth",options:{envelope:{attack:.005,decay:.3,sustain:0,release:.1}},effects:[]}}},{id:"lofi-chill",name:"Lo-Fi Chill",description:"Soft kicks, vinyl noise, dusty snares with tape saturation",defaultBpm:85,defaultSwing:.12,defaultFilterFreq:8e3,defaultFilterQ:1.5,masterVolume:-6,demoPattern:"Hip-Hop",velocityShapes:{Kick:[1,.8,1,.7],Snare:[1,.6],"Closed Hi-Hat":[.7,.5,.6,.5],"Open Hi-Hat":[1,.8],Clap:[1,.7],Crash:[1],"Tom Low":[.9,.7],"Tom High":[.9,.7]},drums:{Kick:{type:"MembraneSynth",options:{pitchDecay:.05,octaves:6,oscillator:{type:"sine"},envelope:{attack:.02,decay:.5,sustain:0,release:.3}},effects:[{type:"Filter",options:[{frequency:200,type:"lowpass"}],connectTo:"next"},{type:"BitCrusher",options:[{bits:8}],connectTo:"target"}]},Snare:{type:"NoiseSynth",options:{noise:{type:"pink",playbackRate:.8},envelope:{attack:.005,decay:.15,sustain:.01,release:.1}},effects:[{type:"Filter",options:[{frequency:1e3,type:"bandpass"}],connectTo:"target"}]},"Closed Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.05,sustain:.01,release:.02}},effects:[{type:"Filter",options:[{frequency:4e3,type:"highpass"}],connectTo:"target"}]},"Open Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.3,sustain:.05,release:.1}},effects:[{type:"Filter",options:[{frequency:3e3,type:"highpass"}],connectTo:"target"}]},Clap:{type:"NoiseSynth",options:{noise:{type:"pink",playbackRate:1},envelope:{attack:.003,decay:.12,sustain:.01,release:.08}},effects:[{type:"Filter",options:[{frequency:2e3,type:"bandpass"}],connectTo:"target"}]},Crash:{type:"NoiseSynth",options:{noise:{type:"white",playbackRate:.5},envelope:{attack:.005,decay:.8,sustain:.1,release:.8}},effects:[{type:"Filter",options:[{frequency:3e3,type:"highpass"}],connectTo:"target"}]},"Tom Low":{type:"MembraneSynth",options:{pitchDecay:.08,octaves:3,oscillator:{type:"sine"},envelope:{attack:.01,decay:.4,sustain:0,release:.15}},effects:[{type:"Filter",options:[{frequency:400,type:"lowpass"}],connectTo:"target"}]},"Tom High":{type:"MembraneSynth",options:{pitchDecay:.06,octaves:4,oscillator:{type:"sine"},envelope:{attack:.01,decay:.3,sustain:0,release:.1}},effects:[{type:"Filter",options:[{frequency:800,type:"lowpass"}],connectTo:"target"}]}}},{id:"trap",name:"Trap",description:"808 subs, sharp hats, snappy snares",defaultBpm:140,defaultSwing:.08,defaultFilterFreq:2e4,defaultFilterQ:1,masterVolume:-6,demoPattern:"Hip-Hop",velocityShapes:{Kick:[1,.9,1,.8],Snare:[1,.95],"Closed Hi-Hat":[.9,.6,.8,.5,.9,.6,.8,.5],"Open Hi-Hat":[1,.7],Clap:[1,.9],Crash:[1,.8],"Tom Low":[1,.85],"Tom High":[1,.85]},drums:{Kick:{type:"MembraneSynth",options:{pitchDecay:.03,octaves:10,oscillator:{type:"sawtooth"},envelope:{attack:.001,decay:.3,sustain:0,release:.2}},effects:[{type:"Distortion",options:[{distortion:.1}],connectTo:"next"},{type:"Filter",options:[{frequency:150,type:"lowpass"}],connectTo:"target"}]},Snare:{type:"NoiseSynth",options:{noise:{type:"white",playbackRate:1.2},envelope:{attack:.001,decay:.08,sustain:.01,release:.03}},effects:[{type:"Filter",options:[{frequency:3e3,type:"highpass"}],connectTo:"target"}]},"Closed Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.05,sustain:.01,release:.02}},effects:[{type:"Filter",options:[{frequency:5e3,type:"highpass"}],connectTo:"target"}]},"Open Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.2,sustain:.05,release:.05}},effects:[{type:"Filter",options:[{frequency:4e3,type:"highpass"}],connectTo:"target"}]},Clap:{type:"NoiseSynth",options:{noise:{type:"white",playbackRate:1.5},envelope:{attack:.002,decay:.1,sustain:.01,release:.05}},effects:[{type:"Filter",options:[{frequency:2500,type:"bandpass"}],connectTo:"target"}]},Crash:{type:"NoiseSynth",options:{noise:{type:"white",playbackRate:.6},envelope:{attack:.003,decay:.6,sustain:.1,release:.6}},effects:[{type:"Filter",options:[{frequency:4e3,type:"highpass"}],connectTo:"target"}]},"Tom Low":{type:"MembraneSynth",options:{pitchDecay:.06,octaves:4,oscillator:{type:"triangle"},envelope:{attack:.005,decay:.3,sustain:0,release:.1}},effects:[{type:"Filter",options:[{frequency:300,type:"lowpass"}],connectTo:"target"}]},"Tom High":{type:"MembraneSynth",options:{pitchDecay:.05,octaves:5,oscillator:{type:"triangle"},envelope:{attack:.005,decay:.25,sustain:0,release:.08}},effects:[{type:"Filter",options:[{frequency:600,type:"lowpass"}],connectTo:"target"}]}}},{id:"boom-bap-90s",name:"Boom Bap 90s",description:"Crunchy drums, SP-1200 grit, classic hip-hop sound",defaultBpm:95,defaultSwing:.18,defaultFilterFreq:12e3,defaultFilterQ:1.2,masterVolume:-6,demoPattern:"Hip-Hop",velocityShapes:{Kick:[1,.7,1,.8],Snare:[1,.85],"Closed Hi-Hat":[.8,.4,.7,.5],"Open Hi-Hat":[1,.9],Clap:[1,.95],Crash:[1,.85],"Tom Low":[1,.75],"Tom High":[1,.75]},drums:{Kick:{type:"MembraneSynth",options:{pitchDecay:.04,octaves:5,oscillator:{type:"square"},envelope:{attack:.01,decay:.35,sustain:0,release:.15}},effects:[{type:"Distortion",options:[{distortion:.2}],connectTo:"next"},{type:"Filter",options:[{frequency:200,type:"lowpass"}],connectTo:"target"}]},Snare:{type:"NoiseSynth",options:{noise:{type:"pink",playbackRate:.9},envelope:{attack:.003,decay:.12,sustain:.01,release:.06}},effects:[{type:"Filter",options:[{frequency:2500,type:"bandpass"}],connectTo:"next"},{type:"Distortion",options:[{distortion:.1}],connectTo:"target"}]},"Closed Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.05,sustain:.01,release:.02}},effects:[{type:"Filter",options:[{frequency:3500,type:"highpass"}],connectTo:"target"}]},"Open Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.3,sustain:.05,release:.1}},effects:[{type:"Filter",options:[{frequency:3e3,type:"highpass"}],connectTo:"target"}]},Clap:{type:"NoiseSynth",options:{noise:{type:"pink",playbackRate:1.2},envelope:{attack:.004,decay:.1,sustain:.01,release:.06}},effects:[{type:"Filter",options:[{frequency:1800,type:"bandpass"}],connectTo:"next"},{type:"Distortion",options:[{distortion:.15}],connectTo:"target"}]},Crash:{type:"NoiseSynth",options:{noise:{type:"white",playbackRate:.7},envelope:{attack:.005,decay:.7,sustain:.1,release:.7}},effects:[{type:"Filter",options:[{frequency:3500,type:"highpass"}],connectTo:"next"},{type:"Distortion",options:[{distortion:.1}],connectTo:"target"}]},"Tom Low":{type:"MembraneSynth",options:{pitchDecay:.07,octaves:3,oscillator:{type:"square"},envelope:{attack:.008,decay:.35,sustain:0,release:.12}},effects:[{type:"Filter",options:[{frequency:350,type:"lowpass"}],connectTo:"next"},{type:"Distortion",options:[{distortion:.1}],connectTo:"target"}]},"Tom High":{type:"MembraneSynth",options:{pitchDecay:.06,octaves:4,oscillator:{type:"square"},envelope:{attack:.008,decay:.3,sustain:0,release:.1}},effects:[{type:"Filter",options:[{frequency:700,type:"lowpass"}],connectTo:"next"},{type:"Distortion",options:[{distortion:.1}],connectTo:"target"}]}}},{id:"rock-acoustic",name:"Rock/Acoustic",description:"Realistic multi-sampled sounds with natural decay and room ambience.",defaultBpm:130,defaultSwing:0,defaultFilterFreq:2e4,defaultFilterQ:1,masterVolume:-8,demoPattern:"Rock Beat",velocityShapes:{Kick:[1,.9],Snare:[.8,1],"Closed Hi-Hat":[.8,.6,.9,.5],"Open Hi-Hat":[1],Crash:[1]},drums:{Kick:{type:"MembraneSynth",options:{pitchDecay:.04,octaves:6,oscillator:{type:"sine"},envelope:{attack:.001,decay:.25,sustain:0,release:.1}},effects:[{type:"Distortion",options:[{distortion:.05}],connectTo:"target"}]},Snare:{type:"NoiseSynth",options:{noise:{type:"pink"},envelope:{attack:.001,decay:.15,sustain:0,release:.1}},effects:[{type:"Filter",options:[{frequency:1500,type:"bandpass",Q:2}],connectTo:"target"}]},"Closed Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.04,sustain:0,release:.01}},effects:[{type:"Filter",options:[{frequency:6e3,type:"highpass"}],connectTo:"target"}]},"Open Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.4,sustain:0,release:.05}},effects:[{type:"Filter",options:[{frequency:5e3,type:"highpass"}],connectTo:"target"}]},Crash:{type:"NoiseSynth",options:{noise:{type:"white",playbackRate:.4},envelope:{attack:.001,decay:1.2,sustain:0,release:1}},effects:[{type:"Filter",options:[{frequency:4e3,type:"highpass"}],connectTo:"target"}]},"Tom Low":{type:"MembraneSynth",options:{pitchDecay:.1,octaves:4,oscillator:{type:"sine"},envelope:{attack:.01,decay:.4,sustain:0,release:.1}},effects:[]},"Tom High":{type:"MembraneSynth",options:{pitchDecay:.1,octaves:5,oscillator:{type:"sine"},envelope:{attack:.01,decay:.3,sustain:0,release:.1}},effects:[]},Clap:{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:.01,release:.05}},effects:[]}}},{id:"techno",name:"Techno",description:"Deep, resonant kicks and sharp, metallic percussion.",defaultBpm:135,defaultSwing:.05,defaultFilterFreq:18e3,defaultFilterQ:1,masterVolume:-7,demoPattern:"Four On The Floor",velocityShapes:{Kick:[1],Snare:[1],"Closed Hi-Hat":[1,.7]},drums:{Kick:{type:"MembraneSynth",options:{pitchDecay:.08,octaves:8,oscillator:{type:"sine"},envelope:{attack:.001,decay:.5,sustain:0,release:.2}},effects:[{type:"Distortion",options:[{distortion:.1}],connectTo:"target"}]},Snare:{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.01,decay:.18,sustain:0,release:.1}},effects:[{type:"Filter",options:[{frequency:2e3,type:"highpass"}],connectTo:"target"}]},"Closed Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.08,sustain:0,release:.02}},effects:[{type:"Filter",options:[{frequency:7e3,type:"highpass",Q:1.5}],connectTo:"target"}]},"Open Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.5,sustain:0,release:.1}},effects:[{type:"Filter",options:[{frequency:6e3,type:"highpass"}],connectTo:"target"}]},"Tom Low":{type:"MembraneSynth",options:{pitchDecay:.08,octaves:3,oscillator:{type:"sine"},envelope:{attack:.01,decay:.4,sustain:0,release:.1}},effects:[]},"Tom High":{type:"MembraneSynth",options:{pitchDecay:.08,octaves:3,oscillator:{type:"sine"},envelope:{attack:.01,decay:.4,sustain:0,release:.1}},effects:[]},Clap:{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.01,decay:.18,sustain:0,release:.1}},effects:[]},Crash:{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.01,decay:.18,sustain:0,release:.1}},effects:[]}}},{id:"edm-house",name:"EDM House",description:"Punchy kicks, white-noise snares, sharp hats for four-on-the-floor beats",defaultBpm:128,defaultSwing:0,defaultFilterFreq:2e4,defaultFilterQ:1,masterVolume:-8,demoPattern:"Four On The Floor",velocityShapes:{Kick:[1,.9,1,.9],Snare:[.9,1],"Closed Hi-Hat":[1,.7,1,.7],"Open Hi-Hat":[1,.8],Clap:[1,.9],Crash:[1],"Tom Low":[1,.85],"Tom High":[1,.85]},drums:{Kick:{type:"MembraneSynth",options:{pitchDecay:.02,octaves:8,oscillator:{type:"sine"},envelope:{attack:.001,decay:.2,sustain:0,release:.05}},effects:[{type:"Distortion",options:[{distortion:.1}],connectTo:"target"}]},Snare:{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.12,sustain:0,release:.03}},effects:[{type:"Filter",options:[{frequency:4e3,type:"highpass"}],connectTo:"target"}]},"Closed Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.03,sustain:0,release:.01}},effects:[{type:"Filter",options:[{frequency:8e3,type:"highpass"}],connectTo:"target"}]},"Open Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.25,sustain:0,release:.05}},effects:[{type:"Filter",options:[{frequency:7e3,type:"highpass"}],connectTo:"target"}]},Clap:{type:"NoiseSynth",options:{noise:{type:"white",playbackRate:1.5},envelope:{attack:.003,decay:.08,sustain:.01,release:.04}},effects:[{type:"Filter",options:[{frequency:2e3,type:"bandpass"}],connectTo:"target"}]},Crash:{type:"NoiseSynth",options:{noise:{type:"white",playbackRate:.5},envelope:{attack:.005,decay:1,sustain:.1,release:1}},effects:[{type:"Filter",options:[{frequency:5e3,type:"highpass"}],connectTo:"target"}]},"Tom Low":{type:"MembraneSynth",options:{pitchDecay:.06,octaves:4,oscillator:{type:"sine"},envelope:{attack:.005,decay:.25,sustain:0,release:.08}},effects:[{type:"Filter",options:[{frequency:400,type:"lowpass"}],connectTo:"target"}]},"Tom High":{type:"MembraneSynth",options:{pitchDecay:.05,octaves:5,oscillator:{type:"sine"},envelope:{attack:.005,decay:.2,sustain:0,release:.06}},effects:[{type:"Filter",options:[{frequency:800,type:"lowpass"}],connectTo:"target"}]}}},{id:"funk",name:"Funk",description:"Tight, dry drums with short decay and swing emphasis",defaultBpm:110,defaultSwing:.16,defaultFilterFreq:15e3,defaultFilterQ:1.2,masterVolume:-7,demoPattern:"Breakbeat",velocityShapes:{Kick:[1,.6,.9,.7],Snare:[.9,1],"Closed Hi-Hat":[.8,.4,.9,.3],"Open Hi-Hat":[1,.7],Clap:[.9,1],Crash:[1],"Tom Low":[1,.8],"Tom High":[1,.8]},drums:{Kick:{type:"MembraneSynth",options:{pitchDecay:.03,octaves:4,oscillator:{type:"triangle"},envelope:{attack:.005,decay:.15,sustain:0,release:.03}},effects:[{type:"Filter",options:[{frequency:200,type:"lowpass"}],connectTo:"target"}]},Snare:{type:"NoiseSynth",options:{noise:{type:"pink"},envelope:{attack:.001,decay:.08,sustain:0,release:.02}},effects:[{type:"Filter",options:[{frequency:3e3,type:"bandpass"}],connectTo:"target"}]},"Closed Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.02,sustain:0,release:.01}},effects:[{type:"Filter",options:[{frequency:6e3,type:"highpass"}],connectTo:"target"}]},"Open Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.15,sustain:0,release:.03}},effects:[{type:"Filter",options:[{frequency:5e3,type:"highpass"}],connectTo:"target"}]},Clap:{type:"NoiseSynth",options:{noise:{type:"pink",playbackRate:1.3},envelope:{attack:.002,decay:.06,sustain:.01,release:.03}},effects:[{type:"Filter",options:[{frequency:2e3,type:"bandpass"}],connectTo:"target"}]},Crash:{type:"NoiseSynth",options:{noise:{type:"white",playbackRate:.6},envelope:{attack:.005,decay:.5,sustain:0,release:.3}},effects:[{type:"Filter",options:[{frequency:4e3,type:"highpass"}],connectTo:"target"}]},"Tom Low":{type:"MembraneSynth",options:{pitchDecay:.04,octaves:3,oscillator:{type:"sine"},envelope:{attack:.005,decay:.2,sustain:0,release:.05}},effects:[{type:"Filter",options:[{frequency:300,type:"lowpass"}],connectTo:"target"}]},"Tom High":{type:"MembraneSynth",options:{pitchDecay:.03,octaves:4,oscillator:{type:"sine"},envelope:{attack:.005,decay:.15,sustain:0,release:.04}},effects:[{type:"Filter",options:[{frequency:600,type:"lowpass"}],connectTo:"target"}]}}},{id:"latin-afrobeat",name:"Latin / Afrobeat",description:"Conga-like toms, shaker percussion with polyrhythmic feel",defaultBpm:120,defaultSwing:.1,defaultFilterFreq:18e3,defaultFilterQ:1,masterVolume:-7,demoPattern:"Hip-Hop",velocityShapes:{Kick:[1,.8,.9,.7],Snare:[.8,1],"Closed Hi-Hat":[.7,.9,.6,.8],"Open Hi-Hat":[1,.8],Clap:[.9,1],Crash:[1],"Tom Low":[1,.8,.6],"Tom High":[1,.7,.9]},drums:{Kick:{type:"MembraneSynth",options:{pitchDecay:.05,octaves:5,oscillator:{type:"sine"},envelope:{attack:.005,decay:.3,sustain:0,release:.1}},effects:[{type:"Filter",options:[{frequency:150,type:"lowpass"}],connectTo:"target"}]},Snare:{type:"NoiseSynth",options:{noise:{type:"pink"},envelope:{attack:.001,decay:.1,sustain:0,release:.05}},effects:[{type:"Filter",options:[{frequency:2500,type:"bandpass"}],connectTo:"target"}]},"Closed Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.04,sustain:0,release:.02}},effects:[{type:"Filter",options:[{frequency:5e3,type:"highpass",Q:1.5}],connectTo:"target"}]},"Open Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.2,sustain:0,release:.05}},effects:[{type:"Filter",options:[{frequency:4500,type:"highpass"}],connectTo:"target"}]},Clap:{type:"NoiseSynth",options:{noise:{type:"pink",playbackRate:1.4},envelope:{attack:.002,decay:.07,sustain:.01,release:.04}},effects:[{type:"Filter",options:[{frequency:1800,type:"bandpass"}],connectTo:"target"}]},Crash:{type:"NoiseSynth",options:{noise:{type:"white",playbackRate:.55},envelope:{attack:.005,decay:.8,sustain:0,release:.5}},effects:[{type:"Filter",options:[{frequency:3500,type:"highpass"}],connectTo:"target"}]},"Tom Low":{type:"MembraneSynth",options:{pitchDecay:.12,octaves:2,oscillator:{type:"sine"},envelope:{attack:.01,decay:.6,sustain:0,release:.15}},effects:[{type:"Filter",options:[{frequency:800,type:"lowpass"}],connectTo:"target"}]},"Tom High":{type:"MembraneSynth",options:{pitchDecay:.1,octaves:3,oscillator:{type:"sine"},envelope:{attack:.008,decay:.4,sustain:0,release:.1}},effects:[{type:"Filter",options:[{frequency:1200,type:"lowpass"}],connectTo:"target"}]}}},{id:"glitch",name:"Glitch",description:"Weird SFX, metallic glitches, bit-crushed experimental percussion",defaultBpm:100,defaultSwing:.12,defaultFilterFreq:1e4,defaultFilterQ:1.8,masterVolume:-5,demoPattern:"Breakbeat",velocityShapes:{Kick:[1,.3,1,.4],Snare:[1,.5],"Closed Hi-Hat":[.8,1,.6,.9],"Open Hi-Hat":[.9,.7],Clap:[.8,1],Crash:[1],"Tom Low":[1,.6],"Tom High":[.7,1]},drums:{Kick:{type:"MembraneSynth",options:{pitchDecay:.01,octaves:12,oscillator:{type:"sawtooth"},envelope:{attack:.001,decay:.1,sustain:0,release:.02}},effects:[{type:"Distortion",options:[{distortion:.5}],connectTo:"next"},{type:"BitCrusher",options:[{bits:6}],connectTo:"target"}]},Snare:{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.05,sustain:0,release:.01}},effects:[{type:"Filter",options:[{frequency:5e3,type:"highpass"}],connectTo:"next"},{type:"BitCrusher",options:[{bits:4}],connectTo:"target"}]},"Closed Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.02,sustain:0,release:.005}},effects:[{type:"BitCrusher",options:[{bits:5}],connectTo:"target"}]},"Open Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.1,sustain:0,release:.02}},effects:[{type:"Filter",options:[{frequency:3e3,type:"highpass"}],connectTo:"next"},{type:"BitCrusher",options:[{bits:5}],connectTo:"target"}]},Clap:{type:"NoiseSynth",options:{noise:{type:"pink",playbackRate:2},envelope:{attack:.001,decay:.03,sustain:0,release:.01}},effects:[{type:"Distortion",options:[{distortion:.4}],connectTo:"next"},{type:"BitCrusher",options:[{bits:3}],connectTo:"target"}]},Crash:{type:"NoiseSynth",options:{noise:{type:"white",playbackRate:.8},envelope:{attack:.002,decay:.2,sustain:0,release:.1}},effects:[{type:"Filter",options:[{frequency:2e3,type:"highpass"}],connectTo:"next"},{type:"BitCrusher",options:[{bits:4}],connectTo:"target"}]},"Tom Low":{type:"MembraneSynth",options:{pitchDecay:.02,octaves:6,oscillator:{type:"square"},envelope:{attack:.002,decay:.15,sustain:0,release:.03}},effects:[{type:"Distortion",options:[{distortion:.6}],connectTo:"next"},{type:"BitCrusher",options:[{bits:5}],connectTo:"target"}]},"Tom High":{type:"MembraneSynth",options:{pitchDecay:.02,octaves:8,oscillator:{type:"square"},envelope:{attack:.002,decay:.1,sustain:0,release:.02}},effects:[{type:"Filter",options:[{frequency:1e3,type:"highpass"}],connectTo:"next"},{type:"BitCrusher",options:[{bits:4}],connectTo:"target"}]}}},{id:"old-school-metal",name:"Old School Metal",description:"Tight, aggressive drums inspired by Metallica and Black Sabbath - vintage warmth with modern punch",defaultBpm:160,defaultSwing:0,defaultFilterFreq:16e3,defaultFilterQ:1.3,masterVolume:-6,demoPattern:"Rock Beat",velocityShapes:{Kick:[1,.4,.8,.3],Snare:[.95,1],"Closed Hi-Hat":[.9,.5,.8,.4],"Open Hi-Hat":[1,.6],Clap:[.8,1],Crash:[1,.9],"Tom Low":[1,.8,.9],"Tom High":[.9,1,.8]},drums:{Kick:{type:"MembraneSynth",options:{pitchDecay:.02,octaves:7,oscillator:{type:"sawtooth"},envelope:{attack:.001,decay:.18,sustain:0,release:.04}},effects:[{type:"Filter",options:[{frequency:120,type:"lowpass"}],connectTo:"next"},{type:"Distortion",options:[{distortion:.15}],connectTo:"target"}]},Snare:{type:"NoiseSynth",options:{noise:{type:"pink",playbackRate:1.1},envelope:{attack:.001,decay:.06,sustain:0,release:.02}},effects:[{type:"Filter",options:[{frequency:3500,type:"bandpass",Q:2}],connectTo:"next"},{type:"Distortion",options:[{distortion:.1}],connectTo:"target"}]},"Closed Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.03,sustain:0,release:.01}},effects:[{type:"Filter",options:[{frequency:7e3,type:"highpass"}],connectTo:"target"}]},"Open Hi-Hat":{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.3,sustain:0,release:.05}},effects:[{type:"Filter",options:[{frequency:6e3,type:"highpass"}],connectTo:"target"}]},Clap:{type:"NoiseSynth",options:{noise:{type:"pink",playbackRate:1.4},envelope:{attack:.002,decay:.05,sustain:0,release:.02}},effects:[{type:"Filter",options:[{frequency:2200,type:"bandpass"}],connectTo:"target"}]},Crash:{type:"NoiseSynth",options:{noise:{type:"white",playbackRate:.5},envelope:{attack:.001,decay:1.2,sustain:0,release:.6}},effects:[{type:"Filter",options:[{frequency:4500,type:"highpass"}],connectTo:"target"}]},"Tom Low":{type:"MembraneSynth",options:{pitchDecay:.08,octaves:3,oscillator:{type:"square"},envelope:{attack:.005,decay:.4,sustain:0,release:.08}},effects:[{type:"Filter",options:[{frequency:250,type:"lowpass"}],connectTo:"target"}]},"Tom High":{type:"MembraneSynth",options:{pitchDecay:.06,octaves:4,oscillator:{type:"triangle"},envelope:{attack:.004,decay:.25,sustain:0,release:.06}},effects:[{type:"Filter",options:[{frequency:500,type:"lowpass"}],connectTo:"target"}]}}}],hc=()=>uc[0],dc=()=>[...uc],pc=e=>{let{currentKit:t,loadKit:n}=e;const s=dc(),[r,o]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!1),c=(0,i.useRef)(null);return(0,i.useEffect)(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&o(!1)};return r&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[r]),(0,Jl.jsxs)("div",{className:"kit-selector",children:[(0,Jl.jsxs)("h3",{children:["Drum kit: ",t.name]}),(0,Jl.jsxs)("div",{className:"custom-dropdown ".concat(r?"show":""),ref:c,children:[(0,Jl.jsx)("div",{className:"custom-dropdown-toggle",onClick:()=>{o(!r)},children:t.name}),(0,Jl.jsx)("div",{className:"custom-dropdown-menu",children:s.map(e=>(0,Jl.jsx)("div",{className:"custom-dropdown-item ".concat(t.id===e.id?"selected":""),onClick:()=>(e=>{n(e),o(!1)})(e),children:e.name},e.id))})]}),(0,Jl.jsx)("div",{className:"tooltip-container",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:(0,Jl.jsx)("div",{className:"tooltip ".concat(a?"show":""),children:t.description})})]})},fc=()=>"undefined"!==typeof window&&!!window.localStorage,mc=(e,t)=>{if(!fc())return t;try{return((e,t)=>{if("string"!==typeof e)return t;try{const n=JSON.parse(e);return n&&"object"===typeof n?n:t}catch(n){return t}})(window.localStorage.getItem(e),t)}catch(n){return t}},gc=(e,t)=>{if(fc())try{window.localStorage.setItem(e,JSON.stringify(t))}catch(n){}},yc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;const n={};return e.forEach(e=>{n[e.name]=Array(t).fill(!1)}),n},vc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-10;const n={};return e.forEach(e=>{n[e.name]="number"===typeof t?t:-10}),n},_c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;const s=yc(t,n);if(!e||"object"!==typeof e)return s;const i={};return t.forEach(t=>{i[t.name]=((e,t)=>{const n=Array(e).fill(!1);if(Array.isArray(t))for(let s=0;s<Math.min(e,t.length);s++)n[s]=!!t[s];return n})(n,e[t.name])}),i},bc=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;const s=Number.isInteger(null===e||void 0===e?void 0:e.stepCount)?e.stepCount:n,i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return{pattern:yc(e,t),drumVolumes:vc(e,-10),masterVolume:-10,filterFreq:2e4,filterQ:1,loop1Playing:!1,loop1Volume:-10,loop2Playing:!1,loop2Volume:-10,loop3Playing:!1,loop3Volume:-10,loop4Playing:!1,loop4Volume:-10,loop5Playing:!1,loop5Volume:-10,loop6Playing:!1,loop6Volume:-10,stepCount:t,bpm:ec.BPM}}(t,s);if(!e||"object"!==typeof e)return i;if(null==e.pattern&&Object.keys(e).length)return u(u({},i),{},{pattern:_c(e,t,s)});const r=u({},i);r.pattern=_c(e.pattern,t,s);const o=e.drumVolumes&&"object"===typeof e.drumVolumes?e.drumVolumes:{},a={};t.forEach(e=>{const t=o[e.name];a[e.name]=Number.isFinite(t)?t:-10}),r.drumVolumes=a;const l=(e,t)=>Number.isFinite(e)?e:t;r.masterVolume=l(e.masterVolume,i.masterVolume),r.filterFreq=l(e.filterFreq,i.filterFreq),r.filterQ=l(e.filterQ,i.filterQ);for(let c=1;c<=6;c++){const t="loop".concat(c,"Playing"),n="loop".concat(c,"Volume");r[t]=!!e[t],r[n]=l(e[n],-10)}return r.stepCount=s,r.bpm=l(e.bpm,i.bpm),r},wc="currentBeatLabPattern",kc="beatLabSavedPatterns",xc="beatLabStepCount",Sc=e=>{e&&"object"===typeof e&&gc(kc,e)},Tc=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16;if(!fc())return e;try{const t=window.localStorage.getItem(xc),n=parseInt(t,10);return Number.isInteger(n)?n:e}catch(t){return e}},Cc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{bpm:s=ec.BPM,stepCount:i=ec.STEP_COUNT,drumVolumes:r={},masterVolume:o=ec.VOLUME_DB,filterFreq:a=ec.FILTER_FREQ,filterQ:l=ec.FILTER_Q,loopPlaying:c=[],loopVolume:u=[]}=t,h={pattern:e,bpm:s,stepCount:i,drumVolumes:r,masterVolume:o,filterFreq:a,filterQ:l};if(c.length>0||u.length>0)for(let d=0;d<6;d++)h["loop".concat(d+1,"Playing")]=!!c[d],h["loop".concat(d+1,"Volume")]=Number.isFinite(u[d])?u[d]:ec.VOLUME_DB;return Ec(h,n,i)},Ec=(e,t,n)=>{if(!e||"object"!==typeof e)throw new Error("Invalid pattern data: must be an object");const s=u({},e);s.pattern&&"object"===typeof s.pattern||(s.pattern={}),t.forEach(e=>{if(Array.isArray(s.pattern[e.name])){if(s.pattern[e.name].length!==n){const t=s.pattern[e.name];t.length<n?s.pattern[e.name]=[...t,...Array(n-t.length).fill(!1)]:s.pattern[e.name]=t.slice(0,n)}}else s.pattern[e.name]=Array(n).fill(!1)});const i=new Set(t.map(e=>e.name));Object.keys(s.pattern).forEach(e=>{i.has(e)||delete s.pattern[e]}),s.bpm=Number.isFinite(s.bpm)?s.bpm:ec.BPM,s.stepCount=Number.isFinite(s.stepCount)?s.stepCount:n,s.masterVolume=Number.isFinite(s.masterVolume)?s.masterVolume:ec.VOLUME_DB,s.filterFreq=Number.isFinite(s.filterFreq)?s.filterFreq:ec.FILTER_FREQ,s.filterQ=Number.isFinite(s.filterQ)?s.filterQ:ec.FILTER_Q,s.drumVolumes&&"object"===typeof s.drumVolumes||(s.drumVolumes={}),t.forEach(e=>{Number.isFinite(s.drumVolumes[e.name])||(s.drumVolumes[e.name]=ec.VOLUME_DB)}),Object.keys(s.drumVolumes).forEach(e=>{i.has(e)||delete s.drumVolumes[e]});for(let r=0;r<6;r++){const e="loop".concat(r+1,"Playing"),t="loop".concat(r+1,"Volume");"boolean"!==typeof s[e]&&(s[e]=!1),Number.isFinite(s[t])||(s[t]=ec.VOLUME_DB)}return s},Ac=(e,t,n)=>{if(!e||"object"!==typeof e)return Oc(t,n);const s={};return t.forEach(t=>{const i=e[t.name]||[];i.length===n?s[t.name]=[...i]:i.length<n?s[t.name]=[...i,...Array(n-i.length).fill(!1)]:s[t.name]=i.slice(0,n)}),s},Oc=(e,t)=>{const n={};return e.forEach(e=>{n[e.name]=Array(t).fill(!1)}),n},Rc={Empty:(e,t)=>Oc(e,t),"Rock Beat":(e,t)=>{const n=Oc(e,t),s=Math.max(1,t/4),i=Array.from({length:4},(e,t)=>Math.floor(t*s)),r=[Math.floor(s),Math.floor(3*s)],o=Array.from({length:t},(e,t)=>t);return i.forEach(e=>{n.Kick&&e<t&&(n.Kick[e]=!0)}),r.forEach(e=>{n.Snare&&e<t&&(n.Snare[e]=!0)}),o.forEach(e=>{n["Closed Hi-Hat"]&&e<t&&(n["Closed Hi-Hat"][e]=!0)}),n.Crash&&(n.Crash[0]=!0),n},"Hip-Hop":(e,t)=>{const n=Oc(e,t),s=t/16,i=[0,Math.floor(6*s),Math.floor(12*s)].filter(e=>e<t),r=[Math.floor(4*s),Math.floor(12*s)].filter(e=>e<t),o=Array.from({length:t},(e,t)=>t).filter(e=>e%2===1);return i.forEach(e=>{n.Kick&&e<t&&(n.Kick[e]=!0)}),r.forEach(e=>{n.Snare&&e<t&&(n.Snare[e]=!0)}),o.forEach(e=>{n["Closed Hi-Hat"]&&e<t&&(n["Closed Hi-Hat"][e]=!0)}),n},Techno:(e,t)=>{const n=Oc(e,t),s=t/16,i=Math.max(1,t/4),r=Array.from({length:4},(e,t)=>Math.floor(t*i)),o=[Math.floor(2*s),Math.floor(6*s),Math.floor(10*s),Math.floor(14*s)].filter(e=>e<t),a=Array.from({length:t},(e,t)=>t);return r.forEach(e=>{n.Kick&&e<t&&(n.Kick[e]=!0)}),o.forEach(e=>{n.Snare&&e<t&&(n.Snare[e]=!0)}),a.forEach(e=>{n["Closed Hi-Hat"]&&e<t&&(n["Closed Hi-Hat"][e]=!0)}),n},Breakbeat:(e,t)=>{const n=Oc(e,t),s=t/16,i=[Math.floor(0*s),Math.floor(6*s),Math.floor(9*s),Math.floor(14*s)].filter(e=>e<t),r=[Math.floor(2*s),Math.floor(8*s),Math.floor(14*s)].filter(e=>e<t),o=Array.from({length:t},(e,t)=>t).filter(e=>e%2===1);return i.forEach(e=>{n.Kick&&e<t&&(n.Kick[e]=!0)}),r.forEach(e=>{n.Snare&&e<t&&(n.Snare[e]=!0)}),o.forEach(e=>{n["Closed Hi-Hat"]&&e<t&&(n["Closed Hi-Hat"][e]=!0)}),n}},Pc=(e,t,n)=>{if(!Rc[e])return console.warn("Pattern '".concat(e,"' not found, returning Empty pattern")),Oc(t,n);try{return Rc[e](t,n)}catch(s){return console.error("Error generating pattern '".concat(e,"':"),s),Oc(t,n)}},Dc=(e,t)=>{const n={};return Object.keys(Rc).forEach(s=>{n[s]=Pc(s,e,t)}),n};class Mc extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class Nc extends Mc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class jc extends Mc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Fc extends Mc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ic;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Ic||(Ic={}));var qc=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function o(e){try{l(s.next(e))}catch(t){r(t)}}function a(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class Lc{constructor(e){let{headers:t={},customFetch:s,region:i=Ic.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=i,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(s)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return qc(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:r,signal:o}=t;let a={},{region:l}=t;l||(l=this.region);const c=new URL("".concat(this.url,"/").concat(e));let u;l&&"any"!==l&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l)),r&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!==typeof Blob&&r instanceof Blob||r instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=r):"string"===typeof r?(a["Content-Type"]="text/plain",u=r):"undefined"!==typeof FormData&&r instanceof FormData?u=r:(a["Content-Type"]="application/json",u=JSON.stringify(r)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u,signal:o}).catch(e=>{if("AbortError"===e.name)throw e;throw new Nc(e)}),d=h.headers.get("x-relay-error");if(d&&"true"===d)throw new jc(h);if(!h.ok)throw new Fc(h);let p,f=(null!==(n=h.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return p="application/json"===f?yield h.json():"application/octet-stream"===f?yield h.blob():"text/event-stream"===f?h:"multipart/form-data"===f?yield h.formData():yield h.text(),{data:p,error:null,response:h}}catch(s){return s instanceof Error&&"AbortError"===s.name?{data:null,error:new Nc(s)}:{data:null,error:s,response:s instanceof Fc||s instanceof jc?s.context:void 0}}})}}var Vc=n(980);const{PostgrestClient:zc,PostgrestQueryBuilder:Uc,PostgrestFilterBuilder:Bc,PostgrestTransformBuilder:Wc,PostgrestBuilder:Hc,PostgrestError:Gc}=Vc;const Qc=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(n," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(n," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},Kc="realtime-js/".concat("2.15.5"),Xc=1e4;var Yc,$c,Jc,Zc,eu,tu;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Yc||(Yc={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}($c||($c={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Jc||(Jc={})),function(e){e.websocket="websocket"}(Zc||(Zc={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(eu||(eu={}));class nu{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),i=t.getUint8(2);let r=this.HEADER_LENGTH+2;const o=n.decode(e.slice(r,r+s));r+=s;const a=n.decode(e.slice(r,r+i));r+=i;return{ref:null,topic:o,event:a,payload:JSON.parse(n.decode(e.slice(r,e.byteLength)))}}}class su{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(tu||(tu={}));const iu=function(e,t){var n;const s=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,i)=>(n[i]=ru(i,e,t,s),n),{})},ru=(e,t,n,s)=>{const i=t.find(t=>t.name===e),r=null===i||void 0===i?void 0:i.type,o=n[e];return r&&!s.includes(r)?ou(r,o):au(o)},ou=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return hu(t,n)}switch(e){case tu.bool:return lu(t);case tu.float4:case tu.float8:case tu.int2:case tu.int4:case tu.int8:case tu.numeric:case tu.oid:return cu(t);case tu.json:case tu.jsonb:return uu(t);case tu.timestamp:return du(t);case tu.abstime:case tu.date:case tu.daterange:case tu.int4range:case tu.int8range:case tu.money:case tu.reltime:case tu.text:case tu.time:case tu.timestamptz:case tu.timetz:case tu.tsrange:case tu.tstzrange:default:return au(t)}},au=e=>e,lu=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},cu=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},uu=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},hu=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,s=e[n];if("{"===e[0]&&"}"===s){let s;const r=e.slice(1,n);try{s=JSON.parse("["+r+"]")}catch(i){s=r?r.split(","):[]}return s.map(e=>ou(t,e))}return e},du=e=>"string"===typeof e?e.replace(" ","T"):e,pu=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class fu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Xc;this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var mu,gu,yu,vu;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(mu||(mu={}));class _u{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_u.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=_u.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=_u.syncDiff(this.state,e,t,n),s())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const i=this.cloneDeep(e),r=this.transformState(t),o={},a={};return this.map(i,(e,t)=>{r[e]||(a[e]=t)}),this.map(r,(e,t)=>{const n=i[e];if(n){const s=t.map(e=>e.presence_ref),i=n.map(e=>e.presence_ref),r=t.filter(e=>i.indexOf(e.presence_ref)<0),l=n.filter(e=>s.indexOf(e.presence_ref)<0);r.length>0&&(o[e]=r),l.length>0&&(a[e]=l)}else o[e]=t}),this.syncDiff(i,{joins:o,leaves:a},n,s)}static syncDiff(e,t,n,s){const{joins:i,leaves:r}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(t,s)=>{var i;const r=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(s),r.length>0){const n=e[t].map(e=>e.presence_ref),s=r.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...s)}n(t,r,s)}),this.map(r,(t,n)=>{let i=e[t];if(!i)return;const r=n.map(e=>e.presence_ref);i=i.filter(e=>r.indexOf(e.presence_ref)<0),e[t]=i,s(t,i,n),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(gu||(gu={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(yu||(yu={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(vu||(vu={}));class bu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=$c.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new fu(this,Jc.join,this.params,this.timeout),this.rejoinTimer=new su(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$c.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=$c.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=$c.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=$c.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=$c.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jc.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new _u(this),this.broadcastEndpointURL=pu(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==$c.closed){const{config:{broadcast:r,presence:o,private:a}}=this.params,l=null!==(s=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==s?s:[],c=!!this.bindings[yu.PRESENCE]&&this.bindings[yu.PRESENCE].length>0||!0===(null===(i=this.params.config.presence)||void 0===i?void 0:i.enabled),u={},h={broadcast:r,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(vu.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(vu.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var s;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,i=null!==(s=null===t||void 0===t?void 0:t.length)&&void 0!==s?s:0,r=[];for(let s=0;s<i;s++){const i=t[s],{filter:{event:o,schema:a,table:l,filter:c}}=i,u=n&&n[s];if(!u||u.event!==o||u.schema!==a||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=$c.errored,void(null===e||void 0===e||e(vu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));r.push(Object.assign(Object.assign({},i),{id:u.id}))}return this.bindings.postgres_changes=r,void(e&&e(vu.SUBSCRIBED))}null===e||void 0===e||e(vu.SUBSCRIBED)}).receive("error",t=>{this.state=$c.errored,null===e||void 0===e||e(vu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(vu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===$c.joined&&e===yu.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var s,i,r;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(r=null===(i=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===i?void 0:i.broadcast)||void 0===r?void 0:r.ack)||n("ok"),o.receive("ok",()=>n("ok")),o.receive("error",()=>n("error")),o.receive("timeout",()=>n("timed out"))});{const{event:r,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=$c.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(Jc.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new fu(this,Jc.leave,{},e),n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=$c.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),r=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),r}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let s=new fu(this,e,t,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,i;const r=e.toLocaleLowerCase(),{close:o,error:a,leave:l,join:c}=Jc;if(n&&[o,a,l,c].indexOf(r)>=0&&n!==this._joinRef())return;let u=this._onMessage(r,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,n,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===s?void 0:s.toLocaleLowerCase())===r}).map(e=>e.callback(u,n)):null===(i=this.bindings[r])||void 0===i||i.filter(e=>{var n,s,i,o,a,l;if(["broadcast","presence","postgres_changes"].includes(r)){if("id"in e){const r=e.id,o=null===(n=e.filter)||void 0===n?void 0:n.event;return r&&(null===(s=t.ids)||void 0===s?void 0:s.includes(r))&&("*"===o||(null===o||void 0===o?void 0:o.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const n=null===(a=null===(o=null===e||void 0===e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===r}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:s,type:i,errors:r}=e,o={schema:t,table:n,commit_timestamp:s,eventType:i,new:{},old:{},errors:r};u=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===$c.closed}_isJoined(){return this.state===$c.joined}_isJoining(){return this.state===$c.joining}_isLeaving(){return this.state===$c.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===n&&bu.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Jc.close,{},e)}_onError(e){this._on(Jc.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$c.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=iu(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=iu(e.columns,e.old_record)),t}}const wu=()=>{},ku=25e3,xu=10,Su=100,Tu=[1e3,2e3,5e3,1e4];class Cu{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xc,this.transport=null,this.heartbeatIntervalMs=ku,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wu,this.ref=0,this.reconnectTimer=null,this.logger=wu,this.conn=null,this.sendBuffer=[],this.serializer=new nu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(s=null===t||void 0===t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(Zc.websocket),this.httpEndpoint=pu(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Qc.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Yc.connecting:return eu.Connecting;case Yc.open:return eu.Open;case Yc.closing:return eu.Closing;default:return eu.Closed}}isConnected(){return this.connectionState()===eu.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),s=this.getChannels().find(e=>e.topic===n);if(s)return s;{const n=new bu("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:s,ref:i}=e,r=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(i,")"),s),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Su)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(a){this.log("error","error in heartbeat callback",a)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:s,ref:i}=e,r=i?"(".concat(i,")"):"",o=s.status||"";this.log("receive","".concat(o," ").concat(t," ").concat(n," ").concat(r).trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,s,i)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Jc.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return"".concat(e).concat(n).concat(s)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:Kc};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(Jc.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(s){this.log("error","error in ".concat(e," callback"),s)}})}catch(n){this.log("error","error triggering ".concat(e," callbacks"),n)}}_setupReconnectionTimer(){this.reconnectTimer=new su(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xu)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,s,i,r,o,a,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:Xc,this.heartbeatIntervalMs=null!==(s=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==s?s:ku,this.worker=null!==(i=null===e||void 0===e?void 0:e.worker)&&void 0!==i&&i,this.accessToken=null!==(r=null===e||void 0===e?void 0:e.accessToken)&&void 0!==r?r:null,this.heartbeatCallback=null!==(o=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==o?o:wu,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(a=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==a?a:e=>Tu[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class Eu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Au(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Ou extends Eu{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ru extends Eu{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Pu=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function o(e){try{l(s.next(e))}catch(t){r(t)}}function a(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const Du=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},Mu=e=>{if(Array.isArray(e))return e.map(e=>Mu(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,s]=e;const i=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[i]=Mu(s)}),t};var Nu=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function o(e){try{l(s.next(e))}catch(t){r(t)}}function a(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const ju=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Fu=(e,t,s)=>Nu(void 0,void 0,void 0,function*(){const i=yield Pu(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof i&&!(null===s||void 0===s?void 0:s.noResolveJson)?e.json().then(n=>{const s=e.status||500,i=(null===n||void 0===n?void 0:n.statusCode)||s+"";t(new Ou(ju(n),s,i))}).catch(e=>{t(new Ru(ju(e),e))}):t(new Ru(ju(e),e))}),Iu=(e,t,n,s)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&s?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(s)?(i.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(s)):i.body=s,(null===t||void 0===t?void 0:t.duplex)&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n)):i};function qu(e,t,n,s,i,r){return Nu(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,Iu(t,s,i,r)).then(e=>{if(!e.ok)throw e;return(null===s||void 0===s?void 0:s.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(e=>Fu(e,a,s))})})}function Lu(e,t,n,s){return Nu(this,void 0,void 0,function*(){return qu(e,"GET",t,n,s)})}function Vu(e,t,n,s,i){return Nu(this,void 0,void 0,function*(){return qu(e,"POST",t,s,i,n)})}function zu(e,t,n,s,i){return Nu(this,void 0,void 0,function*(){return qu(e,"PUT",t,s,i,n)})}function Uu(e,t,n,s,i){return Nu(this,void 0,void 0,function*(){return qu(e,"DELETE",t,s,i,n)})}var Bu=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function o(e){try{l(s.next(e))}catch(t){r(t)}}function a(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class Wu{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Bu(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Au(e))return{data:null,error:e};throw e}})}}var Hu=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function o(e){try{l(s.next(e))}catch(t){r(t)}}function a(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class Gu{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new Wu(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return Hu(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Au(e))return{data:null,error:e};throw e}})}}var Qu=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function o(e){try{l(s.next(e))}catch(t){r(t)}}function a(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const Ku={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Yu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Du(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,s){return Qu(this,void 0,void 0,function*(){try{let i;const r=Object.assign(Object.assign({},Xu),s);let o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(r.upsert)});const a=r.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",r.cacheControl),a&&i.append("metadata",this.encodeMetadata(a)),i.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(i=n,i.append("cacheControl",r.cacheControl),a&&i.append("metadata",this.encodeMetadata(a))):(i=n,o["cache-control"]="max-age=".concat(r.cacheControl),o["content-type"]=r.contentType,a&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null===s||void 0===s?void 0:s.headers)&&(o=Object.assign(Object.assign({},o),s.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?zu:Vu)(this.fetch,"".concat(this.url,"/object/").concat(c),i,Object.assign({headers:o},(null===r||void 0===r?void 0:r.duplex)?{duplex:r.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Au(i))return{data:null,error:i};throw i}})}upload(e,t,n){return Qu(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return Qu(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),r=this._getFinalPath(i),o=new URL(this.url+"/object/upload/sign/".concat(r));o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Xu.upsert},s),r=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,r["cache-control"]="max-age=".concat(t.cacheControl),r["content-type"]=t.contentType);return{data:{path:i,fullPath:(yield zu(this.fetch,o.toString(),e,{headers:r})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Au(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,t){return Qu(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(s["x-upsert"]="true");const i=yield Vu(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:s}),r=new URL(this.url+i.url),o=r.searchParams.get("token");if(!o)throw new Eu("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Au(n))return{data:null,error:n};throw n}})}update(e,t,n){return Qu(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Qu(this,void 0,void 0,function*(){try{return{data:yield Vu(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Au(s))return{data:null,error:s};throw s}})}copy(e,t,n){return Qu(this,void 0,void 0,function*(){try{return{data:{path:(yield Vu(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Au(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return Qu(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Vu(this.fetch,"".concat(this.url,"/object/sign/").concat(s),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const r=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return i={signedUrl:encodeURI("".concat(this.url).concat(i.signedURL).concat(r))},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Au(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return Qu(this,void 0,void 0,function*(){try{const s=yield Vu(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),i=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(i)):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Au(s))return{data:null,error:s};throw s}})}download(e,t){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),i=s?"?".concat(s):"",r=this._getFinalPath(e);return new Gu(()=>Lu(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(r).concat(i),{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return Qu(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Lu(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:Mu(e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Au(n))return{data:null,error:n};throw n}})}exists(e){return Qu(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,s){return Nu(this,void 0,void 0,function*(){return qu(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Au(n)&&n instanceof Ru){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],i=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==i&&s.push(i);const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==o&&s.push(o);let a=s.join("&");return""!==a&&(a="?".concat(a)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(r,"/public/").concat(n).concat(a))}}}remove(e){return Qu(this,void 0,void 0,function*(){try{return{data:yield Uu(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Au(t))return{data:null,error:t};throw t}})}list(e,t,n){return Qu(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Ku),t),{prefix:e||""});return{data:yield Vu(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Au(s))return{data:null,error:s};throw s}})}listV2(e,t){return Qu(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Vu(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Au(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const $u={"X-Client-Info":"storage-js/".concat("2.12.2")};var Ju=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function o(e){try{l(s.next(e))}catch(t){r(t)}}function a(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class Zu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const i=new URL(e);if(null===s||void 0===s?void 0:s.useNewHostname){/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."))}this.url=i.href,this.headers=Object.assign(Object.assign({},$u),t),this.fetch=Du(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ju(this,void 0,void 0,function*(){try{return{data:yield Lu(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Au(e))return{data:null,error:e};throw e}})}getBucket(e){return Ju(this,void 0,void 0,function*(){try{return{data:yield Lu(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Au(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return Ju(this,void 0,void 0,function*(){try{return{data:yield Vu(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Au(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Ju(this,void 0,void 0,function*(){try{return{data:yield zu(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Au(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ju(this,void 0,void 0,function*(){try{return{data:yield Vu(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Au(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ju(this,void 0,void 0,function*(){try{return{data:yield Uu(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Au(t))return{data:null,error:t};throw t}})}}class eh extends Zu{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new Yu(this.url,this.headers,e,this.fetch)}}let th="";th="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const nh={headers:{"X-Client-Info":"supabase-js-".concat(th,"/").concat("2.58.0")}},sh={schema:"public"},ih={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rh={};var oh=n(630),ah=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function o(e){try{l(s.next(e))}catch(t){r(t)}}function a(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const lh=e=>{let t;return t=e||("undefined"===typeof fetch?oh.default:fetch),function(){return t(...arguments)}},ch=(e,t,n)=>{const s=lh(n),i="undefined"===typeof Headers?oh.Headers:Headers;return(n,r)=>ah(void 0,void 0,void 0,function*(){var o;const a=null!==(o=yield t())&&void 0!==o?o:e;let l=new i(null===r||void 0===r?void 0:r.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(a)),s(n,Object.assign(Object.assign({},r),{headers:l}))})};var uh=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function o(e){try{l(s.next(e))}catch(t){r(t)}}function a(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const hh="2.72.0",dh=3e4,ph=9e4,fh={"X-Client-Info":"gotrue-js/".concat(hh)},mh="X-Supabase-Api-Version",gh={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},yh=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class vh extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function _h(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class bh extends vh{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class wh extends vh{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class kh extends vh{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class xh extends kh{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Sh extends kh{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Th extends kh{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ch extends kh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Eh extends kh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ah extends kh{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Oh(e){return _h(e)&&"AuthRetryableFetchError"===e.name}class Rh extends kh{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Ph extends kh{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Dh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Mh=" \t\n\r=".split(""),Nh=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Mh.length;t+=1)e[Mh[t].charCodeAt(0)]=-2;for(let t=0;t<Dh.length;t+=1)e[Dh[t].charCodeAt(0)]=t;return e})();function jh(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Dh[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Dh[e]),t.queuedBits-=6}}function Fh(e,t,n){const s=Nh[e];if(!(s>-1)){if(-2===s)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Ih(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},r=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,s,n)};for(let o=0;o<e.length;o+=1)Fh(e.charCodeAt(o),i,r);return t.join("")}function qh(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function Lh(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}qh(s,t)}}function Vh(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)Fh(e.charCodeAt(i),n,s);return new Uint8Array(t)}function zh(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>jh(e,n,s)),jh(null,n,s),t.join("")}const Uh=()=>"undefined"!==typeof window&&"undefined"!==typeof document,Bh={tested:!1,writable:!1},Wh=()=>{if(!Uh())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(Bh.tested)return Bh.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Bh.tested=!0,Bh.writable=!0}catch(t){Bh.tested=!0,Bh.writable=!1}return Bh.writable};const Hh=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},Gh=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Qh=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(s){return n}},Kh=async(e,t)=>{await e.removeItem(t)};class Xh{constructor(){this.promise=new Xh.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Yh(e){const t=e.split(".");if(3!==t.length)throw new Ph("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!yh.test(t[n]))throw new Ph("JWT not in base64url format");return{header:JSON.parse(Ih(t[0])),payload:JSON.parse(Ih(t[1])),signature:Vh(t[2]),raw:{header:t[0],payload:t[1]}}}function $h(e){return("0"+e.toString(16)).substr(-2)}async function Jh(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let s=0;s<56;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,$h).join("")}();let i=s;n&&(i+="/PASSWORD_RECOVERY"),await Gh(e,"".concat(t,"-code-verifier"),i);const r=await Jh(s);return[r,s===r?"plain":"s256"]}Xh.promiseConstructor=Promise;const ed=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const td=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function nd(e){if(!td.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sd(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function id(e){return JSON.parse(JSON.stringify(e))}var rd=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};const od=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ad=[502,503,504];async function ld(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new Ah(od(e),0);if(ad.includes(e.status))throw new Ah(od(e),e.status);let s,i;try{s=await e.json()}catch(o){throw new wh(od(o),o)}const r=function(e){const t=e.headers.get(mh);if(!t)return null;if(!t.match(ed))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(o){return null}}(e);if(r&&r.getTime()>=gh.timestamp&&"object"===typeof s&&s&&"string"===typeof s.code?i=s.code:"object"===typeof s&&s&&"string"===typeof s.error_code&&(i=s.error_code),i){if("weak_password"===i)throw new Rh(od(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new xh}else if("object"===typeof s&&s&&"object"===typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Rh(od(s),e.status,s.weak_password.reasons);throw new bh(od(s),e.status||500,i)}async function cd(e,t,n,s){var i;const r=Object.assign({},null===s||void 0===s?void 0:s.headers);r[mh]||(r[mh]=gh.name),(null===s||void 0===s?void 0:s.jwt)&&(r.Authorization="Bearer ".concat(s.jwt));const o=null!==(i=null===s||void 0===s?void 0:s.query)&&void 0!==i?i:{};(null===s||void 0===s?void 0:s.redirectTo)&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await async function(e,t,n,s,i,r){const o=((e,t,n,s)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),n))})(t,s,i,r);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Ah(od(l),0)}a.ok||await ld(a);if(null===s||void 0===s?void 0:s.noResolveJson)return a;try{return await a.json()}catch(l){await ld(l)}}(e,t,n+a,{headers:r,noResolveJson:null===s||void 0===s?void 0:s.noResolveJson},{},null===s||void 0===s?void 0:s.body);return(null===s||void 0===s?void 0:s.xform)?null===s||void 0===s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}function ud(e){var t;let n=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function hd(e){const t=ud(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function dd(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function pd(e){return{data:e,error:null}}function fd(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:i,verification_type:r}=e,o=rd(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:s,redirect_to:i,verification_type:r},user:Object.assign({},o)},error:null}}function md(e){return e}const gd=["global","local","others"];var yd=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};class vd{constructor(e){let{url:t="",headers:n={},fetch:s}=e;this.url=t,this.headers=n,this.fetch=Hh(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gd[0];if(gd.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(gd.join(", ")));try{return await cd(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(_h(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await cd(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:dd})}catch(n){if(_h(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=yd(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=null===n||void 0===n?void 0:n.newEmail,delete s.newEmail),await cd(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:s,headers:this.headers,xform:fd,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(_h(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await cd(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:dd})}catch(t){if(_h(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,i,r,o,a;try{const l={nextPage:null,lastPage:0,total:0},c=await cd(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(i=null===(s=null===e||void 0===e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==i?i:""},xform:md});if(c.error)throw c.error;const u=await c.json(),h=null!==(r=c.headers.get("x-total-count"))&&void 0!==r?r:0,d=null!==(a=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(_h(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){nd(e);try{return await cd(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:dd})}catch(t){if(_h(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){nd(e);try{return await cd(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:dd})}catch(n){if(_h(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];nd(e);try{return await cd(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:dd})}catch(n){if(_h(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){nd(e.userId);try{const{data:t,error:n}=await cd(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(_h(t))return{data:null,error:t};throw t}}async _deleteFactor(e){nd(e.userId),nd(e.id);try{return{data:await cd(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(_h(t))return{data:null,error:t};throw t}}}function _d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const bd=!!(globalThis&&Wh()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class wd extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class kd extends wd{}async function xd(e,t,n){bd&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),bd&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw bd&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new kd('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(bd)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}bd&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{bd&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}))}function Sd(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error('@supabase/auth-js: Address "'.concat(e,'" is invalid.'));return e.toLowerCase()}function Td(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Cd={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fh,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ed(e,t,n){return await n()}const Ad={};class Od{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Od.nextInstanceID,Od.nextInstanceID+=1,this.instanceID>0&&Uh()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Cd),e);if(this.logDebugMessages=!!s.debug,"function"===typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new vd({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Hh(s.fetch),this.lock=s.lock||Ed,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Uh()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=xd:this.lock=Ed,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Wh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_d(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=_d(this.memoryStorage)),Uh()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Ad[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Ad[this.storageKey]=Object.assign(Object.assign({},Ad[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Ad[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ad[this.storageKey]=Object.assign(Object.assign({},Ad[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(hh,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(s){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Uh()&&this.detectSessionInUrl&&"none"!==n){const{data:s,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return _h(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:r,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",r,"redirect type",o),await this._saveSession(r),setTimeout(async()=>{"recovery"===o?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return _h(t)?{error:t}:{error:new wh("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const i=await cd(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:ud}),{data:r,error:o}=i;if(o||!r)return{data:{user:null,session:null},error:o};const a=r.session,l=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(i){if(_h(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,s;try{let i;if("email"in e){const{email:n,password:s,options:r}=e;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await Zh(this.storage,this.storageKey)),i=await cd(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo,body:{email:n,password:s,data:null!==(t=null===r||void 0===r?void 0:r.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},code_challenge:o,code_challenge_method:a},xform:ud})}else{if(!("phone"in e))throw new Th("You must provide either an email or phone number and a password");{const{phone:t,password:r,options:o}=e;i=await cd(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:r,data:null!==(n=null===o||void 0===o?void 0:o.data)&&void 0!==n?n:{},channel:null!==(s=null===o||void 0===o?void 0:o.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:ud})}}const{data:r,error:o}=i;if(o||!r)return{data:{user:null,session:null},error:o};const a=r.session,l=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(i){if(_h(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:s,options:i}=e;t=await cd(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:s,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:hd})}else{if(!("phone"in e))throw new Th("You must provide either an email or phone number and a password");{const{phone:n,password:s,options:i}=e;t=await cd(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:s,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:hd})}}const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Sh}}catch(t){if(_h(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}}async signInWithEthereum(e){var t,n,s,i,r,o,a,l,c,u,h;let d,p;if("message"in e)d=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:f,options:m}=e;let g;if(Uh())if("object"===typeof h)g=h;else{const e=window;if(!("ethereum"in e)||"object"!==typeof e.ethereum||!("request"in e.ethereum)||"function"!==typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!==typeof h||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=h}const y=new URL(null!==(t=null===m||void 0===m?void 0:m.url)&&void 0!==t?t:window.location.href),v=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!v||0===v.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=Sd(v[0]);let b=null===(n=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!b){const e=await g.request({method:"eth_chainId"});b=parseInt(e,16)}d=function(e){var t;const{chainId:n,domain:s,expirationTime:i,issuedAt:r=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:h,version:d}=e;if(!Number.isInteger(n))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(n));if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(o));if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==d)throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(d));if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(e.statement));const p=Sd(e.address),f=u?"".concat(u,"://").concat(s):s,m=e.statement?"".concat(e.statement,"\n"):"",g="".concat(f," wants you to sign in with your Ethereum account:\n").concat(p,"\n\n").concat(m);let y="URI: ".concat(h,"\nVersion: ").concat(d,"\nChain ID: ").concat(n).concat(o?"\nNonce: ".concat(o):"","\nIssued At: ").concat(r.toISOString());if(i&&(y+="\nExpiration Time: ".concat(i.toISOString())),a&&(y+="\nNot Before: ".concat(a.toISOString())),l&&(y+="\nRequest ID: ".concat(l)),c){let e="\nResources:";for(const t of c){if(!t||"string"!==typeof t)throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(t));e+="\n- ".concat(t)}y+=e}return"".concat(g,"\n").concat(y)}({domain:y.host,address:_,statement:f,uri:y.href,version:"1",chainId:b,nonce:null===(s=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(r=null===(i=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===i?void 0:i.issuedAt)&&void 0!==r?r:new Date,expirationTime:null===(o=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===o?void 0:o.expirationTime,notBefore:null===(a=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===a?void 0:a.notBefore,requestId:null===(l=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===c?void 0:c.resources}),p=await g.request({method:"personal_sign",params:[Td(d),_]})}try{const{data:t,error:n}=await cd(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:d,signature:p},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:ud});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Sh}}catch(f){if(_h(f))return{data:{user:null,session:null},error:f};throw f}}async signInWithSolana(e){var t,n,s,i,r,o,a,l,c,u,h,d;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:h,wallet:d,statement:m,options:g}=e;let y;if(Uh())if("object"===typeof d)y=d;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!==typeof d||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=d}const v=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in y)||"function"!==typeof y.signMessage||!("publicKey"in y)||"object"!==typeof y||!y.publicKey||!("toBase58"in y.publicKey)||"function"!==typeof y.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=["".concat(v.host," wants you to sign in with your Solana account:"),y.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1","URI: ".concat(v.href),"Issued At: ".concat(null!==(s=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==s?s:(new Date).toISOString()),...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(r=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===r?void 0:r.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(u=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:n}=await cd(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:zh(f)},(null===(h=e.options)||void 0===h?void 0:h.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:ud});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Sh}}catch(m){if(_h(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await Qh(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,s]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:i}=await cd(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ud});if(await Kh(this.storage,"".concat(this.storageKey,"-code-verifier")),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==s&&void 0!==s?s:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new Sh}}catch(i){if(_h(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:i,nonce:r}=e,o=await cd(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:r,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:ud}),{data:a,error:l}=o;return l?{data:{user:null,session:null},error:l}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l}):{data:{user:null,session:null},error:new Sh}}catch(t){if(_h(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,i,r;try{if("email"in e){const{email:s,options:i}=e;let r=null,o=null;"pkce"===this.flowType&&([r,o]=await Zh(this.storage,this.storageKey));const{error:a}=await cd(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:s,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(n=null===i||void 0===i?void 0:i.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:r,code_challenge_method:o},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:n}=e,{data:o,error:a}=await cd(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(s=null===n||void 0===n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(i=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(r=null===n||void 0===n?void 0:n.channel)&&void 0!==r?r:"sms"}});return{data:{user:null,session:null,messageId:null===o||void 0===o?void 0:o.message_id},error:a}}throw new Th("You must provide either an email or phone number.")}catch(o){if(_h(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,n;try{let s,i;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:r,error:o}=await cd(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ud});if(o)throw o;if(!r)throw new Error("An error occurred on token verification.");const a=r.session,l=r.user;return(null===a||void 0===a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(s){if(_h(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let i=null,r=null;return"pkce"===this.flowType&&([i,r]=await Zh(this.storage,this.storageKey)),await cd(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:r}),headers:this.headers,xform:pd})}catch(i){if(_h(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new xh;const{error:s}=await cd(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(_h(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:s,options:i}=e,{error:r}=await cd(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:r}}if("phone"in e){const{phone:n,type:s,options:i}=e,{data:r,error:o}=await cd(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null===r||void 0===r?void 0:r.message_id},error:o}}throw new Th("You must provide either an email or phone number and a type")}catch(t){if(_h(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Qh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<ph;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.userStorage){const t=await Qh(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=sd()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,s)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,s))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await cd(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:dd}):await this._useSession(async e=>{var t,n,s;const{data:i,error:r}=e;if(r)throw r;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await cd(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(s=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0,xform:dd}):{data:{user:null},error:new xh}})}catch(t){if(_h(t))return function(e){return _h(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Kh(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new xh;const r=s.session;let o=null,a=null;"pkce"===this.flowType&&null!=e.email&&([o,a]=await Zh(this.storage,this.storageKey));const{data:l,error:c}=await cd(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:a}),jwt:r.access_token,xform:dd});if(c)throw c;return r.user=l.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(n){if(_h(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new xh;const t=Date.now()/1e3;let n=t,s=!0,i=null;const{payload:r}=Yh(e.access_token);if(r.exp&&(n=r.exp,s=n<=t),s){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:s,error:r}=await this._getUser(e.access_token);if(r)throw r;i={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(_h(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:s,error:i}=t;if(i)throw i;e=null!==(n=s.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new xh;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(_h(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Uh())throw new Ch("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ch(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Eh("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ch("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Eh("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:r,expires_in:o,expires_at:a,token_type:l}=e;if(!i||!o||!r||!l)throw new Ch("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(o);let h=c+u;a&&(h=parseInt(a));const d=h-c;1e3*d<=dh&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(d,"s, should have been closer to ").concat(u,"s"));const p=h-u;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,c);const{data:f,error:m}=await this._getUser(i);if(m)throw m;const g={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:u,expires_at:h,refresh_token:r,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(_h(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Qh(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{error:i};const r=null===(n=s.session)||void 0===n?void 0:n.access_token;if(r){const{error:t}=await this.admin.signOut(r,e);if(t&&(!function(e){return _h(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Kh(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:s},error:i}=t;if(i)throw i;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(i){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,s=null;"pkce"===this.flowType&&([n,s]=await Zh(this.storage,this.storageKey,!0));try{return await cd(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(_h(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(_h(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async t=>{var n,s,i,r,o;const{data:a,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await cd(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(o=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==o?o:void 0})});if(s)throw s;return Uh()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(_h(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:r}=t;if(r)throw r;return await cd(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(s=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0})})}catch(t){if(_h(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const i=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await cd(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:ud})),s=(e,t)=>{const n=200*Math.pow(2,e);return t&&Oh(t)&&Date.now()+n-i<dh},new Promise((e,t)=>{(async()=>{for(let r=0;r<1/0;r++)try{const t=await n(r);if(!s(r,null,t))return void e(t)}catch(i){if(!s(r,i))return void t(i)}})()}))}catch(i){if(this._debug(t,"error",i),_h(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}var n,s}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Uh()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Qh(this.storage,this.storageKey);if(i&&this.userStorage){let t=await Qh(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:i.user},await Gh(this.userStorage,this.storageKey+"-user",t)),i.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:sd()}else if(i&&!i.user&&!i.user){const e=await Qh(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(i.user=e.user,await Kh(this.storage,this.storageKey+"-user"),await Gh(this.storage,this.storageKey,i)):i.user=sd()}if(this._debug(n,"session from storage",i),!this._isValidSession(i))return this._debug(n,"session is not valid"),void(null!==i&&await this._removeSession());const r=1e3*(null!==(t=i.expires_at)&&void 0!==t?t:1/0)-Date.now()<ph;if(this._debug(n,"session has".concat(r?"":" not"," expired with margin of ").concat(ph,"s")),r){if(this.autoRefreshToken&&i.refresh_token){const{error:e}=await this._callRefreshToken(i.refresh_token);e&&(console.error(e),Oh(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(i.user&&!0===i.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(i.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(i.user=e.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){return this._debug(n,"error",i),void console.error(i)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new xh;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(s,"begin");try{this.refreshingDeferred=new Xh;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new xh;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(i){if(this._debug(s,"error",i),_h(i)){const e={session:null,error:i};return Oh(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s="#_notifyAllSubscribers(".concat(e,")");this._debug(s,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(i){s.push(i)}});if(await Promise.all(i),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await Gh(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const s=id(e);await Gh(this.storage,this.storageKey,s)}else{const e=id(t);await Gh(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Kh(this.storage,this.storageKey),await Kh(this.storage,this.storageKey+"-code-verifier"),await Kh(this.storage,this.storageKey+"-user"),this.userStorage&&await Kh(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Uh()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),dh);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*n.expires_at-t)/dh);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(s," ticks, a tick lasts ").concat(dh,"ms, refresh threshold is ").concat(3," ticks")),s<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof wd))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Uh()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&s.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&s.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await Zh(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});s.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);s.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&s.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(s.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await cd(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(_h(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:r}=t;if(r)return{data:null,error:r};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:l}=await cd(this.fetch,"POST","".concat(this.url,"/factors"),{body:o,headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(s=null===a||void 0===a?void 0:a.totp)||void 0===s?void 0:s.qr_code)&&(a.totp.qr_code="data:image/svg+xml;utf-8,".concat(a.totp.qr_code)),{data:a,error:null})})}catch(t){if(_h(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:r,error:o}=await cd(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:o})})}catch(t){if(_h(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await cd(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(_h(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],s=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=Yh(s.access_token);let o=null;r.aal&&(o=r.aal);let a=o;(null!==(n=null===(t=s.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(a="aal2");return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:r.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:s,error:i}=await cd(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(i)throw i;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=n,t=s.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:s,payload:i,signature:r,raw:{header:o,payload:a}}=Yh(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp);const l=s.alg&&!s.alg.startsWith("HS")&&s.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(s.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:s,signature:r},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,r,function(e){const t=[];return Lh(e,e=>t.push(e)),new Uint8Array(t)}("".concat(o,".").concat(a))))throw new Ph("Invalid JWT signature");return{data:{claims:i,header:s,signature:r},error:null}}catch(n){if(_h(n))return{data:null,error:n};throw n}}}Od.nextInstanceID=0;const Rd=Od;class Pd extends Rd{constructor(e){super(e)}}var Dd=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function o(e){try{l(s.next(e))}catch(t){r(t)}}function a(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class Md{constructor(e,t,n){var s,i,r;this.supabaseUrl=e,this.supabaseKey=t;const o=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(s){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a="sb-".concat(o.hostname.split(".")[0],"-auth-token"),l=function(e,t){var n,s;const{db:i,auth:r,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:h}=t,d={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},null!==(n=null===h||void 0===h?void 0:h.headers)&&void 0!==n?n:{}),null!==(s=null===a||void 0===a?void 0:a.headers)&&void 0!==s?s:{})}),accessToken:()=>uh(this,void 0,void 0,function*(){return""})};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}(null!==n&&void 0!==n?n:{},{db:sh,realtime:rh,auth:Object.assign(Object.assign({},ih),{storageKey:a}),global:nh});this.storageKey=null!==(s=l.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(i=l.global.headers)&&void 0!==i?i:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(r=l.auth)&&void 0!==r?r:{},this.headers,l.global.fetch),this.fetch=ch(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new zc(new URL("rest/v1",o).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new eh(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Lc(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Dd(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:s,persistSession:i,detectSessionInUrl:r,storage:o,userStorage:a,storageKey:l,flowType:c,lock:u,debug:h}=e;const d={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Pd({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),t),storageKey:l,autoRefreshToken:s,persistSession:i,detectSessionInUrl:r,storage:o,userStorage:a,flowType:c,lock:u,debug:h,fetch:n,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new Cu(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Nd="https://vjdydqrjzuddnynzkrhx.supabase.co",jd="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZqZHlkcXJqenVkZG55bnprcmh4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2NjIwNzIsImV4cCI6MjA3NTIzODA3Mn0.cLmGhySDCuazLgFp0kT8L2knR4AHVfmXhPj71c28az4";let Fd=null;Nd&&jd&&(Fd=new Md(Nd,jd,{auth:{persistSession:!1},global:{headers:{"x-client-info":"beatlab-share/1.0"}}}));const Id=()=>Boolean(Fd),qd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Ld=e=>{const t=(e=>{const t=new Uint32Array(e);return crypto.getRandomValues(t),t})(e);let n="";for(let s=0;s<e;s+=1)n+=qd[t[s]%62];return n},Vd=()=>{const e=Fd;if(!e)throw new Error("Supabase client not configured");return e},zd=e=>e<3?8:e<6?9:10,Ud=async e=>{var t;if(!Id())throw new Error("Supabase credentials missing");const n=Vd(),s=p(e),i=await(async e=>{const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(e=>e.toString(16).padStart(2,"0")).join("")})(s),r=await n.from("patterns").select("id").eq("hash",i).maybeSingle();if(r.error&&"PGRST116"!==r.error.code)throw r.error;if(null!==(t=r.data)&&void 0!==t&&t.id)return r.data.id;for(let c=0;c<9;c+=1){var o,a;const e=Ld(zd(c)),t=await n.from("patterns").insert({id:e,payload:s,hash:i,v:1}).select("id").maybeSingle();if(!t.error&&null!==(o=t.data)&&void 0!==o&&o.id)return t.data.id;var l;if("23505"!==(null===(a=t.error)||void 0===a?void 0:a.code))throw null!==(l=t.error)&&void 0!==l?l:new Error("Failed to insert pattern")}throw new Error("Exceeded attempts to generate unique id")},Bd=[{id:"loop1",label:"Synth Arp",type:"melodic",synthConfig:{type:"FMSynth",options:{harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}},effects:[{type:"FeedbackDelay",options:["8n",.5],connectTo:"next"},{type:"Chorus",options:[4,2.5,.5],connectTo:"master"}],pattern:{type:"note",data:[{time:"0:0",note:"C4",duration:"8n"},{time:"0:1",note:"E4",duration:"16n"},{time:"0:2",note:"G4",duration:"8n"},{time:"0:3",note:"B4",duration:"16n"},{time:"1:0",note:"C5",duration:"8n"},{time:"1:1",note:"B4",duration:"16n"},{time:"1:2",note:"G4",duration:"8n"},{time:"1:3",note:"E4",duration:"16n"}],loopEnd:"2m"}},{id:"loop2",label:"Piano",type:"harmonic",synthConfig:{type:"PolySynth",synthType:"Synth",options:{oscillator:{type:"triangle"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}}},effects:[],pattern:{type:"chord",data:[{time:"0:0",notes:["C4","E4","G4"]},{time:"0:2",notes:["G3","B3","D4"]},{time:"1:0",notes:["A3","C4","E4"]},{time:"1:2",notes:["F3","A3","C4"]}],loopEnd:"2m"}},{id:"loop3",label:"Techno",type:"bass",synthConfig:{type:"MonoSynth",options:{oscillator:{type:"sawtooth"},envelope:{attack:.01,decay:.2,sustain:.2,release:.1}}},effects:[{type:"Distortion",options:[.4],connectTo:"next"},{type:"Filter",options:[1200,"lowpass"],connectTo:"master"}],pattern:{type:"note",data:[{time:"0:0",note:"C3",duration:"8n"},{time:"0:1.5",note:"C3",duration:"16n"},{time:"0:2",note:"G2",duration:"8n"},{time:"0:3",note:"G2",duration:"16n"},{time:"1:0",note:"C3",duration:"8n"},{time:"1:1.5",note:"C3",duration:"16n"},{time:"1:2",note:"A2",duration:"8n"},{time:"1:3",note:"A2",duration:"16n"}],loopEnd:"2m"}},{id:"loop4",label:"Ambient Pad",type:"harmonic",synthConfig:{type:"PolySynth",synthType:"FMSynth",options:{harmonicity:1,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.8,decay:.4,sustain:.8,release:2},modulation:{type:"sine"},modulationEnvelope:{attack:.8,decay:0,sustain:1,release:2}}},effects:[{type:"Filter",options:[200,"lowpass"],connectTo:"master"}],pattern:{type:"chord",data:[{time:"0:0",notes:["C2","G2","C3","E3"]},{time:"2:0",notes:["F2","C3","F3","A3"]},{time:"4:0",notes:["G2","D3","G3","B3"]},{time:"6:0",notes:["E2","B2","E3","G#3"]}],loopEnd:"4m"}},{id:"loop5",label:"Pluck Synth",type:"melodic",synthConfig:{type:"PluckSynth",options:{attackNoise:5,dampening:4e3,resonance:.98,volume:5}},effects:[{type:"Volume",options:[10],connectTo:"next"},{type:"Reverb",options:[5],connectTo:"master"}],pattern:{type:"note",data:[{time:"0:0",note:"C5",duration:"8n"},{time:"0:1",note:"E5",duration:"8n"},{time:"0:2",note:"G5",duration:"8n"},{time:"0:3",note:"B5",duration:"8n"},{time:"1:0",note:"C6",duration:"8n"},{time:"1:1",note:"B5",duration:"8n"},{time:"1:2",note:"G5",duration:"8n"},{time:"1:3",note:"E5",duration:"8n"},{time:"2:0",note:"D5",duration:"8n"},{time:"2:1",note:"F5",duration:"8n"},{time:"2:2",note:"A5",duration:"8n"},{time:"2:3",note:"C6",duration:"8n"},{time:"3:0",note:"B5",duration:"8n"},{time:"3:1",note:"A5",duration:"8n"},{time:"3:2",note:"F5",duration:"8n"},{time:"3:3",note:"D5",duration:"8n"}],loopEnd:"2m"}},{id:"loop6",label:"Glitchy Perc",type:"percussive",synthConfig:{type:"NoiseSynth",options:{noise:{type:"white"},envelope:{attack:.001,decay:.2,sustain:.1}}},effects:[{type:"BitCrusher",options:[4],connectTo:"master"}],pattern:{type:"noise",data:[{time:"0:0:3"},{time:"0:1:2"},{time:"0:2:1"},{time:"0:3:0"},{time:"1:0:3"},{time:"1:1:2"},{time:"1:2:1"},{time:"1:3:0"},{time:"2:0:2"},{time:"2:1:1"},{time:"2:2:3"},{time:"2:3:0"},{time:"3:0:1"},{time:"3:1:3"},{time:"3:2:2"},{time:"3:3:0"}],loopEnd:"2m"}}],Wd=e=>{const{type:t,synthType:n,options:i={}}=e;switch(t){case"FMSynth":return new ta(i);case"MonoSynth":return new Zo(i);case"NoiseSynth":return new ra(i);case"PluckSynth":return new fa(i);case"PolySynth":return n?new ma(s[n],i):new ma(i);default:return console.warn("Unknown synth type: ".concat(t,", defaulting to Synth")),new Qo(i)}},Hd=(e,t)=>{if(!e||0===e.length)return t;let n=null,s=null;return e.forEach((i,r)=>{const{type:o,options:a=[],connectTo:l}=i;let c;switch(o){case"Chorus":c=new Ga(...a),c.start();break;case"FeedbackDelay":c=new Xa(...a);break;case"Filter":c=new $o(...a);break;case"Distortion":c=new Qa(...a);break;case"Reverb":c=new cl(...a);break;case"BitCrusher":c=new La(...a);break;case"Volume":c=new Vr(...a);break;default:return void console.warn("Unknown effect type: ".concat(o,", skipping"))}0===r&&(n=c),s&&s.connect(c),"master"!==l&&r!==e.length-1||c.connect(t),s=c}),n||t},Gd=(e,t)=>{const{type:n,data:s,loopEnd:i}=e;let r;switch(n){case"note":r=new _a((e,n)=>{t.triggerAttackRelease(n.note,n.duration,e)},s);break;case"chord":r=new _a((e,n)=>{t.triggerAttackRelease(n.notes,"2n",e)},s);break;case"noise":r=new _a(e=>{t.triggerAttackRelease("16n",e)},s);break;default:console.warn("Unknown pattern type: ".concat(n,", creating empty part")),r=new _a(()=>{},[])}return r.loop=!0,r.loopEnd=i||"2m",r},Qd=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};if(!e)throw new Error("Loop configuration is required");const{id:s,synthConfig:i,effects:r,pattern:o}=e;try{const e=Wd(i);let s;r&&r.length>0?(s=Hd(r,t),r.forEach(e=>{"next"!==e.connectTo&&"master"!==e.connectTo||n(s)})):s=t,e&&s&&e.connect(s);return{synthRef:{current:e},loopRef:{current:Gd(o,e)}}}catch(a){return console.error("Error creating loop '".concat(s,"':"),a),{synthRef:{current:null},loopRef:{current:null}}}},Kd=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const s=[],i=[];return e.forEach((e,r)=>{const{synthRef:o,loopRef:a}=Qd(e,t,n);s[r]=o,i[r]=a}),{synthRefs:s,loopRefs:i}},Xd=function(e){return Kd(Bd,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{})},Yd={Filter:e=>{const[t]=e;return new $o(t)},BitCrusher:e=>{const[t]=e;return new La(t)},Distortion:e=>{const[t]=e;return new Qa(t)}},$d={MembraneSynth:e=>new ia(e),NoiseSynth:e=>new ra(e)},Jd=(e,t,n)=>{if(!e||!e.drums)throw new Error("Invalid kit configuration: missing drums definition");const s={},i={},r=[],o=e.velocityShapes||{},a=void 0!==e.masterVolume?e.masterVolume:-10;return Object.entries(e.drums).forEach(e=>{let[o,l]=e;try{const e=new Vr(a);i[o]=e;const c=$d[l.type];if(!c)throw new Error("Unknown synth type: ".concat(l.type));const u=c(l.options);s[o]=u;let h=u;l.effects&&Array.isArray(l.effects)&&l.effects.forEach((e,t)=>{const s=Yd[e.type];if(!s)throw new Error("Unknown effect type: ".concat(e.type));const i=s(e.options);r.push(i),n&&n(i),h.connect(i),h=i}),h.connect(e),e.connect(t)}catch(c){console.error("Error creating drum ".concat(o,":"),c);const e=new ra,n=new Vr(a);i[o]=n,s[o]=e,e.connect(n),n.connect(t)}}),{synths:s,drumVolumes:i,velocityShapes:o,effectNodes:r}},Zd=e=>{if(!e)return;const{synths:t,drumVolumes:n,effectNodes:s}=e;t&&Object.values(t).forEach(e=>{try{e&&"function"===typeof e.dispose&&e.dispose()}catch(t){console.error("Error disposing synth:",t)}}),n&&Object.values(n).forEach(e=>{try{e&&"function"===typeof e.dispose&&e.dispose()}catch(t){console.error("Error disposing volume node:",t)}}),s&&s.forEach(e=>{try{e&&"function"===typeof e.dispose&&e.dispose()}catch(t){console.error("Error disposing effect node:",t)}})},ep=(e,t,n)=>{const s=null===e||void 0===e?void 0:e[t];return s&&Array.isArray(s)&&0!==s.length?s[n%s.length]:1},tp=function(){false},np=e=>e.endsWith("/")?e:"".concat(e,"/"),sp=e=>{var t,n,s,r,o,a;const[l,c]=(0,i.useState)(Tc(ec.STEP_COUNT)),h=Dc(e,Tc(ec.STEP_COUNT)),[d,f]=(0,i.useState)(()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;const n=mc(wc,null);return _c(n,e,t)}(e,l)),[m,g]=(0,i.useState)(ec.BPM),[y,v]=(0,i.useState)(!1),[_,b]=(0,i.useState)(-1),[w,k]=(0,i.useState)("Empty"),[x,S]=(0,i.useState)(()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;const n=mc(kc,{});if(!n||"object"!==typeof n)return{};const s={};return Object.entries(n).forEach(n=>{var i;let[r,o]=n;s[r]=bc(o,e,null!==(i=null===o||void 0===o?void 0:o.stepCount)&&void 0!==i?i:t)}),s}(e)),[T,C]=(0,i.useState)(hc()),[E,A]=(0,i.useState)(0),O=(0,i.useRef)({}),R=(0,i.useRef)(null),P=(0,i.useRef)([]),D=(0,i.useRef)(null),M=(0,i.useRef)(d);(0,i.useEffect)(()=>{M.current=d,(e=>{gc(wc,e)})(d)},[d]);const[N,j]=(0,i.useState)(()=>{const t={};return e.forEach(e=>{t[e.name]=ec.VOLUME_DB}),t}),[F,I]=(0,i.useState)(ec.VOLUME_DB),[q,L]=(0,i.useState)(()=>Array(tc.length).fill(!1)),[V,z]=(0,i.useState)(()=>Array(tc.length).fill(ec.VOLUME_DB)),U=(0,i.useRef)([]),B=(0,i.useRef)([]),[W,H]=(0,i.useState)(ec.FILTER_FREQ),[G,Q]=(0,i.useState)(ec.FILTER_Q),K=(0,i.useRef)(null),X=(0,i.useRef)({}),Y=(0,i.useRef)(null),$=(0,i.useRef)(null),J=(0,i.useCallback)(()=>{R.current&&R.current.dispose(),R.current=new Oa((t,n)=>{b(n),e.forEach(e=>{if(M.current[e.name][n]){var s;const i=ep(null===(s=D.current)||void 0===s?void 0:s.velocityShapes,e.name,n),r=O.current[e.name];if(!r)return;"membrane"===e.type?r.triggerAttackRelease(e.note,"8n",t,i):"noise"===e.type&&r.triggerAttackRelease("8n",t,i)}})},Array.from({length:l},(e,t)=>t),"16n").start(0)},[e,l]);(0,i.useEffect)(()=>{tp("Initializing Tone.js instruments..."),P.current=[];const e=e=>(P.current.push(e),e),t=new Vr(-10);if("function"===typeof t.toDestination)t.toDestination();else{var n;if("function"!==typeof t.connect||!Vl)return tp("Skipping Tone initialization: master volume routing unavailable."),null===(n=t.dispose)||void 0===n||n.call(t),()=>{};t.connect(Vl)}e(t),K.current=t,Y.current=e(new $o(W,"lowpass").connect(K.current)),$.current=new gl("fft",256),K.current.connect($.current);const s=Jd(T,Y.current,e);D.current=s,O.current=s.synths,X.current=s.drumVolumes,tp("Tone.js instruments initialized.");const{synthRefs:i,loopRefs:r}=Xd(K.current,e);return U.current=i,B.current=r,J(),tp("Tone.Sequence set up."),ql.loop=!0,ql.loopEnd="4m",()=>{tp("Disposing Tone.js instruments and sequence..."),ql.stop(),ql.cancel(0),R.current&&(R.current.stop(),R.current.dispose(),R.current=null),B.current.forEach(e=>{null!==e&&void 0!==e&&e.current&&(e.current.stop(0),e.current.dispose(),e.current=null)}),U.current.forEach(e=>{null!==e&&void 0!==e&&e.current&&(e.current.dispose(),e.current=null)}),D.current&&(Zd(D.current),D.current=null),O.current={},X.current={},P.current.forEach(e=>{var t;if(e&&"function"===typeof e.stop)try{e.stop()}catch(n){tp("Failed to stop node during cleanup",n)}null===e||void 0===e||null===(t=e.dispose)||void 0===t||t.call(e)}),P.current=[],$.current&&($.current.dispose(),$.current=null),K.current=null,Y.current=null,tp("Disposal complete.")}},[]),(0,i.useEffect)(()=>{R.current&&(R.current.stop(),R.current.dispose(),R.current=new Oa((t,n)=>{b(n),e.forEach(e=>{M.current[e.name][n]&&("membrane"===e.type?O.current[e.name].triggerAttackRelease(e.note,"8n",t):"noise"===e.type&&O.current[e.name].triggerAttackRelease("8n",t))})},Array.from({length:l},(e,t)=>t),"16n").start(0))},[l,e]),(0,i.useEffect)(()=>{tp("BPM changed to:",m),ql.bpm.value=m},[m]),(0,i.useEffect)(()=>{tp("Swing changed to:",E),ql.swing=E},[E]);const Z=(0,i.useCallback)(()=>{tp("Stop button clicked. Transport state:",ql.state),ql.stop(),B.current.forEach(e=>{null!==e&&void 0!==e&&e.current&&e.current.stop(0)}),v(!1),b(-1),tp("Transport stopped.")},[]),ee=(0,i.useCallback)(e=>{tp("Loading kit:",e.name),Z(),D.current&&(Zd(D.current),D.current=null),O.current={},X.current={},P.current=[];const t=Jd(e,Y.current,e=>(P.current.push(e),e));D.current=t,O.current=t.synths,X.current=t.drumVolumes,e.defaultBpm&&g(e.defaultBpm),void 0!==e.defaultSwing&&A(e.defaultSwing),void 0!==e.defaultFilterFreq&&H(e.defaultFilterFreq),void 0!==e.defaultFilterQ&&Q(e.defaultFilterQ),J(),C(e),tp("Kit loaded:",e.name)},[e,l,Y,Z,J]),te=(0,i.useCallback)((t,n)=>{if(n.pattern){const t=n.stepCount||l,s=Ac(n.pattern,e,t);f(s),n.bpm&&g(n.bpm),n.stepCount&&c(n.stepCount),j(n.drumVolumes),I(n.masterVolume),H(n.filterFreq),Q(n.filterQ),L([!!n.loop1Playing,!!n.loop2Playing,!!n.loop3Playing,!!n.loop4Playing,!!n.loop5Playing,!!n.loop6Playing]),z([Number.isFinite(n.loop1Volume)?n.loop1Volume:ec.VOLUME_DB,Number.isFinite(n.loop2Volume)?n.loop2Volume:ec.VOLUME_DB,Number.isFinite(n.loop3Volume)?n.loop3Volume:ec.VOLUME_DB,Number.isFinite(n.loop4Volume)?n.loop4Volume:ec.VOLUME_DB,Number.isFinite(n.loop5Volume)?n.loop5Volume:ec.VOLUME_DB,Number.isFinite(n.loop6Volume)?n.loop6Volume:ec.VOLUME_DB])}else f(Ac(n,e,l));k(t),Z()},[Z,e,l]),[ne,se]=(0,i.useState)(null),[ie,re]=(0,i.useState)(!0);(0,i.useEffect)(()=>{ql.loop=ie},[ie]);(0,i.useEffect)(()=>{K.current&&(K.current.volume.value=F)},[F]),(0,i.useEffect)(()=>{Object.entries(N).forEach(e=>{let[t,n]=e;X.current[t]&&(X.current[t].volume.value=n)})},[N]),(0,i.useEffect)(()=>{Y.current&&(Y.current.frequency.value=W)},[W]),(0,i.useEffect)(()=>{Y.current&&(Y.current.Q.value=G)},[G]),(0,i.useEffect)(()=>{B.current.forEach((e,t)=>{null!==e&&void 0!==e&&e.current&&(e.current.mute=!q[t])})},[q]),(0,i.useEffect)(()=>{U.current.forEach((e,t)=>{null!==e&&void 0!==e&&e.current&&(e.current.volume.value=V[t])})},[V]);return{pattern:d,bpm:m,stepCount:l,isPlaying:y,currentStep:_,currentPatternName:w,savedPatterns:x,drumVolumes:N,masterVolume:F,loopPlaying:q,loopVolume:V,filterFreq:W,filterQ:G,activePad:ne,isLooping:ie,swing:E,currentKit:T,toggleStep:(e,t)=>{f(n=>u(u({},n),{},{[e]:n[e].map((e,n)=>n===t?!e:e)}))},handlePlay:()=>{tp("Play button clicked. Transport state:",ql.state),"started"!==ql.state&&(ql.start(),B.current.forEach(e=>{null!==e&&void 0!==e&&e.current&&e.current.start(0)}),v(!0),tp("Transport started."))},handleStop:Z,handleBpmChange:e=>{(e=>{const t=Number(e);Number.isFinite(t)&&g(t)})(e.target.value)},handleStepCountChange:t=>{const n=parseInt(t.target.value,10);if(!Number.isInteger(n)||n<=0)return;const s=Ac(M.current,e,n);f(s),c(n),(e=>{if(Number.isInteger(e)&&fc())try{window.localStorage.setItem(xc,String(e))}catch(t){}})(n)},handleSwingChange:e=>{A(parseFloat(e.target.value))},loadPattern:te,loadKit:ee,savePattern:()=>{const t=prompt("Enter a name for your pattern:");if(t){const n=Cc(d,{bpm:m,stepCount:l,drumVolumes:N,masterVolume:F,filterFreq:W,filterQ:G,loopPlaying:q,loopVolume:V},e),s=u(u({},x),{},{[t]:n});S(s),Sc(s),k(t),alert('Pattern "'.concat(t,'" saved!'))}},deletePattern:e=>{if(window.confirm('Are you sure you want to delete pattern "'.concat(e,'"?'))){const t=u({},x);delete t[e],S(t),Sc(t),w===e&&te("Empty",h.Empty),alert('Pattern "'.concat(e,'" deleted!'))}},toggleLoop:()=>{re(e=>!e)},handleDrumVolumeChange:(e,t)=>{j(n=>u(u({},n),{},{[e]:parseFloat(t)}))},handleMasterVolumeChange:e=>{I(parseFloat(e.target.value))},handleFilterFreqChange:e=>{H(parseFloat(e.target.value))},handleFilterQChange:e=>{Q(parseFloat(e.target.value))},toggleLoopAt:e=>{L(t=>{const n=[...t];return n[e]=!n[e],n})},handleLoopVolumeChangeAt:(e,t)=>{const n=parseFloat(t.target.value);z(t=>{const s=[...t];return s[e]=n,s})},playSound:t=>{const n=e.find(e=>e.name===t);if(n){const e="8n",s=O.current[n.name];if(!s)return;"membrane"===n.type?s.triggerAttackRelease(n.note,e):"noise"===n.type&&s.triggerAttackRelease(e),se(t),setTimeout(()=>se(null),100)}},predefinedPatterns:Dc(e,l),analyser:$.current,getSharablePatternUrl:async()=>{const t=Cc(d,{bpm:m,stepCount:l,drumVolumes:N,masterVolume:F,filterFreq:W,filterQ:G,loopPlaying:q,loopVolume:V},e),n=(()=>{if("undefined"===typeof window)return"";const{origin:e,pathname:t}=window.location,n="/BeatLab";if(n)try{const t=new URL(n,e);return np("".concat(t.origin).concat(t.pathname))}catch(s){const t=n.replace(/\/+$/g,"").replace(/^\/+/,"");return np(t?"".concat(e,"/").concat(t):e)}return e.includes("github.io")||t.toLowerCase().includes("/beatlab")?np("".concat(e,"/BeatLab")):np(e)})(),s=p(t),i="".concat(n,"?p=").concat(s);try{const e=await Ud(t);return{url:"".concat(n).concat(e),fallbackUrl:i,fallbackPayload:s,isFallback:!1}}catch(r){return{url:i,fallbackUrl:i,fallbackPayload:s,isFallback:!0,error:r}}},loop1:(null===(t=B.current[0])||void 0===t?void 0:t.current)||null,loop2:(null===(n=B.current[1])||void 0===n?void 0:n.current)||null,loop3:(null===(s=B.current[2])||void 0===s?void 0:s.current)||null,loop4:(null===(r=B.current[3])||void 0===r?void 0:r.current)||null,loop5:(null===(o=B.current[4])||void 0===o?void 0:o.current)||null,loop6:(null===(a=B.current[5])||void 0===a?void 0:a.current)||null}},ip=[{name:"Kick",note:"C2",type:"membrane"},{name:"Snare",note:"E2",type:"noise"},{name:"Closed Hi-Hat",note:"F#2",type:"noise"},{name:"Open Hi-Hat",note:"A#2",type:"noise"},{name:"Clap",note:"C#3",type:"noise"},{name:"Crash",note:"F3",type:"noise"},{name:"Tom Low",note:"D2",type:"membrane"},{name:"Tom High",note:"G2",type:"membrane"}];const rp=function(){const[e,t]=(0,i.useState)(!1),n=sp(ip);return(0,i.useEffect)(()=>{const e=e=>{if("undefined"===typeof window)return;const t=new URL(window.location.href);let n=!1;e.forEach(e=>{t.searchParams.has(e)&&(t.searchParams.delete(e),n=!0)}),n&&window.history.replaceState(null,"","".concat(t.origin).concat(t.pathname).concat(t.search).concat(t.hash))},t=async e=>{const t=e.pathname.split("/").filter(Boolean);if(!t.length)return!1;const s=t[t.length-1],i=1===t.length&&"beatlab"===t[0].toLowerCase();if(!/^[A-Za-z0-9]{1,10}$/.test(s)||i)return!1;try{const e=await(async e=>{if(!Id())throw new Error("Supabase credentials missing");const t=Vd(),{data:n,error:s}=await t.from("patterns").select("payload").eq("id",e).maybeSingle();if(s){if("PGRST116"===s.code)return null;throw s}return null!==n&&void 0!==n&&n.payload?f(n.payload):null})(s);if(e)return n.loadPattern("Shared Pattern",e),!0}catch(r){console.error("Failed to load shared pattern by id:",r)}return!1},s=t=>{const s=t.searchParams.get("pattern");if(!s)return!1;const i=(e=>{try{const t=d().decompressFromEncodedURIComponent(e);return JSON.parse(t)}catch(t){return console.error("Failed to decode pattern:",t),null}})(s);return!!i&&(n.loadPattern("Shared Pattern",i),e(["pattern"]),!0)};(async()=>{(()=>{if("undefined"===typeof window)return;const{search:e,origin:t,hash:n}=window.location;if(!e.startsWith("?"))return;const s=new URLSearchParams(e),i=s.get("p");if(!i||!i.startsWith("/"))return;const r=s.get("q"),o=s.get("h"),a=r?"?".concat(r):"",l=o?"#".concat(o):n;window.history.replaceState(null,"","".concat(t).concat(i).concat(a).concat(l))})();const i=new URL(window.location.href);await t(i)||(t=>{const s=t.searchParams.get("p");if(!s||s.startsWith("/"))return!1;const i=f(s);return!!i&&(n.loadPattern("Shared Pattern",i),e(["p"]),!0)})(i)||s(i)})()},[]),(0,Jl.jsx)("div",{className:"App ".concat(e?"":"welcome"),children:e?(0,Jl.jsxs)("div",{className:"app-container",children:[(0,Jl.jsxs)("div",{className:"middle-column",children:[(0,Jl.jsx)(rc,{isPlaying:n.isPlaying,isLooping:n.isLooping,bpm:n.bpm,stepCount:n.stepCount,masterVolume:n.masterVolume,handlePlay:n.handlePlay,handleStop:n.handleStop,toggleLoop:n.toggleLoop,handleBpmChange:n.handleBpmChange,handleStepCountChange:n.handleStepCountChange,handleMasterVolumeChange:n.handleMasterVolumeChange,getSharablePatternUrl:n.getSharablePatternUrl,drumSounds:ip,pattern:n.pattern,drumVolumes:n.drumVolumes,filterFreq:n.filterFreq,filterQ:n.filterQ,loopPlaying:n.loopPlaying,loopVolume:n.loopVolume,loop1:n.loop1,loop2:n.loop2,loop3:n.loop3,loop4:n.loop4,loop5:n.loop5,loop6:n.loop6}),(0,Jl.jsx)(pc,{currentKit:n.currentKit,loadKit:n.loadKit}),(0,Jl.jsx)(cc,u(u({},n),{},{predefinedPatterns:n.predefinedPatterns})),(0,Jl.jsx)(Zl,u(u({},n),{},{drumSounds:ip})),(0,Jl.jsx)(ac,u({},n))]}),(0,Jl.jsx)("div",{className:"right-column",children:(0,Jl.jsx)(oc,u(u({},n),{},{drumSounds:ip,swing:n.swing,handleSwingChange:n.handleSwingChange}))})]}):(0,Jl.jsxs)("div",{className:"start-screen",children:[(0,Jl.jsx)(lc,{}),(0,Jl.jsx)("h1",{children:"BeatLab"}),(0,Jl.jsx)("button",{onClick:async()=>{try{console.log("Attempting to start audio context..."),"running"!==Ql.state&&(await Ql.resume(),console.log("Audio context resumed. State:",Ql.state)),await rr(),console.log("Tone.start() completed. Audio context state:",Ql.state);const e=(new Qo).toDestination();e.triggerAttackRelease("C4","8n"),console.log("Audio ping: C4 played."),setTimeout(()=>e.dispose(),1e3),t(!0)}catch(e){console.error("Failed to start audio context:",e),alert("Failed to start audio. Please check your browser console for more details.")}},children:"Start Creating"})]})})},op=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:s,getFCP:i,getLCP:r,getTTFB:o}=t;n(e),s(e),i(e),r(e),o(e)})};r.createRoot(document.getElementById("root")).render((0,Jl.jsx)(i.StrictMode,{children:(0,Jl.jsx)(rp,{})})),op()})()})();
//# sourceMappingURL=main.4df119ba.js.map