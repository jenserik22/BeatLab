/*! For license information please see main.84f9ca4e.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var s=n(853),r=n(43),i=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(o(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),w=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var O=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var R=Symbol.for("react.client.reference");function N(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===R?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case x:return"Suspense";case S:return"SuspenseList";case E:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case w:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:N(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return N(e(t))}catch(n){}}return null}var M=Array.isArray,I=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},L=[],F=-1;function V(e){return{current:e}}function q(e){0>F||(e.current=L[F],L[F]=null,F--)}function z(e,t){F++,L[F]=e.current,e.current=t}var U=V(null),B=V(null),W=V(null),H=V(null);function G(e,t){switch(z(W,t),z(B,e),z(U,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?rh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ih(t=rh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}q(U),z(U,e)}function Q(){q(U),q(B),q(W)}function K(e){null!==e.memoizedState&&z(H,e);var t=U.current,n=ih(t,e.type);t!==n&&(z(B,e),z(U,n))}function $(e){B.current===e&&(q(U),q(B)),H.current===e&&(q(H),Kh._currentValue=j)}var Y=Object.prototype.hasOwnProperty,X=s.unstable_scheduleCallback,J=s.unstable_cancelCallback,Z=s.unstable_shouldYield,ee=s.unstable_requestPaint,te=s.unstable_now,ne=s.unstable_getCurrentPriorityLevel,se=s.unstable_ImmediatePriority,re=s.unstable_UserBlockingPriority,ie=s.unstable_NormalPriority,oe=s.unstable_LowPriority,ae=s.unstable_IdlePriority,le=s.log,ce=s.unstable_setDisableYieldValue,ue=null,he=null;function de(e){if("function"===typeof le&&ce(e),he&&"function"===typeof he.setStrictMode)try{he.setStrictMode(ue,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(fe(e)/me|0)|0},fe=Math.log,me=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t,n){var s=e.pendingLanes;if(0===s)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&s;return 0!==a?0!==(s=a&~i)?r=ye(s):0!==(o&=a)?r=ye(o):n||0!==(n=a&~e)&&(r=ye(n)):0!==(a=s&~i)?r=ye(a):0!==o?r=ye(o):n||0!==(n=s&~e)&&(r=ye(n)),0===r?0:0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:r}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function xe(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Te(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-pe(t);e.entangledLanes|=t,e.entanglements[s]=1073741824|e.entanglements[s]|4194090&n}function Ee(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-pe(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}function Ae(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Oe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Pe(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:cd(e.type)}var Re=Math.random().toString(36).slice(2),Ne="__reactFiber$"+Re,Me="__reactProps$"+Re,Ie="__reactContainer$"+Re,De="__reactEvents$"+Re,je="__reactListeners$"+Re,Le="__reactHandles$"+Re,Fe="__reactResources$"+Re,Ve="__reactMarker$"+Re;function qe(e){delete e[Ne],delete e[Me],delete e[De],delete e[je],delete e[Le]}function ze(e){var t=e[Ne];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ie]||n[Ne]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=_h(e);null!==e;){if(n=e[Ne])return n;e=_h(e)}return t}n=(e=n).parentNode}return null}function Ue(e){if(e=e[Ne]||e[Ie]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Be(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function We(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function He(e){e[Ve]=!0}var Ge=new Set,Qe={};function Ke(e,t){$e(e,t),$e(e+"Capture",t)}function $e(e,t){for(Qe[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Ye,Xe,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(r=t,Y.call(et,r)||!Y.call(Ze,r)&&(Je.test(r)?et[r]=!0:(Ze[r]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var s=t.toLowerCase().slice(0,5);if("data-"!==s&&"aria-"!==s)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var r}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function st(e,t,n,s){if(null===s)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+s)}}function rt(e){if(void 0===Ye)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Xe=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+Xe}var it=!1;function ot(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var s=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){s=i}e.call(n.prototype)}}else{try{throw Error()}catch(o){s=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&s&&"string"===typeof a.stack)return[a.stack,s.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),o=i[0],a=i[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(r=s=0;s<l.length&&!l[s].includes("DetermineComponentFrameRoot");)s++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(s===l.length||r===c.length)for(s=l.length-1,r=c.length-1;1<=s&&0<=r&&l[s]!==c[r];)r--;for(;1<=s&&0<=r;s--,r--)if(l[s]!==c[r]){if(1!==s||1!==r)do{if(s--,0>--r||l[s]!==c[r]){var u="\n"+l[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=s&&0<=r);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?rt(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return rt(e.type);case 16:return rt("Lazy");case 13:return rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return rt("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){s=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=ut(e)?e.checked?"true":"false":e.value),(e=s)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function mt(e){return e.replace(ft,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,s,r,i,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?yt(e,o,ct(t)):null!=n?yt(e,o,ct(n)):null!=s&&e.removeAttribute("value"),null==r&&null!=i&&(e.defaultChecked=!!i),null!=r&&(e.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function vt(e,t,n,s,r,i,o,a){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}s="function"!==typeof(s=null!=s?s:r)&&"symbol"!==typeof s&&!!s,e.checked=a?e.checked:!!s,e.defaultChecked=!!s,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function yt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function _t(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(s&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function bt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,s){if(null==t){if(null!=s){if(null!=n)throw Error(o(92));if(M(s)){if(1<s.length)throw Error(o(93));s=s[0]}n=s}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(s=e.textContent)===n&&""!==s&&null!==s&&(e.value=s)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var s=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?s?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":s?e.setProperty(t,n):"number"!==typeof n||0===n||xt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var s in n)!n.hasOwnProperty(s)||null!=t&&t.hasOwnProperty(s)||(0===s.indexOf("--")?e.setProperty(s,""):"float"===s?e.cssFloat="":e[s]="");for(var r in t)s=t[r],t.hasOwnProperty(r)&&n[r]!==s&&St(e,r,s)}else for(var i in t)t.hasOwnProperty(i)&&St(e,i,t[i])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ot(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Pt=null;function Rt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Nt=null,Mt=null;function It(e){var t=Ue(e);if(t&&(e=t.stateNode)){var n=e[Me]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=s[Me]||null;if(!r)throw Error(o(90));gt(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(s=n[t]).form===e.form&&dt(s)}break e;case"textarea":bt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&_t(e,!!n.multiple,t,!1)}}}var Dt=!1;function jt(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==Nt||null!==Mt)&&(zc(),Nt&&(t=Nt,e=Mt,Mt=Nt=null,It(t),e)))for(t=0;t<e.length;t++)It(e[t])}}function Lt(e,t){var n=e.stateNode;if(null===n)return null;var s=n[Me]||null;if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Vt=!1;if(Ft)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch(Md){Vt=!1}var zt=null,Ut=null,Bt=null;function Wt(){if(Bt)return Bt;var e,t,n=Ut,s=n.length,r="value"in zt?zt.value:zt.textContent,i=r.length;for(e=0;e<s&&n[e]===r[e];e++);var o=s-e;for(t=1;t<=o&&n[s-t]===r[i-t];t++);return Bt=r.slice(e,1<t?1-t:void 0)}function Ht(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Qt(){return!1}function Kt(e){function t(t,n,s,r,i){for(var o in this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Gt:Qt,this.isPropagationStopped=Qt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var $t,Yt,Xt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Kt(Jt),en=d({},Jt,{view:0,detail:0}),tn=Kt(en),nn=d({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&"mousemove"===e.type?($t=e.screenX-Xt.screenX,Yt=e.screenY-Xt.screenY):Yt=$t=0,Xt=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),sn=Kt(nn),rn=Kt(d({},nn,{dataTransfer:0})),on=Kt(d({},en,{relatedTarget:0})),an=Kt(d({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Kt(d({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Kt(d({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function fn(){return pn}var mn=Kt(d({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ht(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?Ht(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ht(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Kt(d({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Kt(d({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),yn=Kt(d({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=Kt(d({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Kt(d({},Jt,{newState:0,oldState:0})),wn=[9,13,27,32],kn=Ft&&"CompositionEvent"in window,xn=null;Ft&&"documentMode"in document&&(xn=document.documentMode);var Sn=Ft&&"TextEvent"in window&&!xn,Tn=Ft&&(!kn||xn&&8<xn&&11>=xn),Cn=String.fromCharCode(32),En=!1;function An(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function On(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var Rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rn[e.type]:"textarea"===t}function Mn(e,t,n,s){Nt?Mt?Mt.push(s):Mt=[s]:Nt=s,0<(t=Wu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var In=null,Dn=null;function jn(e){ju(e,0)}function Ln(e){if(dt(Be(e)))return e}function Fn(e,t){if("change"===e)return t}var Vn=!1;if(Ft){var qn;if(Ft){var zn="oninput"in document;if(!zn){var Un=document.createElement("div");Un.setAttribute("oninput","return;"),zn="function"===typeof Un.oninput}qn=zn}else qn=!1;Vn=qn&&(!document.documentMode||9<document.documentMode)}function Bn(){In&&(In.detachEvent("onpropertychange",Wn),Dn=In=null)}function Wn(e){if("value"===e.propertyName&&Ln(Dn)){var t=[];Mn(t,Dn,e,Rt(e)),jt(jn,t)}}function Hn(e,t,n){"focusin"===e?(Bn(),Dn=n,(In=t).attachEvent("onpropertychange",Wn)):"focusout"===e&&Bn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ln(Dn)}function Qn(e,t){if("click"===e)return Ln(t)}function Kn(e,t){if("input"===e||"change"===e)return Ln(t)}var $n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yn(e,t){if($n(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Y.call(t,r)||!$n(e[r],t[r]))return!1}return!0}function Xn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,s=Xn(e);for(e=0;s;){if(3===s.nodeType){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Xn(s)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function es(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(s){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function ts(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ns=Ft&&"documentMode"in document&&11>=document.documentMode,ss=null,rs=null,is=null,os=!1;function as(e,t,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;os||null==ss||ss!==pt(s)||("selectionStart"in(s=ss)&&ts(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},is&&Yn(is,s)||(is=s,0<(s=Wu(rs,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ss)))}function ls(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cs={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionrun:ls("Transition","TransitionRun"),transitionstart:ls("Transition","TransitionStart"),transitioncancel:ls("Transition","TransitionCancel"),transitionend:ls("Transition","TransitionEnd")},us={},hs={};function ds(e){if(us[e])return us[e];if(!cs[e])return e;var t,n=cs[e];for(t in n)if(n.hasOwnProperty(t)&&t in hs)return us[e]=n[t];return e}Ft&&(hs=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);var ps=ds("animationend"),fs=ds("animationiteration"),ms=ds("animationstart"),gs=ds("transitionrun"),vs=ds("transitionstart"),ys=ds("transitioncancel"),_s=ds("transitionend"),bs=new Map,ws="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ks(e,t){bs.set(e,t),Ke(t,[e])}ws.push("scrollEnd");var xs=new WeakMap;function Ss(e,t){if("object"===typeof e&&null!==e){var n=xs.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},xs.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Ts=[],Cs=0,Es=0;function As(){for(var e=Cs,t=Es=Cs=0;t<e;){var n=Ts[t];Ts[t++]=null;var s=Ts[t];Ts[t++]=null;var r=Ts[t];Ts[t++]=null;var i=Ts[t];if(Ts[t++]=null,null!==s&&null!==r){var o=s.pending;null===o?r.next=r:(r.next=o.next,o.next=r),s.pending=r}0!==i&&Ns(n,r,i)}}function Os(e,t,n,s){Ts[Cs++]=e,Ts[Cs++]=t,Ts[Cs++]=n,Ts[Cs++]=s,Es|=s,e.lanes|=s,null!==(e=e.alternate)&&(e.lanes|=s)}function Ps(e,t,n,s){return Os(e,t,n,s),Ms(e)}function Rs(e,t){return Os(e,null,null,t),Ms(e)}function Ns(e,t,n){e.lanes|=n;var s=e.alternate;null!==s&&(s.lanes|=n);for(var r=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(s=i.alternate)&&(s.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(r=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,r&&null!==t&&(r=31-pe(n),null===(s=(e=i.hiddenUpdates)[r])?e[r]=[t]:s.push(t),t.lane=536870912|n),i):null}function Ms(e){if(50<Nc)throw Nc=0,Mc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Is={};function Ds(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function js(e,t,n,s){return new Ds(e,t,n,s)}function Ls(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fs(e,t){var n=e.alternate;return null===n?((n=js(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vs(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qs(e,t,n,s,r,i){var a=0;if(s=e,"function"===typeof e)Ls(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,U.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=js(31,n,t,r)).elementType=E,e.lanes=i,e;case g:return zs(n.children,r,i,t);case v:a=8,r|=24;break;case y:return(e=js(12,n,t,2|r)).elementType=y,e.lanes=i,e;case x:return(e=js(13,n,t,r)).elementType=x,e.lanes=i,e;case S:return(e=js(19,n,t,r)).elementType=S,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:case w:a=10;break e;case b:a=9;break e;case k:a=11;break e;case T:a=14;break e;case C:a=16,s=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),s=null}return(t=js(a,n,t,r)).elementType=e,t.type=s,t.lanes=i,t}function zs(e,t,n,s){return(e=js(7,e,s,t)).lanes=n,e}function Us(e,t,n){return(e=js(6,e,null,t)).lanes=n,e}function Bs(e,t,n){return(t=js(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ws=[],Hs=0,Gs=null,Qs=0,Ks=[],$s=0,Ys=null,Xs=1,Js="";function Zs(e,t){Ws[Hs++]=Qs,Ws[Hs++]=Gs,Gs=e,Qs=t}function er(e,t,n){Ks[$s++]=Xs,Ks[$s++]=Js,Ks[$s++]=Ys,Ys=e;var s=Xs;e=Js;var r=32-pe(s)-1;s&=~(1<<r),n+=1;var i=32-pe(t)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,Xs=1<<32-pe(t)+r|n<<r|s,Js=i+e}else Xs=1<<i|n<<r|s,Js=e}function tr(e){null!==e.return&&(Zs(e,1),er(e,1,0))}function nr(e){for(;e===Gs;)Gs=Ws[--Hs],Ws[Hs]=null,Qs=Ws[--Hs],Ws[Hs]=null;for(;e===Ys;)Ys=Ks[--$s],Ks[$s]=null,Js=Ks[--$s],Ks[$s]=null,Xs=Ks[--$s],Ks[$s]=null}var sr=null,rr=null,ir=!1,or=null,ar=!1,lr=Error(o(519));function cr(e){throw mr(Ss(Error(o(418,"")),e)),lr}function ur(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[Ne]=e,t[Me]=s,n){case"dialog":Lu("cancel",t),Lu("close",t);break;case"iframe":case"object":case"embed":Lu("load",t);break;case"video":case"audio":for(n=0;n<Iu.length;n++)Lu(Iu[n],t);break;case"source":Lu("error",t);break;case"img":case"image":case"link":Lu("error",t),Lu("load",t);break;case"details":Lu("toggle",t);break;case"input":Lu("invalid",t),vt(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),ht(t);break;case"select":Lu("invalid",t);break;case"textarea":Lu("invalid",t),wt(t,s.value,s.defaultValue,s.children),ht(t)}"string"!==typeof(n=s.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===s.suppressHydrationWarning||Yu(t.textContent,n)?(null!=s.popover&&(Lu("beforetoggle",t),Lu("toggle",t)),null!=s.onScroll&&Lu("scroll",t),null!=s.onScrollEnd&&Lu("scrollend",t),null!=s.onClick&&(t.onclick=Xu),t=!0):t=!1,t||cr(e)}function hr(e){for(sr=e.return;sr;)switch(sr.tag){case 5:case 13:return void(ar=!1);case 27:case 3:return void(ar=!0);default:sr=sr.return}}function dr(e){if(e!==sr)return!1;if(!ir)return hr(e),ir=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||oh(e.type,e.memoizedProps)),t=!t),t&&rr&&cr(e),hr(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){rr=vh(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}rr=null}}else 27===n?(n=rr,ph(e.type)?(e=yh,yh=null,rr=e):rr=n):rr=sr?vh(e.stateNode.nextSibling):null;return!0}function pr(){rr=sr=null,ir=!1}function fr(){var e=or;return null!==e&&(null===_c?_c=e:_c.push.apply(_c,e),or=null),e}function mr(e){null===or?or=[e]:or.push(e)}var gr=V(null),vr=null,yr=null;function _r(e,t,n){z(gr,t._currentValue),t._currentValue=n}function br(e){e._currentValue=gr.current,q(gr)}function wr(e,t,n){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function kr(e,t,n,s){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var i=r.dependencies;if(null!==i){var a=r.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),wr(i.return,n,e),s||(a=null);break e}i=l.next}}else if(18===r.tag){if(null===(a=r.return))throw Error(o(341));a.lanes|=n,null!==(i=a.alternate)&&(i.lanes|=n),wr(a,n,e),a=null}else a=r.child;if(null!==a)a.return=r;else for(a=r;null!==a;){if(a===e){a=null;break}if(null!==(r=a.sibling)){r.return=a.return,a=r;break}a=a.return}r=a}}function xr(e,t,n,s){e=null;for(var r=t,i=!1;null!==r;){if(!i)if(0!==(524288&r.flags))i=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var a=r.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=r.type;$n(r.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(r===H.current){if(null===(a=r.alternate))throw Error(o(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(Kh):e=[Kh])}r=r.return}null!==e&&kr(t,e,n,s),t.flags|=262144}function Sr(e){for(e=e.firstContext;null!==e;){if(!$n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Tr(e){vr=e,yr=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Cr(e){return Ar(vr,e)}function Er(e,t){return null===vr&&Tr(e),Ar(e,t)}function Ar(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===yr){if(null===e)throw Error(o(308));yr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yr=yr.next=t;return n}var Or="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Pr=s.unstable_scheduleCallback,Rr=s.unstable_NormalPriority,Nr={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mr(){return{controller:new Or,data:new Map,refCount:0}}function Ir(e){e.refCount--,0===e.refCount&&Pr(Rr,function(){e.controller.abort()})}var Dr=null,jr=0,Lr=0,Fr=null;function Vr(){if(0===--jr&&null!==Dr){null!==Fr&&(Fr.status="fulfilled");var e=Dr;Dr=null,Lr=0,Fr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var qr=I.S;I.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Dr){var n=Dr=[];jr=0,Lr=Ou(),Fr={status:"pending",value:void 0,then:function(e){n.push(e)}}}jr++,t.then(Vr,Vr)}(0,t),null!==qr&&qr(e,t)};var zr=V(null);function Ur(){var e=zr.current;return null!==e?e:sc.pooledCache}function Br(e,t){z(zr,null===t?zr.current:t.pool)}function Wr(){var e=Ur();return null===e?null:{parent:Nr._currentValue,pool:e}}var Hr=Error(o(460)),Gr=Error(o(474)),Qr=Error(o(542)),Kr={then:function(){}};function $r(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Yr(){}function Xr(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Yr,Yr),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then(Yr,Yr);else{if(null!==(e=sc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw Jr=t,Hr}}var Jr=null;function Zr(){if(null===Jr)throw Error(o(459));var e=Jr;return Jr=null,e}function ei(e){if(e===Hr||e===Qr)throw Error(o(483))}var ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function si(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ri(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&nc)){var r=s.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),s.pending=t,t=Ms(e),Ns(e,null,n),t}return Os(e,s,t,n),Ms(e)}function oi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,Ee(e,n)}}function ai(e,t){var n=e.updateQueue,s=e.alternate;if(null!==s&&n===(s=s.updateQueue)){var r=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?r=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?r=i=t:i=i.next=t}else r=i=t;return n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var li=!1;function ci(){if(li){if(null!==Fr)throw Fr}}function ui(e,t,n,s){li=!1;var r=e.updateQueue;ti=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==i){var h=r.baseState;for(o=0,u=c=l=null,a=i;;){var p=-536870913&a.lane,f=p!==a.lane;if(f?(ic&p)===p:(s&p)===p){0!==p&&p===Lr&&(li=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;p=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(v,h,p);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=g.payload)?m.call(v,h,p):m)||void 0===p)break e;h=d({},h,p);break e;case 2:ti=!0}}null!==(p=a.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=r.callbacks)?r.callbacks=[p]:f.push(p))}else f={lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=p;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(f=a).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null===i&&(r.shared.lanes=0),pc|=o,e.lanes=o,e.memoizedState=h}}function hi(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function di(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)hi(n[e],t)}var pi=V(null),fi=V(0);function mi(e,t){z(fi,e=hc),z(pi,t),hc=e|t.baseLanes}function gi(){z(fi,hc),z(pi,pi.current)}function vi(){hc=fi.current,q(pi),q(fi)}var yi=0,_i=null,bi=null,wi=null,ki=!1,xi=!1,Si=!1,Ti=0,Ci=0,Ei=null,Ai=0;function Oi(){throw Error(o(321))}function Pi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$n(e[n],t[n]))return!1;return!0}function Ri(e,t,n,s,r,i){return yi=i,_i=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=null===e||null===e.memoizedState?Go:Qo,Si=!1,i=n(s,r),Si=!1,xi&&(i=Mi(t,n,s,r)),Ni(e),i}function Ni(e){I.H=Ho;var t=null!==bi&&null!==bi.next;if(yi=0,wi=bi=_i=null,ki=!1,Ci=0,Ei=null,t)throw Error(o(300));null===e||Ea||null!==(e=e.dependencies)&&Sr(e)&&(Ea=!0)}function Mi(e,t,n,s){_i=e;var r=0;do{if(xi&&(Ei=null),Ci=0,xi=!1,25<=r)throw Error(o(301));if(r+=1,wi=bi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}I.H=Ko,i=t(n,s)}while(xi);return i}function Ii(){var e=I.H,t=e.useState()[0];return t="function"===typeof t.then?qi(t):t,e=e.useState()[0],(null!==bi?bi.memoizedState:null)!==e&&(_i.flags|=1024),t}function Di(){var e=0!==Ti;return Ti=0,e}function ji(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Li(e){if(ki){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ki=!1}yi=0,wi=bi=_i=null,xi=!1,Ci=Ti=0,Ei=null}function Fi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wi?_i.memoizedState=wi=e:wi=wi.next=e,wi}function Vi(){if(null===bi){var e=_i.alternate;e=null!==e?e.memoizedState:null}else e=bi.next;var t=null===wi?_i.memoizedState:wi.next;if(null!==t)wi=t,bi=e;else{if(null===e){if(null===_i.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(bi=e).memoizedState,baseState:bi.baseState,baseQueue:bi.baseQueue,queue:bi.queue,next:null},null===wi?_i.memoizedState=wi=e:wi=wi.next=e}return wi}function qi(e){var t=Ci;return Ci+=1,null===Ei&&(Ei=[]),e=Xr(Ei,e,t),t=_i,null===(null===wi?t.memoizedState:wi.next)&&(t=t.alternate,I.H=null===t||null===t.memoizedState?Go:Qo),e}function zi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return qi(e);if(e.$$typeof===w)return Cr(e)}throw Error(o(438,String(e)))}function Ui(e){var t=null,n=_i.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var s=_i.alternate;null!==s&&(null!==(s=s.updateQueue)&&(null!=(s=s.memoCache)&&(t={data:s.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},_i.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=A;return t.index++,n}function Bi(e,t){return"function"===typeof t?t(e):t}function Wi(e){return Hi(Vi(),bi,e)}function Hi(e,t,n){var s=e.queue;if(null===s)throw Error(o(311));s.lastRenderedReducer=n;var r=e.baseQueue,i=s.pending;if(null!==i){if(null!==r){var a=r.next;r.next=i.next,i.next=a}t.baseQueue=r=i,s.pending=null}if(i=e.baseState,null===r)e.memoizedState=i;else{var l=a=null,c=null,u=t=r.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(ic&d)===d:(yi&d)===d){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Lr&&(h=!0);else{if((yi&p)===p){u=u.next,p===Lr&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,a=i):c=c.next=d,_i.lanes|=p,pc|=p}d=u.action,Si&&n(i,d),i=u.hasEagerState?u.eagerState:n(i,d)}else p={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,a=i):c=c.next=p,_i.lanes|=d,pc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?a=i:c.next=l,!$n(i,e.memoizedState)&&(Ea=!0,h&&null!==(n=Fr)))throw n;e.memoizedState=i,e.baseState=a,e.baseQueue=c,s.lastRenderedState=i}return null===r&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Gi(e){var t=Vi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{i=e(i,a.action),a=a.next}while(a!==r);$n(i,t.memoizedState)||(Ea=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function Qi(e,t,n){var s=_i,r=Vi(),i=ir;if(i){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!$n((bi||r).memoizedState,n);if(a&&(r.memoizedState=n,Ea=!0),r=r.queue,vo(2048,8,Yi.bind(null,s,r,e),[e]),r.getSnapshot!==t||a||null!==wi&&1&wi.memoizedState.tag){if(s.flags|=2048,fo(9,{destroy:void 0,resource:void 0},$i.bind(null,s,r,n,t),null),null===sc)throw Error(o(349));i||0!==(124&yi)||Ki(s,t,n)}return n}function Ki(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=_i.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},_i.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function $i(e,t,n,s){t.value=n,t.getSnapshot=s,Xi(t)&&Ji(e)}function Yi(e,t,n){return n(function(){Xi(t)&&Ji(e)})}function Xi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$n(e,n)}catch(s){return!0}}function Ji(e){var t=Rs(e,2);null!==t&&jc(t,e,2)}function Zi(e){var t=Fi();if("function"===typeof e){var n=e;if(e=n(),Si){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:e},t}function eo(e,t,n,s){return e.baseState=n,Hi(e,bi,"function"===typeof s?s:Bi)}function to(e,t,n,s,r){if(Uo(e))throw Error(o(485));if(null!==(e=t.action)){var i={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==I.T?n(!0):i.isTransition=!1,s(i),null===(n=t.pending)?(i.next=t.pending=i,no(t,i)):(i.next=n.next,t.pending=n.next=i)}}function no(e,t){var n=t.action,s=t.payload,r=e.state;if(t.isTransition){var i=I.T,o={};I.T=o;try{var a=n(r,s),l=I.S;null!==l&&l(o,a),so(e,t,a)}catch(c){io(e,t,c)}finally{I.T=i}}else try{so(e,t,i=n(r,s))}catch(u){io(e,t,u)}}function so(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){ro(e,t,n)},function(n){return io(e,t,n)}):ro(e,t,n)}function ro(e,t,n){t.status="fulfilled",t.value=n,oo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,no(e,n)))}function io(e,t,n){var s=e.pending;if(e.pending=null,null!==s){s=s.next;do{t.status="rejected",t.reason=n,oo(t),t=t.next}while(t!==s)}e.action=null}function oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ao(e,t){return t}function lo(e,t){if(ir){var n=sc.formState;if(null!==n){e:{var s=_i;if(ir){if(rr){t:{for(var r=rr,i=ar;8!==r.nodeType;){if(!i){r=null;break t}if(null===(r=vh(r.nextSibling))){r=null;break t}}r="F!"===(i=r.data)||"F"===i?r:null}if(r){rr=vh(r.nextSibling),s="F!"===r.data;break e}}cr(s)}s=!1}s&&(t=n[0])}}return(n=Fi()).memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},n.queue=s,n=Vo.bind(null,_i,s),s.dispatch=n,s=Zi(!1),i=zo.bind(null,_i,!1,s.queue),r={state:t,dispatch:null,action:e,pending:null},(s=Fi()).queue=r,n=to.bind(null,_i,r,i,n),r.dispatch=n,s.memoizedState=e,[t,n,!1]}function co(e){return uo(Vi(),bi,e)}function uo(e,t,n){if(t=Hi(e,t,ao)[0],e=Wi(Bi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var s=qi(t)}catch(o){if(o===Hr)throw Qr;throw o}else s=t;var r=(t=Vi()).queue,i=r.dispatch;return n!==t.memoizedState&&(_i.flags|=2048,fo(9,{destroy:void 0,resource:void 0},ho.bind(null,r,n),null)),[s,i,e]}function ho(e,t){e.action=t}function po(e){var t=Vi(),n=bi;if(null!==n)return uo(t,n,e);Vi(),t=t.memoizedState;var s=(n=Vi()).queue.dispatch;return n.memoizedState=e,[t,s,!1]}function fo(e,t,n,s){return e={tag:e,create:n,deps:s,inst:t,next:null},null===(t=_i.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},_i.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function mo(){return Vi().memoizedState}function go(e,t,n,s){var r=Fi();s=void 0===s?null:s,_i.flags|=e,r.memoizedState=fo(1|t,{destroy:void 0,resource:void 0},n,s)}function vo(e,t,n,s){var r=Vi();s=void 0===s?null:s;var i=r.memoizedState.inst;null!==bi&&null!==s&&Pi(s,bi.memoizedState.deps)?r.memoizedState=fo(t,i,n,s):(_i.flags|=e,r.memoizedState=fo(1|t,i,n,s))}function yo(e,t){go(8390656,8,e,t)}function _o(e,t){vo(2048,8,e,t)}function bo(e,t){return vo(4,2,e,t)}function wo(e,t){return vo(4,4,e,t)}function ko(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function xo(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,vo(4,4,ko.bind(null,t,e),n)}function So(){}function To(e,t){var n=Vi();t=void 0===t?null:t;var s=n.memoizedState;return null!==t&&Pi(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=Vi();t=void 0===t?null:t;var s=n.memoizedState;if(null!==t&&Pi(t,s[1]))return s[0];if(s=e(),Si){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[s,t],s}function Eo(e,t,n){return void 0===n||0!==(1073741824&yi)?e.memoizedState=t:(e.memoizedState=n,e=Dc(),_i.lanes|=e,pc|=e,n)}function Ao(e,t,n,s){return $n(n,t)?n:null!==pi.current?(e=Eo(e,n,s),$n(e,t)||(Ea=!0),e):0===(42&yi)?(Ea=!0,e.memoizedState=n):(e=Dc(),_i.lanes|=e,pc|=e,t)}function Oo(e,t,n,s,r){var i=D.p;D.p=0!==i&&8>i?i:8;var o=I.T,a={};I.T=a,zo(e,!1,t,n);try{var l=r(),c=I.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)qo(e,t,function(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(s.status="rejected",s.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),s}(l,s),Ic());else qo(e,t,s,Ic())}catch(u){qo(e,t,{then:function(){},status:"rejected",reason:u},Ic())}finally{D.p=i,I.T=o}}function Po(){}function Ro(e,t,n,s){if(5!==e.tag)throw Error(o(476));var r=No(e).queue;Oo(e,r,t,j,null===n?Po:function(){return Mo(e),n(s)})}function No(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:j},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Mo(e){qo(e,No(e).next.queue,{},Ic())}function Io(){return Cr(Kh)}function Do(){return Vi().memoizedState}function jo(){return Vi().memoizedState}function Lo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ic(),s=ii(t,e=ri(n),n);return null!==s&&(jc(s,t,n),oi(s,t,n)),t={cache:Mr()},void(e.payload=t)}t=t.return}}function Fo(e,t,n){var s=Ic();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Uo(e)?Bo(t,n):null!==(n=Ps(e,t,n,s))&&(jc(n,e,s),Wo(n,t,s))}function Vo(e,t,n){qo(e,t,n,Ic())}function qo(e,t,n,s){var r={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uo(e))Bo(t,r);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,$n(a,o))return Os(e,t,r,0),null===sc&&As(),!1}catch(l){}if(null!==(n=Ps(e,t,r,s)))return jc(n,e,s),Wo(n,t,s),!0}return!1}function zo(e,t,n,s){if(s={lane:2,revertLane:Ou(),action:s,hasEagerState:!1,eagerState:null,next:null},Uo(e)){if(t)throw Error(o(479))}else null!==(t=Ps(e,n,s,2))&&jc(t,e,2)}function Uo(e){var t=e.alternate;return e===_i||null!==t&&t===_i}function Bo(e,t){xi=ki=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wo(e,t,n){if(0!==(4194048&n)){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,Ee(e,n)}}var Ho={readContext:Cr,use:zi,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useLayoutEffect:Oi,useInsertionEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useSyncExternalStore:Oi,useId:Oi,useHostTransitionStatus:Oi,useFormState:Oi,useActionState:Oi,useOptimistic:Oi,useMemoCache:Oi,useCacheRefresh:Oi},Go={readContext:Cr,use:zi,useCallback:function(e,t){return Fi().memoizedState=[e,void 0===t?null:t],e},useContext:Cr,useEffect:yo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,go(4194308,4,ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return go(4194308,4,e,t)},useInsertionEffect:function(e,t){go(4,2,e,t)},useMemo:function(e,t){var n=Fi();t=void 0===t?null:t;var s=e();if(Si){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=Fi();if(void 0!==n){var r=n(t);if(Si){de(!0);try{n(t)}finally{de(!1)}}}else r=t;return s.memoizedState=s.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s.queue=e,e=e.dispatch=Fo.bind(null,_i,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},Fi().memoizedState=e},useState:function(e){var t=(e=Zi(e)).queue,n=Vo.bind(null,_i,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:So,useDeferredValue:function(e,t){return Eo(Fi(),e,t)},useTransition:function(){var e=Zi(!1);return e=Oo.bind(null,_i,e.queue,!0,!1),Fi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=_i,r=Fi();if(ir){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===sc)throw Error(o(349));0!==(124&ic)||Ki(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,yo(Yi.bind(null,s,i,e),[e]),s.flags|=2048,fo(9,{destroy:void 0,resource:void 0},$i.bind(null,s,i,n,t),null),n},useId:function(){var e=Fi(),t=sc.identifierPrefix;if(ir){var n=Js;t="\xab"+t+"R"+(n=(Xs&~(1<<32-pe(Xs)-1)).toString(32)+n),0<(n=Ti++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ai++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Io,useFormState:lo,useActionState:lo,useOptimistic:function(e){var t=Fi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zo.bind(null,_i,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ui,useCacheRefresh:function(){return Fi().memoizedState=Lo.bind(null,_i)}},Qo={readContext:Cr,use:zi,useCallback:To,useContext:Cr,useEffect:_o,useImperativeHandle:xo,useInsertionEffect:bo,useLayoutEffect:wo,useMemo:Co,useReducer:Wi,useRef:mo,useState:function(){return Wi(Bi)},useDebugValue:So,useDeferredValue:function(e,t){return Ao(Vi(),bi.memoizedState,e,t)},useTransition:function(){var e=Wi(Bi)[0],t=Vi().memoizedState;return["boolean"===typeof e?e:qi(e),t]},useSyncExternalStore:Qi,useId:Do,useHostTransitionStatus:Io,useFormState:co,useActionState:co,useOptimistic:function(e,t){return eo(Vi(),0,e,t)},useMemoCache:Ui,useCacheRefresh:jo},Ko={readContext:Cr,use:zi,useCallback:To,useContext:Cr,useEffect:_o,useImperativeHandle:xo,useInsertionEffect:bo,useLayoutEffect:wo,useMemo:Co,useReducer:Gi,useRef:mo,useState:function(){return Gi(Bi)},useDebugValue:So,useDeferredValue:function(e,t){var n=Vi();return null===bi?Eo(n,e,t):Ao(n,bi.memoizedState,e,t)},useTransition:function(){var e=Gi(Bi)[0],t=Vi().memoizedState;return["boolean"===typeof e?e:qi(e),t]},useSyncExternalStore:Qi,useId:Do,useHostTransitionStatus:Io,useFormState:po,useActionState:po,useOptimistic:function(e,t){var n=Vi();return null!==bi?eo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ui,useCacheRefresh:jo},$o=null,Yo=0;function Xo(e){var t=Yo;return Yo+=1,null===$o&&($o=[]),Xr($o,e,t)}function Jo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zo(e,t){if(t.$$typeof===p)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ea(e){return(0,e._init)(e._payload)}function ta(e){function t(t,n){if(e){var s=t.deletions;null===s?(t.deletions=[n],t.flags|=16):s.push(n)}}function n(n,s){if(!e)return null;for(;null!==s;)t(n,s),s=s.sibling;return null}function s(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Fs(e,t)).index=0,e.sibling=null,e}function i(t,n,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<n?(t.flags|=67108866,n):s:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,s){return null===t||6!==t.tag?((t=Us(n,e.mode,s)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,s){var i=n.type;return i===g?h(e,t,n.props.children,s,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===C&&ea(i)===t.type)?(Jo(t=r(t,n.props),n),t.return=e,t):(Jo(t=qs(n.type,n.key,n.props,null,e.mode,s),n),t.return=e,t)}function u(e,t,n,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bs(n,e.mode,s)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,s,i){return null===t||7!==t.tag?((t=zs(n,e.mode,s,i)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Us(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return Jo(n=qs(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Bs(t,e.mode,n)).return=e,t;case C:return d(e,t=(0,t._init)(t._payload),n)}if(M(t)||P(t))return(t=zs(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,Xo(t),n);if(t.$$typeof===w)return d(e,Er(e,t),n);Zo(e,t)}return null}function p(e,t,n,s){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==r?null:l(e,t,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===r?c(e,t,n,s):null;case m:return n.key===r?u(e,t,n,s):null;case C:return p(e,t,n=(r=n._init)(n._payload),s)}if(M(n)||P(n))return null!==r?null:h(e,t,n,s,null);if("function"===typeof n.then)return p(e,t,Xo(n),s);if(n.$$typeof===w)return p(e,t,Er(e,n),s);Zo(e,n)}return null}function v(e,t,n,s,r){if("string"===typeof s&&""!==s||"number"===typeof s||"bigint"===typeof s)return l(t,e=e.get(n)||null,""+s,r);if("object"===typeof s&&null!==s){switch(s.$$typeof){case f:return c(t,e=e.get(null===s.key?n:s.key)||null,s,r);case m:return u(t,e=e.get(null===s.key?n:s.key)||null,s,r);case C:return v(e,t,n,s=(0,s._init)(s._payload),r)}if(M(s)||P(s))return h(t,e=e.get(n)||null,s,r,null);if("function"===typeof s.then)return v(e,t,n,Xo(s),r);if(s.$$typeof===w)return v(e,t,n,Er(t,s),r);Zo(t,s)}return null}function y(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var _=u.key;null!==c;){if(c.key===_){if((_=u.type)===g){if(7===c.tag){n(l,c.sibling),(h=r(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===_||"object"===typeof _&&null!==_&&_.$$typeof===C&&ea(_)===c.type){n(l,c.sibling),Jo(h=r(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((h=zs(u.props.children,l.mode,h,u.key)).return=l,l=h):(Jo(h=qs(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return a(l);case m:e:{for(_=u.key;null!==c;){if(c.key===_){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=r(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Bs(u,l.mode,h)).return=l,l=h}return a(l);case C:return y(l,c,u=(_=u._init)(u._payload),h)}if(M(u))return function(r,o,a,l){for(var c=null,u=null,h=o,f=o=0,m=null;null!==h&&f<a.length;f++){h.index>f?(m=h,h=null):m=h.sibling;var g=p(r,h,a[f],l);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(r,h),o=i(g,o,f),null===u?c=g:u.sibling=g,u=g,h=m}if(f===a.length)return n(r,h),ir&&Zs(r,f),c;if(null===h){for(;f<a.length;f++)null!==(h=d(r,a[f],l))&&(o=i(h,o,f),null===u?c=h:u.sibling=h,u=h);return ir&&Zs(r,f),c}for(h=s(h);f<a.length;f++)null!==(m=v(h,r,f,a[f],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?f:m.key),o=i(m,o,f),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(r,e)}),ir&&Zs(r,f),c}(l,c,u,h);if(P(u)){if("function"!==typeof(_=P(u)))throw Error(o(150));return function(r,a,l,c){if(null==l)throw Error(o(151));for(var u=null,h=null,f=a,m=a=0,g=null,y=l.next();null!==f&&!y.done;m++,y=l.next()){f.index>m?(g=f,f=null):g=f.sibling;var _=p(r,f,y.value,c);if(null===_){null===f&&(f=g);break}e&&f&&null===_.alternate&&t(r,f),a=i(_,a,m),null===h?u=_:h.sibling=_,h=_,f=g}if(y.done)return n(r,f),ir&&Zs(r,m),u;if(null===f){for(;!y.done;m++,y=l.next())null!==(y=d(r,y.value,c))&&(a=i(y,a,m),null===h?u=y:h.sibling=y,h=y);return ir&&Zs(r,m),u}for(f=s(f);!y.done;m++,y=l.next())null!==(y=v(f,r,m,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),a=i(y,a,m),null===h?u=y:h.sibling=y,h=y);return e&&f.forEach(function(e){return t(r,e)}),ir&&Zs(r,m),u}(l,c,u=_.call(u),h)}if("function"===typeof u.then)return y(l,c,Xo(u),h);if(u.$$typeof===w)return y(l,c,Er(l,u),h);Zo(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=r(c,u)).return=l,l=h):(n(l,c),(h=Us(u,l.mode,h)).return=l,l=h),a(l)):n(l,c)}return function(e,t,n,s){try{Yo=0;var r=y(e,t,n,s);return $o=null,r}catch(o){if(o===Hr||o===Qr)throw o;var i=js(29,o,null,e.mode);return i.lanes=s,i.return=e,i}}}var na=ta(!0),sa=ta(!1),ra=V(null),ia=null;function oa(e){var t=e.alternate;z(ua,1&ua.current),z(ra,e),null===ia&&(null===t||null!==pi.current||null!==t.memoizedState)&&(ia=e)}function aa(e){if(22===e.tag){if(z(ua,ua.current),z(ra,e),null===ia){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ia=e)}}else la()}function la(){z(ua,ua.current),z(ra,ra.current)}function ca(e){q(ra),ia===e&&(ia=null),q(ua)}var ua=V(0);function ha(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gh(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function da(e,t,n,s){n=null===(n=n(s,t=e.memoizedState))||void 0===n?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pa={enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Ic(),r=ri(s);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ii(e,r,s))&&(jc(t,e,s),oi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Ic(),r=ri(s);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ii(e,r,s))&&(jc(t,e,s),oi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ic(),s=ri(n);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=ii(e,s,n))&&(jc(t,e,n),oi(t,e,n))}};function fa(e,t,n,s,r,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!Yn(n,s)||!Yn(r,i))}function ma(e,t,n,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&pa.enqueueReplaceState(t,t.state,null)}function ga(e,t){var n=t;if("ref"in t)for(var s in n={},t)"ref"!==s&&(n[s]=t[s]);if(e=e.defaultProps)for(var r in n===t&&(n=d({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}var va="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function ya(e){va(e)}function _a(e){console.error(e)}function ba(e){va(e)}function wa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function ka(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function xa(e,t,n){return(n=ri(n)).tag=3,n.payload={element:null},n.callback=function(){wa(e,t)},n}function Sa(e){return(e=ri(e)).tag=3,e}function Ta(e,t,n,s){var r=n.type.getDerivedStateFromError;if("function"===typeof r){var i=s.value;e.payload=function(){return r(i)},e.callback=function(){ka(t,n,s)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){ka(t,n,s),"function"!==typeof r&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=s.stack;this.componentDidCatch(s.value,{componentStack:null!==e?e:""})})}var Ca=Error(o(461)),Ea=!1;function Aa(e,t,n,s){t.child=null===e?sa(t,null,n,s):na(t,e.child,n,s)}function Oa(e,t,n,s,r){n=n.render;var i=t.ref;if("ref"in s){var o={};for(var a in s)"ref"!==a&&(o[a]=s[a])}else o=s;return Tr(t),s=Ri(e,t,n,o,i,r),a=Di(),null===e||Ea?(ir&&a&&tr(t),t.flags|=1,Aa(e,t,s,r),t.child):(ji(e,t,r),$a(e,t,r))}function Pa(e,t,n,s,r){if(null===e){var i=n.type;return"function"!==typeof i||Ls(i)||void 0!==i.defaultProps||null!==n.compare?((e=qs(n.type,null,s,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ra(e,t,i,s,r))}if(i=e.child,!Ya(e,r)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:Yn)(o,s)&&e.ref===t.ref)return $a(e,t,r)}return t.flags|=1,(e=Fs(i,s)).ref=t.ref,e.return=t,t.child=e}function Ra(e,t,n,s,r){if(null!==e){var i=e.memoizedProps;if(Yn(i,s)&&e.ref===t.ref){if(Ea=!1,t.pendingProps=s=i,!Ya(e,r))return t.lanes=e.lanes,$a(e,t,r);0!==(131072&e.flags)&&(Ea=!0)}}return Da(e,t,n,s,r)}function Na(e,t,n){var s=t.pendingProps,r=s.children,i=null!==e?e.memoizedState:null;if("hidden"===s.mode){if(0!==(128&t.flags)){if(s=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;t.childLanes=i&~s}else t.childLanes=0,t.child=null;return Ma(e,t,s,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ma(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Br(0,null!==i?i.cachePool:null),null!==i?mi(t,i):gi(),aa(t)}else null!==i?(Br(0,i.cachePool),mi(t,i),la(),t.memoizedState=null):(null!==e&&Br(0,null),gi(),la());return Aa(e,t,r,n),t.child}function Ma(e,t,n,s){var r=Ur();return r=null===r?null:{parent:Nr._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&Br(0,null),gi(),aa(t),null!==e&&xr(e,t,s,!0),null}function Ia(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Da(e,t,n,s,r){return Tr(t),n=Ri(e,t,n,s,void 0,r),s=Di(),null===e||Ea?(ir&&s&&tr(t),t.flags|=1,Aa(e,t,n,r),t.child):(ji(e,t,r),$a(e,t,r))}function ja(e,t,n,s,r,i){return Tr(t),t.updateQueue=null,n=Mi(t,s,n,r),Ni(e),s=Di(),null===e||Ea?(ir&&s&&tr(t),t.flags|=1,Aa(e,t,n,i),t.child):(ji(e,t,i),$a(e,t,i))}function La(e,t,n,s,r){if(Tr(t),null===t.stateNode){var i=Is,o=n.contextType;"object"===typeof o&&null!==o&&(i=Cr(o)),i=new n(s,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=pa,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=s,i.state=t.memoizedState,i.refs={},ni(t),o=n.contextType,i.context="object"===typeof o&&null!==o?Cr(o):Is,i.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(da(t,n,o,s),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(o=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),o!==i.state&&pa.enqueueReplaceState(i,i.state,null),ui(t,s,i,r),ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),s=!0}else if(null===e){i=t.stateNode;var a=t.memoizedProps,l=ga(n,a);i.props=l;var c=i.context,u=n.contextType;o=Is,"object"===typeof u&&null!==u&&(o=Cr(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a||c!==o)&&ma(t,i,s,o),ti=!1;var d=t.memoizedState;i.state=d,ui(t,s,i,r),ci(),c=t.memoizedState,a||d!==c||ti?("function"===typeof h&&(da(t,n,h,s),c=t.memoizedState),(l=ti||fa(t,n,l,s,d,c,o))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),i.props=s,i.state=c,i.context=o,s=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,si(e,t),u=ga(n,o=t.memoizedProps),i.props=u,h=t.pendingProps,d=i.context,c=n.contextType,l=Is,"object"===typeof c&&null!==c&&(l=Cr(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==h||d!==l)&&ma(t,i,s,l),ti=!1,d=t.memoizedState,i.state=d,ui(t,s,i,r),ci();var p=t.memoizedState;o!==h||d!==p||ti||null!==e&&null!==e.dependencies&&Sr(e.dependencies)?("function"===typeof a&&(da(t,n,a,s),p=t.memoizedState),(u=ti||fa(t,n,u,s,d,p,l)||null!==e&&null!==e.dependencies&&Sr(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(s,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(s,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),i.props=s,i.state=p,i.context=l,s=u):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),s=!1)}return i=s,Ia(e,t),s=0!==(128&t.flags),i||s?(i=t.stateNode,n=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&s?(t.child=na(t,e.child,null,r),t.child=na(t,null,n,r)):Aa(e,t,n,r),t.memoizedState=i.state,e=t.child):e=$a(e,t,r),e}function Fa(e,t,n,s){return pr(),t.flags|=256,Aa(e,t,n,s),t.child}var Va={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qa(e){return{baseLanes:e,cachePool:Wr()}}function za(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Ua(e,t,n){var s,r=t.pendingProps,i=!1,a=0!==(128&t.flags);if((s=a)||(s=(null===e||null!==e.memoizedState)&&0!==(2&ua.current)),s&&(i=!0,t.flags&=-129),s=0!==(32&t.flags),t.flags&=-33,null===e){if(ir){if(i?oa(t):la(),ir){var l,c=rr;if(l=c){e:{for(l=c,c=ar;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vh(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Ys?{id:Xs,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},(l=js(18,null,null,0)).stateNode=c,l.return=t,t.child=l,sr=t,rr=null,l=!0):l=!1}l||cr(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gh(c)?t.lanes=32:t.lanes=536870912,null;ca(t)}return c=r.children,r=r.fallback,i?(la(),c=Wa({mode:"hidden",children:c},i=t.mode),r=zs(r,i,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,(i=t.child).memoizedState=qa(n),i.childLanes=za(e,s,n),t.memoizedState=Va,r):(oa(t),Ba(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(oa(t),t.flags&=-257,t=Ha(e,t,n)):null!==t.memoizedState?(la(),t.child=e.child,t.flags|=128,t=null):(la(),i=r.fallback,c=t.mode,r=Wa({mode:"visible",children:r.children},c),(i=zs(i,c,n,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,na(t,e.child,null,n),(r=t.child).memoizedState=qa(n),r.childLanes=za(e,s,n),t.memoizedState=Va,t=i);else if(oa(t),gh(c)){if(s=c.nextSibling&&c.nextSibling.dataset)var u=s.dgst;s=u,(r=Error(o(419))).stack="",r.digest=s,mr({value:r,source:null,stack:null}),t=Ha(e,t,n)}else if(Ea||xr(e,t,n,!1),s=0!==(n&e.childLanes),Ea||s){if(null!==(s=sc)&&(0!==(r=0!==((r=0!==(42&(r=n&-n))?1:Ae(r))&(s.suspendedLanes|n))?0:r)&&r!==l.retryLane))throw l.retryLane=r,Rs(e,r),jc(s,e,r),Ca;"$?"===c.data||Qc(),t=Ha(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,rr=vh(c.nextSibling),sr=t,ir=!0,or=null,ar=!1,null!==e&&(Ks[$s++]=Xs,Ks[$s++]=Js,Ks[$s++]=Ys,Xs=e.id,Js=e.overflow,Ys=t),(t=Ba(t,r.children)).flags|=4096);return t}return i?(la(),i=r.fallback,c=t.mode,u=(l=e.child).sibling,(r=Fs(l,{mode:"hidden",children:r.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=Fs(u,i):(i=zs(i,c,n,null)).flags|=2,i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,null===(c=e.child.memoizedState)?c=qa(n):(null!==(l=c.cachePool)?(u=Nr._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Wr(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=za(e,s,n),t.memoizedState=Va,r):(oa(t),e=(n=e.child).sibling,(n=Fs(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Ba(e,t){return(t=Wa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Wa(e,t){return(e=js(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ha(e,t,n){return na(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ga(e,t,n){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),wr(e.return,t,n)}function Qa(e,t,n,s,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Ka(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(Aa(e,t,s.children,n),0!==(2&(s=ua.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ga(e,n,t);else if(19===e.tag)Ga(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(z(ua,s),r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ha(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Qa(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ha(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Qa(t,!0,n,null,i);break;case"together":Qa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $a(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(xr(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Fs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Sr(e))}function Xa(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ea=!0;else{if(!Ya(e,n)&&0===(128&t.flags))return Ea=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),_r(0,Nr,e.memoizedState.cache),pr();break;case 27:case 5:K(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:_r(0,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(null!==s)return null!==s.dehydrated?(oa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(oa(t),null!==(e=$a(e,t,n))?e.sibling:null);oa(t);break;case 19:var r=0!==(128&e.flags);if((s=0!==(n&t.childLanes))||(xr(e,t,n,!1),s=0!==(n&t.childLanes)),r){if(s)return Ka(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),z(ua,ua.current),s)break;return null;case 22:case 23:return t.lanes=0,Na(e,t,n);case 24:_r(0,Nr,e.memoizedState.cache)}return $a(e,t,n)}(e,t,n);Ea=0!==(131072&e.flags)}else Ea=!1,ir&&0!==(1048576&t.flags)&&er(t,Qs,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,r=s._init;if(s=r(s._payload),t.type=s,"function"!==typeof s){if(void 0!==s&&null!==s){if((r=s.$$typeof)===k){t.tag=11,t=Oa(null,t,s,e,n);break e}if(r===T){t.tag=14,t=Pa(null,t,s,e,n);break e}}throw t=N(s)||s,Error(o(306,t,""))}Ls(s)?(e=ga(s,e),t.tag=1,t=La(null,t,s,e,n)):(t.tag=0,t=Da(null,t,s,e,n))}return t;case 0:return Da(e,t,t.type,t.pendingProps,n);case 1:return La(e,t,s=t.type,r=ga(s,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(o(387));s=t.pendingProps;var i=t.memoizedState;r=i.element,si(e,t),ui(t,s,null,n);var a=t.memoizedState;if(s=a.cache,_r(0,Nr,s),s!==i.cache&&kr(t,[Nr],n,!0),ci(),s=a.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Fa(e,t,s,n);break e}if(s!==r){mr(r=Ss(Error(o(424)),t)),t=Fa(e,t,s,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(rr=vh(e.firstChild),sr=t,ir=!0,or=null,ar=!0,n=sa(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pr(),s===r){t=$a(e,t,n);break e}Aa(e,t,s,n)}t=t.child}return t;case 26:return Ia(e,t),null===e?(n=Ah(t.type,null,t.pendingProps,null))?t.memoizedState=n:ir||(n=t.type,e=t.pendingProps,(s=sh(W.current).createElement(n))[Ne]=t,s[Me]=e,eh(s,n,e),He(s),t.stateNode=s):t.memoizedState=Ah(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&ir&&(s=t.stateNode=bh(t.type,t.pendingProps,W.current),sr=t,ar=!0,r=rr,ph(t.type)?(yh=r,rr=vh(s.firstChild)):rr=r),Aa(e,t,t.pendingProps.children,n),Ia(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ir&&((r=s=rr)&&(null!==(s=function(e,t,n,s){for(;1===e.nodeType;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(s){if(!e[Ve])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===i)return e}if(null===(e=vh(e.nextSibling)))break}return null}(s,t.type,t.pendingProps,ar))?(t.stateNode=s,sr=t,rr=vh(s.firstChild),ar=!1,r=!0):r=!1),r||cr(t)),K(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,oh(r,i)?s=null:null!==a&&oh(r,a)&&(t.flags|=32),null!==t.memoizedState&&(r=Ri(e,t,Ii,null,null,n),Kh._currentValue=r),Ia(e,t),Aa(e,t,s,n),t.child;case 6:return null===e&&ir&&((e=n=rr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vh(e.nextSibling)))return null}return e}(n,t.pendingProps,ar))?(t.stateNode=n,sr=t,rr=null,e=!0):e=!1),e||cr(t)),null;case 13:return Ua(e,t,n);case 4:return G(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=na(t,null,s,n):Aa(e,t,s,n),t.child;case 11:return Oa(e,t,t.type,t.pendingProps,n);case 7:return Aa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Aa(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,_r(0,t.type,s.value),Aa(e,t,s.children,n),t.child;case 9:return r=t.type._context,s=t.pendingProps.children,Tr(t),s=s(r=Cr(r)),t.flags|=1,Aa(e,t,s,n),t.child;case 14:return Pa(e,t,t.type,t.pendingProps,n);case 15:return Ra(e,t,t.type,t.pendingProps,n);case 19:return Ka(e,t,n);case 31:return s=t.pendingProps,n=t.mode,s={mode:s.mode,children:s.children},null===e?((n=Wa(s,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fs(e.child,s)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Na(e,t,n);case 24:return Tr(t),s=Cr(Nr),null===e?(null===(r=Ur())&&(r=sc,i=Mr(),r.pooledCache=i,i.refCount++,null!==i&&(r.pooledCacheLanes|=n),r=i),t.memoizedState={parent:s,cache:r},ni(t),_r(0,Nr,r)):(0!==(e.lanes&n)&&(si(e,t),ui(t,null,null,n),ci()),r=e.memoizedState,i=t.memoizedState,r.parent!==s?(r={parent:s,cache:s},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),_r(0,Nr,s)):(s=i.cache,_r(0,Nr,s),s!==r.cache&&kr(t,[Nr],n,!0))),Aa(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ja(e){e.flags|=4}function Za(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!zh(t)){if(null!==(t=ra.current)&&((4194048&ic)===ic?null!==ia:(62914560&ic)!==ic&&0===(536870912&ic)||t!==ia))throw Jr=Kr,Gr;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?xe():536870912,e.lanes|=t,vc|=t)}function tl(e,t){if(!ir)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,s|=65011712&r.subtreeFlags,s|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function sl(e,t,n){var s=t.pendingProps;switch(nr(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),br(Nr),Q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(dr(t)?Ja(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,fr())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Ja(t),null!==n?(nl(t),Za(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ja(t),nl(t),Za(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==s&&Ja(t),nl(t),t.flags&=-16777217),null;case 27:$(t),n=W.current;var r=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==s&&Ja(t);else{if(!s){if(null===t.stateNode)throw Error(o(166));return nl(t),null}e=U.current,dr(t)?ur(t):(e=bh(r,s,n),t.stateNode=e,Ja(t))}return nl(t),null;case 5:if($(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&Ja(t);else{if(!s){if(null===t.stateNode)throw Error(o(166));return nl(t),null}if(e=U.current,dr(t))ur(t);else{switch(r=sh(W.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=r.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof s.is?r.createElement("select",{is:s.is}):r.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e="string"===typeof s.is?r.createElement(n,{is:s.is}):r.createElement(n)}}e[Ne]=t,e[Me]=s;e:for(r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&27!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;null===r.sibling;){if(null===r.return||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(eh(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ja(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==s&&Ja(t);else{if("string"!==typeof s&&null===t.stateNode)throw Error(o(166));if(e=W.current,dr(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,null!==(r=sr))switch(r.tag){case 27:case 5:s=r.memoizedProps}e[Ne]=t,(e=!!(e.nodeValue===n||null!==s&&!0===s.suppressHydrationWarning||Yu(e.nodeValue,n)))||cr(t)}else(e=sh(e).createTextNode(s))[Ne]=t,t.stateNode=e}return nl(t),null;case 13:if(s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=dr(t),null!==s&&null!==s.dehydrated){if(null===e){if(!r)throw Error(o(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(o(317));r[Ne]=t}else pr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),r=!1}else r=fr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(ca(t),t):(ca(t),null)}if(ca(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==s,e=null!==e&&null!==e.memoizedState,n){r=null,null!==(s=t.child).alternate&&null!==s.alternate.memoizedState&&null!==s.alternate.memoizedState.cachePool&&(r=s.alternate.memoizedState.cachePool.pool);var i=null;null!==s.memoizedState&&null!==s.memoizedState.cachePool&&(i=s.memoizedState.cachePool.pool),i!==r&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return Q(),null===e&&qu(t.stateNode.containerInfo),nl(t),null;case 10:return br(t.type),nl(t),null;case 19:if(q(ua),null===(r=t.memoizedState))return nl(t),null;if(s=0!==(128&t.flags),null===(i=r.rendering))if(s)tl(r,!1);else{if(0!==dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=ha(e))){for(t.flags|=128,tl(r,!1),e=i.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vs(n,e),n=n.sibling;return z(ua,1&ua.current|2),t.child}e=e.sibling}null!==r.tail&&te()>kc&&(t.flags|=128,s=!0,tl(r,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ha(i))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!ir)return nl(t),null}else 2*te()-r.renderingStartTime>kc&&536870912!==n&&(t.flags|=128,s=!0,tl(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=te(),t.sibling=null,e=ua.current,z(ua,s?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return ca(t),vi(),s=null!==t.memoizedState,null!==e?null!==e.memoizedState!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),s=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),null!==e&&q(zr),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),br(Nr),nl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function rl(e,t){switch(nr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return br(Nr),Q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 13:if(ca(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));pr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return q(ua),null;case 4:return Q(),null;case 10:return br(t.type),null;case 22:case 23:return ca(t),vi(),null!==e&&q(zr),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return br(Nr),null;default:return null}}function il(e,t){switch(nr(t),t.tag){case 3:br(Nr),Q();break;case 26:case 27:case 5:$(t);break;case 4:Q();break;case 13:ca(t);break;case 19:q(ua);break;case 10:br(t.type);break;case 22:case 23:ca(t),vi(),null!==e&&q(zr);break;case 24:br(Nr)}}function ol(e,t){try{var n=t.updateQueue,s=null!==n?n.lastEffect:null;if(null!==s){var r=s.next;n=r;do{if((n.tag&e)===e){s=void 0;var i=n.create,o=n.inst;s=i(),o.destroy=s}n=n.next}while(n!==r)}}catch(a){uu(t,t.return,a)}}function al(e,t,n){try{var s=t.updateQueue,r=null!==s?s.lastEffect:null;if(null!==r){var i=r.next;s=i;do{if((s.tag&e)===e){var o=s.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,r=t;var l=n,c=a;try{c()}catch(u){uu(r,l,u)}}}s=s.next}while(s!==i)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{di(t,n)}catch(s){uu(e,e.return,s)}}}function cl(e,t,n){n.props=ga(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){uu(e,t,s)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;default:s=e.stateNode}"function"===typeof n?e.refCleanup=n(s):n.current=s}}catch(r){uu(e,t,r)}}function hl(e,t){var n=e.ref,s=e.refCleanup;if(null!==n)if("function"===typeof s)try{s()}catch(r){uu(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){uu(e,t,i)}else n.current=null}function dl(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(r){uu(e,e.return,r)}}function pl(e,t,n){try{var s=e.stateNode;!function(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,a=null,l=null,c=null,u=null,h=null;for(f in n){var d=n[f];if(n.hasOwnProperty(f)&&null!=d)switch(f){case"checked":case"value":break;case"defaultValue":c=d;default:s.hasOwnProperty(f)||Ju(e,t,f,null,s,d)}}for(var p in s){var f=s[p];if(d=n[p],s.hasOwnProperty(p)&&(null!=f||null!=d))switch(p){case"type":i=f;break;case"name":r=f;break;case"checked":u=f;break;case"defaultChecked":h=f;break;case"value":a=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:f!==d&&Ju(e,t,p,f,s,d)}}return void gt(e,a,l,c,u,h,i,r);case"select":for(i in f=a=l=p=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":f=c;default:s.hasOwnProperty(i)||Ju(e,t,i,null,s,c)}for(r in s)if(i=s[r],c=n[r],s.hasOwnProperty(r)&&(null!=i||null!=c))switch(r){case"value":p=i;break;case"defaultValue":l=i;break;case"multiple":a=i;default:i!==c&&Ju(e,t,r,i,s,c)}return t=l,n=a,s=f,void(null!=p?_t(e,!!n,p,!1):!!s!==!!n&&(null!=t?_t(e,!!n,t,!0):_t(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(r=n[l],n.hasOwnProperty(l)&&null!=r&&!s.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Ju(e,t,l,null,s,r)}for(a in s)if(r=s[a],i=n[a],s.hasOwnProperty(a)&&(null!=r||null!=i))switch(a){case"value":p=r;break;case"defaultValue":f=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(o(91));break;default:r!==i&&Ju(e,t,a,r,s,i)}return void bt(e,p,f);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!s.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Ju(e,t,m,null,s,p);for(c in s)if(p=s[c],f=n[c],s.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Ju(e,t,c,p,s,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!s.hasOwnProperty(g)&&Ju(e,t,g,null,s,p);for(u in s)if(p=s[u],f=n[u],s.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:Ju(e,t,u,p,s,f)}return;default:if(Ct(t)){for(var v in n)p=n[v],n.hasOwnProperty(v)&&void 0!==p&&!s.hasOwnProperty(v)&&Zu(e,t,v,void 0,s,p);for(h in s)p=s[h],f=n[h],!s.hasOwnProperty(h)||p===f||void 0===p&&void 0===f||Zu(e,t,h,p,s,f);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&null!=p&&!s.hasOwnProperty(y)&&Ju(e,t,y,null,s,p);for(d in s)p=s[d],f=n[d],!s.hasOwnProperty(d)||p===f||null==p&&null==f||Ju(e,t,d,p,s,f)}(s,e.type,n,t),s[Me]=t}catch(r){uu(e,e.return,r)}}function fl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&ph(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&ph(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xu));else if(4!==s&&(27===s&&ph(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function vl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==s&&(27===s&&ph(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function yl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var s=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);eh(t,s,n),t[Ne]=e,t[Me]=n}catch(i){uu(e,e.return,i)}}var _l=!1,bl=!1,wl=!1,kl="function"===typeof WeakSet?WeakSet:Set,xl=null;function Sl(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Ll(e,n),4&s&&ol(5,n);break;case 1:if(Ll(e,n),4&s)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){uu(n,n.return,o)}else{var r=ga(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){uu(n,n.return,a)}}64&s&&ll(n),512&s&&ul(n,n.return);break;case 3:if(Ll(e,n),64&s&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{di(e,t)}catch(o){uu(n,n.return,o)}}break;case 27:null===t&&4&s&&yl(n);case 26:case 5:Ll(e,n),null===t&&4&s&&dl(n),512&s&&ul(n,n.return);break;case 12:Ll(e,n);break;case 13:Ll(e,n),4&s&&Pl(e,n),64&s&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var s=function(){t(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}(e,n=fu.bind(null,n))));break;case 22:if(!(s=null!==n.memoizedState||_l)){t=null!==t&&null!==t.memoizedState||bl,r=_l;var i=bl;_l=s,(bl=t)&&!i?Vl(e,n,0!==(8772&n.subtreeFlags)):Ll(e,n),_l=r,bl=i}break;case 30:break;default:Ll(e,n)}}function Tl(e){var t=e.alternate;null!==t&&(e.alternate=null,Tl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&qe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,El=!1;function Al(e,t,n){for(n=n.child;null!==n;)Ol(e,t,n),n=n.sibling}function Ol(e,t,n){if(he&&"function"===typeof he.onCommitFiberUnmount)try{he.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:bl||hl(n,t),Al(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:bl||hl(n,t);var s=Cl,r=El;ph(n.type)&&(Cl=n.stateNode,El=!1),Al(e,t,n),wh(n.stateNode),Cl=s,El=r;break;case 5:bl||hl(n,t);case 6:if(s=Cl,r=El,Cl=null,Al(e,t,n),El=r,null!==(Cl=s))if(El)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(o){uu(n,t,o)}else try{Cl.removeChild(n.stateNode)}catch(o){uu(n,t,o)}break;case 18:null!==Cl&&(El?(fh(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ed(e)):fh(Cl,n.stateNode));break;case 4:s=Cl,r=El,Cl=n.stateNode.containerInfo,El=!0,Al(e,t,n),Cl=s,El=r;break;case 0:case 11:case 14:case 15:bl||al(2,n,t),bl||al(4,n,t),Al(e,t,n);break;case 1:bl||(hl(n,t),"function"===typeof(s=n.stateNode).componentWillUnmount&&cl(n,t,s)),Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:bl=(s=bl)||null!==n.memoizedState,Al(e,t,n),bl=s;break;default:Al(e,t,n)}}function Pl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ed(e)}catch(n){uu(t,t.return,n)}}function Rl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var s=mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(s,s))})}function Nl(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var r=n[s],i=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(ph(l.type)){Cl=l.stateNode,El=!1;break e}break;case 5:Cl=l.stateNode,El=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,El=!0;break e}l=l.return}if(null===Cl)throw Error(o(160));Ol(i,a,r),Cl=null,El=!1,null!==(i=r.alternate)&&(i.return=null),r.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Il(t,e),t=t.sibling}var Ml=null;function Il(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Nl(t,e),Dl(e),4&s&&(al(3,e,e.return),ol(3,e),al(5,e,e.return));break;case 1:Nl(t,e),Dl(e),512&s&&(bl||null===n||hl(n,n.return)),64&s&&_l&&(null!==(e=e.updateQueue)&&(null!==(s=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?s:n.concat(s))));break;case 26:var r=Ml;if(Nl(t,e),Dl(e),512&s&&(bl||null===n||hl(n,n.return)),4&s){var i=null!==n?n.memoizedState:null;if(s=e.memoizedState,null===n)if(null===s)if(null===e.stateNode){e:{s=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":(!(i=r.getElementsByTagName("title")[0])||i[Ve]||i[Ne]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=r.createElement(s),r.head.insertBefore(i,r.querySelector("head > title"))),eh(i,s,n),i[Ne]=e,He(i),s=i;break e;case"link":var a=Vh("link","href",r).get(s+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((i=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}eh(i=r.createElement(s),s,n),r.head.appendChild(i);break;case"meta":if(a=Vh("meta","content",r).get(s+(n.content||"")))for(l=0;l<a.length;l++)if((i=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}eh(i=r.createElement(s),s,n),r.head.appendChild(i);break;default:throw Error(o(468,s))}i[Ne]=e,He(i),s=i}e.stateNode=s}else qh(r,e.type,e.stateNode);else e.stateNode=Ih(r,s,e.memoizedProps);else i!==s?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===s?qh(r,e.type,e.stateNode):Ih(r,s,e.memoizedProps)):null===s&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Nl(t,e),Dl(e),512&s&&(bl||null===n||hl(n,n.return)),null!==n&&4&s&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Nl(t,e),Dl(e),512&s&&(bl||null===n||hl(n,n.return)),32&e.flags){r=e.stateNode;try{kt(r,"")}catch(f){uu(e,e.return,f)}}4&s&&null!=e.stateNode&&pl(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&s&&(wl=!0);break;case 6:if(Nl(t,e),Dl(e),4&s){if(null===e.stateNode)throw Error(o(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(f){uu(e,e.return,f)}}break;case 3:if(Fh=null,r=Ml,Ml=Sh(t.containerInfo),Nl(t,e),Ml=r,Dl(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Ed(t.containerInfo)}catch(f){uu(e,e.return,f)}wl&&(wl=!1,jl(e));break;case 4:s=Ml,Ml=Sh(e.stateNode.containerInfo),Nl(t,e),Dl(e),Ml=s;break;case 12:default:Nl(t,e),Dl(e);break;case 13:Nl(t,e),Dl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(wc=te()),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Rl(e,s)));break;case 22:r=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=_l,h=bl;if(_l=u||r,bl=h||c,Nl(t,e),bl=h,_l=u,Dl(e),8192&s)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||c||_l||bl||Fl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,r)"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,p=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(f){uu(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(f){uu(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&s&&(null!==(s=e.updateQueue)&&(null!==(n=s.retryQueue)&&(s.retryQueue=null,Rl(e,n))));break;case 19:Nl(t,e),Dl(e),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Rl(e,s)));case 30:case 21:}}function Dl(e){var t=e.flags;if(2&t){try{for(var n,s=e.return;null!==s;){if(fl(s)){n=s;break}s=s.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var r=n.stateNode;vl(e,ml(e),r);break;case 5:var i=n.stateNode;32&n.flags&&(kt(i,""),n.flags&=-33),vl(e,ml(e),i);break;case 3:case 4:var a=n.stateNode.containerInfo;gl(e,ml(e),a);break;default:throw Error(o(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function jl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;jl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ll(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),Fl(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Fl(t);break;case 27:wh(t.stateNode);case 26:case 5:hl(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function Vl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var s=t.alternate,r=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:Vl(r,i,n),ol(4,i);break;case 1:if(Vl(r,i,n),"function"===typeof(r=(s=i).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){uu(s,s.return,c)}if(null!==(r=(s=i).updateQueue)){var a=s.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)hi(l[r],a)}catch(c){uu(s,s.return,c)}}n&&64&o&&ll(i),ul(i,i.return);break;case 27:yl(i);case 26:case 5:Vl(r,i,n),n&&null===s&&4&o&&dl(i),ul(i,i.return);break;case 12:Vl(r,i,n);break;case 13:Vl(r,i,n),n&&4&o&&Pl(r,i);break;case 22:null===i.memoizedState&&Vl(r,i,n),ul(i,i.return);break;case 30:break;default:Vl(r,i,n)}t=t.sibling}}function ql(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ir(n))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ir(e))}function Ul(e,t,n,s){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Bl(e,t,n,s),t=t.sibling}function Bl(e,t,n,s){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Ul(e,t,n,s),2048&r&&ol(9,t);break;case 1:case 13:default:Ul(e,t,n,s);break;case 3:Ul(e,t,n,s),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ir(e)));break;case 12:if(2048&r){Ul(e,t,n,s),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,a=i.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Ul(e,t,n,s);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,null!==t.memoizedState?2&i._visibility?Ul(e,t,n,s):Hl(e,t):2&i._visibility?Ul(e,t,n,s):(i._visibility|=2,Wl(e,t,n,s,0!==(10256&t.subtreeFlags))),2048&r&&ql(o,t);break;case 24:Ul(e,t,n,s),2048&r&&zl(t.alternate,t)}}function Wl(e,t,n,s,r){for(r=r&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,o=t,a=n,l=s,c=o.flags;switch(o.tag){case 0:case 11:case 15:Wl(i,o,a,l,r),ol(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?Wl(i,o,a,l,r):Hl(i,o):(u._visibility|=2,Wl(i,o,a,l,r)),r&&2048&c&&ql(o.alternate,o);break;case 24:Wl(i,o,a,l,r),r&&2048&c&&zl(o.alternate,o);break;default:Wl(i,o,a,l,r)}t=t.sibling}}function Hl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,s=t,r=s.flags;switch(s.tag){case 22:Hl(n,s),2048&r&&ql(s.alternate,s);break;case 24:Hl(n,s),2048&r&&zl(s.alternate,s);break;default:Hl(n,s)}t=t.sibling}}var Gl=8192;function Ql(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)Kl(e),e=e.sibling}function Kl(e){switch(e.tag){case 26:Ql(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,n){if(null===Uh)throw Error(o(475));var s=Uh;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var r=Oh(n.href),i=e.querySelector(Ph(r));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(s.count++,s=Wh.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=i,void He(i);i=e.ownerDocument||e,n=Rh(n),(r=kh.get(r))&&jh(n,r),He(i=i.createElement("link"));var a=i;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),eh(i,"link",n),t.instance=i}null===s.stylesheets&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(s.count++,t=Wh.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ml,e.memoizedState,e.memoizedProps);break;case 5:default:Ql(e);break;case 3:case 4:var t=Ml;Ml=Sh(e.stateNode.containerInfo),Ql(e),Ml=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,Ql(e),Gl=t):Ql(e))}}function $l(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var s=t[n];xl=s,Zl(s,e)}$l(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 0:case 11:case 15:Yl(e),2048&e.flags&&al(9,e,e.return);break;case 3:case 12:default:Yl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Yl(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var s=t[n];xl=s,Zl(s,e)}$l(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:al(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Zl(e,t){for(;null!==xl;){var n=xl;switch(n.tag){case 0:case 11:case 15:al(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var s=n.memoizedState.cachePool.pool;null!=s&&s.refCount++}break;case 24:Ir(n.memoizedState.cache)}if(null!==(s=n.child))s.return=n,xl=s;else e:for(n=e;null!==xl;){var r=(s=xl).sibling,i=s.return;if(Tl(s),s===n){xl=null;break e}if(null!==r){r.return=i,xl=r;break e}xl=i}}}var ec={getCacheForType:function(e){var t=Cr(Nr),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,sc=null,rc=null,ic=0,oc=0,ac=null,lc=!1,cc=!1,uc=!1,hc=0,dc=0,pc=0,fc=0,mc=0,gc=0,vc=0,yc=null,_c=null,bc=!1,wc=0,kc=1/0,xc=null,Sc=null,Tc=0,Cc=null,Ec=null,Ac=0,Oc=0,Pc=null,Rc=null,Nc=0,Mc=null;function Ic(){if(0!==(2&nc)&&0!==ic)return ic&-ic;if(null!==I.T){return 0!==Lr?Lr:Ou()}return Pe()}function Dc(){0===gc&&(gc=0===(536870912&ic)||ir?ke():536870912);var e=ra.current;return null!==e&&(e.flags|=32),gc}function jc(e,t,n){(e!==sc||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(Bc(e,0),qc(e,ic,gc,!1)),Te(e,n),0!==(2&nc)&&e===sc||(e===sc&&(0===(2&nc)&&(fc|=n),4===dc&&qc(e,ic,gc,!1)),ku(e))}function Lc(e,t,n){if(0!==(6&nc))throw Error(o(327));for(var s=!n&&0===(124&t)&&0===(t&e.expiredLanes)||be(e,t),r=s?function(e,t){var n=nc;nc|=2;var s=Hc(),r=Gc();sc!==e||ic!==t?(xc=null,kc=te()+500,Bc(e,t)):cc=be(e,t);e:for(;;)try{if(0!==oc&&null!==rc){t=rc;var i=ac;t:switch(oc){case 1:oc=0,ac=null,Zc(e,t,i,1);break;case 2:case 9:if($r(i)){oc=0,ac=null,Jc(t);break}t=function(){2!==oc&&9!==oc||sc!==e||(oc=7),ku(e)},i.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:$r(i)?(oc=0,ac=null,Jc(t)):(oc=0,ac=null,Zc(e,t,i,7));break;case 5:var a=null;switch(rc.tag){case 26:a=rc.memoizedState;case 5:case 27:var l=rc;if(!a||zh(a)){oc=0,ac=null;var c=l.sibling;if(null!==c)rc=c;else{var u=l.return;null!==u?(rc=u,eu(u)):rc=null}break t}}oc=0,ac=null,Zc(e,t,i,5);break;case 6:oc=0,ac=null,Zc(e,t,i,6);break;case 8:Uc(),dc=6;break e;default:throw Error(o(462))}}Yc();break}catch(h){Wc(e,h)}return yr=vr=null,I.H=s,I.A=r,nc=n,null!==rc?0:(sc=null,ic=0,As(),dc)}(e,t):Kc(e,t,!0),i=s;;){if(0===r){cc&&!s&&qc(e,t,0,!1);break}if(n=e.current.alternate,!i||Vc(n)){if(2===r){if(i=t,e.errorRecoveryDisabledLanes&i)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;r=yc;var c=l.current.memoizedState.isDehydrated;if(c&&(Bc(l,a).flags|=256),2!==(a=Kc(l,a,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=i,fc|=i,r=4;break e}i=_c,_c=r,null!==i&&(null===_c?_c=i:_c.push.apply(_c,i))}r=a}if(i=!1,2!==r)continue}}if(1===r){Bc(e,0),qc(e,t,0,!0);break}e:{switch(s=e,i=r){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:qc(s,t,gc,!lc);break e;case 2:_c=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(r=wc+300-te())){if(qc(s,t,gc,!lc),0!==_e(s,0,!0))break e;s.timeoutHandle=lh(Fc.bind(null,s,n,_c,xc,bc,t,gc,fc,vc,lc,i,2,-0,0),r)}else Fc(s,n,_c,xc,bc,t,gc,fc,vc,lc,i,0,-0,0)}break}r=Kc(e,t,!1),i=!1}ku(e)}function Fc(e,t,n,s,r,i,a,l,c,u,h,d,p,f){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||16785408===(16785408&d))&&(Uh={stylesheets:null,count:0,unsuspend:Bh},Kl(t),null!==(d=function(){if(null===Uh)throw Error(o(475));var e=Uh;return e.stylesheets&&0===e.count&&Gh(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Gh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=d(nu.bind(null,e,t,i,n,s,r,a,l,c,h,1,p,f)),void qc(e,i,a,!u);nu(e,t,i,n,s,r,a,l,c)}function Vc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!$n(i(),r))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qc(e,t,n,s){t&=~mc,t&=~fc,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var r=t;0<r;){var i=31-pe(r),o=1<<i;s[i]=-1,r&=~o}0!==n&&Ce(e,n,t)}function zc(){return 0!==(6&nc)||(xu(0,!1),!1)}function Uc(){if(null!==rc){if(0===oc)var e=rc.return;else yr=vr=null,Li(e=rc),$o=null,Yo=0,e=rc;for(;null!==e;)il(e.alternate,e),e=e.return;rc=null}}function Bc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ch(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc(),sc=e,rc=n=Fs(e.current,null),ic=t,oc=0,ac=null,lc=!1,cc=be(e,t),uc=!1,vc=gc=mc=fc=pc=dc=0,_c=yc=null,bc=!1,0!==(8&t)&&(t|=32&t);var s=e.entangledLanes;if(0!==s)for(e=e.entanglements,s&=t;0<s;){var r=31-pe(s),i=1<<r;t|=e[r],s&=~i}return hc=t,As(),n}function Wc(e,t){_i=null,I.H=Ho,t===Hr||t===Qr?(t=Zr(),oc=3):t===Gr?(t=Zr(),oc=4):oc=t===Ca?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ac=t,null===rc&&(dc=1,wa(e,Ss(t,e.current)))}function Hc(){var e=I.H;return I.H=Ho,null===e?Ho:e}function Gc(){var e=I.A;return I.A=ec,e}function Qc(){dc=4,lc||(4194048&ic)!==ic&&null!==ra.current||(cc=!0),0===(134217727&pc)&&0===(134217727&fc)||null===sc||qc(sc,ic,gc,!1)}function Kc(e,t,n){var s=nc;nc|=2;var r=Hc(),i=Gc();sc===e&&ic===t||(xc=null,Bc(e,t)),t=!1;var o=dc;e:for(;;)try{if(0!==oc&&null!==rc){var a=rc,l=ac;switch(oc){case 8:Uc(),o=6;break e;case 3:case 2:case 9:case 6:null===ra.current&&(t=!0);var c=oc;if(oc=0,ac=null,Zc(e,a,l,c),n&&cc){o=0;break e}break;default:c=oc,oc=0,ac=null,Zc(e,a,l,c)}}$c(),o=dc;break}catch(u){Wc(e,u)}return t&&e.shellSuspendCounter++,yr=vr=null,nc=s,I.H=r,I.A=i,null===rc&&(sc=null,ic=0,As()),o}function $c(){for(;null!==rc;)Xc(rc)}function Yc(){for(;null!==rc&&!Z();)Xc(rc)}function Xc(e){var t=Xa(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?eu(e):rc=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=ja(n,t,t.pendingProps,t.type,void 0,ic);break;case 11:t=ja(n,t,t.pendingProps,t.type.render,t.ref,ic);break;case 5:Li(t);default:il(n,t),t=Xa(n,t=rc=Vs(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?eu(e):rc=t}function Zc(e,t,n,s){yr=vr=null,Li(t),$o=null,Yo=0;var r=t.return;try{if(function(e,t,n,s,r){if(n.flags|=32768,null!==s&&"object"===typeof s&&"function"===typeof s.then){if(null!==(t=n.alternate)&&xr(t,n,r,!0),null!==(n=ra.current)){switch(n.tag){case 13:return null===ia?Qc():null===n.alternate&&0===dc&&(dc=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===Kr?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([s]):t.add(s),hu(e,s,r)),!1;case 22:return n.flags|=65536,s===Kr?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([s]):n.add(s),hu(e,s,r)),!1}throw Error(o(435,n.tag))}return hu(e,s,r),Qc(),!1}if(ir)return null!==(t=ra.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,s!==lr&&mr(Ss(e=Error(o(422),{cause:s}),n))):(s!==lr&&mr(Ss(t=Error(o(423),{cause:s}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,s=Ss(s,n),ai(e,r=xa(e.stateNode,s,r)),4!==dc&&(dc=2)),!1;var i=Error(o(520),{cause:s});if(i=Ss(i,n),null===yc?yc=[i]:yc.push(i),4!==dc&&(dc=2),null===t)return!0;s=Ss(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,ai(n,e=xa(n.stateNode,s,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Sc||!Sc.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,Ta(r=Sa(r),e,n,s),ai(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,ic))return dc=1,wa(e,Ss(n,e.current)),void(rc=null)}catch(i){if(null!==r)throw rc=r,i;return dc=1,wa(e,Ss(n,e.current)),void(rc=null)}32768&t.flags?(ir||1===s?e=!0:cc||0!==(536870912&ic)?e=!1:(lc=e=!0,(2===s||9===s||3===s||6===s)&&(null!==(s=ra.current)&&13===s.tag&&(s.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=sl(t.alternate,t,hc);if(null!==n)return void(rc=n);if(null!==(t=t.sibling))return void(rc=t);rc=t=e}while(null!==t);0===dc&&(dc=5)}function tu(e,t){do{var n=rl(e.alternate,e);if(null!==n)return n.flags&=32767,void(rc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(rc=e);rc=e=n}while(null!==e);dc=6,rc=null}function nu(e,t,n,s,r,i,a,l,c){e.cancelPendingCommit=null;do{au()}while(0!==Tc);if(0!==(6&nc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(i=t.lanes|t.childLanes,function(e,t,n,s,r,i){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-pe(n),h=1<<u;a[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var p=d[u];null!==p&&(p.lane&=-536870913)}n&=~h}0!==s&&Ce(e,s,0),0!==i&&0===r&&0!==e.tag&&(e.suspendedLanes|=i&~(o&~t))}(e,n,i|=Es,a,l,c),e===sc&&(rc=sc=null,ic=0),Ec=t,Cc=e,Ac=n,Oc=i,Pc=r,Rc=s,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,X(ie,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),s=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||s){s=I.T,I.T=null,r=D.p,D.p=2,a=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,th=nd,ts(e=es(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==i||0!==s&&3!==d.nodeType||(c=a+s),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===r&&(l=a),p===i&&++h===s&&(c=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nh={focusedElem:e,selectionRange:n},nd=!1,xl=t;null!==xl;)if(e=(t=xl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,xl=e;else for(;null!==xl;){switch(i=(t=xl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,r=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var m=ga(n.type,r,(n.elementType,n.type));e=s.getSnapshotBeforeUpdate(m,i),s.__reactInternalSnapshotBeforeUpdate=e}catch(v){uu(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))mh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,xl=e;break}xl=t.return}}(e,t)}finally{nc=a,D.p=r,I.T=s}}Tc=1,su(),ru(),iu()}}function su(){if(1===Tc){Tc=0;var e=Cc,t=Ec,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=I.T,I.T=null;var s=D.p;D.p=2;var r=nc;nc|=4;try{Il(t,e);var i=nh,o=es(e.containerInfo),a=i.focusedElem,l=i.selectionRange;if(o!==a&&a&&a.ownerDocument&&Zn(a.ownerDocument.documentElement,a)){if(null!==l&&ts(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var h=a.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var p=d.getSelection(),f=a.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(o=g,g=m,m=o);var v=Jn(a,m),y=Jn(a,g);if(v&&y&&(1!==p.rangeCount||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var _=h.createRange();_.setStart(v.node,v.offset),p.removeAllRanges(),m>g?(p.addRange(_),p.extend(y.node,y.offset)):(_.setEnd(y.node,y.offset),p.addRange(_))}}}}for(h=[],p=a;p=p.parentNode;)1===p.nodeType&&h.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<h.length;a++){var b=h[a];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}nd=!!th,nh=th=null}finally{nc=r,D.p=s,I.T=n}}e.current=t,Tc=2}}function ru(){if(2===Tc){Tc=0;var e=Cc,t=Ec,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=I.T,I.T=null;var s=D.p;D.p=2;var r=nc;nc|=4;try{Sl(e,t.alternate,t)}finally{nc=r,D.p=s,I.T=n}}Tc=3}}function iu(){if(4===Tc||3===Tc){Tc=0,ee();var e=Cc,t=Ec,n=Ac,s=Rc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Tc=5:(Tc=0,Ec=Cc=null,ou(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(Sc=null),Oe(n),t=t.stateNode,he&&"function"===typeof he.onCommitFiberRoot)try{he.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==s){t=I.T,r=D.p,D.p=2,I.T=null;try{for(var i=e.onRecoverableError,o=0;o<s.length;o++){var a=s[o];i(a.value,{componentStack:a.stack})}}finally{I.T=t,D.p=r}}0!==(3&Ac)&&au(),ku(e),r=e.pendingLanes,0!==(4194090&n)&&0!==(42&r)?e===Mc?Nc++:(Nc=0,Mc=e):Nc=0,xu(0,!1)}}function ou(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ir(t)))}function au(e){return su(),ru(),iu(),lu()}function lu(){if(5!==Tc)return!1;var e=Cc,t=Oc;Oc=0;var n=Oe(Ac),s=I.T,r=D.p;try{D.p=32>n?32:n,I.T=null,n=Pc,Pc=null;var i=Cc,a=Ac;if(Tc=0,Ec=Cc=null,Ac=0,0!==(6&nc))throw Error(o(331));var l=nc;if(nc|=4,Xl(i.current),Bl(i,i.current,a,n),nc=l,xu(0,!1),he&&"function"===typeof he.onPostCommitFiberRoot)try{he.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{D.p=r,I.T=s,ou(e,t)}}function cu(e,t,n){t=Ss(n,t),null!==(e=ii(e,t=xa(e.stateNode,t,2),2))&&(Te(e,2),ku(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Sc||!Sc.has(s))){e=Ss(n,e),null!==(s=ii(t,n=Sa(2),2))&&(Ta(n,s,t,e),Te(s,2),ku(s));break}}t=t.return}}function hu(e,t,n){var s=e.pingCache;if(null===s){s=e.pingCache=new tc;var r=new Set;s.set(t,r)}else void 0===(r=s.get(t))&&(r=new Set,s.set(t,r));r.has(n)||(uc=!0,r.add(n),e=du.bind(null,e,t,n),t.then(e,e))}function du(e,t,n){var s=e.pingCache;null!==s&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sc===e&&(ic&n)===n&&(4===dc||3===dc&&(62914560&ic)===ic&&300>te()-wc?0===(2&nc)&&Bc(e,0):mc|=n,vc===ic&&(vc=0)),ku(e)}function pu(e,t){0===t&&(t=xe()),null!==(e=Rs(e,t))&&(Te(e,t),ku(e))}function fu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function mu(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==s&&s.delete(t),pu(e,n)}var gu=null,vu=null,yu=!1,_u=!1,bu=!1,wu=0;function ku(e){e!==vu&&null===e.next&&(null===vu?gu=vu=e:vu=vu.next=e),_u=!0,yu||(yu=!0,hh(function(){0!==(6&nc)?X(se,Su):Tu()}))}function xu(e,t){if(!bu&&_u){bu=!0;do{for(var n=!1,s=gu;null!==s;){if(!t)if(0!==e){var r=s.pendingLanes;if(0===r)var i=0;else{var o=s.suspendedLanes,a=s.pingedLanes;i=(1<<31-pe(42|e)+1)-1,i=201326741&(i&=r&~(o&~a))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Au(s,i))}else i=ic,0===(3&(i=_e(s,s===sc?i:0,null!==s.cancelPendingCommit||-1!==s.timeoutHandle)))||be(s,i)||(n=!0,Au(s,i));s=s.next}}while(n);bu=!1}}function Su(){Tu()}function Tu(){_u=yu=!1;var e=0;0!==wu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ah&&(ah=e,!0);return ah=null,!1}()&&(e=wu),wu=0);for(var t=te(),n=null,s=gu;null!==s;){var r=s.next,i=Cu(s,t);0===i?(s.next=null,null===n?gu=r:n.next=r,null===r&&(vu=n)):(n=s,(0!==e||0!==(3&i))&&(_u=!0)),s=r}xu(e,!1)}function Cu(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var o=31-pe(i),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&s)||(r[o]=we(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}if(n=ic,n=_e(e,e===(t=sc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),s=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==s&&null!==s&&J(s),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||be(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==s&&J(s),Oe(n)){case 2:case 8:n=re;break;case 32:default:n=ie;break;case 268435456:n=ae}return s=Eu.bind(null,e),n=X(n,s),e.callbackPriority=t,e.callbackNode=n,t}return null!==s&&null!==s&&J(s),e.callbackPriority=2,e.callbackNode=null,2}function Eu(e,t){if(0!==Tc&&5!==Tc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(au()&&e.callbackNode!==n)return null;var s=ic;return 0===(s=_e(e,e===sc?s:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Lc(e,s,t),Cu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Eu.bind(null,e):null)}function Au(e,t){if(au())return null;Lc(e,t,!0)}function Ou(){return 0===wu&&(wu=ke()),wu}function Pu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ot(""+e)}function Ru(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Nu=0;Nu<ws.length;Nu++){var Mu=ws[Nu];ks(Mu.toLowerCase(),"on"+(Mu[0].toUpperCase()+Mu.slice(1)))}ks(ps,"onAnimationEnd"),ks(fs,"onAnimationIteration"),ks(ms,"onAnimationStart"),ks("dblclick","onDoubleClick"),ks("focusin","onFocus"),ks("focusout","onBlur"),ks(gs,"onTransitionRun"),ks(vs,"onTransitionStart"),ks(ys,"onTransitionCancel"),ks(_s,"onTransitionEnd"),$e("onMouseEnter",["mouseout","mouseover"]),$e("onMouseLeave",["mouseout","mouseover"]),$e("onPointerEnter",["pointerout","pointerover"]),$e("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Du=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Iu));function ju(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;i=a,r.currentTarget=c;try{i(r)}catch(u){va(u)}r.currentTarget=null,i=l}else for(o=0;o<s.length;o++){if(l=(a=s[o]).instance,c=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;i=a,r.currentTarget=c;try{i(r)}catch(u){va(u)}r.currentTarget=null,i=l}}}}function Lu(e,t){var n=t[De];void 0===n&&(n=t[De]=new Set);var s=e+"__bubble";n.has(s)||(zu(t,e,2,!1),n.add(s))}function Fu(e,t,n){var s=0;t&&(s|=4),zu(n,e,s,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function qu(e){if(!e[Vu]){e[Vu]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(Du.has(t)||Fu(t,!1,e),Fu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,Fu("selectionchange",!1,t))}}function zu(e,t,n,s){switch(cd(t)){case 2:var r=sd;break;case 8:r=rd;break;default:r=id}n=r.bind(null,t,n,e),r=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),s?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Uu(e,t,n,s,r){var i=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var o=s.tag;if(3===o||4===o){var a=s.stateNode.containerInfo;if(a===r)break;if(4===o)for(o=s.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===r)return;o=o.return}for(;null!==a;){if(null===(o=ze(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){s=i=o;continue e}a=a.parentNode}}s=s.return}jt(function(){var s=i,r=Rt(n),o=[];e:{var a=bs.get(e);if(void 0!==a){var c=Zt,u=e;switch(e){case"keypress":if(0===Ht(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=on;break;case"focusout":u="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case ps:case fs:case ms:c=an;break;case _s:c=yn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=_n;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=bn}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),p=h?null!==a?a+"Capture":null:a;h=[];for(var f,m=s;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=Lt(m,p))&&h.push(Bu(m,g,f)),d)break;m=m.return}0<h.length&&(a=new c(a,u,null,n,r),o.push({event:a,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Pt||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[Ie])&&(c||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=s,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=s),c!==u)){if(h=sn,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=gn,g="onPointerLeave",p="onPointerEnter",m="pointer"),d=null==c?a:Be(c),f=null==u?a:Be(u),(a=new h(g,m+"leave",c,n,r)).target=d,a.relatedTarget=f,g=null,ze(r)===s&&((h=new h(p,m+"enter",u,n,r)).target=f,h.relatedTarget=d,g=h),d=g,c&&u)e:{for(p=u,m=0,f=h=c;f;f=Hu(f))m++;for(f=0,g=p;g;g=Hu(g))f++;for(;0<m-f;)h=Hu(h),m--;for(;0<f-m;)p=Hu(p),f--;for(;m--;){if(h===p||null!==p&&h===p.alternate)break e;h=Hu(h),p=Hu(p)}h=null}else h=null;null!==c&&Gu(o,a,c,h,!1),null!==u&&null!==d&&Gu(o,d,u,h,!0)}if("select"===(c=(a=s?Be(s):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var v=Fn;else if(Nn(a))if(Vn)v=Kn;else{v=Gn;var y=Hn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?s&&Ct(s.elementType)&&(v=Fn):v=Qn;switch(v&&(v=v(e,s))?Mn(o,v,n,r):(y&&y(e,a,s),"focusout"===e&&s&&"number"===a.type&&null!=s.memoizedProps.value&&yt(a,"number",a.value)),y=s?Be(s):window,e){case"focusin":(Nn(y)||"true"===y.contentEditable)&&(ss=y,rs=s,is=null);break;case"focusout":is=rs=ss=null;break;case"mousedown":os=!0;break;case"contextmenu":case"mouseup":case"dragend":os=!1,as(o,n,r);break;case"selectionchange":if(ns)break;case"keydown":case"keyup":as(o,n,r)}var _;if(kn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Pn?An(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Tn&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Pn&&(_=Wt()):(Ut="value"in(zt=r)?zt.value:zt.textContent,Pn=!0)),0<(y=Wu(s,b)).length&&(b=new cn(b,e,null,n,r),o.push({event:b,listeners:y}),_?b.data=_:null!==(_=On(n))&&(b.data=_))),(_=Sn?function(e,t){switch(e){case"compositionend":return On(t);case"keypress":return 32!==t.which?null:(En=!0,Cn);case"textInput":return(e=t.data)===Cn&&En?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!kn&&An(e,t)?(e=Wt(),Bt=Ut=zt=null,Pn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=Wu(s,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,r),o.push({event:y,listeners:b}),y.data=_)),function(e,t,n,s,r){if("submit"===t&&n&&n.stateNode===r){var i=Pu((r[Me]||null).action),o=s.submitter;o&&null!==(t=(t=o[Me]||null)?Pu(t.formAction):o.getAttribute("formAction"))&&(i=t,o=null);var a=new Zt("action","action",null,s,r);e.push({event:a,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(0!==wu){var e=o?Ru(r,o):new FormData(r);Ro(n,{pending:!0,data:e,method:r.method,action:i},null,e)}}else"function"===typeof i&&(a.preventDefault(),e=o?Ru(r,o):new FormData(r),Ro(n,{pending:!0,data:e,method:r.method,action:i},i,e))},currentTarget:r}]})}}(o,e,s,n,r)}ju(o,t)})}function Bu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",s=[];null!==e;){var r=e,i=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===i||(null!=(r=Lt(e,n))&&s.unshift(Bu(e,r,i)),null!=(r=Lt(e,t))&&s.push(Bu(e,r,i))),3===e.tag)return s;e=e.return}return[]}function Hu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gu(e,t,n,s,r){for(var i=t._reactName,o=[];null!==n&&n!==s;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===s)break;5!==a&&26!==a&&27!==a||null===c||(l=c,r?null!=(c=Lt(n,i))&&o.unshift(Bu(n,c,l)):r||null!=(c=Lt(n,i))&&o.push(Bu(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qu=/\r\n?/g,Ku=/\u0000|\uFFFD/g;function $u(e){return("string"===typeof e?e:""+e).replace(Qu,"\n").replace(Ku,"")}function Yu(e,t){return t=$u(t),$u(e)===t}function Xu(){}function Ju(e,t,n,s,r,i){switch(n){case"children":"string"===typeof s?"body"===t||"textarea"===t&&""===s||kt(e,s):("number"===typeof s||"bigint"===typeof s)&&"body"!==t&&kt(e,""+s);break;case"className":nt(e,"class",s);break;case"tabIndex":nt(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,s);break;case"style":Tt(e,s,i);break;case"data":if("object"!==t){nt(e,"data",s);break}case"src":case"href":if(""===s&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==s||"function"===typeof s||"symbol"===typeof s||"boolean"===typeof s){e.removeAttribute(n);break}s=Ot(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if("function"===typeof s){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Ju(e,t,"name",r.name,r,null),Ju(e,t,"formEncType",r.formEncType,r,null),Ju(e,t,"formMethod",r.formMethod,r,null),Ju(e,t,"formTarget",r.formTarget,r,null)):(Ju(e,t,"encType",r.encType,r,null),Ju(e,t,"method",r.method,r,null),Ju(e,t,"target",r.target,r,null))),null==s||"symbol"===typeof s||"boolean"===typeof s){e.removeAttribute(n);break}s=Ot(""+s),e.setAttribute(n,s);break;case"onClick":null!=s&&(e.onclick=Xu);break;case"onScroll":null!=s&&Lu("scroll",e);break;case"onScrollEnd":null!=s&&Lu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!==typeof s||!("__html"in s))throw Error(o(61));if(null!=(n=s.__html)){if(null!=r.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&"function"!==typeof s&&"symbol"!==typeof s;break;case"muted":e.muted=s&&"function"!==typeof s&&"symbol"!==typeof s;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==s||"function"===typeof s||"boolean"===typeof s||"symbol"===typeof s){e.removeAttribute("xlink:href");break}n=Ot(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===s?e.setAttribute(n,""):!1!==s&&null!=s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":null==s||"function"===typeof s||"symbol"===typeof s||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":Lu("beforetoggle",e),Lu("toggle",e),tt(e,"popover",s);break;case"xlinkActuate":st(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":st(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":st(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":st(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":st(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":st(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":st(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":st(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":st(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":tt(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Et.get(n)||n,s)}}function Zu(e,t,n,s,r,i){switch(n){case"style":Tt(e,s,i);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!==typeof s||!("__html"in s))throw Error(o(61));if(null!=(n=s.__html)){if(null!=r.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof s?kt(e,s):("number"===typeof s||"bigint"===typeof s)&&kt(e,""+s);break;case"onScroll":null!=s&&Lu("scroll",e);break;case"onScrollEnd":null!=s&&Lu("scrollend",e);break;case"onClick":null!=s&&(e.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Qe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Me]||null)?i[n]:null)&&e.removeEventListener(t,i,r),"function"!==typeof s)?n in e?e[n]=s:!0===s?e.setAttribute(n,""):tt(e,n,s):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,r)))}}function eh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lu("error",e),Lu("load",e);var s,r=!1,i=!1;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(null!=a)switch(s){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ju(e,t,s,a,n,null)}}return i&&Ju(e,t,"srcSet",n.srcSet,n,null),void(r&&Ju(e,t,"src",n.src,n,null));case"input":Lu("invalid",e);var l=s=a=i=null,c=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var h=n[r];if(null!=h)switch(r){case"name":i=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":s=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:Ju(e,t,r,h,n,null)}}return vt(e,s,l,c,u,a,i,!1),void ht(e);case"select":for(i in Lu("invalid",e),r=a=s=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":r=l;default:Ju(e,t,i,l,n,null)}return t=s,n=a,e.multiple=!!r,void(null!=t?_t(e,!!r,t,!1):null!=n&&_t(e,!!r,n,!0));case"textarea":for(a in Lu("invalid",e),s=i=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":i=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Ju(e,t,a,l,n,null)}return wt(e,r,i,s),void ht(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))if("selected"===c)e.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else Ju(e,t,c,r,n,null);return;case"dialog":Lu("beforetoggle",e),Lu("toggle",e),Lu("cancel",e),Lu("close",e);break;case"iframe":case"object":Lu("load",e);break;case"video":case"audio":for(r=0;r<Iu.length;r++)Lu(Iu[r],e);break;case"image":Lu("error",e),Lu("load",e);break;case"details":Lu("toggle",e);break;case"embed":case"source":case"link":Lu("error",e),Lu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(r=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ju(e,t,u,r,n,null)}return;default:if(Ct(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(r=n[h])&&Zu(e,t,h,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(r=n[l])&&Ju(e,t,l,r,n,null))}var th=null,nh=null;function sh(e){return 9===e.nodeType?e:e.ownerDocument}function rh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ih(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function oh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ah=null;var lh="function"===typeof setTimeout?setTimeout:void 0,ch="function"===typeof clearTimeout?clearTimeout:void 0,uh="function"===typeof Promise?Promise:void 0,hh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof uh?function(e){return uh.resolve(null).then(e).catch(dh)}:lh;function dh(e){setTimeout(function(){throw e})}function ph(e){return"head"===e}function fh(e,t){var n=t,s=0,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<s&&8>s){n=s;var o=e.ownerDocument;if(1&n&&wh(o.documentElement),2&n&&wh(o.body),4&n)for(wh(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[Ve]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===r)return e.removeChild(i),void Ed(t);r--}else"$"===n||"$?"===n||"$!"===n?r++:s=n.charCodeAt(0)-48;else s=0;n=i}while(n);Ed(t)}function mh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":mh(n),qe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gh(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yh=null;function _h(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function bh(e,t,n){switch(t=sh(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function wh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);qe(e)}var kh=new Map,xh=new Set;function Sh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Th=D.d;D.d={f:function(){var e=Th.f(),t=zc();return e||t},r:function(e){var t=Ue(e);null!==t&&5===t.tag&&"form"===t.type?Mo(t):Th.r(e)},D:function(e){Th.D(e),Eh("dns-prefetch",e,null)},C:function(e,t){Th.C(e,t),Eh("preconnect",e,t)},L:function(e,t,n){Th.L(e,t,n);var s=Ch;if(s&&e&&t){var r='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(r+='[imagesizes="'+mt(n.imageSizes)+'"]')):r+='[href="'+mt(e)+'"]';var i=r;switch(t){case"style":i=Oh(e);break;case"script":i=Nh(e)}kh.has(i)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),kh.set(i,e),null!==s.querySelector(r)||"style"===t&&s.querySelector(Ph(i))||"script"===t&&s.querySelector(Mh(i))||(eh(t=s.createElement("link"),"link",e),He(t),s.head.appendChild(t)))}},m:function(e,t){Th.m(e,t);var n=Ch;if(n&&e){var s=t&&"string"===typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+mt(s)+'"][href="'+mt(e)+'"]',i=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Nh(e)}if(!kh.has(i)&&(e=d({rel:"modulepreload",href:e},t),kh.set(i,e),null===n.querySelector(r))){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Mh(i)))return}eh(s=n.createElement("link"),"link",e),He(s),n.head.appendChild(s)}}},X:function(e,t){Th.X(e,t);var n=Ch;if(n&&e){var s=We(n).hoistableScripts,r=Nh(e),i=s.get(r);i||((i=n.querySelector(Mh(r)))||(e=d({src:e,async:!0},t),(t=kh.get(r))&&Lh(e,t),He(i=n.createElement("script")),eh(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}},S:function(e,t,n){Th.S(e,t,n);var s=Ch;if(s&&e){var r=We(s).hoistableStyles,i=Oh(e);t=t||"default";var o=r.get(i);if(!o){var a={loading:0,preload:null};if(o=s.querySelector(Ph(i)))a.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=kh.get(i))&&jh(e,n);var l=o=s.createElement("link");He(l),eh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Dh(o,t,s)}o={type:"stylesheet",instance:o,count:1,state:a},r.set(i,o)}}},M:function(e,t){Th.M(e,t);var n=Ch;if(n&&e){var s=We(n).hoistableScripts,r=Nh(e),i=s.get(r);i||((i=n.querySelector(Mh(r)))||(e=d({src:e,async:!0,type:"module"},t),(t=kh.get(r))&&Lh(e,t),He(i=n.createElement("script")),eh(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}};var Ch="undefined"===typeof document?null:document;function Eh(e,t,n){var s=Ch;if(s&&"string"===typeof t&&t){var r=mt(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"===typeof n&&(r+='[crossorigin="'+n+'"]'),xh.has(r)||(xh.add(r),e={rel:e,crossOrigin:n,href:t},null===s.querySelector(r)&&(eh(t=s.createElement("link"),"link",e),He(t),s.head.appendChild(t)))}}function Ah(e,t,n,s){var r,i,a,l,c=(c=W.current)?Sh(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Oh(n.href),(s=(n=We(c).hoistableStyles).get(t))||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Oh(n.href);var u=We(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(Ph(e)))&&!u._p&&(h.instance=u,h.state.loading=5),kh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kh.set(e,n),u||(r=c,i=e,a=n,l=h.state,r.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=r.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),eh(i,"link",a),He(i),r.head.appendChild(i))))),t&&null===s)throw Error(o(528,""));return h}if(t&&null!==s)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Nh(n),(s=(n=We(c).hoistableScripts).get(t))||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Oh(e){return'href="'+mt(e)+'"'}function Ph(e){return'link[rel="stylesheet"]['+e+"]"}function Rh(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Nh(e){return'[src="'+mt(e)+'"]'}function Mh(e){return"script[async]"+e}function Ih(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(s)return t.instance=s,He(s),s;var r=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return He(s=(e.ownerDocument||e).createElement("style")),eh(s,"style",r),Dh(s,n.precedence,e),t.instance=s;case"stylesheet":r=Oh(n.href);var i=e.querySelector(Ph(r));if(i)return t.state.loading|=4,t.instance=i,He(i),i;s=Rh(n),(r=kh.get(r))&&jh(s,r),He(i=(e.ownerDocument||e).createElement("link"));var a=i;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),eh(i,"link",s),t.state.loading|=4,Dh(i,n.precedence,e),t.instance=i;case"script":return i=Nh(n.src),(r=e.querySelector(Mh(i)))?(t.instance=r,He(r),r):(s=n,(r=kh.get(i))&&Lh(s=d({},n),r),He(r=(e=e.ownerDocument||e).createElement("script")),eh(r,"link",s),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(s=t.instance,t.state.loading|=4,Dh(s,n.precedence,e));return t.instance}function Dh(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,i=r,o=0;o<s.length;o++){var a=s[o];if(a.dataset.precedence===t)i=a;else if(i!==r)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function jh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Lh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fh=null;function Vh(e,t,n){if(null===Fh){var s=new Map,r=Fh=new Map;r.set(n,s)}else(s=(r=Fh).get(n))||(s=new Map,r.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var i=n[r];if(!(i[Ve]||i[Ne]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var o=i.getAttribute(t)||"";o=e+o;var a=s.get(o);a?a.push(i):s.set(o,[i])}}return s}function qh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function zh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Uh=null;function Bh(){}function Wh(){if(this.count--,0===this.count)if(this.stylesheets)Gh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Hh=null;function Gh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Hh=new Map,t.forEach(Qh,e),Hh=null,Wh.call(e))}function Qh(e,t){if(!(4&t.state.loading)){var n=Hh.get(e);if(n)var s=n.get(null);else{n=new Map,Hh.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<r.length;i++){var o=r[i];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),s=o)}s&&n.set(null,s)}o=(r=t.instance).getAttribute("data-precedence"),(i=n.get(o)||s)===s&&n.set(null,r),n.set(o,r),this.count++,s=Wh.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),i?i.parentNode.insertBefore(r,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var Kh={$$typeof:w,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function $h(e,t,n,s,r,i,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Yh(e,t,n,s,r,i,o,a,l,c,u,h){return e=new $h(e,t,n,o,a,l,c,h),t=1,!0===i&&(t|=24),i=js(3,null,null,t),e.current=i,i.stateNode=e,(t=Mr()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:s,isDehydrated:n,cache:t},ni(i),e}function Xh(e){return e?e=Is:Is}function Jh(e,t,n,s,r,i){r=Xh(r),null===s.context?s.context=r:s.pendingContext=r,(s=ri(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(s.callback=i),null!==(n=ii(e,s,t))&&(jc(n,0,t),oi(n,e,t))}function Zh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ed(e,t){Zh(e,t),(e=e.alternate)&&Zh(e,t)}function td(e){if(13===e.tag){var t=Rs(e,67108864);null!==t&&jc(t,0,67108864),ed(e,67108864)}}var nd=!0;function sd(e,t,n,s){var r=I.T;I.T=null;var i=D.p;try{D.p=2,id(e,t,n,s)}finally{D.p=i,I.T=r}}function rd(e,t,n,s){var r=I.T;I.T=null;var i=D.p;try{D.p=8,id(e,t,n,s)}finally{D.p=i,I.T=r}}function id(e,t,n,s){if(nd){var r=od(s);if(null===r)Uu(e,t,s,ad,n),yd(e,s);else if(function(e,t,n,s,r){switch(t){case"focusin":return hd=_d(hd,e,t,n,s,r),!0;case"dragenter":return dd=_d(dd,e,t,n,s,r),!0;case"mouseover":return pd=_d(pd,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return fd.set(i,_d(fd.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,md.set(i,_d(md.get(i)||null,e,t,n,s,r)),!0}return!1}(r,e,t,n,s))s.stopPropagation();else if(yd(e,s),4&t&&-1<vd.indexOf(e)){for(;null!==r;){var i=Ue(r);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var o=ye(i.pendingLanes);if(0!==o){var a=i;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-pe(o);a.entanglements[1]|=l,o&=~l}ku(i),0===(6&nc)&&(kc=te()+500,xu(0,!1))}}break;case 13:null!==(a=Rs(i,2))&&jc(a,0,2),zc(),ed(i,2)}if(null===(i=od(s))&&Uu(e,t,s,ad,n),i===r)break;r=i}null!==r&&s.stopPropagation()}else Uu(e,t,s,null,n)}}function od(e){return ld(e=Rt(e))}var ad=null;function ld(e){if(ad=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ad=e,null}function cd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case se:return 2;case re:return 8;case ie:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var ud=!1,hd=null,dd=null,pd=null,fd=new Map,md=new Map,gd=[],vd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yd(e,t){switch(e){case"focusin":case"focusout":hd=null;break;case"dragenter":case"dragleave":dd=null;break;case"mouseover":case"mouseout":pd=null;break;case"pointerover":case"pointerout":fd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":md.delete(t.pointerId)}}function _d(e,t,n,s,r,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},null!==t&&(null!==(t=Ue(t))&&td(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function bd(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}(e.priority,function(){if(13===n.tag){var e=Ic();e=Ae(e);var t=Rs(n,e);null!==t&&jc(t,0,e),ed(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=od(e.nativeEvent);if(null!==n)return null!==(t=Ue(n))&&td(t),e.blockedOn=n,!1;var s=new(n=e.nativeEvent).constructor(n.type,n);Pt=s,n.target.dispatchEvent(s),Pt=null,t.shift()}return!0}function kd(e,t,n){wd(e)&&n.delete(t)}function xd(){ud=!1,null!==hd&&wd(hd)&&(hd=null),null!==dd&&wd(dd)&&(dd=null),null!==pd&&wd(pd)&&(pd=null),fd.forEach(kd),md.forEach(kd)}function Sd(e,t){e.blockedOn===t&&(e.blockedOn=null,ud||(ud=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,xd)))}var Td=null;function Cd(e){Td!==e&&(Td=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Td===e&&(Td=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],r=e[t+2];if("function"!==typeof s){if(null===ld(s||n))continue;break}var i=Ue(n);null!==i&&(e.splice(t,3),t-=3,Ro(i,{pending:!0,data:r,method:n.method,action:s},s,r))}}))}function Ed(e){function t(t){return Sd(t,e)}null!==hd&&Sd(hd,e),null!==dd&&Sd(dd,e),null!==pd&&Sd(pd,e),fd.forEach(t),md.forEach(t);for(var n=0;n<gd.length;n++){var s=gd[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<gd.length&&null===(n=gd[0]).blockedOn;)bd(n),null===n.blockedOn&&gd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(s=0;s<n.length;s+=3){var r=n[s],i=n[s+1],o=r[Me]||null;if("function"===typeof i)o||Cd(n);else if(o){var a=null;if(i&&i.hasAttribute("formAction")){if(r=i,o=i[Me]||null)a=o.formAction;else if(null!==ld(r))continue}else a=o.action;"function"===typeof a?n[s+1]=a:(n.splice(s,3),s-=3),Cd(n)}}}function Ad(e){this._internalRoot=e}function Od(e){this._internalRoot=e}Od.prototype.render=Ad.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Jh(t.current,Ic(),e,t,null,null)},Od.prototype.unmount=Ad.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jh(e.current,2,null,e,null,null),zc(),t[Ie]=null}},Od.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gd.length&&0!==t&&t<gd[n].priority;n++);gd.splice(n,0,e),0===n&&bd(e)}};var Pd=r.version;if("19.1.1"!==Pd)throw Error(o(527,Pd,"19.1.1"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(null===r)break;var i=r.alternate;if(null===i){if(null!==(s=r.return)){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return u(r),e;if(i===s)return u(r),t;i=i.sibling}throw Error(o(188))}if(n.return!==s.return)n=r,s=i;else{for(var a=!1,c=r.child;c;){if(c===n){a=!0,n=r,s=i;break}if(c===s){a=!0,s=r,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,s=r;break}if(c===s){a=!0,s=i,n=r;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==s)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Rd={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nd.isDisabled&&Nd.supportsFiber)try{ue=Nd.inject(Rd),he=Nd}catch(Id){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,s="",r=ya,i=_a,l=ba;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yh(e,1,!1,null,0,n,s,r,i,l,0,null),e[Ie]=t.current,qu(e),new Ad(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var s=!1,r="",i=ya,l=_a,c=ba,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Yh(e,1,!0,t,0,s,r,i,l,c,0,u)).context=Xh(null),n=t.current,(r=ri(s=Ae(s=Ic()))).callback=null,ii(n,r,s),n=s,t.current.lanes=n,Te(t,n),ku(t),e[Ie]=t.current,qu(e),new Od(t)},t.version="19.1.1"},43:(e,t,n)=>{"use strict";e.exports=n(288)},45:(e,t,n)=>{var s=n(738).default;e.exports=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=Array(t);n<t;n++)s[n]=e[n];return s},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,n)=>{var s=n(79);e.exports=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s,r,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(s=i.call(n)).done)&&(a.push(s.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},210:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(829)),i=s(n(355));class o{constructor(e){let{headers:t={},schema:n,fetch:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=s}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new r.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new o(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:s=!1,count:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o;let a;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;n||s?(a=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;l.searchParams.append(t,n)})):(a="POST",c=t);const u=new Headers(this.headers);return r&&u.set("Prefer","count=".concat(r)),new i.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(o=this.fetch)&&void 0!==o?o:fetch})}}t.default=o},286:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(630)),i=s(n(611));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,s,r;let o=null,a=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(a="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const r=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),i=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");r&&i&&i.length>1&&(l=parseInt(i[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:"Results contain ".concat(a.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{o=JSON.parse(t),Array.isArray(o)&&404===e.status&&(a=[],o=null,c=200,u="OK")}catch(h){404===e.status&&""===t?(c=204,u="No Content"):o={message:t}}if(o&&this.isMaybeSingle&&(null===(r=null===o||void 0===o?void 0:o.details)||void 0===r?void 0:r.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&this.shouldThrowOnError)throw new i.default(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,s;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(s=null===e||void 0===e?void 0:e.code)&&void 0!==s?s:"")},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=_.prototype=new y;b.constructor=_,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},x=Object.prototype.hasOwnProperty;function S(e,t,s,r,i,o){return s=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==s?s:null,props:o}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(){}function O(e,t,r,i,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case s:u=!0;break;case d:return O((u=e._init)(e._payload),t,r,i,o)}}if(u)return o=o(e),u=""===i?"."+E(e,0):i,w(o)?(r="",null!=u&&(r=u.replace(C,"$&/")+"/"),O(o,t,r,"",function(e){return e})):null!=o&&(T(o)&&(l=o,c=r+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+u,o=S(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var h,f=""===i?".":i+":";if(w(e))for(var m=0;m<e.length;m++)u+=O(i=e[m],t,r,a=f+E(i,m),o);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=p&&h[p]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(i=e.next()).done;)u+=O(i=i.value,t,r,a=f+E(i,m++),o);else if("object"===a){if("function"===typeof e.then)return O(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(A,A):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,r,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function P(e,t,n){if(null==e)return e;var s=[],r=0;return O(e,s,"","",function(e){return t.call(n,e,r++)}),s}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function M(){}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=o,t.PureComponent=_,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var s=m({},e.props),r=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(r=""+t.key),t)!x.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(s[i]=t[i]);var i=arguments.length-2;if(1===i)s.children=n;else if(1<i){for(var o=Array(i),a=0;a<i;a++)o[a]=arguments[a+2];s.children=o}return S(e.type,r,void 0,0,0,s)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var s,r={},i=null;if(null!=t)for(s in void 0!==t.key&&(i=""+t.key),t)x.call(t,s)&&"key"!==s&&"__self"!==s&&"__source"!==s&&(r[s]=t[s]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];r.children=a}if(e&&e.defaultProps)for(s in o=e.defaultProps)void 0===r[s]&&(r[s]=o[s]);return S(e,i,void 0,0,0,r)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var s=e(),r=k.S;null!==r&&r(n,s),"object"===typeof s&&null!==s&&"function"===typeof s.then&&s.then(M,N)}catch(i){N(i)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var s=k.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.1.1"},355:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(374));class i extends r.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="";"plain"===s?r="pl":"phrase"===s?r="ph":"websearch"===s&&(r="w");const i=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(r,"fts").concat(i,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=n?"".concat(n,".or"):"or";return this.url.searchParams.append(s,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=i},374:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(286));class i extends r.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:r=s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=r?"".concat(r,".order"):"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,"".concat(o?"".concat(o,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(s,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:s=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r="undefined"===typeof s?"offset":"".concat(s,".offset"),i="undefined"===typeof s?"limit":"".concat(s,".limit");return this.url.searchParams.set(r,"".concat(e)),this.url.searchParams.set(i,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:i="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var o;const a=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=null!==(o=this.headers.get("Accept"))&&void 0!==o?o:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(i,'; for="').concat(l,'"; options=').concat(a,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=i},383:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},393:(e,t,n)=>{var s,r=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={};function r(e,t){if(!s[e]){s[e]={};for(var n=0;n<e.length;n++)s[e][e.charAt(n)]=n}return s[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var n=i._compress(e,6,function(e){return t.charAt(e)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,function(n){return r(t,e.charAt(n))})},compressToUTF16:function(t){return null==t?"":i._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),s=0,r=t.length;s<r;s++){var o=t.charCodeAt(s);n[2*s]=o>>>8,n[2*s+1]=o%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return i.decompress(t);for(var n=new Array(t.length/2),s=0,r=n.length;s<r;s++)n[s]=256*t[2*s]+t[2*s+1];var o=[];return n.forEach(function(t){o.push(e(t))}),i.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,function(t){return r(n,e.charAt(t))}))},compress:function(t){return i._compress(t,16,function(t){return e(t)})},_compress:function(e,t,n){if(null==e)return"";var s,r,i,o={},a={},l="",c="",u="",h=2,d=3,p=2,f=[],m=0,g=0;for(i=0;i<e.length;i+=1)if(l=e.charAt(i),Object.prototype.hasOwnProperty.call(o,l)||(o[l]=d++,a[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(o,c))u=c;else{if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(s=0;s<p;s++)m<<=1,g==t-1?(g=0,f.push(n(m)),m=0):g++;for(r=u.charCodeAt(0),s=0;s<8;s++)m=m<<1|1&r,g==t-1?(g=0,f.push(n(m)),m=0):g++,r>>=1}else{for(r=1,s=0;s<p;s++)m=m<<1|r,g==t-1?(g=0,f.push(n(m)),m=0):g++,r=0;for(r=u.charCodeAt(0),s=0;s<16;s++)m=m<<1|1&r,g==t-1?(g=0,f.push(n(m)),m=0):g++,r>>=1}0==--h&&(h=Math.pow(2,p),p++),delete a[u]}else for(r=o[u],s=0;s<p;s++)m=m<<1|1&r,g==t-1?(g=0,f.push(n(m)),m=0):g++,r>>=1;0==--h&&(h=Math.pow(2,p),p++),o[c]=d++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(s=0;s<p;s++)m<<=1,g==t-1?(g=0,f.push(n(m)),m=0):g++;for(r=u.charCodeAt(0),s=0;s<8;s++)m=m<<1|1&r,g==t-1?(g=0,f.push(n(m)),m=0):g++,r>>=1}else{for(r=1,s=0;s<p;s++)m=m<<1|r,g==t-1?(g=0,f.push(n(m)),m=0):g++,r=0;for(r=u.charCodeAt(0),s=0;s<16;s++)m=m<<1|1&r,g==t-1?(g=0,f.push(n(m)),m=0):g++,r>>=1}0==--h&&(h=Math.pow(2,p),p++),delete a[u]}else for(r=o[u],s=0;s<p;s++)m=m<<1|1&r,g==t-1?(g=0,f.push(n(m)),m=0):g++,r>>=1;0==--h&&(h=Math.pow(2,p),p++)}for(r=2,s=0;s<p;s++)m=m<<1|1&r,g==t-1?(g=0,f.push(n(m)),m=0):g++,r>>=1;for(;;){if(m<<=1,g==t-1){f.push(n(m));break}g++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,n,s){var r,i,o,a,l,c,u,h=[],d=4,p=4,f=3,m="",g=[],v={val:s(0),position:n,index:1};for(r=0;r<3;r+=1)h[r]=r;for(o=0,l=Math.pow(2,2),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=s(v.index++)),o|=(a>0?1:0)*c,c<<=1;switch(o){case 0:for(o=0,l=Math.pow(2,8),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=s(v.index++)),o|=(a>0?1:0)*c,c<<=1;u=e(o);break;case 1:for(o=0,l=Math.pow(2,16),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=s(v.index++)),o|=(a>0?1:0)*c,c<<=1;u=e(o);break;case 2:return""}for(h[3]=u,i=u,g.push(u);;){if(v.index>t)return"";for(o=0,l=Math.pow(2,f),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=s(v.index++)),o|=(a>0?1:0)*c,c<<=1;switch(u=o){case 0:for(o=0,l=Math.pow(2,8),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=s(v.index++)),o|=(a>0?1:0)*c,c<<=1;h[p++]=e(o),u=p-1,d--;break;case 1:for(o=0,l=Math.pow(2,16),c=1;c!=l;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=s(v.index++)),o|=(a>0?1:0)*c,c<<=1;h[p++]=e(o),u=p-1,d--;break;case 2:return g.join("")}if(0==d&&(d=Math.pow(2,f),f++),h[u])m=h[u];else{if(u!==p)return null;m=i+i.charAt(0)}g.push(m),h[p++]=i+m.charAt(0),i=m,0==--d&&(d=Math.pow(2,f),f++)}}};return i}();void 0===(s=function(){return r}.call(t,n,t,e))||(e.exports=s)},579:(e,t,n)=>{var s=n(736);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>o,Request:()=>a,Response:()=>l,default:()=>i,fetch:()=>r});var s=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const r=s.fetch,i=s.fetch.bind(s),o=s.Headers,a=s.Request,l=s.Response},672:(e,t,n)=>{"use strict";var s=n(43);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(r(299));return function(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==s?null:""+s,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,s=c(n,t.crossOrigin),r="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:s,integrity:r,fetchPriority:i}):"script"===n&&o.d.X(e,{crossOrigin:s,integrity:r,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,s=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:s,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},715:(e,t,n)=>{var s=n(987),r=n(156),i=n(122),o=n(752);e.exports=function(e,t){return s(e)||r(e,t)||i(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,n)=>{var s=n(738).default,r=n(45);e.exports=function(e){var t=r(e,"string");return"symbol"==s(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element");function s(e,t,s){var r=null;if(void 0!==s&&(r=""+s),void 0!==t.key&&(r=""+t.key),"key"in t)for(var i in s={},t)"key"!==i&&(s[i]=t[i]);else s=t;return t=s.ref,{$$typeof:n,type:e,key:r,ref:void 0!==t?t:null,props:s}}Symbol.for("react.fragment"),t.jsx=s,t.jsxs=s},829:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(355));t.default=class{constructor(e,t){let{headers:n={},schema:s,fetch:r}=t;this.url=e,this.headers=new Headers(n),this.schema=s,this.fetch=r}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t?"HEAD":"GET";let i=!1;const o=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer","count=".concat(n)),new r.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;if(t&&this.headers.append("Prefer","count=".concat(t)),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o;if(this.headers.append("Prefer","resolution=".concat(n?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer","count=".concat(s)),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(o=this.fetch)&&void 0!==o?o:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return t&&this.headers.append("Prefer","count=".concat(t)),new r.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new r.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,r=e[s];if(!(0<i(r,t)))break e;e[s]=t,e[n]=r,n=s}}function s(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,r=e.length,o=r>>>1;s<o;){var a=2*(s+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<r&&0>i(u,l)?(e[s]=u,e[c]=n,s=c):(e[s]=l,e[a]=n,s=a);else{if(!(c<r&&0>i(u,n)))break e;e[s]=u,e[c]=n,s=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=s(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=s(u)}}function k(e){if(g=!1,w(e),!m)if(null!==s(c))m=!0,S||(S=!0,x());else{var t=s(u);null!==t&&N(k,t.startTime-e)}}var x,S=!1,T=-1,C=5,E=-1;function A(){return!!v||!(t.unstable_now()-E<C)}function O(){if(v=!1,S){var e=t.unstable_now();E=e;var n=!0;try{e:{m=!1,g&&(g=!1,_(T),T=-1),f=!0;var i=p;try{t:{for(w(e),d=s(c);null!==d&&!(d.expirationTime>e&&A());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var a=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,w(e),n=!0;break t}d===s(c)&&r(c),w(e)}else r(c);d=s(c)}if(null!==d)n=!0;else{var l=s(u);null!==l&&N(k,l.startTime-e),n=!1}}break e}finally{d=null,p=i,f=!1}n=void 0}}finally{n?x():S=!1}}}if("function"===typeof b)x=function(){b(O)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=O,x=function(){R.postMessage(null)}}else x=function(){y(O,0)};function N(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>o?(e.sortIndex=i,n(u,e),null===s(c)&&e===s(u)&&(g?(_(T),T=-1):g=!0,N(k,i-o))):(e.sortIndex=a,n(c,e),m||f||(m=!0,S||(S=!0,x()))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},960:(e,t,n)=>{"use strict";e.exports=n(799)},980:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const r=s(n(210));t.PostgrestClient=r.default;const i=s(n(829));t.PostgrestQueryBuilder=i.default;const o=s(n(355));t.PostgrestFilterBuilder=o.default;const a=s(n(374));t.PostgrestTransformBuilder=a.default;const l=s(n(286));t.PostgrestBuilder=l.default;const c=s(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:r.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default}},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},998:function(e,t,n){!function(e,t,n,s){"use strict";var r=function(e,t,n){return{endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}},i=function(e,t,n){return{endTime:t,insertTime:n,type:"linearRampToValue",value:e}},o=function(e,t){return{startTime:t,type:"setValue",value:e}},a=function(e,t,n){return{duration:n,startTime:t,type:"setValueCurve",values:e}},l=function(e,t,n){var s=n.startTime,r=n.target,i=n.timeConstant;return r+(t-r)*Math.exp((s-e)/i)},c=function(e){return"exponentialRampToValue"===e.type},u=function(e){return"linearRampToValue"===e.type},h=function(e){return c(e)||u(e)},d=function(e){return"setValue"===e.type},p=function(e){return"setValueCurve"===e.type},f=function(e,t,n,s){var r=e[t];return void 0===r?s:h(r)||d(r)?r.value:p(r)?r.values[r.values.length-1]:l(n,f(e,t-1,r.startTime,s),r)},m=function(e,t,n,s,r){return void 0===n?[s.insertTime,r]:h(n)?[n.endTime,n.value]:d(n)?[n.startTime,n.value]:p(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,f(e,t-1,n.startTime,r)]},g=function(e){return"cancelAndHold"===e.type},v=function(e){return"cancelScheduledValues"===e.type},y=function(e){return g(e)||v(e)?e.cancelTime:c(e)||u(e)?e.endTime:e.startTime},_=function(e,t,n,s){var r=s.endTime,i=s.value;return n===i?i:0<n&&0<i||n<0&&i<0?n*Math.pow(i/n,(e-t)/(r-t)):0},b=function(e,t,n,s){return n+(e-t)/(s.endTime-t)*(s.value-n)},w=function(e,t){var n=Math.floor(t),s=Math.ceil(t);return n===s?e[n]:(1-(t-n))*e[n]+(1-(s-t))*e[s]},k=function(e,t){var n=t.duration,s=t.startTime,r=t.values,i=(e-s)/n*(r.length-1);return w(r,i)},x=function(e){return"setTarget"===e.type},S=function(){function e(t){n(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return s(e,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(e){var t=y(e);if(g(e)||v(e)){var n=this._automationEvents.findIndex(function(n){return v(e)&&p(n)?n.startTime+n.duration>=t:y(n)>=t}),s=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),g(e)){var l=this._automationEvents[this._automationEvents.length-1];if(void 0!==s&&h(s)){if(void 0!==l&&x(l))throw new Error("The internal list is malformed.");var d=void 0===l?s.insertTime:p(l)?l.startTime+l.duration:y(l),f=void 0===l?this._defaultValue:p(l)?l.values[l.values.length-1]:l.value,m=c(s)?_(t,d,f,s):b(t,d,f,s),w=c(s)?r(m,t,this._currenTime):i(m,t,this._currenTime);this._automationEvents.push(w)}if(void 0!==l&&x(l)&&this._automationEvents.push(o(this.getValue(t),t)),void 0!==l&&p(l)&&l.startTime+l.duration>t){var k=t-l.startTime,S=(l.values.length-1)/l.duration,T=Math.max(2,1+Math.ceil(k*S)),C=k/(T-1)*S,E=l.values.slice(0,T);if(C<1)for(var A=1;A<T;A+=1){var O=C*A%1;E[A]=l.values[A-1]*(1-O)+l.values[A]*O}this._automationEvents[this._automationEvents.length-1]=a(E,l.startTime,k)}}}else{var P=this._automationEvents.findIndex(function(e){return y(e)>t}),R=-1===P?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[P-1];if(void 0!==R&&p(R)&&y(R)+R.duration>t)return!1;var N=c(e)?r(e.value,e.endTime,this._currenTime):u(e)?i(e.value,t,this._currenTime):e;if(-1===P)this._automationEvents.push(N);else{if(p(e)&&t+e.duration>y(this._automationEvents[P]))return!1;this._automationEvents.splice(P,0,N)}}return!0}},{key:"flush",value:function(e){var t=this._automationEvents.findIndex(function(t){return y(t)>e});if(t>1){var n=this._automationEvents.slice(t-1),s=n[0];x(s)&&n.unshift(o(f(this._automationEvents,t-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(e){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents.findIndex(function(t){return y(t)>e}),s=this._automationEvents[n],r=(-1===n?this._automationEvents.length:n)-1,i=this._automationEvents[r];if(void 0!==i&&x(i)&&(void 0===s||!h(s)||s.insertTime>e))return l(e,f(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(void 0!==i&&d(i)&&(void 0===s||!h(s)))return i.value;if(void 0!==i&&p(i)&&(void 0===s||!h(s)||i.startTime+i.duration>e))return e<i.startTime+i.duration?k(e,i):i.values[i.values.length-1];if(void 0!==i&&h(i)&&(void 0===s||!h(s)))return i.value;if(void 0!==s&&c(s)){var o=m(this._automationEvents,r,i,s,this._defaultValue),a=t(o,2),g=a[0],v=a[1];return _(e,g,v,s)}if(void 0!==s&&u(s)){var w=m(this._automationEvents,r,i,s,this._defaultValue),S=t(w,2),T=S[0],C=S[1];return b(e,T,C,s)}return this._defaultValue}}])}(),T=function(e){return{cancelTime:e,type:"cancelAndHold"}},C=function(e){return{cancelTime:e,type:"cancelScheduledValues"}},E=function(e,t){return{endTime:t,type:"exponentialRampToValue",value:e}},A=function(e,t){return{endTime:t,type:"linearRampToValue",value:e}},O=function(e,t,n){return{startTime:t,target:e,timeConstant:n,type:"setTarget"}};e.AutomationEventList=S,e.createCancelAndHoldAutomationEvent=T,e.createCancelScheduledValuesAutomationEvent=C,e.createExponentialRampToValueAutomationEvent=E,e.createLinearRampToValueAutomationEvent=A,e.createSetTargetAutomationEvent=O,e.createSetValueAutomationEvent=o,e.createSetValueCurveAutomationEvent=a}(t,n(715),n(383),n(579))}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,s)=>(n.f[s](e,t),t),[])),n.u=e=>"static/js/"+e+".593297dc.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="beatlab:";n.l=(s,r,i,o)=>{if(e[s])e[s].push(r);else{var a,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==s||h.getAttribute("data-webpack")==t+i){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+i),a.src=s),e[s]=[r];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var r=e[s];if(delete e[s],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach(e=>e(n)),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/BeatLab/",(()=>{var e={792:0};n.f.j=(t,s)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)s.push(r[2]);else{var i=new Promise((n,s)=>r=e[t]=[n,s]);s.push(r[2]=i);var o=n.p+n.u(t),a=new Error;n.l(o,s=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}},"chunk-"+t,t)}};var t=(t,s)=>{var r,i,o=s[0],a=s[1],l=s[2],c=0;if(o.some(t=>0!==e[t])){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(t&&t(s);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},s=self.webpackChunkbeatlab=self.webpackChunkbeatlab||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),(()=>{"use strict";var e=n(43),t=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function r(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function i(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l=n(393),c=n.n(l);const u=e=>{try{const t=JSON.stringify(e),n=c().compressToBase64(t);return n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")}catch(t){return console.error("Failed to encode pattern payload:",t),""}},h=e=>{try{const t=(e=>{const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-(t.length%4||4))%4;return t+"=".repeat(n)})(e),n=c().decompressFromBase64(t);return n?JSON.parse(n):null}catch(t){return console.error("Failed to decode pattern payload:",t),null}},d="15.1.22";var p=n(998);const f=new WeakSet,m=new WeakMap,g=new WeakMap,v=new WeakMap,y=new WeakMap,_=new WeakMap,b=new WeakMap,w=new WeakMap,k=new WeakMap,x=new WeakMap,S={construct:()=>S},T=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,C=(e,t)=>{const n=[];let s=e.replace(/^[\s]+/,""),r=s.match(T);for(;null!==r;){const e=r[1].slice(1,-1),i=r[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());n.push(i),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(T)}return[n.join(";"),s]},E=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},A=e=>{if(!(e=>{try{new new Proxy(e,S)}catch(t){return!1}return!0})(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!==typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},O=(e,t)=>{const n=e.get(t);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},P=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[s]=n;return e.delete(s),s},R=(e,t,n,s)=>{const r=O(e,t),i=P(r,e=>e[0]===n&&e[1]===s);return 0===r.size&&e.delete(t),i},N=e=>O(b,e),M=e=>{if(f.has(e))throw new Error("The AudioNode is already stored.");f.add(e),N(e).forEach(e=>e(!0))},I=e=>"port"in e,D=e=>{if(!f.has(e))throw new Error("The AudioNode is not stored.");f.delete(e),N(e).forEach(e=>e(!1))},j=(e,t)=>{!I(e)&&t.every(e=>0===e.size)&&D(e)},L={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},F=(e,t)=>e.context===t,V=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch(t){return!1}return!0},q=()=>new DOMException("","IndexSizeError"),z=e=>{var t;e.getChannelData=(t=e.getChannelData,n=>{try{return t.call(e,n)}catch(s){if(12===s.code)throw q();throw s}})},U={numberOfChannels:1},B=-34028234663852886e22,W=-B,H=e=>f.has(e),G={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Q=e=>O(m,e),K=e=>O(v,e),$=(e,t)=>{const{activeInputs:n}=Q(e);n.forEach(n=>n.forEach(n=>{let[s]=n;t.includes(e)||$(s,[...t,e])}));const s=(e=>"playbackRate"in e)(e)?[e.playbackRate]:I(e)?Array.from(e.parameters.values()):(e=>"frequency"in e&&"gain"in e)(e)?[e.Q,e.detune,e.frequency,e.gain]:(e=>"offset"in e)(e)?[e.offset]:(e=>!("frequency"in e)&&"gain"in e)(e)?[e.gain]:(e=>"detune"in e&&"frequency"in e&&!("gain"in e))(e)?[e.detune,e.frequency]:(e=>"pan"in e)(e)?[e.pan]:[];for(const r of s){const e=K(r);void 0!==e&&e.activeInputs.forEach(e=>{let[n]=e;return $(n,t)})}H(e)&&D(e)},Y=e=>{$(e.destination,[])},X=e=>void 0===e||"number"===typeof e||"string"===typeof e&&("balanced"===e||"interactive"===e||"playback"===e),J=e=>"context"in e,Z=e=>J(e[0]),ee=(e,t,n,s)=>{for(const r of e)if(n(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},te=(e,t,n,s)=>{let[r,i]=n;ee(e,[t,r,i],e=>e[0]===t&&e[1]===r,s)},ne=(e,t,n)=>{let[s,r,i]=t;const o=e.get(s);void 0===o?e.set(s,new Set([[r,i]])):ee(o,[r,i],e=>e[0]===r,n)},se=e=>"inputs"in e,re=(e,t,n,s)=>{if(se(t)){const r=t.inputs[s];return e.connect(r,n,0),[r,n,0]}return e.connect(t,n,s),[t,n,s]},ie=(e,t,n)=>{for(const s of e)if(s[0]===t&&s[1]===n)return e.delete(s),s;return null},oe=(e,t)=>{if(!N(e).delete(t))throw new Error("Missing the expected event listener.")},ae=(e,t,n)=>{const s=O(e,t),r=P(s,e=>e[0]===n);return 0===s.size&&e.delete(t),r},le=(e,t,n,s)=>{se(t)?e.disconnect(t.inputs[s],n,0):e.disconnect(t,n,s)},ce=e=>O(g,e),ue=e=>O(y,e),he=e=>w.has(e),de=e=>!f.has(e),pe=(e,t)=>new Promise(n=>{if(null!==t)n(!0);else{const t=e.createScriptProcessor(256,1,1),s=e.createGain(),r=e.createBuffer(1,2,44100),i=r.getChannelData(0);i[0]=1,i[1]=1;const o=e.createBufferSource();o.buffer=r,o.loop=!0,o.connect(t).connect(e.destination),o.connect(s),o.disconnect(s),t.onaudioprocess=s=>{const r=s.inputBuffer.getChannelData(0);Array.prototype.some.call(r,e=>1===e)?n(!0):n(!1),o.stop(),t.onaudioprocess=null,o.disconnect(t),t.disconnect(e.destination)},o.start()}}),fe=(e,t)=>{const n=new Map;for(const s of e)for(const e of s){const t=n.get(e);n.set(e,void 0===t?1:t+1)}n.forEach((e,n)=>t(n,e))},me=e=>"context"in e,ge=e=>{const t=new Map;e.connect=(e=>function(n){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=me(n)?e(n,s,r):e(n,s),o=t.get(n);return void 0===o?t.set(n,[{input:r,output:s}]):o.every(e=>e.input!==r||e.output!==s)&&o.push({input:r,output:s}),i})(e.connect.bind(e)),e.disconnect=(n=>(s,r,i)=>{if(n.apply(e),void 0===s)t.clear();else if("number"===typeof s)for(const[e,n]of t){const r=n.filter(e=>e.output!==s);0===r.length?t.delete(e):t.set(e,r)}else if(t.has(s))if(void 0===r)t.delete(s);else{const e=t.get(s);if(void 0!==e){const n=e.filter(e=>e.output!==r&&(e.input!==i||void 0===i));0===n.length?t.delete(s):t.set(s,n)}}for(const[n,o]of t)o.forEach(t=>{me(n)?e.connect(n,t.output,t.input):e.connect(n,t.output)})})(e.disconnect)},ve=(e,t,n,s)=>{const{activeInputs:r,passiveInputs:i}=K(t),{outputs:o}=Q(e),a=N(e),l=o=>{const a=ce(e),l=ue(t);if(o){const t=ae(i,e,n);te(r,e,t,!1),s||he(e)||a.connect(l,n)}else{const t=((e,t,n)=>P(e,e=>e[0]===t&&e[1]===n))(r,e,n);ne(i,t,!1),s||he(e)||a.disconnect(l,n)}};return!!ee(o,[t,n],e=>e[0]===t&&e[1]===n,!0)&&(a.add(l),H(e)?te(r,e,[n,l],!0):ne(i,[e,n,l],!0),!0)},ye=(e,t,n,s,r)=>{const[i,o]=((e,t,n,s)=>{const{activeInputs:r,passiveInputs:i}=Q(t),o=ie(r[s],e,n);if(null===o)return[R(i,e,n,s)[2],!1];return[o[2],!0]})(e,n,s,r);if(null!==i&&(oe(e,i),!o||t||he(e)||le(ce(e),ce(n),s,r)),H(n)){const{activeInputs:e}=Q(n);j(n,e)}},_e=(e,t,n,s)=>{const[r,i]=((e,t,n)=>{const{activeInputs:s,passiveInputs:r}=K(t),i=ie(s,e,n);if(null===i)return[ae(r,e,n)[1],!1];return[i[2],!0]})(e,n,s);null!==r&&(oe(e,r),!i||t||he(e)||ce(e).disconnect(ue(n),s))};class be{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._map.forEach((n,s)=>e.call(t,n,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const we={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function ke(e,t,n,s,r){if("function"===typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],s,r);else{const i=e.getChannelData(s);if(0===t[n].byteLength)t[n]=i.slice(r,r+128);else{const e=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(e)}}}const xe=(e,t,n,s,r)=>{"function"===typeof e.copyToChannel?0!==t[n].byteLength&&e.copyToChannel(t[n],s,r):0!==t[n].byteLength&&e.getChannelData(s).set(t[n],r)},Se=(e,t)=>{const n=[];for(let s=0;s<e;s+=1){const e=[],r="number"===typeof t?t:t[s];for(let t=0;t<r;t+=1)e.push(new Float32Array(128));n.push(e)}return n},Te=async(e,t,n,s,r,i,o)=>{const l=null===t?128*Math.ceil(e.context.length/128):t.length,c=s.channelCount*s.numberOfInputs,u=r.reduce((e,t)=>e+t,0),h=0===u?null:n.createBuffer(u,l,n.sampleRate);if(void 0===i)throw new Error("Missing the processor constructor.");const d=Q(e),p=await((e,t)=>{const n=O(x,e),s=ce(t);return O(n,s)})(n,e),f=Se(s.numberOfInputs,s.channelCount),m=Se(s.numberOfOutputs,r),g=Array.from(e.parameters.keys()).reduce((e,t)=>a(a({},e),{},{[t]:new Float32Array(128)}),{});for(let a=0;a<l;a+=128){if(s.numberOfInputs>0&&null!==t)for(let e=0;e<s.numberOfInputs;e+=1)for(let n=0;n<s.channelCount;n+=1)ke(t,f[e],n,n,a);void 0!==i.parameterDescriptors&&null!==t&&i.parameterDescriptors.forEach((e,n)=>{let{name:s}=e;ke(t,g,s,c+n,a)});for(let e=0;e<s.numberOfInputs;e+=1)for(let t=0;t<r[e];t+=1)0===m[e][t].byteLength&&(m[e][t]=new Float32Array(128));try{const e=f.map((e,t)=>0===d.activeInputs[t].size?[]:e),t=o(a/n.sampleRate,n.sampleRate,()=>p.process(e,m,g));if(null!==h)for(let n=0,i=0;n<s.numberOfOutputs;n+=1){for(let e=0;e<r[n];e+=1)xe(h,m[n],e,i+e,a);i+=r[n]}if(!t)break}catch(v){e.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return h},Ce={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Ee={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Ae={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Oe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Pe={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Re=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise(s=>{const r=()=>{n.onmessage=null,t.close(),n.close(),s()};n.onmessage=()=>r();try{t.postMessage(e,[e])}catch(i){}finally{r()}})},Ne={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Me=(e,t,n)=>{const s=t[n];if(void 0===s)throw e();return s},Ie={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},De={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},je=()=>new DOMException("","InvalidStateError"),Le=()=>new DOMException("","InvalidAccessError"),Fe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Ve=(e,t,n,s,r,i,o,a,l,c,u)=>{const h=c.length;let d=a;for(let p=0;p<h;p+=1){let a=n[0]*c[p];for(let t=1;t<r;t+=1){const s=d-t&l-1;a+=n[t]*i[s],a-=e[t]*o[s]}for(let e=r;e<s;e+=1)a+=n[e]*i[d-e&l-1];for(let n=r;n<t;n+=1)a-=e[n]*o[d-n&l-1];i[d]=c[p],o[d]=a,d=d+1&l-1,u[p]=a}return d},qe={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},ze=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,()=>{});return void 0!==n&&(n.catch(()=>{}),!0)}catch(n){}return!1},Ue={numberOfChannels:1},Be=(e,t,n)=>{const s=t[n];void 0!==s&&s!==e[n]&&(e[n]=s)},We=(e,t)=>{Be(e,t,"channelCount"),Be(e,t,"channelCountMode"),Be(e,t,"channelInterpretation")},He=e=>"function"===typeof e.getFloatTimeDomainData,Ge=(e,t,n)=>{const s=t[n];void 0!==s&&s!==e[n].value&&(e[n].value=s)},Qe=e=>{e.start=(t=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if("number"===typeof r&&r<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,s,r)})(e.start)},Ke=e=>{var t;e.stop=(t=e.stop,function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})},$e=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),Ye=async(e,t)=>{const n=await(e=>new Promise((t,n)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=e=>{let{data:n}=e;s.close(),r.close(),t(n)},s.onmessageerror=e=>{let{data:t}=e;s.close(),r.close(),n(t)},r.postMessage(e)}))(t);return new e(n)},Xe=(e,t)=>{const n=e.createBiquadFilter();return We(n,t),Ge(n,t,"Q"),Ge(n,t,"detune"),Ge(n,t,"frequency"),Ge(n,t,"gain"),Be(n,t,"type"),n},Je=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return We(n,t),(e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw je()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw je()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw je()}})})(n),n};function Ze(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;n[s]=e[s]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const et=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),tt=["offset"],nt=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return We(n,t),Ge(n,t,"delayTime"),n},st=(e,t)=>{const n=e.createGain();return We(n,t),Ge(n,t,"gain"),n};function rt(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function it(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function ot(e,t){let n=[0,0];for(let s=e.length-1;s>=0;s-=1)n=it(n,t),n[0]+=e[s];return n}const at=["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"],lt=(e,t,n,s)=>e.createScriptProcessor(t,n,s),ct=["channelCount","channelCountMode","pan"],ut=["curve","oversample"],ht=()=>new DOMException("","NotSupportedError"),dt={numberOfChannels:1},pt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},ft={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},mt={disableNormalization:!1},gt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},vt=()=>new DOMException("","UnknownError"),yt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},_t=(e,t,n)=>void 0===e.copyFromChannel?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),bt=e=>{if(null===e)return!1;const t=e.length;return t%2!==0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},wt=(e,t,n,s)=>{let r=e;for(;!r.hasOwnProperty(t);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,{get:n(i),set:s(o)})},kt=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(s){if(9!==s.code)throw s;kt(e,t,n+1e-7)}},xt=e=>{const t=e.createOscillator();try{t.start(-1)}catch(n){return n instanceof RangeError}return!1},St=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch(s){return!1}},Tt=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(n){return n instanceof RangeError}return!1},Ct=(e,t)=>{const n=t.createGain();e.connect(n);const s=(t=>()=>{t.call(e,n),e.removeEventListener("ended",s)})(e.disconnect);e.addEventListener("ended",s),et(e,n),e.stop=(t=>{let s=!1;return function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(s)try{t.call(e,r)}catch(i){n.gain.setValueAtTime(0,r)}else t.call(e,r),s=!0}})(e.stop)},Et=(e,t)=>n=>{const s={value:e};return Object.defineProperties(n,{currentTarget:s,target:s}),"function"===typeof t?t.call(e,n):t.handleEvent.call(e,n)},At=(e=>(t,n,s,r)=>{let[i,o,a]=s;e(t[o],[n,i,a],e=>e[0]===n&&e[1]===i,r)})(ee),Ot=(e=>(t,n,s,r)=>{let[i,o,a]=s;const l=t.get(i);void 0===l?t.set(i,new Set([[o,n,a]])):e(l,[o,n,a],e=>e[0]===o&&e[1]===n,r)})(ee),Pt=(e=>(t,n,s,r)=>e(t[r],e=>e[0]===n&&e[1]===s))(P),Rt=new WeakMap,Nt=(e=>t=>{var n;return null!==(n=e.get(t))&&void 0!==n?n:0})(Rt),Mt=(It=new Map,Dt=new WeakMap,(e,t)=>{const n=Dt.get(e);if(void 0!==n)return n;const s=It.get(e);if(void 0!==s)return s;try{const n=t();return n instanceof Promise?(It.set(e,n),n.catch(()=>!1).then(t=>(It.delete(e),Dt.set(e,t),t))):(Dt.set(e,n),n)}catch(r){return Dt.set(e,!1),!1}});var It,Dt;const jt="undefined"===typeof window?null:window,Lt=((e,t)=>(n,s)=>{const r=n.createAnalyser();if(We(r,s),!(s.maxDecibels>s.minDecibels))throw t();return Be(r,s,"fftSize"),Be(r,s,"maxDecibels"),Be(r,s,"minDecibels"),Be(r,s,"smoothingTimeConstant"),e(He,()=>He(r))||(e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const s=Math.max(n.length,e.fftSize);for(let e=0;e<s;e+=1)t[e]=.0078125*(n[e]-128);return t}})(r),r})(Mt,q),Ft=(e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(Q),Vt=((e,t,n)=>async(s,r,i)=>{const o=e(s);await Promise.all(o.activeInputs.map((e,o)=>Array.from(e).map(async e=>{let[a,l]=e;const c=t(a),u=await c.render(a,r),h=s.context.destination;n(a)||s===h&&n(s)||u.connect(i,l,o)})).reduce((e,t)=>[...e,...t],[]))})(Q,Ft,he),qt=((e,t,n)=>()=>{const s=new WeakMap;return{render(r,i){const o=s.get(i);return void 0!==o?Promise.resolve(o):(async(r,i)=>{let o=t(r);if(!F(o,i)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=e(i,t)}return s.set(i,o),await n(r,i,o),o})(r,i)}}})(Lt,ce,Vt),zt=(Ut=_,e=>{const t=Ut.get(e);if(void 0===t)throw je();return t});var Ut;const Bt=(e=>null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null)(jt),Wt=(e=>t=>null!==e&&t instanceof e)(Bt),Ht=new WeakMap,Gt=(e=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(t,n,s){if(null!==n){let r=this._listeners.get(n);void 0===r&&(r=e(this,n),"function"===typeof n&&this._listeners.set(n,r)),this._nativeEventTarget.addEventListener(t,r,s)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const s=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===s?null:s,n)}})(Et),Qt=(e=>null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null)(jt),Kt=(e=>t=>null!==e&&t instanceof e)(Qt),$t=(e=>t=>null!==e&&"function"===typeof e.AudioNode&&t instanceof e.AudioNode)(jt),Yt=(e=>t=>null!==e&&"function"===typeof e.AudioParam&&t instanceof e.AudioParam)(jt),Xt=(e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null)(jt),Jt=((e,t,n,s,r,i,o,a,l,c,u,h,d,p,f,m)=>class extends c{constructor(t,s,r,i){super(r),this._context=t,this._nativeAudioNode=r;const o=u(t);h(o)&&!0!==n(pe,()=>pe(o,m))&&ge(r),g.set(this,r),b.set(this,new Set),"closed"!==t.state&&s&&M(this),e(this,i,r)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw r();const c=u(this._context),h=f(c);if(d(e)||p(e))throw i();if(J(e)){const r=ce(e);try{const t=re(this._nativeAudioNode,r,n,a),s=de(this);(h||s)&&this._nativeAudioNode.disconnect(...t),"closed"!==this.context.state&&!s&&de(e)&&M(e)}catch(g){if(12===g.code)throw i();throw g}if(t(this,e,n,a,h)){const t=l([this],e);fe(t,s(h))}return e}const m=ue(e);if("playbackRate"===m.name&&1024===m.maxValue)throw o();try{this._nativeAudioNode.connect(m,n),(h||de(this))&&this._nativeAudioNode.disconnect(m,n)}catch(g){if(12===g.code)throw i();throw g}if(ve(this,e,n,h)){const t=l([this],e);fe(t,s(h))}}disconnect(e,t,n){let s;const o=u(this._context),c=f(o);if(void 0===e)s=((e,t)=>{const n=Q(e),s=[];for(const r of n.outputs)Z(r)?ye(e,t,...r):_e(e,t,...r),s.push(r[0]);return n.outputs.clear(),s})(this,c);else if("number"===typeof e){if(e<0||e>=this.numberOfOutputs)throw r();s=((e,t,n)=>{const s=Q(e),r=[];for(const i of s.outputs)i[1]===n&&(Z(i)?ye(e,t,...i):_e(e,t,...i),r.push(i[0]),s.outputs.delete(i));return r})(this,c,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw r();if(J(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw r();if(s=((e,t,n,s,r)=>{const i=Q(e);return Array.from(i.outputs).filter(e=>e[0]===n&&(void 0===s||e[1]===s)&&(void 0===r||e[2]===r)).map(n=>(Z(n)?ye(e,t,...n):_e(e,t,...n),i.outputs.delete(n),n[0]))})(this,c,e,t,n),0===s.length)throw i()}for(const r of s){const e=l([this],r);fe(e,a)}}})((Zt=m,(e,t,n)=>{const s=[];for(let r=0;r<n.numberOfInputs;r+=1)s.push(new Set);Zt.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),((e,t,n,s,r,i,o,a,l,c,u,h,d)=>{const p=new WeakMap;return(f,m,g,v,y)=>{const{activeInputs:_,passiveInputs:b}=i(m),{outputs:w}=i(f),k=a(f),x=i=>{const a=l(m),c=l(f);if(i){const t=R(b,f,g,v);e(_,f,t,!1),y||h(f)||n(c,a,g,v),d(m)&&M(m)}else{const e=s(_,f,g,v);t(b,v,e,!1),y||h(f)||r(c,a,g,v);const n=o(m);if(0===n)u(m)&&j(m,_);else{const e=p.get(m);void 0!==e&&clearTimeout(e),p.set(m,setTimeout(()=>{u(m)&&j(m,_)},1e3*n))}}};return!!c(w,[m,g,v],e=>e[0]===m&&e[1]===g&&e[2]===v,!0)&&(k.add(x),u(f)?e(_,f,[g,v,x],!0):t(b,v,[f,g,x],!0),!0)}})(At,Ot,re,Pt,le,Q,Nt,N,ce,ee,H,he,de),Mt,((e,t,n,s,r,i)=>o=>(a,l)=>{const c=e.get(a);if(void 0===c){if(!o&&i(a)){const e=s(a),{outputs:i}=n(a);for(const n of i)if(Z(n)){const r=s(n[0]);t(e,r,n[1],n[2])}else{const t=r(n[0]);e.disconnect(t,n[1])}}e.set(a,l)}else e.set(a,c+l)})(w,le,Q,ce,ue,H),q,Le,ht,((e,t,n,s,r,i,o,a)=>(l,c)=>{const u=t.get(l);if(void 0===u)throw new Error("Missing the expected cycle count.");const h=i(l.context),d=a(h);if(u===c){if(t.delete(l),!d&&o(l)){const t=s(l),{outputs:i}=n(l);for(const n of i)if(Z(n)){const r=s(n[0]);e(t,r,n[1],n[2])}else{const e=r(n[0]);t.connect(e,n[1])}}}else t.set(l,u-c)})(re,w,Q,ce,ue,zt,H,Wt),((e,t,n)=>function s(r,i){const o=J(i)?i:n(e,i);if((e=>"delayTime"in e)(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=t(o);return Array.from(a).map(e=>s([...r,o],e[0])).reduce((e,t)=>e.concat(t),[])})(Ht,Q,O),Gt,zt,Kt,$t,Yt,Wt,Xt);var Zt;const en=((e,t,n,s,r,i)=>class extends e{constructor(e,n){const o=r(e),l=a(a({},L),n),c=s(o,l);super(e,!1,c,i(o)?t():null),this._nativeAnalyserNode=c}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}})(Jt,qt,q,Lt,zt,Wt),tn=new WeakSet,nn=(e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null)(jt),sn=(rn=new Uint32Array(1),e=>(rn[0]=e,rn[0]));var rn;const on=((e,t)=>n=>{n.copyFromChannel=function(s,r){const i=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(r);if(o>=n.numberOfChannels)throw t();const a=n.length,l=n.getChannelData(o),c=s.length;for(let e=i<0?-i:0;e+i<a&&e<c;e+=1)s[e]=l[e+i]},n.copyToChannel=function(s,r){const i=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(r);if(o>=n.numberOfChannels)throw t();const a=n.length,l=n.getChannelData(o),c=s.length;for(let e=i<0?-i:0;e+i<a&&e<c;e+=1)l[e+i]=s[e]}})(sn,q),an=(e=>t=>{t.copyFromChannel=(n=>function(s,r){const i=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(r);if(i<t.length)return n.call(t,s,o,i)})(t.copyFromChannel),t.copyToChannel=(n=>function(s,r){const i=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(r);if(i<t.length)return n.call(t,s,o,i)})(t.copyToChannel)})(sn),ln=((e,t,n,s,r,i,o,l)=>{let c=null;return class u{constructor(u){if(null===r)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:p}=a(a({},U),u);null===c&&(c=new r(1,1,44100));const f=null!==s&&t(i,i)?new s({length:h,numberOfChannels:d,sampleRate:p}):c.createBuffer(d,h,p);if(0===f.numberOfChannels)throw n();return"function"!==typeof f.copyFromChannel?(o(f),z(f)):t(V,()=>V(f))||l(f),e.add(f),f}static[Symbol.hasInstance](t){return null!==t&&"object"===typeof t&&Object.getPrototypeOf(t)===u.prototype||e.has(t)}}})(tn,Mt,ht,nn,Bt,(e=>()=>{if(null===e)return!1;try{new e({length:1,sampleRate:44100})}catch(t){return!1}return!0})(nn),on,an),cn=(e=>(t,n)=>{const s=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(t.destination);const r=()=>{n.removeEventListener("ended",r),n.disconnect(s),s.disconnect()};n.addEventListener("ended",r)})(st),un=((e,t,n)=>async(s,r,i)=>{const o=t(s);await Promise.all(Array.from(o.activeInputs).map(async t=>{let[s,o]=t;const a=e(s),l=await a.render(s,r);n(s)||l.connect(i,o)}))})(Ft,K,he),hn=(e=>(t,n,s)=>e(n,t,s))(un),dn=((e,t,n,s,r,i,o,a,l,c,u)=>(h,d)=>{const p=h.createBufferSource();return We(p,d),Ge(p,d,"playbackRate"),Be(p,d,"buffer"),Be(p,d,"loop"),Be(p,d,"loopEnd"),Be(p,d,"loopStart"),t(n,()=>n(h))||(e=>{e.start=(t=>{let n=!1;return function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(n)throw je();t.call(e,s,r,i),n=!0}})(e.start)})(p),t(s,()=>s(h))||l(p),t(r,()=>r(h))||c(p,h),t(i,()=>i(h))||Qe(p),t(o,()=>o(h))||u(p,h),t(a,()=>a(h))||Ke(p),e(h,p),p})(cn,Mt,e=>{const t=e.createBufferSource();t.start();try{t.start()}catch(n){return!0}return!1},e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch(s){return!1}return!0},e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch(n){return!1}return!0},xt,St,Tt,e=>{e.start=(t=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;const i=e.buffer,o=null===i?s:Math.min(i.duration,s);null!==i&&o>i.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,o,r)})(e.start)},(e=>(t,n)=>{const s=n.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=s),e(t,"buffer",e=>()=>{const n=e.call(t);return n===s?null:n},e=>n=>e.call(t,null===n?s:n))})(wt),Ct),pn=((e,t)=>(n,s,r)=>(e(s).replay(r),t(s,n,r)))((e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(K),un),fn=((e,t,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;return{set start(e){o=e},set stop(e){a=e},render(l,c){const u=i.get(c);return void 0!==u?Promise.resolve(u):(async(l,c)=>{let u=n(l);const h=F(u,c);if(!h){const e={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,loop:u.loop,loopEnd:u.loopEnd,loopStart:u.loopStart,playbackRate:u.playbackRate.value};u=t(c,e),null!==o&&u.start(...o),null!==a&&u.stop(a)}return i.set(c,u),h?await e(c,l.playbackRate,u.playbackRate):await s(c,l.playbackRate,u.playbackRate),await r(l,c,u),u})(l,c)}}})(hn,dn,ce,pn,Vt),mn=((e,t,n,s,r,i,o,a,l,c,u,h,d)=>function(f,m,g){let v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const _=g.value,b=new p.AutomationEventList(_),w=m?s(b):null,k={get defaultValue(){return _},get maxValue(){return null===v?g.maxValue:v},get minValue(){return null===y?g.minValue:y},get value(){return g.value},set value(e){g.value=e,k.setValueAtTime(e,f.context.currentTime)},cancelAndHoldAtTime(e){if("function"===typeof g.cancelAndHoldAtTime)null===w&&b.flush(f.context.currentTime),b.add(r(e)),g.cancelAndHoldAtTime(e);else{const t=Array.from(b).pop();null===w&&b.flush(f.context.currentTime),b.add(r(e));const n=Array.from(b).pop();g.cancelScheduledValues(e),t!==n&&void 0!==n&&("exponentialRampToValue"===n.type?g.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?g.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?g.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&g.setValueCurveAtTime(n.values,n.startTime,n.duration))}return k},cancelScheduledValues:e=>(null===w&&b.flush(f.context.currentTime),b.add(i(e)),g.cancelScheduledValues(e),k),exponentialRampToValueAtTime(e,t){if(0===e)throw new RangeError;if(!Number.isFinite(t)||t<0)throw new RangeError;const n=f.context.currentTime;return null===w&&b.flush(n),0===Array.from(b).length&&(b.add(c(_,n)),g.setValueAtTime(_,n)),b.add(o(e,t)),g.exponentialRampToValueAtTime(e,t),k},linearRampToValueAtTime(e,t){const n=f.context.currentTime;return null===w&&b.flush(n),0===Array.from(b).length&&(b.add(c(_,n)),g.setValueAtTime(_,n)),b.add(a(e,t)),g.linearRampToValueAtTime(e,t),k},setTargetAtTime:(e,t,n)=>(null===w&&b.flush(f.context.currentTime),b.add(l(e,t,n)),g.setTargetAtTime(e,t,n),k),setValueAtTime:(e,t)=>(null===w&&b.flush(f.context.currentTime),b.add(c(e,t)),g.setValueAtTime(e,t),k),setValueCurveAtTime(e,t,n){const s=e instanceof Float32Array?e:new Float32Array(e);if(null!==h&&"webkitAudioContext"===h.name){const e=t+n,r=f.context.sampleRate,i=Math.ceil(t*r),o=Math.floor(e*r),a=o-i,l=new Float32Array(a);for(let u=0;u<a;u+=1){const e=(s.length-1)/n*((i+u)/r-t),o=Math.floor(e),a=Math.ceil(e);l[u]=o===a?s[o]:(1-(e-o))*s[o]+(1-(a-e))*s[a]}null===w&&b.flush(f.context.currentTime),b.add(u(l,t,n)),g.setValueCurveAtTime(l,t,n);const c=o/r;c<e&&d(k,l[l.length-1],c),d(k,s[s.length-1],e)}else null===w&&b.flush(f.context.currentTime),b.add(u(s,t,n)),g.setValueCurveAtTime(s,t,n);return k}};return n.set(k,g),t.set(k,f),e(k,w),k})((gn=v,(e,t)=>{gn.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),Ht,y,e=>({replay(t){for(const n of e)if("exponentialRampToValue"===n.type){const{endTime:e,value:s}=n;t.exponentialRampToValueAtTime(s,e)}else if("linearRampToValue"===n.type){const{endTime:e,value:s}=n;t.linearRampToValueAtTime(s,e)}else if("setTarget"===n.type){const{startTime:e,target:s,timeConstant:r}=n;t.setTargetAtTime(s,e,r)}else if("setValue"===n.type){const{startTime:e,value:s}=n;t.setValueAtTime(s,e)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:s,values:r}=n;t.setValueCurveAtTime(r,s,e)}}}}),p.createCancelAndHoldAutomationEvent,p.createCancelScheduledValuesAutomationEvent,p.createExponentialRampToValueAutomationEvent,p.createLinearRampToValueAutomationEvent,p.createSetTargetAutomationEvent,p.createSetValueAutomationEvent,p.createSetValueCurveAutomationEvent,Qt,kt);var gn;const vn=((e,t,n,s,r,i,o,l)=>class extends e{constructor(e,s){const l=i(e),c=a(a({},G),s),u=r(l,c),h=o(l),d=h?t():null;super(e,!1,u,d),this._audioBufferSourceNodeRenderer=d,this._isBufferNullified=!1,this._isBufferSet=null!==c.buffer,this._nativeAudioBufferSourceNode=u,this._onended=null,this._playbackRate=n(this,h,u.playbackRate,W,B)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){if(this._nativeAudioBufferSourceNode.buffer=e,null!==e){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"===typeof e?l(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===t?e:n}get playbackRate(){return this._playbackRate}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(this._nativeAudioBufferSourceNode.start(e,t,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[e,t]:[e,t,n]),"closed"!==this.context.state){M(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),H(this)&&D(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}})(Jt,fn,mn,je,dn,zt,Wt,Et),yn=((e,t,n,s,r,i,o,a)=>class extends e{constructor(e,n){const s=i(e),l=o(s),c=r(s,n,l);super(e,!1,c,l?t(a):null),this._isNodeOfNativeOfflineAudioContext=l,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Jt,e=>{const t=new WeakMap;return{render(n,s){const r=t.get(s);return void 0!==r?Promise.resolve(r):(async(n,s)=>{const r=s.destination;return t.set(s,r),await e(n,s,r),r})(n,s)}}},q,je,((e,t)=>(n,s,r)=>{const i=n.destination;if(i.channelCount!==s)try{i.channelCount=s}catch(a){}r&&"explicit"!==i.channelCountMode&&(i.channelCountMode="explicit"),0===i.maxChannelCount&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=e(n,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return t(o,"channelCount",e=>()=>e.call(o),e=>t=>{e.call(o,t);try{i.channelCount=t}catch(n){if(t>i.maxChannelCount)throw n}}),t(o,"channelCountMode",e=>()=>e.call(o),e=>t=>{e.call(o,t),i.channelCountMode=t}),t(o,"channelInterpretation",e=>()=>e.call(o),e=>t=>{e.call(o,t),i.channelInterpretation=t}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o})(st,wt),zt,Wt,Vt),_n=((e,t,n,s,r)=>()=>{const i=new WeakMap;return{render(o,a){const l=i.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=F(l,a);if(!c){const e={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=t(a,e)}return i.set(a,l),c?(await e(a,o.Q,l.Q),await e(a,o.detune,l.detune),await e(a,o.frequency,l.frequency),await e(a,o.gain,l.gain)):(await s(a,o.Q,l.Q),await s(a,o.detune,l.detune),await s(a,o.frequency,l.frequency),await s(a,o.gain,l.gain)),await r(o,a,l),l})(o,a)}}})(hn,Xe,ce,pn,Vt),bn=(e=>(t,n)=>e.set(t,n))(Rt),wn=((e,t,n,s,r,i,o,l)=>class extends e{constructor(e,s){const c=i(e),u=a(a({},Ce),s),h=r(c,u),d=o(c);super(e,!1,h,d?n():null),this._Q=t(this,d,h.Q,W,B),this._detune=t(this,d,h.detune,1200*Math.log2(W),-1200*Math.log2(W)),this._frequency=t(this,d,h.frequency,e.sampleRate/2,0),this._gain=t(this,d,h.gain,40*Math.log10(W),B),this._nativeBiquadFilterNode=h,l(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n)}catch(r){if(11===r.code)throw s();throw r}if(e.length!==t.length||t.length!==n.length)throw s()}})(Jt,mn,_n,Le,Xe,zt,Wt,bn),kn=((e,t)=>(n,s,r)=>{const i=new Set;return n.connect=(r=>function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const c=0===i.size;if(t(o))return r.call(n,o,a,l),e(i,[o,a,l],e=>e[0]===o&&e[1]===a&&e[2]===l,!0),c&&s(),o;r.call(n,o,a),e(i,[o,a],e=>e[0]===o&&e[1]===a,!0),c&&s()})(n.connect),n.disconnect=(e=>(s,o,a)=>{const l=i.size>0;if(void 0===s)e.apply(n),i.clear();else if("number"===typeof s){e.call(n,s);for(const e of i)e[1]===s&&i.delete(e)}else{t(s)?e.call(n,s,o,a):e.call(n,s,o);for(const e of i)e[0]!==s||void 0!==o&&e[1]!==o||void 0!==a&&e[2]!==a||i.delete(e)}const c=0===i.size;l&&c&&r()})(n.disconnect),n})(ee,$t),xn=((e,t)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const r=n.createBufferSource();t(s,()=>{const e=s.numberOfInputs;for(let t=0;t<e;t+=1)r.connect(s,0,t)},()=>r.disconnect(s))})(je,kn),Sn=((e,t)=>(n,s)=>{const r=n.createChannelMerger(s.numberOfInputs);return null!==e&&"webkitAudioContext"===e.name&&t(n,r),We(r,s),r})(Qt,xn),Tn=((e,t,n)=>()=>{const s=new WeakMap;return{render(r,i){const o=s.get(i);return void 0!==o?Promise.resolve(o):(async(r,i)=>{let o=t(r);if(!F(o,i)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=e(i,t)}return s.set(i,o),await n(r,i,o),o})(r,i)}}})(Sn,ce,Vt),Cn=((e,t,n,s,r)=>class extends e{constructor(e,i){const o=s(e),l=a(a({},Ee),i);super(e,!1,n(o,l),r(o)?t():null)}})(Jt,Tn,Sn,zt,Wt),En=((e,t,n)=>()=>{const s=new WeakMap;return{render(r,i){const o=s.get(i);return void 0!==o?Promise.resolve(o):(async(r,i)=>{let o=t(r);if(!F(o,i)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=e(i,t)}return s.set(i,o),await n(r,i,o),o})(r,i)}}})(Je,ce,Vt),An=((e,t,n,s,r,i)=>class extends e{constructor(e,o){const l=s(e),c=i(a(a({},Ae),o));super(e,!1,n(l,c),r(l)?t():null)}})(Jt,En,Je,zt,Wt,e=>a(a({},e),{},{channelCount:e.numberOfOutputs})),On=((e,t,n,s)=>(r,i)=>{let{offset:o}=i,l=Ze(i,tt);const c=r.createBuffer(1,2,44100),u=t(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),h=n(r,a(a({},l),{},{gain:o})),d=c.getChannelData(0);d[0]=1,d[1]=1,u.buffer=c,u.loop=!0;const p={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(e){h.channelCount=e},get channelCountMode(){return h.channelCountMode},set channelCountMode(e){h.channelCountMode=e},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(e){h.channelInterpretation=e},get context(){return h.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get offset(){return h.gain},get onended(){return u.onended},set onended(e){u.onended=e},addEventListener(){return u.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return u.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return u.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u.start.call(u,e)},stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u.stop.call(u,e)}};return e(r,u),s(et(p,h),()=>u.connect(h),()=>u.disconnect(h))})(cn,dn,st,kn),Pn=((e,t,n,s,r)=>(i,o)=>{if(void 0===i.createConstantSource)return n(i,o);const a=i.createConstantSource();return We(a,o),Ge(a,o,"offset"),t(s,()=>s(i))||Qe(a),t(r,()=>r(i))||Ke(a),e(i,a),a})(cn,Mt,On,xt,Tt),Rn=((e,t,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;return{set start(e){o=e},set stop(e){a=e},render(l,c){const u=i.get(c);return void 0!==u?Promise.resolve(u):(async(l,c)=>{let u=n(l);const h=F(u,c);if(!h){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,offset:u.offset.value};u=t(c,e),null!==o&&u.start(o),null!==a&&u.stop(a)}return i.set(c,u),h?await e(c,l.offset,u.offset):await s(c,l.offset,u.offset),await r(l,c,u),u})(l,c)}}})(hn,Pn,ce,pn,Vt),Nn=((e,t,n,s,r,i,o)=>class extends e{constructor(e,o){const l=r(e),c=a(a({},Oe),o),u=s(l,c),h=i(l),d=h?n():null;super(e,!1,u,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=u,this._offset=t(this,h,u.offset,W,B),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){const t="function"===typeof e?o(this,e):null;this._nativeConstantSourceNode.onended=t;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===t?e:n}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=e),"closed"!==this.context.state){M(this);const e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),H(this)&&D(this)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}})(Jt,mn,Rn,Pn,zt,Wt,Et),Mn=((e,t)=>(n,s)=>{const r=n.createConvolver();if(We(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),Be(r,s,"buffer"),s.channelCount>2)throw e();if(t(r,"channelCount",e=>()=>e.call(r),t=>n=>{if(n>2)throw e();return t.call(r,n)}),"max"===s.channelCountMode)throw e();return t(r,"channelCountMode",e=>()=>e.call(r),t=>n=>{if("max"===n)throw e();return t.call(r,n)}),r})(ht,wt),In=((e,t,n)=>()=>{const s=new WeakMap;return{render(r,i){const o=s.get(i);return void 0!==o?Promise.resolve(o):(async(r,i)=>{let o=t(r);if(!F(o,i)){const t={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=e(i,t)}return s.set(i,o),se(o)?await n(r,i,o.inputs[0]):await n(r,i,o),o})(r,i)}}})(Mn,ce,Vt),Dn=((e,t,n,s,r,i)=>class extends e{constructor(e,o){const l=s(e),c=a(a({},Pe),o),u=n(l,c);super(e,!1,u,r(l)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=u,null!==c.buffer&&i(this,c.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}})(Jt,In,Mn,zt,Wt,bn),jn=((e,t,n,s,r)=>i=>{const o=new WeakMap;return{render(a,l){const c=o.get(l);return void 0!==c?Promise.resolve(c):(async(a,l)=>{let c=n(a);const u=F(c,l);if(!u){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,delayTime:c.delayTime.value,maxDelayTime:i};c=t(l,e)}return o.set(l,c),u?await e(l,a.delayTime,c.delayTime):await s(l,a.delayTime,c.delayTime),await r(a,l,c),c})(a,l)}}})(hn,nt,ce,pn,Vt),Ln=((e,t,n,s,r,i,o)=>class extends e{constructor(e,l){const c=r(e),u=a(a({},Ne),l),h=s(c,u),d=i(c);super(e,!1,h,d?n(u.maxDelayTime):null),this._delayTime=t(this,d,h.delayTime),o(this,u.maxDelayTime)}get delayTime(){return this._delayTime}})(Jt,mn,jn,nt,zt,Wt,bn),Fn=(e=>(t,n)=>{const s=t.createDynamicsCompressor();if(We(s,n),n.channelCount>2)throw e();if("max"===n.channelCountMode)throw e();return Ge(s,n,"attack"),Ge(s,n,"knee"),Ge(s,n,"ratio"),Ge(s,n,"release"),Ge(s,n,"threshold"),s})(ht),Vn=((e,t,n,s,r)=>()=>{const i=new WeakMap;return{render(o,a){const l=i.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=F(l,a);if(!c){const e={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=t(a,e)}return i.set(a,l),c?(await e(a,o.attack,l.attack),await e(a,o.knee,l.knee),await e(a,o.ratio,l.ratio),await e(a,o.release,l.release),await e(a,o.threshold,l.threshold)):(await s(a,o.attack,l.attack),await s(a,o.knee,l.knee),await s(a,o.ratio,l.ratio),await s(a,o.release,l.release),await s(a,o.threshold,l.threshold)),await r(o,a,l),l})(o,a)}}})(hn,Fn,ce,pn,Vt),qn=((e,t,n,s,r,i,o,l)=>class extends e{constructor(e,r){const c=i(e),u=a(a({},Ie),r),h=s(c,u),d=o(c);super(e,!1,h,d?n():null),this._attack=t(this,d,h.attack),this._knee=t(this,d,h.knee),this._nativeDynamicsCompressorNode=h,this._ratio=t(this,d,h.ratio),this._release=t(this,d,h.release),this._threshold=t(this,d,h.threshold),l(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"===typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Jt,mn,Vn,Fn,ht,zt,Wt,bn),zn=((e,t,n,s,r)=>()=>{const i=new WeakMap;return{render(o,a){const l=i.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=F(l,a);if(!c){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=t(a,e)}return i.set(a,l),c?await e(a,o.gain,l.gain):await s(a,o.gain,l.gain),await r(o,a,l),l})(o,a)}}})(hn,st,ce,pn,Vt),Un=((e,t,n,s,r,i)=>class extends e{constructor(e,o){const l=r(e),c=a(a({},De),o),u=s(l,c),h=i(l);super(e,!1,u,h?n():null),this._gain=t(this,h,u.gain,W,B)}get gain(){return this._gain}})(Jt,mn,zn,st,zt,Wt),Bn=((e,t,n,s)=>(r,i,o)=>{let{channelCount:a,channelCountMode:l,channelInterpretation:c,feedback:u,feedforward:h}=o;const d=$e(i,r.sampleRate),p=u instanceof Float64Array?u:new Float64Array(u),f=h instanceof Float64Array?h:new Float64Array(h),m=p.length,g=f.length,v=Math.min(m,g);if(0===m||m>20)throw s();if(0===p[0])throw t();if(0===g||g>20)throw s();if(0===f[0])throw t();if(1!==p[0]){for(let e=0;e<g;e+=1)f[e]/=p[0];for(let e=1;e<m;e+=1)p[e]/=p[0]}const y=n(r,d,a,a);y.channelCount=a,y.channelCountMode=l,y.channelInterpretation=c;const _=[],b=[],w=[];for(let e=0;e<a;e+=1){_.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),b.push(e),w.push(t)}y.onaudioprocess=e=>{const t=e.inputBuffer,n=e.outputBuffer,s=t.numberOfChannels;for(let r=0;r<s;r+=1){const e=t.getChannelData(r),s=n.getChannelData(r);_[r]=Ve(p,m,f,g,v,b[r],w[r],_[r],32,e,s)}};const k=r.sampleRate/2;return et({get bufferSize(){return d},get channelCount(){return y.channelCount},set channelCount(e){y.channelCount=e},get channelCountMode(){return y.channelCountMode},set channelCountMode(e){y.channelCountMode=e},get channelInterpretation(){return y.channelInterpretation},set channelInterpretation(e){y.channelInterpretation=e},get context(){return y.context},get inputs(){return[y]},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},addEventListener(){return y.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return y.dispatchEvent(arguments.length<=0?void 0:arguments[0])},getFrequencyResponse(t,n,s){if(t.length!==n.length||n.length!==s.length)throw e();const r=t.length;for(let e=0;e<r;e+=1){const r=-Math.PI*(t[e]/k),i=[Math.cos(r),Math.sin(r)],o=rt(ot(f,i),ot(p,i));n[e]=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s[e]=Math.atan2(o[1],o[0])}},removeEventListener(){return y.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},y)})(Le,je,lt,ht),Wn=((e,t,n,s)=>r=>e(ze,()=>ze(r))?Promise.resolve(e(s,s)).then(e=>{if(!e){const e=n(r,512,0,1);r.oncomplete=()=>{e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=()=>r.currentTime,e.connect(r.destination)}return r.startRendering()}):new Promise(e=>{const n=t(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=t=>{n.disconnect(),e(t.renderedBuffer)},n.connect(r.destination),r.startRendering()}))(Mt,st,lt,((e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),s=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(e=>{n.oncomplete=()=>{s.disconnect(),e(0!==n.currentTime)},n.startRendering()})})(st,Bt)),Hn=((e,t,n,s,r)=>(i,o)=>{const a=new WeakMap;let l=null;const c=async(c,u)=>{let h=null,d=t(c);const p=F(d,u);if(void 0===u.createIIRFilter?h=e(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(d=u.createIIRFilter(o,i)),a.set(u,null===h?d:h),null!==h){if(null===l){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new n(c.context.destination.channelCount,c.context.length,u.sampleRate);l=(async()=>{await s(c,e,e.destination);return((e,t,n,s)=>{const r=n instanceof Float64Array?n:new Float64Array(n),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,l=Math.min(o,a);if(1!==r[0]){for(let e=0;e<o;e+=1)i[e]/=r[0];for(let e=1;e<a;e+=1)r[e]/=r[0]}const c=new Float32Array(32),u=new Float32Array(32),h=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),d=e.numberOfChannels;for(let p=0;p<d;p+=1){const t=e.getChannelData(p),n=h.getChannelData(p);c.fill(0),u.fill(0),Ve(r,o,i,a,l,c,u,0,32,t,n)}return h})(await r(e),u,i,o)})()}const e=await l;return h.buffer=e,h.start(0),h}return await s(c,u,d),d};return{render(e,t){const n=a.get(t);return void 0!==n?Promise.resolve(n):c(e,t)}}})(dn,ce,Bt,Vt,Wn),Gn=(e=>(t,n,s)=>{if(void 0===t.createIIRFilter)return e(t,n,s);const r=t.createIIRFilter(s.feedforward,s.feedback);return We(r,s),r})(Bn),Qn=((e,t,n,s,r,i)=>class extends e{constructor(e,o){const l=s(e),c=r(l),u=a(a({},Fe),o),h=t(l,c?null:e.baseLatency,u);super(e,!1,h,c?n(u.feedback,u.feedforward):null),(e=>{var t;e.getFrequencyResponse=(t=e.getFrequencyResponse,(n,s,r)=>{if(n.length!==s.length||s.length!==r.length)throw Le();return t.call(e,n,s,r)})})(h),this._nativeIIRFilterNode=h,i(this,1)}getFrequencyResponse(e,t,n){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,n)}})(Jt,Gn,Hn,zt,Wt,bn),Kn=((e,t,n,s,r,i,o,a)=>(l,c)=>{const u=c.listener,{forwardX:h,forwardY:d,forwardZ:p,positionX:f,positionY:m,positionZ:g,upX:v,upY:y,upZ:_}=void 0===u.forwardX?(()=>{const h=new Float32Array(1),d=t(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),p=o(c);let f=!1,m=[0,0,-1,0,1,0],g=[0,0,0];const v=()=>{if(f)return;f=!0;const e=s(c,256,9,0);e.onaudioprocess=e=>{let{inputBuffer:t}=e;const n=[i(t,h,0),i(t,h,1),i(t,h,2),i(t,h,3),i(t,h,4),i(t,h,5)];n.some((e,t)=>e!==m[t])&&(u.setOrientation(...n),m=n);const s=[i(t,h,6),i(t,h,7),i(t,h,8)];s.some((e,t)=>e!==g[t])&&(u.setPosition(...s),g=s)},d.connect(e)},y=e=>t=>{t!==m[e]&&(m[e]=t,u.setOrientation(...m))},_=e=>t=>{t!==g[e]&&(g[e]=t,u.setPosition(...g))},b=(t,s,i)=>{const o=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:s});o.connect(d,0,t),o.start(),Object.defineProperty(o.offset,"defaultValue",{get:()=>s});const u=e({context:l},p,o.offset,W,B);var h,f,m,g,y,_,b;return a(u,"value",e=>()=>e.call(u),e=>t=>{try{e.call(u,t)}catch(n){if(9!==n.code)throw n}v(),p&&i(t)}),u.cancelAndHoldAtTime=(h=u.cancelAndHoldAtTime,p?()=>{throw r()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=h.apply(u,t);return v(),s}),u.cancelScheduledValues=(f=u.cancelScheduledValues,p?()=>{throw r()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=f.apply(u,t);return v(),s}),u.exponentialRampToValueAtTime=(m=u.exponentialRampToValueAtTime,p?()=>{throw r()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=m.apply(u,t);return v(),s}),u.linearRampToValueAtTime=(g=u.linearRampToValueAtTime,p?()=>{throw r()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=g.apply(u,t);return v(),s}),u.setTargetAtTime=(y=u.setTargetAtTime,p?()=>{throw r()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=y.apply(u,t);return v(),s}),u.setValueAtTime=(_=u.setValueAtTime,p?()=>{throw r()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=_.apply(u,t);return v(),s}),u.setValueCurveAtTime=(b=u.setValueCurveAtTime,p?()=>{throw r()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=b.apply(u,t);return v(),s}),u};return{forwardX:b(0,0,y(0)),forwardY:b(1,0,y(1)),forwardZ:b(2,-1,y(2)),positionX:b(6,0,_(0)),positionY:b(7,0,_(1)),positionZ:b(8,0,_(2)),upX:b(3,0,y(3)),upY:b(4,1,y(4)),upZ:b(5,0,y(5))}})():u;return{get forwardX(){return h},get forwardY(){return d},get forwardZ(){return p},get positionX(){return f},get positionY(){return m},get positionZ(){return g},get upX(){return v},get upY(){return y},get upZ(){return _}}})(mn,Sn,Pn,lt,ht,_t,Wt,wt),$n=new WeakMap,Yn=((e,t,n,s,r,i)=>class extends n{constructor(n,i){super(n),this._nativeContext=n,_.set(this,n),s(n)&&r.set(n,new Set),this._destination=new e(this,i),this._listener=t(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){const t="function"===typeof e?i(this,e):null;this._nativeContext.onstatechange=t;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===t?e:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(yn,Kn,Gt,Wt,$n,Et),Xn=((e,t,n,s,r,i)=>(o,a)=>{const l=o.createOscillator();return We(l,a),Ge(l,a,"detune"),Ge(l,a,"frequency"),void 0!==a.periodicWave?l.setPeriodicWave(a.periodicWave):Be(l,a,"type"),t(n,()=>n(o))||Qe(l),t(s,()=>s(o))||i(l,o),t(r,()=>r(o))||Ke(l),e(o,l),l})(cn,Mt,xt,St,Tt,Ct),Jn=((e,t,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,l=null;return{set periodicWave(e){o=e},set start(e){a=e},set stop(e){l=e},render(c,u){const h=i.get(u);return void 0!==h?Promise.resolve(h):(async(c,u)=>{let h=n(c);const d=F(h,u);if(!d){const e={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:null===o?void 0:o,type:h.type};h=t(u,e),null!==a&&h.start(a),null!==l&&h.stop(l)}return i.set(u,h),d?(await e(u,c.detune,h.detune),await e(u,c.frequency,h.frequency)):(await s(u,c.detune,h.detune),await s(u,c.frequency,h.frequency)),await r(c,u,h),h})(c,u)}}})(hn,Xn,ce,pn,Vt),Zn=((e,t,n,s,r,i,o)=>class extends e{constructor(e,o){const l=r(e),c=a(a({},pt),o),u=n(l,c),h=i(l),d=h?s():null,p=e.sampleRate/2;super(e,!1,u,d),this._detune=t(this,h,u.detune,153600,-153600),this._frequency=t(this,h,u.frequency,p,-p),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=d,null!==this._oscillatorNodeRenderer&&void 0!==c.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=c.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"===typeof e?o(this,e):null;this._nativeOscillatorNode.onended=t;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===t?e:n}get type(){return this._nativeOscillatorNode.type}set type(e){this._nativeOscillatorNode.type=e,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=e),"closed"!==this.context.state){M(this);const e=()=>{this._nativeOscillatorNode.removeEventListener("ended",e),H(this)&&D(this)};this._nativeOscillatorNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}})(Jt,mn,Xn,Jn,zt,Wt,Et),es=(e=>(t,n)=>{const s=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=t.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}})(dn),ts=((e,t,n,s,r)=>(i,o)=>{let{curve:l,oversample:c}=o,u=Ze(o,ut);const h=i.createWaveShaper(),d=i.createWaveShaper();We(h,u),We(d,u);const p=n(i,a(a({},u),{},{gain:1})),f=n(i,a(a({},u),{},{gain:-1})),m=n(i,a(a({},u),{},{gain:1})),g=n(i,a(a({},u),{},{gain:-1}));let v=null,y=!1,_=null;const b={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(e){p.channelCount=e,f.channelCount=e,h.channelCount=e,m.channelCount=e,d.channelCount=e,g.channelCount=e},get channelCountMode(){return h.channelCountMode},set channelCountMode(e){p.channelCountMode=e,f.channelCountMode=e,h.channelCountMode=e,m.channelCountMode=e,d.channelCountMode=e,g.channelCountMode=e},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(e){p.channelInterpretation=e,f.channelInterpretation=e,h.channelInterpretation=e,m.channelInterpretation=e,d.channelInterpretation=e,g.channelInterpretation=e},get context(){return h.context},get curve(){return _},set curve(n){if(null!==n&&n.length<2)throw t();if(null===n)h.curve=n,d.curve=n;else{const e=n.length,t=new Float32Array(e+2-e%2),s=new Float32Array(e+2-e%2);t[0]=n[0],s[0]=-n[e-1];const r=Math.ceil((e+1)/2),i=(e+1)/2-1;for(let o=1;o<r;o+=1){const a=o/r*i,l=Math.floor(a),c=Math.ceil(a);t[o]=l===c?n[l]:(1-(a-l))*n[l]+(1-(c-a))*n[c],s[o]=l===c?-n[e-1-l]:-(1-(a-l))*n[e-1-l]-(1-(c-a))*n[e-1-c]}t[r]=e%2===1?n[r-1]:(n[r-2]+n[r-1])/2,h.curve=t,d.curve=s}_=n,y&&(s(_)&&null===v?v=e(i,p):null!==v&&(v(),v=null))},get inputs(){return[p]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get oversample(){return h.oversample},set oversample(e){h.oversample=e,d.oversample=e},addEventListener(){return p.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return p.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return p.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};null!==l&&(b.curve=l instanceof Float32Array?l:new Float32Array(l)),c!==b.oversample&&(b.oversample=c);return r(et(b,m),()=>{p.connect(h).connect(m),p.connect(f).connect(d).connect(g).connect(m),y=!0,s(_)&&(v=e(i,p))},()=>{p.disconnect(h),h.disconnect(m),p.disconnect(f),f.disconnect(d),d.disconnect(g),g.disconnect(m),y=!1,null!==v&&(v(),v=null)})})(es,je,st,bt,kn),ns=((e,t,n,s,r,i,o)=>(a,l)=>{const c=a.createWaveShaper();if(null!==i&&"webkitAudioContext"===i.name&&void 0===a.createGain().gain.automationRate)return n(a,l);We(c,l);const u=null===l.curve||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(null!==u&&u.length<2)throw t();Be(c,{curve:u},"curve"),Be(c,l,"oversample");let h=null,d=!1;o(c,"curve",e=>()=>e.call(c),t=>n=>(t.call(c,n),d&&(s(n)&&null===h?h=e(a,c):s(n)||null===h||(h(),h=null)),n));return r(c,()=>{d=!0,s(c.curve)&&(h=e(a,c))},()=>{d=!1,null!==h&&(h(),h=null)})})(es,je,ts,bt,kn,Qt,wt),ss=((e,t,n,s,r,i,o,l,c,u)=>(h,d)=>{let{coneInnerAngle:p,coneOuterAngle:f,coneOuterGain:m,distanceModel:g,maxDistance:v,orientationX:y,orientationY:_,orientationZ:b,panningModel:w,positionX:k,positionY:x,positionZ:S,refDistance:T,rolloffFactor:C}=d,E=Ze(d,at);const A=h.createPanner();if(E.channelCount>2)throw o();if("max"===E.channelCountMode)throw o();We(A,E);const O={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},P=n(h,a(a({},O),{},{channelInterpretation:"speakers",numberOfInputs:6})),R=s(h,a(a({},E),{},{gain:1})),N=s(h,a(a({},O),{},{gain:1})),M=s(h,a(a({},O),{},{gain:0})),I=s(h,a(a({},O),{},{gain:0})),D=s(h,a(a({},O),{},{gain:0})),j=s(h,a(a({},O),{},{gain:0})),L=s(h,a(a({},O),{},{gain:0})),F=r(h,256,6,1),V=i(h,a(a({},O),{},{curve:new Float32Array([1,1]),oversample:"none"}));let q=[y,_,b],z=[k,x,S];const U=new Float32Array(1);F.onaudioprocess=e=>{let{inputBuffer:t}=e;const n=[c(t,U,0),c(t,U,1),c(t,U,2)];n.some((e,t)=>e!==q[t])&&(A.setOrientation(...n),q=n);const s=[c(t,U,3),c(t,U,4),c(t,U,5)];s.some((e,t)=>e!==z[t])&&(A.setPosition(...s),z=s)},Object.defineProperty(M.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"defaultValue",{get:()=>0});const B={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(e){if(e>2)throw o();R.channelCount=e,A.channelCount=e},get channelCountMode(){return A.channelCountMode},set channelCountMode(e){if("max"===e)throw o();R.channelCountMode=e,A.channelCountMode=e},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(e){R.channelInterpretation=e,A.channelInterpretation=e},get coneInnerAngle(){return A.coneInnerAngle},set coneInnerAngle(e){A.coneInnerAngle=e},get coneOuterAngle(){return A.coneOuterAngle},set coneOuterAngle(e){A.coneOuterAngle=e},get coneOuterGain(){return A.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();A.coneOuterGain=e},get context(){return A.context},get distanceModel(){return A.distanceModel},set distanceModel(e){A.distanceModel=e},get inputs(){return[R]},get maxDistance(){return A.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;A.maxDistance=e},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get orientationX(){return N.gain},get orientationY(){return M.gain},get orientationZ(){return I.gain},get panningModel(){return A.panningModel},set panningModel(e){A.panningModel=e},get positionX(){return D.gain},get positionY(){return j.gain},get positionZ(){return L.gain},get refDistance(){return A.refDistance},set refDistance(e){if(e<0)throw new RangeError;A.refDistance=e},get rolloffFactor(){return A.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;A.rolloffFactor=e},addEventListener(){return R.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return R.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return R.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};p!==B.coneInnerAngle&&(B.coneInnerAngle=p),f!==B.coneOuterAngle&&(B.coneOuterAngle=f),m!==B.coneOuterGain&&(B.coneOuterGain=m),g!==B.distanceModel&&(B.distanceModel=g),v!==B.maxDistance&&(B.maxDistance=v),y!==B.orientationX.value&&(B.orientationX.value=y),_!==B.orientationY.value&&(B.orientationY.value=_),b!==B.orientationZ.value&&(B.orientationZ.value=b),w!==B.panningModel&&(B.panningModel=w),k!==B.positionX.value&&(B.positionX.value=k),x!==B.positionY.value&&(B.positionY.value=x),S!==B.positionZ.value&&(B.positionZ.value=S),T!==B.refDistance&&(B.refDistance=T),C!==B.rolloffFactor&&(B.rolloffFactor=C),1===q[0]&&0===q[1]&&0===q[2]||A.setOrientation(...q),0===z[0]&&0===z[1]&&0===z[2]||A.setPosition(...z);return u(et(B,A),()=>{R.connect(A),e(R,V,0,0),V.connect(N).connect(P,0,0),V.connect(M).connect(P,0,1),V.connect(I).connect(P,0,2),V.connect(D).connect(P,0,3),V.connect(j).connect(P,0,4),V.connect(L).connect(P,0,5),P.connect(F).connect(h.destination)},()=>{R.disconnect(A),l(R,V,0,0),V.disconnect(N),N.disconnect(P),V.disconnect(M),M.disconnect(P),V.disconnect(I),I.disconnect(P),V.disconnect(D),D.disconnect(P),V.disconnect(j),j.disconnect(P),V.disconnect(L),L.disconnect(P),P.disconnect(F),F.disconnect(h.destination)})})(re,je,Sn,st,lt,ns,ht,le,_t,kn),rs=(e=>(t,n)=>{const s=t.createPanner();return void 0===s.orientationX?e(t,n):(We(s,n),Ge(s,n,"orientationX"),Ge(s,n,"orientationY"),Ge(s,n,"orientationZ"),Ge(s,n,"positionX"),Ge(s,n,"positionY"),Ge(s,n,"positionZ"),Be(s,n,"coneInnerAngle"),Be(s,n,"coneOuterAngle"),Be(s,n,"coneOuterGain"),Be(s,n,"distanceModel"),Be(s,n,"maxDistance"),Be(s,n,"panningModel"),Be(s,n,"refDistance"),Be(s,n,"rolloffFactor"),s)})(ss),is=((e,t,n,s,r,i,o,l,c,u)=>()=>{const h=new WeakMap;let d=null;return{render(p,f){const m=h.get(f);return void 0!==m?Promise.resolve(m):(async(p,f)=>{let m=null,g=i(p);const v={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},y=a(a({},v),{},{coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor}),_=F(g,f);if("bufferSize"in g)m=s(f,a(a({},v),{},{gain:1}));else if(!_){const e=a(a({},y),{},{orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value});g=r(f,e)}if(h.set(f,null===m?g:m),null!==m){if(null===d){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new o(6,p.context.length,f.sampleRate),s=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});s.connect(e.destination),d=(async()=>{const t=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(t,s)=>{const r=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===s?1:0});return await l(e,t,r.offset),r}));for(let e=0;e<6;e+=1)t[e].connect(s,0,e),t[e].start(0);return u(e)})()}const e=await d,i=s(f,a(a({},v),{},{gain:1}));await c(p,f,i);const h=[];for(let t=0;t<e.numberOfChannels;t+=1)h.push(e.getChannelData(t));let g=[h[0][0],h[1][0],h[2][0]],_=[h[3][0],h[4][0],h[5][0]],b=s(f,a(a({},v),{},{gain:1})),w=r(f,a(a({},y),{},{orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:_[0],positionY:_[1],positionZ:_[2]}));i.connect(b).connect(w.inputs[0]),w.connect(m);for(let t=128;t<e.length;t+=128){const e=[h[0][t],h[1][t],h[2][t]],n=[h[3][t],h[4][t],h[5][t]];if(e.some((e,t)=>e!==g[t])||n.some((e,t)=>e!==_[t])){g=e,_=n;const o=t/f.sampleRate;b.gain.setValueAtTime(0,o),b=s(f,a(a({},v),{},{gain:0})),w=r(f,a(a({},y),{},{orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:_[0],positionY:_[1],positionZ:_[2]})),b.gain.setValueAtTime(1,o),i.connect(b).connect(w.inputs[0]),w.connect(m)}}return m}return _?(await e(f,p.orientationX,g.orientationX),await e(f,p.orientationY,g.orientationY),await e(f,p.orientationZ,g.orientationZ),await e(f,p.positionX,g.positionX),await e(f,p.positionY,g.positionY),await e(f,p.positionZ,g.positionZ)):(await l(f,p.orientationX,g.orientationX),await l(f,p.orientationY,g.orientationY),await l(f,p.orientationZ,g.orientationZ),await l(f,p.positionX,g.positionX),await l(f,p.positionY,g.positionY),await l(f,p.positionZ,g.positionZ)),se(g)?await c(p,f,g.inputs[0]):await c(p,f,g),g})(p,f)}}})(hn,Sn,Pn,st,rs,ce,Bt,pn,Vt,Wn),os=((e,t,n,s,r,i,o)=>class extends e{constructor(e,l){const c=r(e),u=a(a({},ft),l),h=n(c,u),d=i(c);super(e,!1,h,d?s():null),this._nativePannerNode=h,this._orientationX=t(this,d,h.orientationX,W,B),this._orientationY=t(this,d,h.orientationY,W,B),this._orientationZ=t(this,d,h.orientationZ,W,B),this._positionX=t(this,d,h.positionX,W,B),this._positionY=t(this,d,h.positionY,W,B),this._positionZ=t(this,d,h.positionZ,W,B),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}})(Jt,mn,rs,is,zt,Wt,bn),as=(e=>(t,n)=>{let{disableNormalization:s,imag:r,real:i}=n;const o=r instanceof Float32Array?r:new Float32Array(r),a=i instanceof Float32Array?i:new Float32Array(i),l=t.createPeriodicWave(a,o,{disableNormalization:s});if(Array.from(r).length<2)throw e();return l})(q),ls=((e,t,n,s)=>class r{constructor(r,i){const o=t(r),l=s(a(a({},mt),i)),c=e(o,l);return n.add(c),c}static[Symbol.hasInstance](e){return null!==e&&"object"===typeof e&&Object.getPrototypeOf(e)===r.prototype||n.has(e)}})(as,zt,new WeakSet,e=>{const{imag:t,real:n}=e;return a(a({},e),{},void 0===t?void 0===n?{imag:[0,0],real:[0,0]}:{imag:Array.from(n,()=>0),real:n}:void 0===n?{imag:t,real:Array.from(t,()=>0)}:{imag:t,real:n})}),cs=((e,t,n,s,r,i)=>{const o=16385,l=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},h=a(a({},u),{},{oversample:"none"}),d=(e,i,d,p,f)=>{if(1===i)return((e,t,r,i)=>{const d=new Float32Array(o),p=new Float32Array(o);for(let n=0;n<o;n+=1){const e=n/16384*c;d[n]=Math.cos(e),p[n]=Math.sin(e)}const f=n(e,a(a({},u),{},{gain:0})),m=s(e,a(a({},h),{},{curve:d})),g=s(e,a(a({},h),{},{curve:l})),v=n(e,a(a({},u),{},{gain:0})),y=s(e,a(a({},h),{},{curve:p}));return{connectGraph(){t.connect(f),t.connect(void 0===g.inputs?g:g.inputs[0]),t.connect(v),g.connect(r),r.connect(void 0===m.inputs?m:m.inputs[0]),r.connect(void 0===y.inputs?y:y.inputs[0]),m.connect(f.gain),y.connect(v.gain),f.connect(i,0,0),v.connect(i,0,1)},disconnectGraph(){t.disconnect(f),t.disconnect(void 0===g.inputs?g:g.inputs[0]),t.disconnect(v),g.disconnect(r),r.disconnect(void 0===m.inputs?m:m.inputs[0]),r.disconnect(void 0===y.inputs?y:y.inputs[0]),m.disconnect(f.gain),y.disconnect(v.gain),f.disconnect(i,0,0),v.disconnect(i,0,1)}}})(e,d,p,f);if(2===i)return((e,r,i,d)=>{const p=new Float32Array(o),f=new Float32Array(o),m=new Float32Array(o),g=new Float32Array(o),v=Math.floor(8192.5);for(let t=0;t<o;t+=1)if(t>v){const e=(t-v)/(16384-v)*c;p[t]=Math.cos(e),f[t]=Math.sin(e),m[t]=0,g[t]=1}else{const e=t/(16384-v)*c;p[t]=1,f[t]=0,m[t]=Math.cos(e),g[t]=Math.sin(e)}const y=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),_=n(e,a(a({},u),{},{gain:0})),b=s(e,a(a({},h),{},{curve:p})),w=n(e,a(a({},u),{},{gain:0})),k=s(e,a(a({},h),{},{curve:f})),x=s(e,a(a({},h),{},{curve:l})),S=n(e,a(a({},u),{},{gain:0})),T=s(e,a(a({},h),{},{curve:m})),C=n(e,a(a({},u),{},{gain:0})),E=s(e,a(a({},h),{},{curve:g}));return{connectGraph(){r.connect(y),r.connect(void 0===x.inputs?x:x.inputs[0]),y.connect(_,0),y.connect(w,0),y.connect(S,1),y.connect(C,1),x.connect(i),i.connect(void 0===b.inputs?b:b.inputs[0]),i.connect(void 0===k.inputs?k:k.inputs[0]),i.connect(void 0===T.inputs?T:T.inputs[0]),i.connect(void 0===E.inputs?E:E.inputs[0]),b.connect(_.gain),k.connect(w.gain),T.connect(S.gain),E.connect(C.gain),_.connect(d,0,0),S.connect(d,0,0),w.connect(d,0,1),C.connect(d,0,1)},disconnectGraph(){r.disconnect(y),r.disconnect(void 0===x.inputs?x:x.inputs[0]),y.disconnect(_,0),y.disconnect(w,0),y.disconnect(S,1),y.disconnect(C,1),x.disconnect(i),i.disconnect(void 0===b.inputs?b:b.inputs[0]),i.disconnect(void 0===k.inputs?k:k.inputs[0]),i.disconnect(void 0===T.inputs?T:T.inputs[0]),i.disconnect(void 0===E.inputs?E:E.inputs[0]),b.disconnect(_.gain),k.disconnect(w.gain),T.disconnect(S.gain),E.disconnect(C.gain),_.disconnect(d,0,0),S.disconnect(d,0,0),w.disconnect(d,0,1),C.disconnect(d,0,1)}}})(e,d,p,f);throw r()};return(t,s)=>{let{channelCount:o,channelCountMode:l,pan:c}=s,u=Ze(s,ct);if("max"===l)throw r();const h=e(t,a(a({},u),{},{channelCount:1,channelCountMode:l,numberOfInputs:2})),p=n(t,a(a({},u),{},{channelCount:o,channelCountMode:l,gain:1})),f=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:c});let{connectGraph:m,disconnectGraph:g}=d(t,o,p,f,h);Object.defineProperty(f.gain,"defaultValue",{get:()=>0}),Object.defineProperty(f.gain,"maxValue",{get:()=>1}),Object.defineProperty(f.gain,"minValue",{get:()=>-1});const v={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(e){p.channelCount!==e&&(y&&g(),({connectGraph:m,disconnectGraph:g}=d(t,e,p,f,h)),y&&m()),p.channelCount=e},get channelCountMode(){return p.channelCountMode},set channelCountMode(e){if("clamped-max"===e||"max"===e)throw r();p.channelCountMode=e},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(e){p.channelInterpretation=e},get context(){return p.context},get inputs(){return[p]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get pan(){return f.gain},addEventListener(){return p.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return p.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return p.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};let y=!1;return i(et(v,h),()=>{m(),y=!0},()=>{g(),y=!1})}})(Sn,Je,st,ns,ht,kn),us=((e,t)=>(n,s)=>{const r=s.channelCountMode;if("clamped-max"===r)throw t();if(void 0===n.createStereoPanner)return e(n,s);const i=n.createStereoPanner();return We(i,s),Ge(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:e=>{if(e!==r)throw t()}}),i})(cs,ht),hs=((e,t,n,s,r)=>()=>{const i=new WeakMap;return{render(o,a){const l=i.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=F(l,a);if(!c){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=t(a,e)}return i.set(a,l),c?await e(a,o.pan,l.pan):await s(a,o.pan,l.pan),se(l)?await r(o,a,l.inputs[0]):await r(o,a,l),l})(o,a)}}})(hn,us,ce,pn,Vt),ds=((e,t,n,s,r,i)=>class extends e{constructor(e,o){const l=r(e),c=a(a({},gt),o),u=n(l,c),h=i(l);super(e,!1,u,h?s():null),this._pan=t(this,h,u.pan)}get pan(){return this._pan}})(Jt,mn,us,hs,zt,Wt),ps=((e,t,n)=>()=>{const s=new WeakMap;return{render(r,i){const o=s.get(i);return void 0!==o?Promise.resolve(o):(async(r,i)=>{let o=t(r);if(!F(o,i)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=e(i,t)}return s.set(i,o),se(o)?await n(r,i,o.inputs[0]):await n(r,i,o),o})(r,i)}}})(ns,ce,Vt),fs=((e,t,n,s,r,i,o)=>class extends e{constructor(e,t){const l=r(e),c=a(a({},yt),t),u=n(l,c);super(e,!0,u,i(l)?s():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=u,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}})(Jt,je,ns,ps,zt,Wt,bn),ms=(e=>null!==e&&e.isSecureContext)(jt),gs=(e=>(t,n,s)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(t*n)},currentTime:{configurable:!0,get:()=>t}});try{return s()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}})(jt),vs=new WeakMap,ys=((e,t)=>n=>{let s=e.get(n);if(void 0!==s)return s;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new t(1,1,44100),e.set(n,s),s})(vs,Bt),_s=ms?((e,t,n,s,r,i,o,a,l,c,u,h,d)=>{let p=0;return function(f,m){let g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{credentials:"omit"};const v=u.get(f);if(void 0!==v&&v.has(m))return Promise.resolve();const y=c.get(f);if(void 0!==y){const e=y.get(m);if(void 0!==e)return e}const _=i(f),b=void 0===_.audioWorklet?r(m).then(e=>{let[t,s]=e;const[r,i]=C(t,s),o="".concat(r,";((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{").concat(i,"\n})})(window,'_AWGS')");return n(o)}).then(()=>{const e=d._AWGS.pop();if(void 0===e)throw new SyntaxError;s(_.currentTime,_.sampleRate,()=>e(class{},void 0,(e,n)=>{if(""===e.trim())throw t();const s=k.get(_);if(void 0!==s){if(s.has(e))throw t();A(n),E(n.parameterDescriptors),s.set(e,n)}else A(n),E(n.parameterDescriptors),k.set(_,new Map([[e,n]]))},_.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(e(h,h))]).then(e=>{let[[t,n],s]=e;const r=p+1;p=r;const[i,c]=C(t,n),u=s?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}",h=s?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));",d=s?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));",f="".concat(i,";((AudioWorkletProcessor,registerProcessor)=>{").concat(c,"\n})(").concat(u,",(n,p)=>registerProcessor(n,class extends p{").concat(h,"process(i,o,p){").concat(d,"return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac").concat(r,"',class extends AudioWorkletProcessor{process(){return !1}})"),m=new Blob([f],{type:"application/javascript; charset=utf-8"}),v=URL.createObjectURL(m);return _.audioWorklet.addModule(v,g).then(()=>{if(a(_))return _;const e=o(_);return e.audioWorklet.addModule(v,g).then(()=>e)}).then(e=>{if(null===l)throw new SyntaxError;try{new l(e,"__sac".concat(r))}catch(t){throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(v))});return void 0===y?c.set(f,new Map([[m,b]])):y.set(m,b),b.then(()=>{const e=u.get(f);void 0===e?u.set(f,new Set([m])):e.add(m)}).finally(()=>{const e=c.get(f);void 0!==e&&e.delete(m)}),b}})(Mt,ht,(e=>t=>new Promise((n,s)=>{if(null===e)return void s(new SyntaxError);const r=e.document.head;if(null===r)s(new SyntaxError);else{const i=e.document.createElement("script"),o=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(o),l=e.onerror,c=()=>{e.onerror=l,URL.revokeObjectURL(a)};e.onerror=(t,n,r,i,o)=>n===a||n===e.location.href&&1===r&&1===i?(c(),s(o),!1):null!==l?l(t,n,r,i,o):void 0,i.onerror=()=>{c(),s(new SyntaxError)},i.onload=()=>{c(),n()},i.src=a,i.type="module",r.appendChild(i)}}))(jt),gs,(e=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch(n){}throw e()})(()=>new DOMException("","AbortError")),zt,ys,Wt,Xt,new WeakMap,new WeakMap,((e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),r=URL.createObjectURL(n);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const t=new e(s,"a",{numberOfOutputs:0}),n=s.createOscillator();t.port.onmessage=()=>i=!0,t.onprocessorerror=()=>o=!0,n.connect(t),n.start(0),await s.startRendering(),await new Promise(e=>setTimeout(e))}catch(a){}finally{URL.revokeObjectURL(r)}return i&&!o})(Xt,Bt),jt):void 0,bs=((e,t)=>n=>e(n)||t(n))(Kt,Wt),ws=((e,t,n,s,r,i,o,a,l,c,u)=>(h,d)=>{const p=o(h)?h:i(h);if(r.has(d)){const e=n();return Promise.reject(e)}try{r.add(d)}catch(f){}return t(l,()=>l(p))?p.decodeAudioData(d).then(n=>(Re(d).catch(()=>{}),t(a,()=>a(n))||u(n),e.add(n),n)):new Promise((t,n)=>{const r=async()=>{try{await Re(d)}catch(e){}},i=e=>{n(e),r()};try{p.decodeAudioData(d,n=>{"function"!==typeof n.copyFromChannel&&(c(n),z(n)),e.add(n),r().then(()=>t(n))},e=>{i(null===e?s():e)})}catch(o){i(o)}})})(tn,Mt,()=>new DOMException("","DataCloneError"),()=>new DOMException("","EncodingError"),new WeakSet,zt,bs,V,ze,on,an),ks=((e,t,n,s,r,i,o,l,c,u,h,d,p,f,m,g,v,y,_,b)=>class extends m{constructor(t,n){super(t,n),this._nativeContext=t,this._audioWorklet=void 0===e?void 0:{addModule:(t,n)=>e(this,t,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new r(this)}createBuffer(e,t,s){return new n({length:t,numberOfChannels:e,sampleRate:s})}createBufferSource(){return new s(this)}createChannelMerger(){return new i(this,{numberOfInputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createChannelSplitter(){return new o(this,{numberOfOutputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createConstantSource(){return new l(this)}createConvolver(){return new c(this)}createDelay(){return new h(this,{maxDelayTime:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1})}createDynamicsCompressor(){return new d(this)}createGain(){return new p(this)}createIIRFilter(e,t){return new f(this,{feedback:t,feedforward:e})}createOscillator(){return new g(this)}createPanner(){return new v(this)}createPeriodicWave(e,t){return new y(this,a(a({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableNormalization:!1}),{},{imag:t,real:e}))}createStereoPanner(){return new _(this)}createWaveShaper(){return new b(this)}decodeAudioData(e,t,n){return u(this._nativeContext,e).then(e=>("function"===typeof t&&t(e),e),e=>{throw"function"===typeof n&&n(e),e})}})(_s,en,ln,vn,wn,Cn,An,Nn,Dn,ws,Ln,qn,Un,Qn,Yn,Zn,os,ls,ds,fs),xs=((e,t,n,s)=>class extends e{constructor(e,r){const i=n(e),o=t(i,r);if(s(i))throw TypeError();super(e,!0,o,null),this._nativeMediaElementAudioSourceNode=o}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(Jt,(e,t)=>e.createMediaElementSource(t.mediaElement),zt,Wt),Ss=((e,t,n,s)=>class extends e{constructor(e,r){const i=n(e);if(s(i))throw new TypeError;const o=a(a({},qe),r),l=t(i,o);super(e,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(Jt,(e,t)=>{const n=e.createMediaStreamDestination();return We(n,t),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},zt,Wt),Ts=((e,t,n,s)=>class extends e{constructor(e,r){const i=n(e),o=t(i,r);if(s(i))throw new TypeError;super(e,!0,o,null),this._nativeMediaStreamAudioSourceNode=o}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(Jt,(e,t)=>{let{mediaStream:n}=t;const s=n.getAudioTracks();s.sort((e,t)=>e.id<t.id?-1:e.id>t.id?1:0);const r=s.slice(0,1),i=e.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(i,"mediaStream",{value:n}),i},zt,Wt),Cs=((e,t)=>(n,s)=>{let{mediaStreamTrack:r}=s;if("function"===typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(r);const i=new MediaStream([r]),o=n.createMediaStreamSource(i);if("audio"!==r.kind)throw e();if(t(n))throw new TypeError;return o})(je,Wt),Es=((e,t,n)=>class extends e{constructor(e,s){const r=n(e);super(e,!0,t(r,s),null)}})(Jt,Cs,zt),As=((e,t,n,s,r,i,o,a,l)=>class extends e{constructor(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null===l)throw new Error("Missing the native AudioContext constructor.");try{e=new l(t)}catch(o){if(12===o.code&&"sampleRate is not in range"===o.message)throw n();throw o}if(null===e)throw s();if(!X(t.latencyHint))throw new TypeError("The provided value '".concat(t.latencyHint,"' is not a valid enum value of type AudioContextLatencyCategory."));if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:r}=t,{sampleRate:i}=e;if(this._baseLatency="number"===typeof e.baseLatency?e.baseLatency:"balanced"===r?512/i:"interactive"===r||void 0===r?256/i:"playback"===r?1024/i:128*Math.max(2,Math.min(128,Math.round(r*i/128)))/i,this._nativeAudioContext=e,"webkitAudioContext"===l.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw t()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Y(this)}))}createMediaElementSource(e){return new r(this,{mediaElement:e})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(e){return new o(this,{mediaStream:e})}createMediaStreamTrackSource(e){return new a(this,{mediaStreamTrack:e})}resume(){return"suspended"===this._state?new Promise((e,t)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?e():this.resume().then(e,t)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(e=>{if(void 0===e||15===e.code)throw t();throw e})}suspend(){return this._nativeAudioContext.suspend().catch(e=>{if(void 0===e)throw t();throw e})}})(ks,je,ht,vt,xs,Ss,Ts,Es,Qt),Os=(e=>t=>{const n=e.get(t);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})($n),Ps=(e=>(t,n)=>{e(t).add(n)})(Os),Rs=(e=>function(t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=t[arguments.length>2&&void 0!==arguments[2]?arguments[2]:0];if(void 0===r)throw e();return me(n)?r.connect(n,0,s):r.connect(n,0)})(q),Ns=(e=>(t,n)=>{e(t).delete(n)})(Os),Ms=(e=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return void 0===n?t.forEach(e=>e.disconnect()):"number"===typeof n?Me(e,t,n).disconnect():me(n)?void 0===s?t.forEach(e=>e.disconnect(n)):void 0===r?Me(e,t,s).disconnect(n,0):Me(e,t,s).disconnect(n,0,r):void 0===s?t.forEach(e=>e.disconnect(n)):Me(e,t,s).disconnect(n,0)})(q),Is=new WeakMap,Ds=((e,t)=>n=>t(e,n))(Is,O),js=((e,t,n,s,r,i,o,l,c,u,h,d,p)=>(f,m,g,v)=>{if(0===v.numberOfInputs&&0===v.numberOfOutputs)throw c();const y=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(y.some(e=>e<1))throw c();if(y.length!==v.numberOfOutputs)throw t();if("explicit"!==v.channelCountMode)throw c();const _=v.channelCount*v.numberOfInputs,b=y.reduce((e,t)=>e+t,0),w=void 0===g.parameterDescriptors?0:g.parameterDescriptors.length;if(_+w>6||b>6)throw c();const k=new MessageChannel,S=[],T=[];for(let e=0;e<v.numberOfInputs;e+=1)S.push(o(f,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),T.push(r(f,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const C=[];if(void 0!==g.parameterDescriptors)for(const{defaultValue:e,maxValue:t,minValue:n,name:s}of g.parameterDescriptors){const r=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==v.parameterData[s]?v.parameterData[s]:void 0===e?0:e});Object.defineProperties(r.offset,{defaultValue:{get:()=>void 0===e?0:e},maxValue:{get:()=>void 0===t?W:t},minValue:{get:()=>void 0===n?B:n}}),C.push(r)}const E=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,_+w)}),A=$e(m,f.sampleRate),O=l(f,A,_+w,Math.max(1,b)),P=r(f,{channelCount:Math.max(1,b),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,b)}),R=[];for(let e=0;e<v.numberOfOutputs;e+=1)R.push(s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[e]}));for(let e=0;e<v.numberOfInputs;e+=1){S[e].connect(T[e]);for(let t=0;t<v.channelCount;t+=1)T[e].connect(E,t,e*v.channelCount+t)}const N=new be(void 0===g.parameterDescriptors?[]:g.parameterDescriptors.map((e,t)=>{let{name:n}=e;const s=C[t];return s.connect(E,0,_+t),s.start(0),[n,s.offset]}));E.connect(O);let M=v.channelInterpretation,I=null;const D=0===v.numberOfOutputs?[O]:R,j={get bufferSize(){return A},get channelCount(){return v.channelCount},set channelCount(e){throw n()},get channelCountMode(){return v.channelCountMode},set channelCountMode(e){throw n()},get channelInterpretation(){return M},set channelInterpretation(e){for(const t of S)t.channelInterpretation=e;M=e},get context(){return O.context},get inputs(){return S},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},get onprocessorerror(){return I},set onprocessorerror(e){"function"===typeof I&&j.removeEventListener("processorerror",I),I="function"===typeof e?e:null,"function"===typeof I&&j.addEventListener("processorerror",I)},get parameters(){return N},get port(){return k.port2},addEventListener(){return O.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},connect:e.bind(null,D),disconnect:u.bind(null,D),dispatchEvent(){return O.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return O.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},L=new Map;var F,V;k.port1.addEventListener=(F=k.port1.addEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("message"===t[0]){const e="function"===typeof t[1]?t[1]:"object"===typeof t[1]&&null!==t[1]&&"function"===typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=L.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{h(f.currentTime,f.sampleRate,()=>e(t))},L.set(e,t[1]))}}return F.call(k.port1,t[0],t[1],t[2])}),k.port1.removeEventListener=(V=k.port1.removeEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("message"===t[0]){const e=L.get(t[1]);void 0!==e&&(L.delete(t[1]),t[1]=e)}return V.call(k.port1,t[0],t[1],t[2])});let q=null;Object.defineProperty(k.port1,"onmessage",{get:()=>q,set:e=>{"function"===typeof q&&k.port1.removeEventListener("message",q),q="function"===typeof e?e:null,"function"===typeof q&&(k.port1.addEventListener("message",q),k.port1.start())}}),g.prototype.port=k.port1;let z=null;const U=((e,t,n,s)=>{let r=x.get(e);void 0===r&&(r=new WeakMap,x.set(e,r));const i=Ye(n,s);return r.set(t,i),i})(f,j,g,v);U.then(e=>z=e);const H=Se(v.numberOfInputs,v.channelCount),G=Se(v.numberOfOutputs,y),Q=void 0===g.parameterDescriptors?[]:g.parameterDescriptors.reduce((e,t)=>{let{name:n}=t;return a(a({},e),{},{[n]:new Float32Array(128)})},{});let K=!0;const $=()=>{v.numberOfOutputs>0&&O.disconnect(P);for(let e=0,t=0;e<v.numberOfOutputs;e+=1){const n=R[e];for(let s=0;s<y[e];s+=1)P.disconnect(n,t+s,s);t+=y[e]}},Y=new Map;O.onaudioprocess=e=>{let{inputBuffer:t,outputBuffer:n}=e;if(null!==z){const e=d(j);for(let r=0;r<A;r+=128){for(let e=0;e<v.numberOfInputs;e+=1)for(let n=0;n<v.channelCount;n+=1)ke(t,H[e],n,n,r);void 0!==g.parameterDescriptors&&g.parameterDescriptors.forEach((e,n)=>{let{name:s}=e;ke(t,Q,s,_+n,r)});for(let e=0;e<v.numberOfInputs;e+=1)for(let t=0;t<y[e];t+=1)0===G[e][t].byteLength&&(G[e][t]=new Float32Array(128));try{const t=H.map((t,n)=>{if(e[n].size>0)return Y.set(n,A/128),t;const s=Y.get(n);return void 0===s?[]:(t.every(e=>e.every(e=>0===e))&&(1===s?Y.delete(n):Y.set(n,s-1)),t)}),s=h(f.currentTime+r/f.sampleRate,f.sampleRate,()=>z.process(t,G,Q));K=s;for(let e=0,i=0;e<v.numberOfOutputs;e+=1){for(let t=0;t<y[e];t+=1)xe(n,G[e],t,i+t,r);i+=y[e]}}catch(s){K=!1,j.dispatchEvent(new ErrorEvent("processorerror",{colno:s.colno,filename:s.filename,lineno:s.lineno,message:s.message}))}if(!K){for(let e=0;e<v.numberOfInputs;e+=1){S[e].disconnect(T[e]);for(let t=0;t<v.channelCount;t+=1)T[r].disconnect(E,t,e*v.channelCount+t)}if(void 0!==g.parameterDescriptors){const e=g.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=C[t];e.disconnect(E,0,_+t),e.stop()}}E.disconnect(O),O.onaudioprocess=null,X?$():ee();break}}}};let X=!1;const J=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Z=()=>O.connect(J).connect(f.destination),ee=()=>{O.disconnect(J),J.disconnect()};return Z(),p(j,()=>{if(K){ee(),v.numberOfOutputs>0&&O.connect(P);for(let e=0,t=0;e<v.numberOfOutputs;e+=1){const n=R[e];for(let s=0;s<y[e];s+=1)P.connect(n,t+s,s);t+=y[e]}}X=!0},()=>{K&&(Z(),$()),X=!1})})(Rs,q,je,Sn,Je,Pn,st,lt,ht,Ms,gs,Ds,kn),Ls=((e,t,n,s,r)=>(i,o,l,c,u,h)=>{if(null!==l)try{const t=new l(i,c,h),s=new Map;let o=null;if(Object.defineProperties(t,{channelCount:{get:()=>h.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>o,set:e=>{"function"===typeof o&&t.removeEventListener("processorerror",o),o="function"===typeof e?e:null,"function"===typeof o&&t.addEventListener("processorerror",o)}}}),t.addEventListener=(p=t.addEventListener,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if("processorerror"===n[0]){const e="function"===typeof n[1]?n[1]:"object"===typeof n[1]&&null!==n[1]&&"function"===typeof n[1].handleEvent?n[1].handleEvent:null;if(null!==e){const t=s.get(n[1]);void 0!==t?n[1]=t:(n[1]=t=>{"error"===t.type?(Object.defineProperties(t,{type:{value:"processorerror"}}),e(t)):e(new ErrorEvent(n[0],a({},t)))},s.set(e,n[1]))}}return p.call(t,"error",n[1],n[2]),p.call(t,...n)}),t.removeEventListener=(d=t.removeEventListener,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if("processorerror"===n[0]){const e=s.get(n[1]);void 0!==e&&(s.delete(n[1]),n[1]=e)}return d.call(t,"error",n[1],n[2]),d.call(t,n[0],n[1],n[2])}),0!==h.numberOfOutputs){const e=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(e).connect(i.destination);return r(t,()=>e.disconnect(),()=>e.connect(i.destination))}return t}catch(f){if(11===f.code)throw s();throw f}var d,p;if(void 0===u)throw s();return(e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}})(h),t(i,o,u,h)})(je,js,st,ht,kn),Fs=((e,t,n,s,r,i,o,a,l,c,u,h,d,p,f,m)=>(g,v,y)=>{const _=new WeakMap;let b=null;return{render(w,k){a(k,w);const x=_.get(k);return void 0!==x?Promise.resolve(x):(async(a,w)=>{let k=u(a),x=null;const S=F(k,w),T=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(null===h){const e=T.reduce((e,t)=>e+t,0),n=r(w,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),i=[];for(let t=0;t<a.numberOfOutputs;t+=1)i.push(s(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:T[t]}));const c=o(w,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});c.connect=t.bind(null,i),c.disconnect=l.bind(null,i),x=[n,i,c]}else S||(k=new h(w,g));if(_.set(w,null===x?k:x[2]),null!==x){if(null===b){if(void 0===y)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const e=a.channelCount*a.numberOfInputs,t=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length,n=e+t,l=async()=>{const l=new d(n,128*Math.ceil(a.context.length/128),w.sampleRate),c=[],u=[];for(let e=0;e<v.numberOfInputs;e+=1)c.push(o(l,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),u.push(r(l,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const h=await Promise.all(Array.from(a.parameters.values()).map(async e=>{const t=i(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value});return await p(l,e,t.offset),t})),g=s(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,e+t)});for(let e=0;e<v.numberOfInputs;e+=1){c[e].connect(u[e]);for(let t=0;t<v.channelCount;t+=1)u[e].connect(g,t,e*v.channelCount+t)}for(const[t,n]of h.entries())n.connect(g,0,e+t),n.start(0);return g.connect(l.destination),await Promise.all(c.map(e=>f(a,l,e))),m(l)};b=Te(a,0===n?null:await l(),w,v,T,y,c)}const e=await b,t=n(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,u,h]=x;null!==e&&(t.buffer=e,t.start(0)),t.connect(l);for(let n=0,s=0;n<a.numberOfOutputs;n+=1){const e=u[n];for(let t=0;t<T[n];t+=1)l.connect(e,s+t,t);s+=T[n]}return h}if(S)for(const[t,n]of a.parameters.entries())await e(w,n,k.parameters.get(t));else for(const[e,t]of a.parameters.entries())await p(w,t,k.parameters.get(e));return await f(a,w,k),k})(w,k)}}})(hn,Rs,dn,Sn,Je,Pn,st,Ns,Ms,gs,ce,Xt,Bt,pn,Vt,Wn),Vs=(e=>t=>e.get(t))(vs),qs=(e=>(t,n)=>{e.set(t,n)})(Is),zs=ms?((e,t,n,s,r,i,o,l,c,u,h,d,p,f)=>class extends t{constructor(t,f,m){var g;const v=l(t),y=c(v),_=h(a(a({},we),m));p(_);const b=k.get(v),w=null===b||void 0===b?void 0:b.get(f),x=y||"closed"!==v.state?v:null!==(g=o(v))&&void 0!==g?g:v,S=r(x,y?null:t.baseLatency,u,f,w,_);super(t,!0,S,y?s(f,_,w):null);const T=[];S.parameters.forEach((e,t)=>{const s=n(this,y,e);T.push([t,s])}),this._nativeAudioWorkletNode=S,this._onprocessorerror=null,this._parameters=new be(T),y&&e(v,this);const{activeInputs:C}=i(this);d(S,C)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(e){const t="function"===typeof e?f(this,e):null;this._nativeAudioWorkletNode.onprocessorerror=t;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===t?e:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(Ps,Jt,mn,Fs,Ls,Q,Vs,zt,Wt,Xt,e=>a(a({},e),{},{outputChannelCount:void 0!==e.outputChannelCount?e.outputChannelCount:1===e.numberOfInputs&&1===e.numberOfOutputs?[e.channelCount]:Array.from({length:e.numberOfOutputs},()=>1)}),qs,e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}},Et):void 0,Us=(((e,t,n,s,r)=>{})(je,ht,vt,Yn,Qt),((e,t)=>(n,s,r)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(n,s,r)}catch(i){if("SyntaxError"===i.name)throw e();throw i}})(ht,Bt)),Bs=((e,t,n,s,r,i,o,a)=>(l,c)=>n(l).render(l,c).then(()=>Promise.all(Array.from(s(c)).map(e=>n(e).render(e,c)))).then(()=>r(c)).then(n=>("function"!==typeof n.copyFromChannel?(o(n),z(n)):t(i,()=>i(n))||a(n),e.add(n),n)))(tn,Mt,Ft,Os,Wn,V,on,an),Ws=(((e,t,n,s,r)=>{})(Mt,je,Us,Yn,Bs),((e,t,n,s,r)=>class extends e{constructor(e,n,r){let i;if("number"===typeof e&&void 0!==n&&void 0!==r)i={length:n,numberOfChannels:e,sampleRate:r};else{if("object"!==typeof e)throw new Error("The given parameters are not valid.");i=e}const{length:o,numberOfChannels:l,sampleRate:c}=a(a({},dt),i),u=s(l,o,c);t(ze,()=>ze(u))||u.addEventListener("statechange",(()=>{let e=0;const t=n=>{"running"===this._state&&(e>0?(u.removeEventListener("statechange",t),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):e+=1)};return t})()),super(u,l),this._length=o,this._nativeOfflineAudioContext=u,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Y(this)}))}_waitForThePromiseToSettle(e){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(e):setTimeout(()=>this._waitForThePromiseToSettle(e))}})(ks,Mt,je,Us,Bs)),Hs=((e,t)=>n=>{const s=e.get(n);return t(s)||t(n)})(_,Kt),Gs=((e,t)=>n=>e.has(n)||t(n))(g,$t),Qs=((e,t)=>n=>e.has(n)||t(n))(y,Yt),Ks=((e,t)=>n=>{const s=e.get(n);return t(s)||t(n)})(_,Wt);function $s(e){return void 0===e}function Ys(e){return void 0!==e}function Xs(e){return"number"===typeof e}function Js(e){return"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object}function Zs(e){return"boolean"===typeof e}function er(e){return Array.isArray(e)}function tr(e){return"string"===typeof e}function nr(e){return tr(e)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(e)}function sr(e,t){if(!e)throw new Error(t)}function rr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;if(!(t<=e&&e<=n))throw new RangeError("Value must be within [".concat(t,", ").concat(n,"], got: ").concat(e))}function ir(e){e.isOffline||"running"===e.state||ur('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let or=!1,ar=!1;function lr(e){or=e}let cr=console;function ur(){cr.warn(...arguments)}const hr="object"===typeof self?self:null,dr=hr&&(hr.hasOwnProperty("AudioContext")||hr.hasOwnProperty("webkitAudioContext"));function pr(e,t,n,s){var r,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i<3?r(o):i>3?r(t,n,o):r(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function fr(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;class mr{constructor(e,t,n,s){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){const e=new Blob(["\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ".concat((1e3*this._updateInterval).toFixed(1),";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t")],{type:"text/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(e){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),"worker"===this._type&&(null===(t=this._worker)||void 0===t||t.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function gr(e){return Qs(e)}function vr(e){return Gs(e)}function yr(e){return Ks(e)}function _r(e){return Hs(e)}function br(e,t){return"value"===e||gr(t)||vr(t)||function(e){return e instanceof ln}(t)}function wr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(!n.length)return e;const r=n.shift();if(Js(e)&&Js(r))for(const i in r)br(i,r[i])?e[i]=r[i]:Js(r[i])?(e[i]||Object.assign(e,{[i]:{}}),wr(e[i],r[i])):Object.assign(e,{[i]:r[i]});return wr(e,...n)}function kr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0;const r={},i=Array.from(t);if(Js(i[0])&&s&&!Reflect.has(i[0],s)){Object.keys(i[0]).some(t=>Reflect.has(e,t))||(wr(r,{[s]:i[0]}),n.splice(n.indexOf(s),1),i.shift())}if(1===i.length&&Js(i[0]))wr(r,i[0]);else for(let o=0;o<n.length;o++)Ys(i[o])&&(r[n[o]]=i[o]);return wr(e,r)}function xr(e,t){return $s(e)?t:e}function Sr(e,t){return t.forEach(t=>{Reflect.has(e,t)&&delete e[t]}),e}class Tr{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(){if(this.debug||hr&&this.toString()===hr.TONE_DEBUG_CLASS){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];!function(){cr.log(...arguments)}(this,...t)}}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Tr.version=d;const Cr=1e-6;function Er(e,t){return e>t+Cr}function Ar(e,t){return Er(e,t)||Pr(e,t)}function Or(e,t){return e+Cr<t}function Pr(e,t){return Math.abs(e-t)<Cr}function Rr(e,t,n){return Math.max(Math.min(e,n),t)}class Nr extends Tr{constructor(){super(),this.name="Timeline",this._timeline=[];const e=kr(Nr.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(sr(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];sr(Ar(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(e){const t=this._timeline.indexOf(e);return-1!==t&&this._timeline.splice(t,1),this}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";const n=this._search(e,t);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";const n=this._search(e,t);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const n=this._search(e);return n-1>=0?this._timeline[n-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Pr(this._timeline[t].time,e)){for(let n=t;n>=0&&Pr(this._timeline[n].time,e);n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else 1===this._timeline.length&&Ar(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";if(0===this._timeline.length)return-1;let n=0;const s=this._timeline.length;let r=s;if(s>0&&this._timeline[s-1][t]<=e)return s-1;for(;n<r;){let s=Math.floor(n+(r-n)/2);const i=this._timeline[s],o=this._timeline[s+1];if(Pr(i[t],e)){for(let n=s;n<this._timeline.length;n++){if(!Pr(this._timeline[n][t],e))break;s=n}return s}if(Or(i[t],e)&&Er(o[t],e))return s;Er(i[t],e)?r=s:n=s+1}return-1}_iterate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._timeline.length-1;this._timeline.slice(t,n+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const n=this._search(e);return-1!==n&&this._iterate(t,0,n),this}forEachAfter(e,t){const n=this._search(e);return this._iterate(t,n+1),this}forEachBetween(e,t,n){let s=this._search(e),r=this._search(t);return-1!==s&&-1!==r?(this._timeline[s].time!==e&&(s+=1),this._timeline[r].time===t&&(r-=1),this._iterate(n,s,r)):-1===s&&this._iterate(n,0,r),this}forEachFrom(e,t){let n=this._search(e);for(;n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this}forEachAtTime(e,t){const n=this._search(e);if(-1!==n&&Pr(this._timeline[n].time,e)){let s=n;for(let t=n;t>=0&&Pr(this._timeline[t].time,e);t--)s=t;this._iterate(e=>{t(e)},s,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Mr=[];function Ir(e){Mr.push(e)}const Dr=[];function jr(e){Dr.push(e)}class Lr extends Tr{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(e=>{$s(this._events)&&(this._events={}),this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].push(t)}),this}once(e,t){var n=this;const s=function(){t(...arguments),n.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(e=>{if($s(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if($s(t))this._events[e]=[];else{const n=this._events[e];for(let e=n.length-1;e>=0;e--)n[e]===t&&n.splice(e,1)}}),this}emit(e){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];for(let e=0,t=r.length;e<t;e++)r[e].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const n=Object.getOwnPropertyDescriptor(Lr.prototype,t);Object.defineProperty(e.prototype,t,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class Fr extends Lr{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Vr extends Fr{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new Nr,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const n=kr(Vr.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=(null===(e=arguments[0])||void 0===e?void 0:e.latencyHint)||""):(this._context=function(e){return new As(e)}({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new mr(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[(null===(t=arguments[0])||void 0===t?void 0:t.hasOwnProperty("updateInterval"))?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var e;return this._initialized||(e=this,Mr.forEach(t=>t(e)),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,n){return this._context.createBuffer(e,t,n)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,n){return this._context.createPeriodicWave(e,t,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){sr(_r(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamSource(e)}createMediaElementSource(e){sr(_r(this._context),"Not available if OfflineAudioContext");return this._context.createMediaElementSource(e)}createMediaStreamDestination(){sr(_r(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){sr(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){sr(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){sr(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){sr(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return function(e,t,n){return sr(Ys(zs),"AudioWorkletNode only works in a secure context (https or localhost)"),new(e instanceof(null===hr||void 0===hr?void 0:hr.BaseAudioContext)?null===hr||void 0===hr?void 0:hr.AudioWorkletNode:zs)(e,t,n)}(this.rawContext,e,t)}addAudioWorkletModule(e){return fr(this,void 0,void 0,function*(){sr(Ys(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return fr(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return _r(this._context)?this._context.resume():Promise.resolve()}close(){return fr(this,void 0,void 0,function*(){var e;_r(this._context)&&"closed"!==this.state&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&(e=this,Dr.forEach(t=>t(e)))})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0);for(let r=0;r<n.length;r++)n[r]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=t,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,e=>{e.callback(),this._timeouts.remove(e)})}setTimeout(e,t){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const n=++this._timeoutIds,s=()=>{const r=this.now();this._timeouts.add({callback:()=>{e(),s()},id:n,time:r+t})};return s(),n}}function qr(e,t){er(t)?t.forEach(t=>qr(e,t)):Object.defineProperty(e,t,{enumerable:!0,writable:!1})}function zr(e,t){er(t)?t.forEach(t=>zr(e,t)):Object.defineProperty(e,t,{writable:!0})}const Ur=()=>{};class Br extends Tr{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ur;const e=kr(Br.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,tr(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Ur,onload:Ur,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Qr().sampleRate}set(e){return e instanceof Br?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return fr(this,void 0,void 0,function*(){const t=Br.load(e).then(e=>{this.set(e),this.onload(this)});Br.downloads.push(t);try{yield t}finally{const e=Br.downloads.indexOf(t);Br.downloads.splice(e,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=er(e)&&e[0].length>0,n=t?e.length:1,s=t?e[0].length:e.length,r=Qr(),i=r.createBuffer(n,s,r.sampleRate),o=t||1!==n?e:[e];for(let a=0;a<n;a++)i.copyToChannel(o[a],a);return this._buffer=i,this}toMono(e){if(Xs(e))this.fromArray(this.toArray(e));else{let e=new Float32Array(this.length);const t=this.numberOfChannels;for(let n=0;n<t;n++){const t=this.toArray(n);for(let n=0;n<t.length;n++)e[n]+=t[n]}e=e.map(e=>e/t),this.fromArray(e)}return this}toArray(e){if(Xs(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);{const e=[];for(let t=0;t<this.numberOfChannels;t++)e[t]=this.getChannelData(t);return e}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration;sr(this.loaded,"Buffer is not loaded");const n=Math.floor(e*this.sampleRate),s=Math.floor(t*this.sampleRate);sr(n<s,"The start time must be less than the end time");const r=s-n,i=Qr().createBuffer(this.numberOfChannels,r,this.sampleRate);for(let o=0;o<this.numberOfChannels;o++)i.copyToChannel(this.getChannelData(o).subarray(n,s),o);return new Br(i)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return(new Br).fromArray(e)}static fromUrl(e){return fr(this,void 0,void 0,function*(){const t=new Br;return yield t.load(e)})}static load(e){return fr(this,void 0,void 0,function*(){const t=""===Br.baseUrl||Br.baseUrl.endsWith("/")?Br.baseUrl:Br.baseUrl+"/",n=yield fetch(t+e);if(!n.ok)throw new Error("could not load url: ".concat(e));const s=yield n.arrayBuffer();return yield Qr().decodeAudioData(s)})}static supportsType(e){const t=e.split("."),n=t[t.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return fr(this,void 0,void 0,function*(){for(yield Promise.resolve();Br.downloads.length;)yield Br.downloads[0]})}}Br.baseUrl="",Br.downloads=[];class Wr extends Vr{constructor(){var e,t,n;super({clockSource:"offline",context:yr(arguments[0])?arguments[0]:(e=arguments[0],t=arguments[1]*arguments[2],n=arguments[2],new Ws(e,t,n)),lookAhead:0,updateInterval:yr(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=yr(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return fr(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const n=Math.floor(this.sampleRate/128);e&&t%n===0&&(yield new Promise(e=>setTimeout(e,1)))}})}render(){return fr(this,arguments,void 0,function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){yield e.workletsAreReady(),yield e._renderClock(t);const n=yield e._context.startRendering();return new Br(n)}()})}close(){return Promise.resolve()}}const Hr=new class extends Fr{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,n){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return fr(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}};let Gr=Hr;function Qr(){return Gr===Hr&&dr&&function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&Gr.dispose();Gr=_r(e)?new Vr(e):yr(e)?new Wr(e):e}(new Vr),Gr}if(hr&&!hr.TONE_SILENCE_LOGGING){let e="v";0;const t=" * Tone.js ".concat(e).concat(d," * ");console.log("%c".concat(t),"background: #000; color: #fff")}function Kr(e){return Math.pow(10,e/20)}function $r(e){return Math.log(e)/Math.LN10*20}function Yr(e){return Math.pow(2,e/12)}let Xr=440;function Jr(e){return Math.round(Zr(e))}function Zr(e){return 69+12*Math.log2(e/Xr)}function ei(e){return Xr*Math.pow(2,(e-69)/12)}class ti extends Tr{constructor(e,t,n){super(),this.defaultUnits="s",this._val=t,this._units=n,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const n=parseInt(e,10),s="."===t?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/n)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(3*Math.floor(t)))},regexp:/^(\d+)t$/i},tr:{method:(e,t,n)=>{let s=0;return e&&"0"!==e&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(s+=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(s+=this._beatsToUnits(parseFloat(n)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof ti&&this.fromType(this._val),$s(this._val))return this._noArg();if(tr(this._val)&&$s(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Js(this._val)){let e=0;for(const t in this._val)if(Ys(this._val[t])){const n=this._val[t];e+=new this.constructor(this.context,t).valueOf()*n}return e}if(Ys(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}return tr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class ni extends ti{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new ni(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=new this.constructor(this.context,e).valueOf(),s=this.valueOf();return s+(Math.round(s/n)*n-s)*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let r=1;r<9;r++){const e=Math.pow(2,r);t.push(e+"n."),t.push(e+"n"),t.push(e+"t")}t.push("0");let n=t[0],s=new ni(this.context,t[0]).toSeconds();return t.forEach(t=>{const r=new ni(this.context,t).toSeconds();Math.abs(r-e)<Math.abs(s-e)&&(n=t,s=r)}),n}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const n=Math.floor(t/this._getTimeSignature());let s=t%1*4;t=Math.floor(t)%this._getTimeSignature();const r=s.toString();r.length>3&&(s=parseFloat(parseFloat(r).toFixed(3)));return[n,t,s].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Jr(this.toFrequency())}_now(){return this.context.now()}}class si extends ni{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Xr}static set A4(e){!function(e){Xr=e}(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return"midi"===this.defaultUnits?e:si.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const n=ri[e.toLowerCase()]+12*(parseInt(t,10)+1);return"midi"===this.defaultUnits?n:si.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,n){let s=1;return e&&"0"!==e&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(s*=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(s*=this._beatsToUnits(parseFloat(n)/4)),s}}})}transpose(e){return new si(this.context,this.valueOf()*Yr(e))}harmonize(e){return e.map(e=>this.transpose(e))}toMidi(){return Jr(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/si.A4);let n=Math.round(12*t)+57;const s=Math.floor(n/12);s<0&&(n+=-12*s);return ii[n%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(60*e/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return ei(e)}static ftom(e){return Jr(e)}}const ri={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},ii=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class oi extends ni{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ai extends Tr{constructor(){super();const e=kr(ai.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Qr()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return function(e){$s(e)&&or&&!ar&&(ar=!0,ur("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}(e),new ni(this.context,e).toSeconds()}toFrequency(e){return new si(this.context,e).toFrequency()}toTicks(e){return new oi(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(n=>{$s(e[n])&&delete t[n]}),t}get(){const e=this.constructor.getDefaults();return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const n=this[t];Ys(n)&&Ys(n.value)&&Ys(n.setValueAtTime)?e[t]=n.value:n instanceof ai?e[t]=n._getPartialProperties(e[t]):er(n)||Xs(n)||tr(n)||Zs(n)?e[t]=n:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Ys(this[t])&&(this[t]&&Ys(this[t].value)&&Ys(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof ai?this[t].set(e[t]):this[t]=e[t])}),this}}class li extends Nr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stopped";super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return null!==t?t.state:this._initial}setStateAtTime(e,t,n){return rr(t,0),this.add(Object.assign({},n,{state:e,time:t})),this}getLastState(e,t){for(let n=this._search(t);n>=0;n--){const t=this._timeline[n];if(t.state===e)return t}}getNextState(e,t){const n=this._search(t);if(-1!==n)for(let s=n;s<this._timeline.length;s++){const t=this._timeline[s];if(t.state===e)return t}}}class ci extends ai{constructor(){const e=kr(ci.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,sr(Ys(e.param)&&(gr(e.param)||e.param instanceof ci),"param must be an AudioParam");!gr(e.param);)e.param=e.param._param;this._swappable=!!Ys(e.swappable)&&e.swappable,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Nr(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Ys(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ai.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Ys(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Ys(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Ys(this.maxValue)&&Ys(this.minValue)&&rr(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?Kr(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&"decibels"===this.units?$r(e):e}setValueAtTime(e,t){const n=this.toSeconds(t),s=this._fromType(e);return sr(isFinite(s)&&isFinite(n),"Invalid argument(s) to setValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._assertRange(s),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),n=this._events.getAfter(t),s=this._events.get(t);let r=this._initialValue;if(null===s)r=this._initialValue;else if("setTargetAtTime"!==s.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)r=s.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let e=s.value;if("setTargetAtTime"===s.type){const t=this._events.getBefore(s.time);e=null===t?this._initialValue:t.value}r="linearRampToValueAtTime"===n.type?this._linearInterpolate(s.time,e,n.time,n.value,t):this._exponentialInterpolate(s.time,e,n.time,n.value,t)}else r=s.value;else{const e=this._events.getBefore(s.time);let n;n=null===e?this._initialValue:e.value,"setTargetAtTime"===s.type&&(r=this._exponentialApproach(s.time,n,s.value,s.constant,t))}return this._toType(r)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),0===this._fromType(t)&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const n=this._fromType(e),s=this.toSeconds(t);return sr(isFinite(n)&&isFinite(s),"Invalid argument(s) to linearRampToValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._assertRange(n),this._events.add({time:s,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(n,s),this}exponentialRampToValueAtTime(e,t){let n=this._fromType(e);n=Pr(n,0)?this._minOutput:n,this._assertRange(n);const s=this.toSeconds(t);return sr(isFinite(n)&&isFinite(s),"Invalid argument(s) to exponentialRampToValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(n,s),this}exponentialRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this}linearRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this}targetRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,t),this}exponentialApproachValueAtTime(e,t,n){t=this.toSeconds(t),n=this.toSeconds(n);const s=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,t,s),this.cancelAndHoldAtTime(t+.9*n),this.linearRampToValueAtTime(e,t+n),this}setTargetAtTime(e,t,n){const s=this._fromType(e);sr(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const r=this.toSeconds(t);return this._assertRange(s),sr(isFinite(s)&&isFinite(r),"Invalid argument(s) to setTargetAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._events.add({constant:n,time:r,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,r,n),this._param.setTargetAtTime(s,r,n),this}setValueCurveAtTime(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n=this.toSeconds(n),t=this.toSeconds(t);const r=this._fromType(e[0])*s;this.setValueAtTime(this._toType(r),t);const i=n/(e.length-1);for(let o=1;o<e.length;o++){const n=this._fromType(e[o])*s;this.linearRampToValueAtTime(this._toType(n),t+o*i)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return sr(isFinite(t),"Invalid argument to cancelScheduledValues: ".concat(JSON.stringify(e))),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),n=this._fromType(this.getValueAtTime(t));sr(isFinite(t),"Invalid argument to cancelAndHoldAtTime: ".concat(JSON.stringify(e))),this.log(this.units,"cancelAndHoldAtTime",t,"value="+n);const s=this._events.get(t),r=this._events.getAfter(t);return s&&Pr(s.time,t)?r?(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):r&&(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time),"linearRampToValueAtTime"===r.type?this.linearRampToValueAtTime(this._toType(n),t):"exponentialRampToValueAtTime"===r.type&&this.exponentialRampToValueAtTime(this._toType(n),t)),this._events.add({time:t,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,t),this}rampTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments.length>2?arguments[2]:void 0;return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(e,t,n):this.linearRampTo(e,t,n),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const n=this._events.get(t);if(n&&"setTargetAtTime"===n.type){const s=this._events.getAfter(n.time),r=s?s.time:t+2,i=(r-t)/10;for(let n=t;n<r;n+=i)e.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,t=>{"cancelScheduledValues"===t.type?e.cancelScheduledValues(t.time):"setTargetAtTime"===t.type?e.setTargetAtTime(t.value,t.time,t.constant):e[t.type](t.value,t.time)}),this}setParam(e){sr(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,n,s,r){return n+(t-n)*Math.exp(-(r-e)/s)}_linearInterpolate(e,t,n,s,r){return t+(r-e)/(n-e)*(s-t)}_exponentialInterpolate(e,t,n,s,r){return t*Math.pow(s/t,(r-e)/(n-e))}}class ui extends ai{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Ys(this.input)?gr(this.input)||this.input instanceof ci?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ys(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Ys(e)&&(e instanceof ui||vr(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(t=>{t.channelCount=e.channelCount,t.channelCountMode=e.channelCountMode,t.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();sr(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e){return di(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return ur("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e){return pi(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}chain(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hi(this,...t),this}fan(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),Ys(this.input)&&(this.input instanceof ui?this.input.dispose():vr(this.input)&&this.input.disconnect()),Ys(this.output)&&(this.output instanceof ui?this.output.dispose():vr(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function hi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=t.shift();t.reduce((e,t)=>(e instanceof ui?e.connect(t):vr(e)&&di(e,t),t),s)}function di(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(sr(Ys(e),"Cannot connect from undefined node"),sr(Ys(t),"Cannot connect to undefined node"),(t instanceof ui||vr(t))&&sr(t.numberOfInputs>0,"Cannot connect to node with no inputs"),sr(e.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof ui||t instanceof ci;)Ys(t.input)&&(t=t.input);for(;e instanceof ui;)Ys(e.output)&&(e=e.output);gr(t)?e.connect(t,n):e.connect(t,n,s)}function pi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(Ys(t))for(;t instanceof ui;)t=t.input;for(;!vr(e);)Ys(e.output)&&(e=e.output);gr(t)?e.disconnect(t,n):vr(t)?e.disconnect(t,n,s):e.disconnect()}class fi extends ui{constructor(){const e=kr(fi.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new ci({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),qr(this,"gain")}static getDefaults(){return Object.assign(ui.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class mi extends ui{constructor(e){super(e),this.onended=Ur,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new fi({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const t=this.toSeconds(e);return-1!==this._startTime&&t>=this._startTime&&(-1===this._stopTime||t<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ui.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ur})}_startGain(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;sr(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(t,e+n):this._gainNode.gain.exponentialApproachValueAtTime(t,e,n)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){sr(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const e="exponential"===this._curve?2*t:0;this._stopSource(this.now()+e),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ur&&(this.onended(this),this.onended=Ur,!this.context.isOffline)){const e=()=>this.dispose();"undefined"!==typeof requestIdleCallback?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),sr(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Ur,this}}class gi extends mi{constructor(){const e=kr(gi.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),di(this._source,this._gainNode),this.offset=new ci({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(mi.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class vi extends ui{constructor(){const e=kr(vi.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new gi({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ui.getDefaults(),{convert:!0,units:"number",value:0})}connect(e){return yi(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,n){return this._param.exponentialRampTo(e,t,n),this}linearRampTo(e,t,n){return this._param.linearRampTo(e,t,n),this}targetRampTo(e,t,n){return this._param.targetRampTo(e,t,n),this}exponentialApproachValueAtTime(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this}setTargetAtTime(e,t,n){return this._param.setTargetAtTime(e,t,n),this}setValueCurveAtTime(e,t,n,s){return this._param.setValueCurveAtTime(e,t,n,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,n){return this._param.rampTo(e,t,n),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function yi(e,t,n,s){(t instanceof ci||gr(t)||t instanceof vi&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof vi&&(t.overridden=!0)),di(e,t,n,s)}class _i extends ci{constructor(){const e=kr(_i.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Nr(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ci.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,n){t=this.toSeconds(t),this.setRampPoint(t);const s=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max(1/n,1));for(let o=0;o<=i;o++){const e=n*o+t,i=this._exponentialApproach(r.time,r.value,s,n,e);this.linearRampToValueAtTime(this._toType(i),e)}return this}setValueAtTime(e,t){const n=this.toSeconds(t);super.setValueAtTime(e,t);const s=this._events.get(n),r=this._events.previousEvent(s),i=this._getTicksUntilEvent(r,n);return s.ticks=Math.max(i,0),this}linearRampToValueAtTime(e,t){const n=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const s=this._events.get(n),r=this._events.previousEvent(s),i=this._getTicksUntilEvent(r,n);return s.ticks=Math.max(i,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const n=this._fromType(e),s=this._events.get(t),r=Math.round(Math.max(10*(t-s.time),1)),i=(t-s.time)/r;for(let o=0;o<=r;o++){const e=i*o+s.time,r=this._exponentialInterpolate(s.time,s.value,t,n,e);this.linearRampToValueAtTime(this._toType(r),e)}return this}_getTicksUntilEvent(e,t){if(null===e)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if($s(e.ticks)){const t=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(t,e.time)}const n=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(t));const r=this._events.get(t);return r&&r.time===t&&"setValueAtTime"===r.type&&(s=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(n+s)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),n=this._events.get(t);return Math.max(this._getTicksUntilEvent(n,t),0)}getDurationOfTicks(e,t){const n=this.toSeconds(t),s=this.getTicksAtTime(t);return this.getTimeOfTick(s+e)-n}getTimeOfTick(e){const t=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&n&&"linearRampToValueAtTime"===n.type&&t.value!==n.value){const s=this._fromType(this.getValueAtTime(t.time)),r=(this._fromType(this.getValueAtTime(n.time))-s)/(n.time-t.time),i=Math.sqrt(Math.pow(s,2)-2*r*(t.ticks-e)),o=(-s+i)/r;return(o>0?o:(-s-i)/r)+t.time}return t?0===t.value?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const n=this.toSeconds(t),s=this.toSeconds(e),r=this.getTicksAtTime(n);return this.getTicksAtTime(n+s)-r}_fromType(e){return"bpm"===this.units&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return"bpm"===this.units&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class bi extends vi{constructor(){const e=kr(bi.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new _i({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(vi.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class wi extends ai{constructor(){const e=kr(wi.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new li,this._tickOffset=new Nr,this._ticksAtTime=new Nr,this._secondsAtTime=new Nr,this.frequency=new bi({context:this.context,units:e.units,value:e.frequency}),qr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ai.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const n=this.toSeconds(e);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),Ys(t)&&this.setTicksAtTime(t,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(e){const t=this.toSeconds(e);if("stopped"===this._state.getValueAtTime(t)){const e=this._state.get(t);e&&e.time>0&&(this._tickOffset.cancel(e.time),this._state.cancel(e.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),n=this._state.getLastState("stopped",t),s=this._ticksAtTime.get(t),r={state:"paused",time:t};this._state.add(r);let i=s||n,o=s?s.ticks:0,a=null;return this._state.forEachBetween(i.time,t+this.sampleTime,e=>{let t=i.time;const n=this._tickOffset.get(e.time);n&&n.time>=i.time&&(o=n.ticks,t=n.time),"started"===i.state&&"started"!==e.state&&(o+=this.frequency.getTicksAtTime(e.time)-this.frequency.getTicksAtTime(t),e.time!==r.time&&(a={state:e.state,time:e.time,ticks:o})),i=e}),this._state.remove(r),a&&this._ticksAtTime.add(a),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),n=this.frequency.timeToTicks(e,t);this.setTicksAtTime(n,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);const s=this._secondsAtTime.get(e);let r=s||t,i=s?s.seconds:0,o=null;return this._state.forEachBetween(r.time,e+this.sampleTime,e=>{let t=r.time;const s=this._tickOffset.get(e.time);s&&s.time>=r.time&&(i=s.seconds,t=s.time),"started"===r.state&&"started"!==e.state&&(i+=e.time-t,e.time!==n.time&&(o={state:e.state,time:e.time,seconds:i})),r=e}),this._state.remove(n),o&&this._secondsAtTime.add(o),i}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();const n=this._tickOffset.get(t),s=this._state.get(t),r=Math.max(n.time,s.time),i=this.frequency.getTicksAtTime(r)+e-n.ticks;return this.frequency.getTimeOfTick(i)}forEachTickBetween(e,t,n){let s=this._state.get(e);this._state.forEachBetween(e,t,t=>{s&&"started"===s.state&&"started"!==t.state&&this.forEachTickBetween(Math.max(s.time,e),t.time-this.sampleTime,n),s=t});let r=null;if(s&&"started"===s.state){const o=Math.max(s.time,e),a=this.frequency.getTicksAtTime(o),l=a-this.frequency.getTicksAtTime(s.time);let c=Math.ceil(l)-l;c=Pr(c,1)?0:c;let u=this.frequency.getTimeOfTick(a+c);for(;u<t;){try{n(u,Math.round(this.getTicksAtTime(u)))}catch(i){r=i;break}u+=this.frequency.getDurationOfTicks(1,u)}}if(r)throw r;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class ki extends ai{constructor(){const e=kr(ki.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=Ur,this._lastUpdate=0,this._state=new li("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new wi({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,qr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ai.getDefaults(),{callback:Ur,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){ir(this.context);const n=this.toSeconds(e);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,t),n<this._lastUpdate&&this.emit("start",n,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const n=this.toSeconds(t),s=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(s+e,n)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,e=>{switch(e.state){case"started":const t=this._tickSource.getTicksAtTime(e.time);this.emit("start",e.time,t);break;case"stopped":0!==e.time&&this.emit("stop",e.time);break;case"paused":this.emit("pause",e.time)}}),this._tickSource.forEachTickBetween(e,t,(e,t)=>{this.callback(e,t)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Lr.mixin(ki);class xi extends ui{constructor(){const e=kr(xi.getDefaults(),arguments,["delayTime","maxDelay"]);super(e),this.name="Delay";const t=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(t,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(t),this.delayTime=new ci({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),qr(this,"delayTime")}static getDefaults(){return Object.assign(ui.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Si extends ui{constructor(){const e=kr(Si.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new fi({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,qr(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ui.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Ti extends ui{constructor(){const e=kr(Ti.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Si({context:this.context}),this.output=new fi({context:this.context}),this.volume=this.input.volume,hi(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ui.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(){this.input.disconnect();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift(this.input),t.push(this.output),hi(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Ir(e=>{e.destination=new Ti({context:e})}),jr(e=>{e.destination.dispose()});class Ci extends ui{constructor(){super(...arguments),this.name="Listener",this.positionX=new ci({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ci({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ci({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ci({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ci({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ci({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ci({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ci({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ci({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ui.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Ir(e=>{e.listener=new Ci({context:e})}),jr(e=>{e.listener.dispose()});class Ei extends Tr{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=kr(Ei.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const n=e.urls[t];this.add(t,n,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ur,onload:Ur,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return sr(this.has(e),"ToneAudioBuffers has no buffer named: ".concat(e)),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,0===this._loadingCount&&e&&e()}get loaded(){return Array.from(this._buffers).every(e=>{let[t,n]=e;return n.loaded})}add(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ur,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ur;return tr(t)?(this.baseUrl&&"data:audio/"===t.trim().substring(0,11).toLowerCase()&&(this.baseUrl=""),this._buffers.set(e.toString(),new Br(this.baseUrl+t,n,s))):this._buffers.set(e.toString(),new Br(t,n,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Ai extends si{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return Jr(super._frequencyToUnits(e))}_ticksToUnits(e){return Jr(super._ticksToUnits(e))}_beatsToUnits(e){return Jr(super._beatsToUnits(e))}_secondsToUnits(e){return Jr(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return ei(this.toMidi())}transpose(e){return new Ai(this.context,this.toMidi()+e)}}class Oi extends oi{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Pi extends ai{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Nr,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Ir(e=>{e.draw=new Pi({context:e})}),jr(e=>{e.draw.dispose()});class Ri extends Tr{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){sr(Ys(e.time),"Events must have a time property"),sr(Ys(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new Ni(e.time,e.time+e.duration,e);for(null===this._root?this._root=t:this._root.insert(t),this._length++;null!==t;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(null!==this._root){const t=[];this._root.search(e.time,t);for(const n of t)if(n.event===e){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,e=>this.remove(e)),this}_setRoot(e){this._root=e,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(e,t){null!==e.parent?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(null===e.left&&null===e.right)this._replaceNodeInParent(e,null);else if(null===e.right)this._replaceNodeInParent(e,e.left);else if(null===e.left)this._replaceNodeInParent(e,e.right);else{let t,n=null;if(e.getBalance()>0)if(null===e.left.right)t=e.left,t.right=e.right,n=t;else{for(t=e.left.right;null!==t.right;)t=t.right;t.parent&&(t.parent.right=t.left,n=t.parent,t.left=e.left,t.right=e.right)}else if(null===e.right.left)t=e.right,t.left=e.left,n=t;else{for(t=e.right.left;null!==t.left;)t=t.left;t.parent&&(t.parent.left=t.right,n=t.parent,t.left=e.left,t.right=e.right)}null!==e.parent?e.isLeftChild()?e.parent.left=t:e.parent.right=t:this._setRoot(t),n&&this._rebalance(n)}e.dispose()}_rotateLeft(e){const t=e.parent,n=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),null!==t?n?t.left=s:t.right=s:this._setRoot(s)}_rotateRight(e){const t=e.parent,n=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),null!==t?n?t.left=s:t.right=s:this._setRoot(s)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(null!==this._root){const t=[];if(this._root.search(e,t),t.length>0){let e=t[0];for(let n=1;n<t.length;n++)t[n].low>e.low&&(e=t[n]);return e.event}}return null}forEach(e){if(null!==this._root){const t=[];this._root.traverse(e=>t.push(e)),t.forEach(t=>{t.event&&e(t.event)})}return this}forEachAtTime(e,t){if(null!==this._root){const n=[];this._root.search(e,n),n.forEach(e=>{e.event&&t(e.event)})}return this}forEachFrom(e,t){if(null!==this._root){const n=[];this._root.searchAfter(e,n),n.forEach(e=>{e.event&&t(e.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class Ni{constructor(e,t,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?null===this.left?this.left=e:this.left.insert(e):null===this.right?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(null!==this.left&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),this.low>e||null!==this.right&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),null!==this.left&&this.left.searchAfter(e,t)),null!==this.right&&this.right.searchAfter(e,t)}traverse(e){e(this),null!==this.left&&this.left.traverse(e),null!==this.right&&this.right.traverse(e)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return null!==this.left&&null!==this.right?e=this.left.height-this.right.height:null!==this.left?e=this.left.height+1:null!==this.right&&(e=-(this.right.height+1)),e}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Mi extends Tr{constructor(e){super(),this.name="TimelineValue",this._timeline=new Nr({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Ii extends ui{constructor(){super(kr(Ii.getDefaults(),arguments,["context"]))}connect(e){return yi(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}}class Di extends Ii{constructor(){const e=kr(Di.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,er(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):"function"===typeof e.mapping&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(vi.getDefaults(),{length:1024})}setMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=new Float32Array(t);for(let s=0,r=t;s<r;s++){const t=s/(r-1)*2-1;n[s]=e(t,s)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){sr(["none","2x","4x"].some(t=>t.includes(e)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class ji extends Ii{constructor(){const e=kr(ji.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Di({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Ii.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Li{constructor(e,t){this.id=Li._eventId++,this._remainderTime=0;const n=Object.assign(Li.getDefaults(),t);this.transport=e,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:Ur,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Li._eventId=0;class Fi extends Li{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(Fi.getDefaults(),t);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Li.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Or(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Oi(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Or(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Oi(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Er(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Vi extends ai{constructor(){const e=kr(Vi.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new Mi(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Nr,this._repeatedEvents=new Ri,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new ki({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),qr(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(ai.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(2*this._swingTicks)!==0){const n=t%(2*this._swingTicks)/(2*this._swingTicks),s=Math.sin(n*Math.PI)*this._swingAmount;e+=new Oi(this.context,2*this._swingTicks/3).toSeconds()*s}lr(!0),this._timeline.forEachAtTime(t,t=>t.invoke(e)),lr(!1)}schedule(e,t){const n=new Li(this,{callback:e,time:new oi(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const r=new Fi(this,{callback:e,duration:new ni(this.context,s).toTicks(),interval:new ni(this.context,t).toTicks(),time:new oi(this.context,n).toTicks()});return this._addEvent(r,this._repeatedEvents)}scheduleOnce(e,t){const n=new Li(this,{callback:e,once:!0,time:new oi(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=this.toTicks(e);return this._timeline.forEachFrom(t,e=>this.clear(e.id)),this._repeatedEvents.forEachFrom(t,e=>this.clear(e.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Oi(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let n;return this.context.resume(),Ys(t)&&(n=this.toTicks(t)),this._clock.start(e,n),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),"started"!==this._clock.getStateAtTime(e)?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){er(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new ni(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new ni(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Oi(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Oi(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),n=this._clock.frequency.timeToTicks(e,t);this.ticks=n}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(t),s=t+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,t);this.emit("stop",s),this._clock.setTicksAtTime(e,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),"started"!==this.state)return 0;{const t=this.now(),n=e-this.getTicksAtTime(t)%e;return this._clock.nextTickTime(n,t)}}syncSignal(e,t){const n=this.now();let s=this.bpm,r=1/(60/s.getValueAtTime(n)/this.PPQ),i=[];if("time"===e.units){const e=1/64/r,t=new fi(e),n=new ji(-1),o=new fi(e);s.chain(t,n,o),s=o,r=1/r,i=[t,n,o]}t||(t=0!==e.getValueAtTime(n)?e.getValueAtTime(n)/r:0);const o=new fi(t);return s.connect(o),o.connect(e._param),i.push(o),this._syncedSignals.push({initial:e.value,nodes:i,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const n=this._syncedSignals[t];n.signal===e&&(n.nodes.forEach(e=>e.dispose()),n.signal.value=n.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),zr(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Lr.mixin(Vi),Ir(e=>{e.transport=new Vi({context:e})}),jr(e=>{e.transport.dispose()});class qi extends ui{constructor(e){super(e),this.input=void 0,this._state=new li("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ur,this._syncedStop=Ur,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Si({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,qr(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ui.getDefaults(),{mute:!1,onstop:Ur,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,n){let s=$s(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),this._synced||"started"!==this._state.getValueAtTime(s))if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const e=this._state.get(s);e&&(e.offset=this.toSeconds(xr(t,0)),e.duration=n?this.toSeconds(n):void 0);const r=this.context.transport.schedule(e=>{this._start(e,t,n)},s);this._scheduled.push(r),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else ir(this.context),this._start(s,t,n);else sr(Er(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,t,n);return this}stop(e){let t=$s(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),"started"===this._state.getValueAtTime(t)||Ys(this._state.getNextState("started",t))){if(this.log("stop",t),this._synced){const e=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(e)}else this._stop(t);this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,n){return e=this.toSeconds(e),"started"===this._state.getValueAtTime(e)&&(this._state.cancel(e),this._restart(e,t,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Er(t,0)){const n=this._state.get(t);if(n&&"started"===n.state&&n.time!==t){const s=t-this.toSeconds(n.time);let r;n.duration&&(r=this.toSeconds(n.duration)-s),this._start(e,this.toSeconds(n.offset)+s,r)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));"started"===this._state.getValueAtTime(t)&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ur,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class zi extends mi{constructor(){const e=kr(zi.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,di(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ci({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Br(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(mi.getDefaults(),{url:new Br,loop:!1,loopEnd:0,loopStart:0,onload:Ur,onerror:Ur,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;sr(this.buffer.loaded,"buffer is either not set or not loaded");const r=this.toSeconds(e);this._startGain(r,s),t=this.loop?xr(t,this.loopStart):xr(t,0);let i=Math.max(this.toSeconds(t),0);if(this.loop){const e=this.toSeconds(this.loopEnd)||this.buffer.duration,t=this.toSeconds(this.loopStart),n=e-t;Ar(i,e)&&(i=(i-t)%n+t),Pr(i,this.buffer.duration)&&(i=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Or(i,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(r,i)),Ys(n)){let e=this.toSeconds(n);e=Math.max(e,0),this.stop(r+e)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Ui extends qi{constructor(){const e=kr(Ui.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(qi.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(sr(e in Hi,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,"started"===this.state)){const e=this.now();this._stop(e),this._start(e)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=Hi[this._type];this._source=new zi({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Bi=220500,Wi={brown:null,pink:null,white:null},Hi={get brown(){if(!Wi.brown){const e=[];for(let t=0;t<2;t++){const n=new Float32Array(Bi);e[t]=n;let s=0;for(let e=0;e<Bi;e++){const t=2*Math.random()-1;n[e]=(s+.02*t)/1.02,s=n[e],n[e]*=3.5}}Wi.brown=(new Br).fromArray(e)}return Wi.brown},get pink(){if(!Wi.pink){const e=[];for(let t=0;t<2;t++){const n=new Float32Array(Bi);let s,r,i,o,a,l,c;e[t]=n,s=r=i=o=a=l=c=0;for(let e=0;e<Bi;e++){const t=2*Math.random()-1;s=.99886*s+.0555179*t,r=.99332*r+.0750759*t,i=.969*i+.153852*t,o=.8665*o+.3104856*t,a=.55*a+.5329522*t,l=-.7616*l-.016898*t,n[e]=s+r+i+o+a+l+c+.5362*t,n[e]*=.11,c=.115926*t}}Wi.pink=(new Br).fromArray(e)}return Wi.pink},get white(){if(!Wi.white){const e=[];for(let t=0;t<2;t++){const n=new Float32Array(Bi);e[t]=n;for(let e=0;e<Bi;e++)n[e]=2*Math.random()-1}Wi.white=(new Br).fromArray(e)}return Wi.white}};function Gi(e,t){return fr(this,void 0,void 0,function*(){const n=t/e.context.sampleRate,s=new Wr(1,n,e.context.sampleRate);new e.constructor(Object.assign(e.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0);return(yield s.render()).getChannelData(0)})}class Qi extends mi{constructor(){const e=kr(Qi.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],di(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new ci({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new ci({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),qr(this,["frequency","detune"])}static getDefaults(){return Object.assign(mi.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ki extends qi{constructor(){const e=kr(Ki.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new vi({context:this.context,units:"frequency",value:e.frequency}),qr(this,"frequency"),this.detune=new vi({context:this.context,units:"cents",value:e.detune}),qr(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&"custom"!==e.type&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(qi.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),n=new Qi({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type){return Ki._periodicWaveCache.find(e=>{return e.phase===this._phase&&(t=e.partials,n=this._partials,t.length===n.length&&t.every((e,t)=>n[t]===e));var t,n})}{const e=Ki._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=-1!==["sine","square","sawtooth","triangle"].indexOf(e);if(0===this._phase&&t)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=e);else{const t=this._getCachedPeriodicWave();if(Ys(t)){const{partials:e,wave:n}=t;this._wave=n,this._partials=e,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[t,n]=this._getRealImaginary(e,this._phase),s=this.context.createPeriodicWave(t,n);this._wave=s,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),Ki._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:t,type:this._type,wave:this._wave}),Ki._periodicWaveCache.length>100&&Ki._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&"custom"!==this._type&&"custom"!==e?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){rr(e,0);let t=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(t=n[1]),"custom"!==this._type)this.type=0===e?t:t+e.toString();else{const t=new Float32Array(e);this._partials.forEach((e,n)=>t[n]=e),this._partials=Array.from(t),this.type=this._type}}_getRealImaginary(e,t){let n=2048;const s=new Float32Array(n),r=new Float32Array(n);let i=1;if("custom"===e){if(i=this._partials.length+1,this._partialCount=this._partials.length,n=i,0===this._partials.length)return[s,r]}else{const t=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);t?(i=parseInt(t[2],10)+1,this._partialCount=parseInt(t[2],10),e=t[1],i=Math.max(i,2),n=i):this._partialCount=0,this._partials=[]}for(let o=1;o<n;++o){const n=2/(o*Math.PI);let a;switch(e){case"sine":a=o<=i?1:0,this._partials[o-1]=a;break;case"square":a=1&o?2*n:0,this._partials[o-1]=a;break;case"sawtooth":a=n*(1&o?1:-1),this._partials[o-1]=a;break;case"triangle":a=1&o?n*n*2*(o-1>>1&1?-1:1):0,this._partials[o-1]=a;break;case"custom":a=this._partials[o-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}0!==a?(s[o]=-a*Math.sin(t*o),r[o]=a*Math.cos(t*o)):(s[o]=0,r[o]=0)}return[s,r]}_inverseFFT(e,t,n){let s=0;const r=e.length;for(let i=0;i<r;i++)s+=e[i]*Math.cos(i*n)+t[i]*Math.sin(i*n);return s}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let n=0;const s=2*Math.PI;for(let r=0;r<32;r++)n=Math.max(this._inverseFFT(e,t,r/32*s),n);return Rr(-this._inverseFFT(e,t,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return fr(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Gi(e,t)}()})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ki._periodicWaveCache=[];class $i extends Ii{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Di({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Yi extends vi{constructor(){const e=kr(Yi.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new fi({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(vi.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Xi extends qi{constructor(){const e=kr(Xi.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new $i({context:this.context}),this._modulationNode=new fi({context:this.context}),this._carrier=new Ki({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ki({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Yi({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),qr(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ki.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return fr(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Gi(e,t)}()})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Ji extends qi{constructor(){const e=kr(Ji.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new fi({context:this.context,gain:0}),this._carrier=new Ki({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new vi({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Ki({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Yi({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Yi({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),qr(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ki.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return fr(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Gi(e,t)}()})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Zi extends qi{constructor(){const e=kr(Zi.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new fi({context:this.context,gain:0}),this._thresh=new Di({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new vi({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Ki({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),qr(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(qi.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return fr(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Gi(e,t)}()})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class eo extends qi{constructor(){const e=kr(eo.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new vi({context:this.context,units:"frequency",value:e.frequency}),this.detune=new vi({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,qr(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ki.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,n=e/(this._oscillators.length-1);this._forEach((e,s)=>e.detune.value=t+n*s)}}get count(){return this._oscillators.length}set count(e){if(rr(e,1),this._oscillators.length!==e){this._forEach(e=>e.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const n=new Ki({context:this.context,volume:-6-1.1*e,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:0===t?()=>this.onstop(this):Ur});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[t]=n}this.spread=this._spread,"started"===this.state&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((e,t)=>e.phase=this._phase+t/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return fr(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Gi(e,t)}()})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class to extends qi{constructor(){const e=kr(to.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Yi({context:this.context,value:2}),this._pulse=new Zi({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ki({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),qr(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(qi.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return fr(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Gi(e,t)}()})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const no={am:Xi,fat:eo,fm:Ji,oscillator:Ki,pulse:Zi,pwm:to};class so extends qi{constructor(){const e=kr(so.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new vi({context:this.context,units:"frequency",value:e.frequency}),this.detune=new vi({context:this.context,units:"cents",value:e.detune}),qr(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Ki.getDefaults(),Ji.getDefaults(),Xi.getDefaults(),eo.getDefaults(),Zi.getDefaults(),to.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(e=this._sourceType),e+this._oscillator.type}set type(e){"fm"===e.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"am"===e.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"fat"===e.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):"pwm"===e?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===e?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=no[e],n=this.now();if(this._oscillator){const e=this._oscillator;e.stop(n),this.context.setTimeout(()=>e.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(t=this._oscillator.type),"fm"===e?this.type="fm"+t:"am"===e?this.type="am"+t:"fat"===e?this.type="fat"+t:"oscillator"===e?this.type=t:"pulse"===e?this.type="pulse":"pwm"===e&&(this.type="pwm")}_getOscType(e,t){return e instanceof no[t]}get baseType(){return this._oscillator.baseType}set baseType(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===e||"pwm"===e||(this._oscillator.baseType=e)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(e){this._getOscType(this._oscillator,"fat")&&Xs(e)&&(this._oscillator.count=e)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(e){this._getOscType(this._oscillator,"fat")&&Xs(e)&&(this._oscillator.spread=e)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&tr(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(){return fr(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Gi(e,t)}()})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class ro extends vi{constructor(){super(kr(ro.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new fi({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,hi(this._constantSource,this._sum)}static getDefaults(){return Object.assign(vi.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class io extends Ii{constructor(){const e=kr(io.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Yi({context:this.context,value:e.max-e.min}),this._add=this.output=new ro({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Ii.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class oo extends Ii{constructor(){super(kr(oo.getDefaults(),arguments)),this.name="Zero",this._gain=new fi({context:this.context}),this.output=this._gain,this.input=void 0,di(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),pi(this.context.getConstant(0),this._gain),this}}class ao extends ui{constructor(){const e=kr(ao.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=ci.prototype._fromType,this._toType=ci.prototype._toType,this._is=ci.prototype._is,this._clampValue=ci.prototype._clampValue,this._oscillator=new Ki(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new fi({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new vi({context:this.context,units:"audioRange",value:0}),this._zeros=new oo({context:this.context}),this._a2g=new $i({context:this.context}),this._scaler=this.output=new io({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),qr(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(Ki.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const t=this.min,n=this.max;this._units=e,this.min=t,this.max=n}get state(){return this._oscillator.state}connect(e,t,n){return(e instanceof ci||e instanceof vi)&&(this.convert=e.convert,this.units=e.units),yi(this,e,t,n),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function lo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){rr(s,e,t),n.set(this,s)}})}}function co(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){rr(this.toSeconds(s),e,t),n.set(this,s)}})}}class uo extends qi{constructor(){const e=kr(uo.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Br({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(qi.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ur,onerror:Ur,playbackRate:1,reverse:!1})}load(e){return fr(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ur)(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,n){return super.start(e,t,n),this}_start(e,t,n){t=this._loop?xr(t,this._loopStart):xr(t,0);const s=this.toSeconds(t),r=n;n=xr(n,Math.max(this._buffer.duration-s,0));let i=this.toSeconds(n);i/=this._playbackRate,e=this.toSeconds(e);const o=new zi({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(e+i),this._state.setStateAtTime("stopped",e+i,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&$s(r)?o.start(e,s):o.start(e,s,i-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(e=>e.stop(t))}restart(e,t,n){return super.restart(e,t,n),this}_restart(e,t,n){var s;null===(s=[...this._activeSources].pop())||void 0===s||s.stop(e),this._start(e,t,n)}seek(e,t){const n=this.toSeconds(t);if("started"===this._state.getValueAtTime(n)){const t=this.toSeconds(e);this._stop(n),this._start(n,t)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&rr(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&rr(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),n=this._state.getNextState("stopped",t);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(e=>e.cancelStop())),this._activeSources.forEach(n=>{n.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}pr([co(0)],uo.prototype,"fadeIn",void 0),pr([co(0)],uo.prototype,"fadeOut",void 0);class ho extends Ii{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Di({context:this.context,mapping:e=>2*Math.abs(e)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class po extends ui{constructor(){const e=kr(po.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new vi({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ui.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(tr(e))return e;{let n;for(n in fo)if(fo[n][t]===e)return n;return e}}_setCurve(e,t,n){if(tr(n)&&Reflect.has(fo,n)){const s=fo[n];Js(s)?"_decayCurve"!==e&&(this[e]=s[t]):this[e]=s}else{if(!er(n)||"_decayCurve"===e)throw new Error("Envelope: invalid curve: "+n);this[e]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.log("triggerAttack",e,t),e=this.toSeconds(e);let n=this.toSeconds(this.attack);const s=this.toSeconds(this.decay),r=this.getValueAtTime(e);if(r>0){n=(1-r)/(1/n)}if(n<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if("linear"===this._attackCurve)this._sig.linearRampTo(t,n,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(t,n,e);else{this._sig.cancelAndHoldAtTime(e);let s=this._attackCurve;for(let e=1;e<s.length;e++)if(s[e-1]<=r&&r<=s[e]){s=this._attackCurve.slice(e),s[0]=r;break}this._sig.setValueCurveAtTime(s,e,n,t)}if(s&&this.sustain<1){const r=t*this.sustain,i=e+n;this.log("decay",i),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(r,s+i):this._sig.exponentialApproachValueAtTime(r,i,s)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,e):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,e):(sr(er(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e){return yi(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}asArray(){return fr(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){const n=t/e.context.sampleRate,s=new Wr(1,n,e.context.sampleRate),r=e.toSeconds(e.attack)+e.toSeconds(e.decay),i=r+e.toSeconds(e.release),o=.1*i,a=i+o,l=new e.constructor(Object.assign(e.get(),{attack:n*e.toSeconds(e.attack)/a,decay:n*e.toSeconds(e.decay)/a,release:n*e.toSeconds(e.release)/a,context:s}));l._sig.toDestination(),l.triggerAttackRelease(n*(r+o)/a,0);return(yield s.render()).getChannelData(0)}()})}dispose(){return super.dispose(),this._sig.dispose(),this}}pr([co(0)],po.prototype,"attack",void 0),pr([co(0)],po.prototype,"decay",void 0),pr([lo(0,1)],po.prototype,"sustain",void 0),pr([co(0)],po.prototype,"release",void 0);const fo=(()=>{const e=128;let t,n;const s=[];for(t=0;t<e;t++)s[t]=Math.sin(t/127*(Math.PI/2));const r=[];for(t=0;t<127;t++){n=t/127;const e=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;r[t]=e/10+.83*n}r[127]=1;const i=[];for(t=0;t<e;t++)i[t]=Math.ceil(t/127*5)/5;const o=[];for(t=0;t<e;t++)n=t/127,o[t]=.5*(1-Math.cos(Math.PI*n));const a=[];for(t=0;t<e;t++){n=t/127;const e=4*Math.pow(n,3)+.2,s=Math.cos(e*Math.PI*2*n);a[t]=Math.abs(s*(1-n))}function l(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=1-e[n];return t}return{bounce:{In:l(a),Out:a},cosine:{In:s,Out:(c=s,c.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:r,Out:l(r)},sine:{In:o,Out:l(o)},step:{In:i,Out:l(i)}};var c})();class mo extends ui{constructor(){const e=kr(mo.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new Si({context:this.context,volume:e.volume}),this.volume=this._volume.volume,qr(this,"volume")}static getDefaults(){return Object.assign(ui.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){var n=this;const s=this["_original_"+e]=this[e];this[e]=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];const o=r[t],a=n.context.transport.schedule(e=>{r[t]=e,s.apply(n,r)},o);n._scheduledEvents.push(a)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,n,s){const r=this.toSeconds(n),i=this.toSeconds(t);return this.triggerAttack(e,r,s),this.triggerRelease(r+i),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class go extends mo{constructor(){const e=kr(go.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(mo.getDefaults(),{detune:0,onsilence:Ur,portamento:0})}triggerAttack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.log("triggerAttack",e,t,n);const s=this.toSeconds(t);return this._triggerEnvelopeAttack(s,n),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const n=this.toSeconds(t),s=e instanceof si?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const e=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,e,n)}else this.frequency.setValueAtTime(s,n);return this}}pr([co(0)],go.prototype,"portamento",void 0);class vo extends po{constructor(){super(kr(vo.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new fi({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class yo extends go{constructor(){const e=kr(yo.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new so(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new vo(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),qr(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(go.getDefaults(),{envelope:Object.assign(Sr(po.getDefaults(),Object.keys(ui.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Sr(so.getDefaults(),[...Object.keys(qi.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),0===this.envelope.sustain){const t=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+t+n)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class _o extends go{constructor(){const e=kr(_o.getDefaults(),arguments);super(e),this.name="ModulationSynth",this._carrier=new yo({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new yo({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new vi({context:this.context,units:"frequency"}),this.detune=new vi({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new Yi({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new fi({context:this.context,gain:0}),qr(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(go.getDefaults(),{harmonicity:3,oscillator:Object.assign(Sr(so.getDefaults(),[...Object.keys(qi.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(Sr(po.getDefaults(),Object.keys(ui.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(Sr(so.getDefaults(),[...Object.keys(qi.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(Sr(po.getDefaults(),Object.keys(ui.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class bo extends ui{constructor(){const e=kr(bo.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new ci({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new ci({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new ci({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new ci({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(ui.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){sr(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e),"Invalid filter type: ".concat(e)),this._filter.type=e}getFrequencyResponse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;const t=new Float32Array(e);for(let i=0;i<e;i++){const n=19980*Math.pow(i/e,2)+20;t[i]=n}const n=new Float32Array(e),s=new Float32Array(e),r=this.context.createBiquadFilter();return r.type=this.type,r.Q.value=this.Q.value,r.frequency.value=this.frequency.value,r.gain.value=this.gain.value,r.getFrequencyResponse(t,n,s),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class wo extends ui{constructor(){const e=kr(wo.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new fi({context:this.context}),this.output=new fi({context:this.context}),this._filters=[],this._filters=[],this.Q=new vi({context:this.context,units:"positive",value:e.Q}),this.frequency=new vi({context:this.context,units:"frequency",value:e.frequency}),this.detune=new vi({context:this.context,units:"cents",value:e.detune}),this.gain=new vi({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,qr(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ui.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){sr(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e),"Invalid filter type: ".concat(e)),this._type=e,this._filters.forEach(t=>t.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=Xs(e)?e:parseInt(e,10),n=[-12,-24,-48,-96];let s=n.indexOf(t);sr(-1!==s,"rolloff can only be ".concat(n.join(", "))),s+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(e=>e.disconnect()),this._filters=new Array(s);for(let r=0;r<s;r++){const e=new bo({context:this.context});e.type=this._type,this.frequency.connect(e.frequency),this.detune.connect(e.detune),this.Q.connect(e.Q),this.gain.connect(e.gain),this._filters[r]=e}this._internalChannels=this._filters,hi(this.input,...this._internalChannels,this.output)}getFrequencyResponse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;const t=new bo({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((e,t)=>n[t]*=e)}),t.dispose(),n}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),zr(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class ko extends po{constructor(){const e=kr(ko.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="FrequencyEnvelope",this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new ji({context:this.context,value:e.exponent}),this._scale=this.output=new io({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(po.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);rr(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class xo extends go{constructor(){const e=kr(xo.getDefaults(),arguments);super(e),this.name="MonoSynth",this.oscillator=new so(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new wo(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new ko(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new vo(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),qr(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(go.getDefaults(),{envelope:Object.assign(Sr(po.getDefaults(),Object.keys(ui.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(Sr(wo.getDefaults(),Object.keys(ui.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(Sr(ko.getDefaults(),Object.keys(ui.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(Sr(so.getDefaults(),Object.keys(qi.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),0===this.envelope.sustain){const t=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+t+n)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class So extends _o{constructor(){const e=kr(So.getDefaults(),arguments);super(e),this.name="FMSynth",this.modulationIndex=new Yi({context:this.context,value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(_o.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}class To extends yo{constructor(){const e=kr(To.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,qr(this,["oscillator","envelope"])}static getDefaults(){return wr(go.getDefaults(),yo.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const n=this.toSeconds(t),s=this.toFrequency(e instanceof si?e.toFrequency():e),r=s*this.octaves;return this.oscillator.frequency.setValueAtTime(r,n),this.oscillator.frequency.exponentialRampToValueAtTime(s,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}pr([lo(0)],To.prototype,"octaves",void 0),pr([co(0)],To.prototype,"pitchDecay",void 0);class Co extends mo{constructor(){const e=kr(Co.getDefaults(),arguments);super(e),this.name="NoiseSynth",this.noise=new Ui(Object.assign({context:this.context},e.noise)),this.envelope=new vo(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(mo.getDefaults(),{envelope:Object.assign(Sr(po.getDefaults(),Object.keys(ui.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(Sr(Ui.getDefaults(),Object.keys(qi.getDefaults())),{type:"white"})})}triggerAttack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e=this.toSeconds(e),this.envelope.triggerAttack(e,t),this.noise.start(e),0===this.envelope.sustain&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t=this.toSeconds(t),e=this.toSeconds(e),this.triggerAttack(t,n),this.triggerRelease(t+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const Eo=new Set;function Ao(e){Eo.add(e)}function Oo(e,t){const n='registerProcessor("'.concat(e,'", ').concat(t,")");Eo.add(n)}class Po extends ui{constructor(e){super(e),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=Ur;const t=URL.createObjectURL(new Blob([Array.from(Eo).join("\n")],{type:"text/javascript"})),n=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(t).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(n,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}Ao('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n');Ao("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n");Ao("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");const Ro="feedback-comb-filter";Oo(Ro,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class No extends Po{constructor(){const e=kr(No.getDefaults(),arguments,["delayTime","resonance"]);super(e),this.name="FeedbackCombFilter",this.input=new fi({context:this.context}),this.output=new fi({context:this.context}),this.delayTime=new ci({context:this.context,value:e.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new ci({context:this.context,value:e.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),qr(this,["resonance","delayTime"])}_audioWorkletName(){return Ro}static getDefaults(){return Object.assign(ui.getDefaults(),{delayTime:.1,resonance:.5})}onReady(e){hi(this.input,e,this.output);const t=e.parameters.get("delayTime");this.delayTime.setParam(t);const n=e.parameters.get("feedback");this.resonance.setParam(n)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class Mo extends ui{constructor(){const e=kr(Mo.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OnePoleFilter",this._frequency=e.frequency,this._type=e.type,this.input=new fi({context:this.context}),this.output=new fi({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(ui.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const e=this._filter,t=this.toFrequency(this._frequency),n=1/(2*Math.PI*t);if("lowpass"===this._type){const e=1/(n*this.context.sampleRate),t=e-1;this._filter=this.context.createIIRFilter([e,0],[1,t])}else{const e=1/(n*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,e])}this.input.chain(this._filter,this.output),e&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(e),e.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(e){this._frequency=e,this._createFilter()}get type(){return this._type}set type(e){this._type=e,this._createFilter()}getFrequencyResponse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;const t=new Float32Array(e);for(let r=0;r<e;r++){const n=19980*Math.pow(r/e,2)+20;t[r]=n}const n=new Float32Array(e),s=new Float32Array(e);return this._filter.getFrequencyResponse(t,n,s),n}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class Io extends ui{constructor(){const e=kr(Io.getDefaults(),arguments,["delayTime","resonance","dampening"]);super(e),this.name="LowpassCombFilter",this._combFilter=this.output=new No({context:this.context,delayTime:e.delayTime,resonance:e.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new Mo({context:this.context,frequency:e.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(ui.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(e){this._lowpass.frequency=e}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class Do extends mo{constructor(){const e=kr(Do.getDefaults(),arguments);super(e),this.name="PluckSynth",this._noise=new Ui({context:this.context,type:"pink"}),this.attackNoise=e.attackNoise,this._lfcf=new Io({context:this.context,dampening:e.dampening,resonance:e.resonance}),this.resonance=e.resonance,this.release=e.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return wr(mo.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(e){this._lfcf.dampening=e}triggerAttack(e,t){const n=this.toFrequency(e);t=this.toSeconds(t);const s=1/n;return this._lfcf.delayTime.setValueAtTime(s,t),this._noise.start(t),this._noise.stop(t+s*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(t),this._lfcf.resonance.setValueAtTime(this.resonance,t),this}triggerRelease(e){return this._lfcf.resonance.linearRampTo(0,this.release,e),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class jo extends mo{constructor(){const e=kr(jo.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=e=>this.releaseAll(e),sr(!Xs(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(mo.getDefaults(),{maxPolyphony:32,options:{},voice:yo})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(t=>t.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return sr(e instanceof go,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}ur("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,n){e.forEach(e=>{const s=new Ai(this.context,e).toMidi(),r=this._getNextAvailableVoice();r&&(r.triggerAttack(e,t,n),this._activeVoices.push({midi:s,voice:r,released:!1}),this.log("triggerAttack",e,t))})}_triggerRelease(e,t){e.forEach(e=>{const n=new Ai(this.context,e).toMidi(),s=this._activeVoices.find(e=>{let{midi:t,released:s}=e;return t===n&&!s});s&&(s.voice.triggerRelease(t),s.released=!0,this.log("triggerRelease",e,t))})}_scheduleEvent(e,t,n,s){sr(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===e?this._triggerAttack(t,n,s):this._triggerRelease(t,n):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,n,s)},n-this.now())}triggerAttack(e,t,n){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("attack",e,s,n),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const n=this.toSeconds(t);return this._scheduleEvent("release",e,n),this}triggerAttackRelease(e,t,n,s){const r=this.toSeconds(n);if(this.triggerAttack(e,r,s),er(t)){sr(er(e),"If the duration is an array, the notes must also be an array");for(let n=0;n<e.length;n++){const s=t[Math.min(n,t.length-1)],i=this.toSeconds(s);sr(i>0,"The duration must be greater than 0"),this.triggerRelease(e[n],r+i)}}else{const n=this.toSeconds(t);sr(n>0,"The duration must be greater than 0"),this.triggerRelease(e,r+n)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=Sr(e,["onsilence","context"]);return this.options=wr(this.options,t),this._voices.forEach(e=>e.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(e=>{let{voice:n}=e;n.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Lo extends mo{constructor(){const e=kr(Lo.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(n=>{const s=parseInt(n,10);if(sr(nr(n)||Xs(s)&&isFinite(s),"url key is neither a note or midi pitch: ".concat(n)),nr(n)){const s=new si(this.context,n).toMidi();t[s]=e.urls[n]}else Xs(s)&&isFinite(s)&&(t[s]=e.urls[s])}),this._buffers=new Ei({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(mo.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ur,onerror:Ur,release:.1,urls:{}})}_findClosest(e){let t=0;for(;t<96;){if(this._buffers.has(e+t))return-t;if(this._buffers.has(e-t))return t;t++}throw new Error("No available buffers for note: ".concat(e))}triggerAttack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.log("triggerAttack",e,t,n),Array.isArray(e)||(e=[e]),e.forEach(e=>{const s=Zr(new si(this.context,e).toFrequency()),r=Math.round(s),i=s-r,o=this._findClosest(r),a=r-o,l=this._buffers.get(a),c=Yr(o+i),u=new zi({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:c}).connect(this.output);u.start(t,0,l.duration/c,n),er(this._activeSources.get(r))||this._activeSources.set(r,[]),this._activeSources.get(r).push(u),u.onended=()=>{if(this._activeSources&&this._activeSources.has(r)){const e=this._activeSources.get(r),t=e.indexOf(u);-1!==t&&e.splice(t,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(e=>{const n=new si(this.context,e).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const e=this._activeSources.get(n);t=this.toSeconds(t),e.forEach(e=>{e.stop(t)}),this._activeSources.set(n,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(e=>{for(;e.length;){e.shift().stop(t)}}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=this.toSeconds(n);return this.triggerAttack(e,r,s),er(t)?(sr(er(e),"notes must be an array when duration is array"),e.forEach((e,n)=>{const s=t[Math.min(n,t.length-1)];this.triggerRelease(e,r+this.toSeconds(s))})):this.triggerRelease(e,r+this.toSeconds(t)),this}add(e,t,n){if(sr(nr(e)||isFinite(e),"note must be a pitch or midi: ".concat(e)),nr(e)){const s=new si(this.context,e).toMidi();this._buffers.add(s,t,n)}else this._buffers.add(e,t,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}pr([co(0)],Lo.prototype,"attack",void 0),pr([co(0)],Lo.prototype,"release",void 0);class Fo extends ai{constructor(){const e=kr(Fo.getDefaults(),arguments,["callback","value"]);super(e),this.name="ToneEvent",this._state=new li("stopped"),this._startOffset=0,this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(ai.getDefaults(),{callback:Ur,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._state.forEachFrom(e,e=>{let t;if("started"===e.state){-1!==e.id&&this.context.transport.clear(e.id);const n=e.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||Xs(this._loop)&&this._loop>1){t=1/0,Xs(this._loop)&&(t=this._loop*this._getLoopDuration());const s=this._state.getAfter(n);null!==s&&(t=Math.min(t,s.time-n)),t!==1/0&&(t=new Oi(this.context,t));const r=new Oi(this.context,this._getLoopDuration());e.id=this.context.transport.scheduleRepeat(this._tick.bind(this),r,new Oi(this.context,n),t)}else e.id=this.context.transport.schedule(this._tick.bind(this),new Oi(this.context,n))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const t=this.toTicks(e);return"stopped"===this._state.getValueAtTime(t)&&(this._state.add({id:-1,state:"started",time:t}),this._rescheduleEvents(t)),this}stop(e){this.cancel(e);const t=this.toTicks(e);if("started"===this._state.getValueAtTime(t)){this._state.setStateAtTime("stopped",t,{id:-1});const e=this._state.getBefore(t);let n=t;null!==e&&(n=e.time),this._rescheduleEvents(n)}return this}cancel(e){e=xr(e,-1/0);const t=this.toTicks(e);return this._state.forEachFrom(t,e=>{this.context.transport.clear(e.id)}),this._state.cancel(t),this}_tick(e){const t=this.context.transport.getTicksAtTime(e);if(!this.mute&&"started"===this._state.getValueAtTime(t)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let t=.02;Zs(this.humanize)||(t=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*t}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new Oi(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new Oi(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,t=this._state.get(e);if(null!==t&&"started"===t.state){const n=this._getLoopDuration();return(e-t.time)%n/n}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Vo extends Fo{constructor(){const e=kr(Vo.getDefaults(),arguments,["callback","events"]);super(e),this.name="Part",this._state=new li("stopped"),this._events=new Set,this._state.increasing=!0,e.events.forEach(e=>{er(e)?this.add(e[0],e[1]):this.add(e)})}static getDefaults(){return Object.assign(Fo.getDefaults(),{events:[]})}start(e,t){const n=this.toTicks(e);if("started"!==this._state.getValueAtTime(n)){t=xr(t,this._loop?this._loopStart:0),t=this._loop?xr(t,this._loopStart):xr(t,0);const e=this.toTicks(t);this._state.add({id:-1,offset:e,state:"started",time:n}),this._forEach(t=>{this._startNote(t,n,e)})}return this}_startNote(e,t,n){t-=n,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<n&&(t+=this._getLoopDuration()),e.start(new Oi(this.context,t))):e.startOffset<this._loopStart&&e.startOffset>=n&&(e.loop=!1,e.start(new Oi(this.context,t))):e.startOffset>=n&&e.start(new Oi(this.context,t))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(e=>{e.startOffset+=this._startOffset})}stop(e){const t=this.toTicks(e);return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._forEach(t=>{t.stop(e)}),this}at(e,t){const n=new oi(this.context,e).toTicks(),s=new Oi(this.context,1).toSeconds(),r=this._events.values();let i=r.next();for(;!i.done;){const e=i.value;if(Math.abs(n-e.startOffset)<s)return Ys(t)&&(e.value=t),e;i=r.next()}return Ys(t)?(this.add(e,t),this.at(e)):null}add(e,t){e instanceof Object&&Reflect.has(e,"time")&&(e=(t=e).time);const n=this.toTicks(e);let s;return t instanceof Fo?(s=t,s.callback=this._tick.bind(this)):s=new Fo({callback:this._tick.bind(this),context:this.context,value:t}),s.startOffset=n,s.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(s),this._restartEvent(s),this}_restartEvent(e){this._state.forEach(t=>{"started"===t.state?this._startNote(e,t.time,t.offset):e.stop(new Oi(this.context,t.time))})}remove(e,t){return Js(e)&&e.hasOwnProperty("time")&&(e=(t=e).time),e=this.toTicks(e),this._events.forEach(n=>{n.startOffset===e&&($s(t)||Ys(t)&&n.value===t)&&(this._events.delete(n),n.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(t=>t.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(t=>{t instanceof Vo?t._forEach(e):e(t)}),this}_setAll(e,t){this._forEach(n=>{n[e]=t})}_tick(e,t){this.mute||this.callback(e,t)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):"stopped"===e.state&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(t=>{t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.loop=e,this._testLoopBoundries(t)})}get loopEnd(){return new Oi(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(t=>{t.loopEnd=e,this._testLoopBoundries(t)})}get loopStart(){return new Oi(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(e=>{e.loopStart=this.loopStart,this._testLoopBoundries(e)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class qo extends Fo{constructor(){const e=kr(qo.getDefaults(),arguments,["callback","events","subdivision"]);super(e),this.name="Sequence",this._part=new Vo({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[],this._subdivision=this.toTicks(e.subdivision),this.events=e.events,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.playbackRate=e.playbackRate,this.probability=e.probability,this.humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate}static getDefaults(){return Object.assign(Sr(Fo.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(e,t){null===t||this.mute||this.callback(e,t)}get events(){return this._events}set events(e){this.clear(),this._eventsArray=e,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(e,t){return this._part.start(e,t?this._indexTime(t):t),this}stop(e){return this._part.stop(e),this}get subdivision(){return new Oi(this.context,this._subdivision).toSeconds()}_createSequence(e){return new Proxy(e,{get:(e,t)=>e[t],set:(e,t,n)=>(tr(t)&&isFinite(parseInt(t,10))&&er(n)?e[t]=this._createSequence(n):e[t]=n,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(e,t,n){e.forEach((e,s)=>{const r=s*t+n;if(er(e))this._rescheduleSequence(e,t/e.length,r);else{const t=new Oi(this.context,r,"i").toSeconds();this._part.add(t,e)}})}_indexTime(e){return new Oi(this.context,e*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(e){this._part.loop=e}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this._part.loopStart=this._indexTime(e)}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this._part.loopEnd=0===e?this._indexTime(this._eventsArray.length):this._indexTime(e)}get startOffset(){return this._part.startOffset}set startOffset(e){this._part.startOffset=e}get playbackRate(){return this._part.playbackRate}set playbackRate(e){this._part.playbackRate=e}get probability(){return this._part.probability}set probability(e){this._part.probability=e}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(e){this._part.humanize=e}get length(){return this._part.length}}class zo extends ui{constructor(){const e=kr(zo.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new ho({context:this.context}),this.a=new fi({context:this.context,gain:0}),this.b=new fi({context:this.context,gain:0}),this.output=new fi({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new vi({context:this.context,units:"normalRange",value:e.fade}),qr(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",di(this._split,this.a.gain,0),di(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ui.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Uo extends ui{constructor(e){super(e),this.name="Effect",this._dryWet=new zo({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new fi({context:this.context}),this.effectReturn=new fi({context:this.context}),this.input=new fi({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],qr(this,"wet")}static getDefaults(){return Object.assign(ui.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Bo extends ui{constructor(){const e=kr(Bo.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new ci({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",qr(this,"pan")}static getDefaults(){return Object.assign(ui.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Wo="bit-crusher";Oo(Wo,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class Ho extends Uo{constructor(){const e=kr(Ho.getDefaults(),arguments,["bits"]);super(e),this.name="BitCrusher",this._bitCrusherWorklet=new Go({context:this.context,bits:e.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(Uo.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class Go extends Po{constructor(){const e=kr(Go.getDefaults(),arguments);super(e),this.name="BitCrusherWorklet",this.input=new fi({context:this.context}),this.output=new fi({context:this.context}),this.bits=new ci({context:this.context,value:e.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(Po.getDefaults(),{bits:12})}_audioWorkletName(){return Wo}onReady(e){hi(this.input,e,this.output);const t=e.parameters.get("bits");this.bits.setParam(t)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class Qo extends ui{constructor(){const e=kr(Qo.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ui.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Ko extends ui{constructor(){const e=kr(Ko.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(ui.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class $o extends ui{constructor(e){super(e),this.name="StereoEffect",this.input=new fi({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new zo({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new Qo({context:this.context,channels:2}),this._merge=new Ko({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),qr(this,["wet"])}connectEffectLeft(){var e;this._split.connect(arguments.length<=0?void 0:arguments[0],0,0),hi(...arguments),di((e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e],this._merge,0,0)}connectEffectRight(){var e;this._split.connect(arguments.length<=0?void 0:arguments[0],1,0),hi(...arguments),di((e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e],this._merge,0,1)}static getDefaults(){return Object.assign(ui.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Yo extends $o{constructor(e){super(e),this.feedback=new vi({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new fi({context:this.context}),this._feedbackR=new fi({context:this.context}),this._feedbackSplit=new Qo({context:this.context,channels:2}),this._feedbackMerge=new Ko({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),qr(this,["feedback"])}static getDefaults(){return Object.assign($o.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Xo extends Yo{constructor(){const e=kr(Xo.getDefaults(),arguments,["frequency","delayTime","depth"]);super(e),this.name="Chorus",this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new ao({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new ao({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new xi({context:this.context}),this._delayNodeR=new xi({context:this.context}),this.frequency=this._lfoL.frequency,qr(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign(Yo.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;const t=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-t,0),this._lfoL.max=this._delayTime+t,this._lfoR.min=Math.max(this._delayTime-t,0),this._lfoR.max=this._delayTime+t}get delayTime(){return 1e3*this._delayTime}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Jo extends Uo{constructor(){const e=kr(Jo.getDefaults(),arguments,["distortion"]);super(e),this.name="Distortion",this._shaper=new Di({context:this.context,length:4096}),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample}static getDefaults(){return Object.assign(Uo.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(e){this._distortion=e;const t=100*e,n=Math.PI/180;this._shaper.setMap(e=>Math.abs(e)<.001?0:(3+t)*e*20*n/(Math.PI+t*Math.abs(e)))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Zo extends Uo{constructor(e){super(e),this.name="FeedbackEffect",this._feedbackGain=new fi({context:this.context,gain:e.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,qr(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Uo.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class ea extends Zo{constructor(){const e=kr(ea.getDefaults(),arguments,["delayTime","feedback"]);super(e),this.name="FeedbackDelay",this._delayNode=new xi({context:this.context,delayTime:e.delayTime,maxDelay:e.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),qr(this,"delayTime")}static getDefaults(){return Object.assign(Zo.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class ta extends Uo{constructor(){const e=kr(ta.getDefaults(),arguments,["decay"]);super(e),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const t=this.toSeconds(e.decay);rr(t,.001),this._decay=t;const n=this.toSeconds(e.preDelay);rr(n,0),this._preDelay=n,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Uo.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){rr(e=this.toSeconds(e),.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){rr(e=this.toSeconds(e),0),this._preDelay=e,this.generate()}generate(){return fr(this,void 0,void 0,function*(){const e=this.ready,t=new Wr(2,this._decay+this._preDelay,this.context.sampleRate),n=new Ui({context:t}),s=new Ui({context:t}),r=new Ko({context:t});n.connect(r,0,0),s.connect(r,0,1);const i=new fi({context:t}).toDestination();r.connect(i),n.start(0),s.start(0),i.gain.setValueAtTime(0,0),i.gain.setValueAtTime(1,this._preDelay),i.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const o=t.render();return this.ready=o.then(Ur),yield e,this._convolver.buffer=(yield o).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class na extends ui{constructor(){const e=kr(na.getDefaults(),arguments,["type","size"]);super(e),this.name="Analyser",this._analysers=[],this._buffers=[],this.input=this.output=this._gain=new fi({context:this.context}),this._split=new Qo({context:this.context,channels:e.channels}),this.input.connect(this._split),rr(e.channels,1);for(let t=0;t<e.channels;t++)this._analysers[t]=this.context.createAnalyser(),this._split.connect(this._analysers[t],t,0);this.size=e.size,this.type=e.type,this.smoothing=e.smoothing}static getDefaults(){return Object.assign(ui.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((e,t)=>{const n=this._buffers[t];"fft"===this._type?e.getFloatFrequencyData(n):"waveform"===this._type&&e.getFloatTimeDomainData(n)}),1===this.channels?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(e){this._analysers.forEach((t,n)=>{t.fftSize=2*e,this._buffers[n]=new Float32Array(e)})}get channels(){return this._analysers.length}get type(){return this._type}set type(e){sr("waveform"===e||"fft"===e,"Analyser: invalid type: ".concat(e)),this._type=e}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(e){this._analysers.forEach(t=>t.smoothingTimeConstant=e)}dispose(){return super.dispose(),this._analysers.forEach(e=>e.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class sa extends ui{constructor(){const e=kr(sa.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new fi({context:this.context}),sa._allSolos.has(this.context)||sa._allSolos.set(this.context,new Set),sa._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ui.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),sa._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){sa._soloed.has(this.context)||sa._soloed.set(this.context,new Set),sa._soloed.get(this.context).add(this)}_removeSolo(){sa._soloed.has(this.context)&&sa._soloed.get(this.context).delete(this)}_isSoloed(){return sa._soloed.has(this.context)&&sa._soloed.get(this.context).has(this)}_noSolos(){return!sa._soloed.has(this.context)||sa._soloed.has(this.context)&&0===sa._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),sa._allSolos.get(this.context).delete(this),this._removeSolo(),this}}sa._allSolos=new Map,sa._soloed=new Map;class ra extends ui{constructor(){const e=kr(ra.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Bo({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Si({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,qr(this,["pan","volume"])}static getDefaults(){return Object.assign(ui.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ia extends ui{constructor(){const e=kr(ia.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new sa({solo:e.solo,context:this.context}),this._panVol=this.output=new ra({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),qr(this,["pan","volume"])}static getDefaults(){return Object.assign(ui.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return ia.buses.has(e)||ia.buses.set(e,new fi({context:this.context})),ia.buses.get(e)}send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this._getBus(e),s=new fi({context:this.context,units:"decibels",gain:t});return this.connect(s),s.connect(n),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ia.buses=new Map;const oa=Qr().transport;const aa=Qr().destination;Qr().destination;Qr().listener;Qr().draw;const la=Qr();var ca=n(960);const ua=e=>{let{drumSounds:t,pattern:n,currentStep:s,toggleStep:r}=e;return(0,ca.jsxs)("div",{className:"sequencer-card",children:[(0,ca.jsx)("h3",{children:"Sequencer"}),(0,ca.jsx)("div",{className:"sequencer-grid",children:t.map(e=>(0,ca.jsxs)("div",{className:"drum-row",children:[(0,ca.jsx)("div",{className:"drum-label",children:e.name}),(0,ca.jsx)("div",{className:"steps",children:n[e.name].map((t,n)=>(0,ca.jsx)("div",{className:"step ".concat(t?"active":""," ").concat(s===n?"current":""),onClick:()=>r(e.name,n)},n))})]},e.name))})]})},ha=120,da=16,pa=-10,fa=-40,ma=0,ga=2e4,va=1,ya=[{id:"loop1",label:"Synth Arp"},{id:"loop2",label:"Piano"},{id:"loop3",label:"Techno"},{id:"loop4",label:"Ambient Pad"},{id:"loop5",label:"Pluck Synth"},{id:"loop6",label:"Glitchy Perc"}],_a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fa,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ma;if(!Number.isFinite(e))return 0;const s=Math.min(Math.max(e,t),n);return Math.round((s-t)/(n-t)*100)},ba=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fa,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ma;return t+Math.min(Math.max(e,0),100)/100*(n-t)},wa=t=>{let{isPlaying:n,isLooping:s,bpm:r,stepCount:i,masterVolume:o,handlePlay:a,handleStop:l,toggleLoop:c,handleBpmChange:u,handleStepCountChange:h,handleMasterVolumeChange:d,getSharablePatternUrl:p}=t;const[f,m]=(0,e.useState)(null),g=(0,e.useRef)(null);(0,e.useEffect)(()=>()=>{g.current&&(clearTimeout(g.current),g.current=null)},[]);const v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;g.current&&clearTimeout(g.current),m({message:e,tone:t,url:n}),g.current=setTimeout(()=>{m(null),g.current=null},3e3)};return(0,ca.jsxs)("div",{className:"transport-controls",children:[(0,ca.jsx)("button",{onClick:a,disabled:n,children:"Play"}),(0,ca.jsx)("button",{onClick:l,disabled:!n,children:"Stop"}),(0,ca.jsx)("button",{onClick:c,className:s?"active":"",children:"Loop"}),(0,ca.jsx)("button",{onClick:async()=>{try{const e=await p();await(async e=>{try{var t;if(null!==(t=navigator.clipboard)&&void 0!==t&&t.writeText)return await navigator.clipboard.writeText(e),!0}catch(r){}const n=document.createElement("textarea");n.value=e,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n),n.select();const s=document.execCommand("copy");return document.body.removeChild(n),s})(e.url)?v(e.isFallback?"Copied fallback share link (offline mode).":"Share link copied to clipboard."):v("Copy this link manually:","error",e.url)}catch(e){console.error("Failed to copy sharable URL:",e),v("Unable to copy share link. Try again.","error")}},children:"Share"}),(0,ca.jsxs)("div",{className:"bpm-control",children:[(0,ca.jsxs)("label",{htmlFor:"bpm",children:["BPM: ",r]}),(0,ca.jsx)("input",{type:"range",id:"bpm",min:"60",max:"180",value:r,onChange:u})]}),(0,ca.jsxs)("div",{className:"stepcount-control",children:[(0,ca.jsxs)("label",{htmlFor:"step-count",children:["Steps: ",i]}),(0,ca.jsx)("select",{id:"step-count",value:i,onChange:h,children:[8,12,16,24,32].map(e=>(0,ca.jsx)("option",{value:e,children:e},e))})]}),(0,ca.jsxs)("div",{className:"volume-control",children:[(0,ca.jsxs)("label",{htmlFor:"master-volume",children:["Volume: ",_a(o),"%"]}),(0,ca.jsx)("input",{type:"range",id:"master-volume",min:"0",max:"100",step:"1",value:_a(o),onChange:e=>{const t=ba(parseFloat(e.target.value),fa,ma);d({target:{value:t}})}})]}),f&&(0,ca.jsxs)("div",{className:"share-status share-status--".concat(f.tone),role:"status",children:[(0,ca.jsx)("span",{children:f.message}),f.url&&(0,ca.jsxs)("span",{className:"share-status__url",children:[" ",f.url]})]})]})},ka=e=>{let{drumSounds:t,drumVolumes:n,filterFreq:s,filterQ:r,loopPlaying:i,loopVolume:o,handleDrumVolumeChange:a,handleFilterFreqChange:l,handleFilterQChange:c,toggleLoopAt:u,handleLoopVolumeChangeAt:h}=e;return(0,ca.jsxs)("div",{className:"mixer-controls",children:[(0,ca.jsxs)("div",{className:"drum-mix",children:[(0,ca.jsx)("h3",{children:"Drum Mix"}),(0,ca.jsx)("div",{className:"mix-controls",children:t.map(e=>(0,ca.jsxs)("div",{className:"mix-control",children:[(0,ca.jsx)("label",{htmlFor:"".concat(e.name,"-volume"),children:e.name}),(0,ca.jsx)("input",{type:"range",id:"".concat(e.name,"-volume"),min:0,max:100,step:"1",value:_a(n[e.name]),onChange:t=>a(e.name,ba(parseFloat(t.target.value),fa,ma))}),(0,ca.jsxs)("span",{children:[_a(n[e.name]),"%"]})]},e.name))})]}),(0,ca.jsxs)("div",{className:"filter-controls",children:[(0,ca.jsx)("h3",{children:"Global Filter"}),(0,ca.jsxs)("div",{className:"mix-controls",children:[(0,ca.jsxs)("div",{className:"mix-control",children:[(0,ca.jsx)("label",{htmlFor:"filter-freq",children:"Frequency"}),(0,ca.jsx)("input",{type:"range",id:"filter-freq",min:"20",max:"20000",step:"1",value:s,onChange:l}),(0,ca.jsxs)("span",{children:[s," Hz"]})]}),(0,ca.jsxs)("div",{className:"mix-control",children:[(0,ca.jsx)("label",{htmlFor:"filter-q",children:"Resonance"}),(0,ca.jsx)("input",{type:"range",id:"filter-q",min:"0.1",max:"20",step:"0.1",value:r,onChange:c}),(0,ca.jsx)("span",{children:r})]})]})]}),(0,ca.jsxs)("div",{className:"background-loops",children:[(0,ca.jsx)("h3",{children:"Background Loops"}),ya.map((e,t)=>{var n,s;return(0,ca.jsxs)("div",{className:"loop-control",children:[(0,ca.jsx)("button",{onClick:()=>u(t),className:null!==i&&void 0!==i&&i[t]?"active":"",children:e.label}),(0,ca.jsxs)("div",{className:"volume-control",children:[(0,ca.jsxs)("label",{htmlFor:"".concat(e.id,"-volume"),children:["Volume: ",_a(null!==(n=null===o||void 0===o?void 0:o[t])&&void 0!==n?n:pa),"%"]}),(0,ca.jsx)("input",{type:"range",id:"".concat(e.id,"-volume"),min:0,max:100,step:"1",value:_a(null!==(s=null===o||void 0===o?void 0:o[t])&&void 0!==s?s:pa),onChange:e=>{const n=ba(parseFloat(e.target.value),fa,ma);h(t,{target:{value:n}})}})]})]},e.id)})]})]})},xa=t=>{let{isPlaying:n=!1,analyser:s}=t;const r=(0,e.useRef)(null),i=(0,e.useRef)(null),o=(0,e.useRef)(new Array(64).fill(0));return(0,e.useEffect)(()=>{const e=r.current,t=e.getContext("2d"),a=()=>{if(t.clearRect(0,0,e.width,e.height),n&&s){const n=s.getValue(),r=e.width/64,i=.1*e.height,a=e.height-i,l=o.current;for(let s=0;s<64;s++){const i=n[2*s]||-100,o=Math.max(0,Math.min(100,2.5*(i+100)))/100*a;l[s]=.6*l[s]+.4*o;const c=s*r,u=e.height-l[s],h=t.createLinearGradient(c,u,c,u+l[s]);h.addColorStop(0,"#ff00ff"),h.addColorStop(1,"#00ffff"),t.fillStyle=h,t.fillRect(c+2,u,r-4,l[s])}}n&&(i.current=requestAnimationFrame(a))};return n?a():(t.clearRect(0,0,e.width,e.height),o.current=new Array(64).fill(0)),()=>{i.current&&cancelAnimationFrame(i.current)}},[n,s]),(0,ca.jsxs)("div",{className:"frequency-spectrum",children:[(0,ca.jsxs)("div",{className:"spectrum-header",children:[(0,ca.jsx)("h3",{children:"FREQUENCY SPECTRUM"}),(0,ca.jsx)("span",{className:"status ".concat(n?"active":"idle"),children:n?"\u25cf ANALYZING":"\u25cb READY"})]}),(0,ca.jsx)("canvas",{ref:r,width:640,height:120,style:{width:"100%",height:"120px",background:"#222"}})]})},Sa=()=>(0,ca.jsxs)("div",{className:"pulsing-background",children:[(0,ca.jsx)("div",{className:"pulse-circle"}),(0,ca.jsx)("div",{className:"pulse-circle"}),(0,ca.jsx)("div",{className:"pulse-circle"}),(0,ca.jsx)("div",{className:"pulse-circle"})]}),Ta=e=>{let{predefinedPatterns:t,currentPatternName:n,loadPattern:s,savePattern:r,savedPatterns:i,deletePattern:o}=e;return(0,ca.jsxs)("div",{className:"pattern-controls",children:[(0,ca.jsxs)("h3",{children:["Patterns: ",n]}),(0,ca.jsx)("div",{className:"predefined-patterns",children:Object.entries(t).map(e=>{let[t,r]=e;return(0,ca.jsx)("button",{onClick:()=>s(t,r),disabled:n===t,children:t},t)})}),(0,ca.jsx)("div",{className:"saved-patterns",children:Object.entries(i).map(e=>{let[t,r]=e;return(0,ca.jsxs)("div",{className:"saved-pattern-item",children:[(0,ca.jsx)("button",{onClick:()=>s(t,r),disabled:n===t,children:t}),(0,ca.jsx)("button",{onClick:()=>o(t),className:"delete-button",children:"X"})]},t)})}),(0,ca.jsx)("button",{onClick:r,children:"Save Current Pattern"})]})},Ca=()=>"undefined"!==typeof window&&!!window.localStorage,Ea=(e,t)=>{if(!Ca())return t;try{return((e,t)=>{if("string"!==typeof e)return t;try{const n=JSON.parse(e);return n&&"object"===typeof n?n:t}catch(n){return t}})(window.localStorage.getItem(e),t)}catch(n){return t}},Aa=(e,t)=>{if(Ca())try{window.localStorage.setItem(e,JSON.stringify(t))}catch(n){}},Oa=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;const n={};return e.forEach(e=>{n[e.name]=Array(t).fill(!1)}),n},Pa=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-10;const n={};return e.forEach(e=>{n[e.name]="number"===typeof t?t:-10}),n},Ra=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;const s=Oa(t,n);if(!e||"object"!==typeof e)return s;const r={};return t.forEach(t=>{r[t.name]=((e,t)=>{const n=Array(e).fill(!1);if(Array.isArray(t))for(let s=0;s<Math.min(e,t.length);s++)n[s]=!!t[s];return n})(n,e[t.name])}),r},Na=(e,t,n)=>{if(!e||"object"!==typeof e)return Oa(t,n);const s={};return t.forEach(t=>{const r=Array.isArray(e[t.name])?e[t.name].map(Boolean):[],i=r.length;s[t.name]=n<=i?r.slice(0,n):r.concat(Array(n-i).fill(!1))}),s},Ma=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;const s=Number.isInteger(null===e||void 0===e?void 0:e.stepCount)?e.stepCount:n,r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return{pattern:Oa(e,t),drumVolumes:Pa(e,-10),masterVolume:-10,filterFreq:2e4,filterQ:1,loop1Playing:!1,loop1Volume:-10,loop2Playing:!1,loop2Volume:-10,loop3Playing:!1,loop3Volume:-10,loop4Playing:!1,loop4Volume:-10,loop5Playing:!1,loop5Volume:-10,loop6Playing:!1,loop6Volume:-10,stepCount:t,bpm:ha}}(t,s);if(!e||"object"!==typeof e)return r;if(null==e.pattern&&Object.keys(e).length)return a(a({},r),{},{pattern:Ra(e,t,s)});const i=a({},r);i.pattern=Ra(e.pattern,t,s);const o=e.drumVolumes&&"object"===typeof e.drumVolumes?e.drumVolumes:{},l={};t.forEach(e=>{const t=o[e.name];l[e.name]=Number.isFinite(t)?t:-10}),i.drumVolumes=l;const c=(e,t)=>Number.isFinite(e)?e:t;i.masterVolume=c(e.masterVolume,r.masterVolume),i.filterFreq=c(e.filterFreq,r.filterFreq),i.filterQ=c(e.filterQ,r.filterQ);for(let a=1;a<=6;a++){const t="loop".concat(a,"Playing"),n="loop".concat(a,"Volume");i[t]=!!e[t],i[n]=c(e[n],-10)}return i.stepCount=s,i.bpm=c(e.bpm,r.bpm),i},Ia="currentBeatLabPattern",Da="beatLabSavedPatterns",ja="beatLabStepCount",La=e=>{e&&"object"===typeof e&&Aa(Da,e)},Fa=(e,t)=>{const n=(e=>({Empty:(()=>{const t={};return e.forEach(e=>{t[e.name]=Array(16).fill(!1)}),t})(),"Rock Beat":{Kick:[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1],Snare:[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],"Closed Hi-Hat":Array(16).fill(!0),"Open Hi-Hat":Array(16).fill(!1),Clap:Array(16).fill(!1),Crash:[!0,!1,!1,!1,...Array(12).fill(!1)],"Tom Low":Array(16).fill(!1),"Tom High":Array(16).fill(!1)},"Hip-Hop":{Kick:[!0,!1,!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!0,!1,!1,!1],Snare:[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],"Closed Hi-Hat":Array.from({length:16},(e,t)=>t%2===1),"Open Hi-Hat":Array(16).fill(!1),Clap:Array(16).fill(!1),Crash:Array(16).fill(!1),"Tom Low":Array(16).fill(!1),"Tom High":Array(16).fill(!1)},Techno:{Kick:[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1],Snare:[!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1],"Closed Hi-Hat":Array(16).fill(!0),"Open Hi-Hat":Array(16).fill(!1),Clap:Array(16).fill(!1),Crash:Array(16).fill(!1),"Tom Low":Array(16).fill(!1),"Tom High":Array(16).fill(!1)},Breakbeat:{Kick:[!0,!1,!1,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!1,!1],Snare:[!1,!1,!0,!1,!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!0,!1],"Closed Hi-Hat":Array.from({length:16},(e,t)=>t%2===1),"Open Hi-Hat":Array(16).fill(!1),Clap:Array(16).fill(!1),Crash:Array(16).fill(!1),"Tom Low":Array(16).fill(!1),"Tom High":Array(16).fill(!1)}}))(e),s={};return Object.entries(n).forEach(n=>{let[r,i]=n;s[r]=Na(i,e,t)}),s};class Va extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class qa extends Va{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class za extends Va{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ua extends Va{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ba;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Ba||(Ba={}));var Wa=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class Ha{constructor(e){let{headers:t={},customFetch:s,region:r=Ba.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(s)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return Wa(this,void 0,void 0,function*(){try{const{headers:s,method:r,body:i,signal:o}=t;let a={},{region:l}=t;l||(l=this.region);const c=new URL("".concat(this.url,"/").concat(e));let u;l&&"any"!==l&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l)),i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!==typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=i):"string"===typeof i?(a["Content-Type"]="text/plain",u=i):"undefined"!==typeof FormData&&i instanceof FormData?u=i:(a["Content-Type"]="application/json",u=JSON.stringify(i)));const h=yield this.fetch(c.toString(),{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u,signal:o}).catch(e=>{if("AbortError"===e.name)throw e;throw new qa(e)}),d=h.headers.get("x-relay-error");if(d&&"true"===d)throw new za(h);if(!h.ok)throw new Ua(h);let p,f=(null!==(n=h.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return p="application/json"===f?yield h.json():"application/octet-stream"===f?yield h.blob():"text/event-stream"===f?h:"multipart/form-data"===f?yield h.formData():yield h.text(),{data:p,error:null,response:h}}catch(s){return s instanceof Error&&"AbortError"===s.name?{data:null,error:new qa(s)}:{data:null,error:s,response:s instanceof Ua||s instanceof za?s.context:void 0}}})}}var Ga=n(980);const{PostgrestClient:Qa,PostgrestQueryBuilder:Ka,PostgrestFilterBuilder:$a,PostgrestTransformBuilder:Ya,PostgrestBuilder:Xa,PostgrestError:Ja}=Ga;const Za=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(n," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(n," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},el="realtime-js/".concat("2.15.5"),tl=1e4;var nl,sl,rl,il,ol,al;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(nl||(nl={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(sl||(sl={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(rl||(rl={})),function(e){e.websocket="websocket"}(il||(il={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(ol||(ol={}));class ll{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),r=t.getUint8(2);let i=this.HEADER_LENGTH+2;const o=n.decode(e.slice(i,i+s));i+=s;const a=n.decode(e.slice(i,i+r));i+=r;return{ref:null,topic:o,event:a,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class cl{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(al||(al={}));const ul=function(e,t){var n;const s=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,r)=>(n[r]=hl(r,e,t,s),n),{})},hl=(e,t,n,s)=>{const r=t.find(t=>t.name===e),i=null===r||void 0===r?void 0:r.type,o=n[e];return i&&!s.includes(i)?dl(i,o):pl(o)},dl=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return vl(t,n)}switch(e){case al.bool:return fl(t);case al.float4:case al.float8:case al.int2:case al.int4:case al.int8:case al.numeric:case al.oid:return ml(t);case al.json:case al.jsonb:return gl(t);case al.timestamp:return yl(t);case al.abstime:case al.date:case al.daterange:case al.int4range:case al.int8range:case al.money:case al.reltime:case al.text:case al.time:case al.timestamptz:case al.timetz:case al.tsrange:case al.tstzrange:default:return pl(t)}},pl=e=>e,fl=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ml=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},gl=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},vl=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,s=e[n];if("{"===e[0]&&"}"===s){let s;const i=e.slice(1,n);try{s=JSON.parse("["+i+"]")}catch(r){s=i?i.split(","):[]}return s.map(e=>dl(t,e))}return e},yl=e=>"string"===typeof e?e.replace(" ","T"):e,_l=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class bl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:tl;this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var wl,kl,xl,Sl;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(wl||(wl={}));class Tl{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Tl.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=Tl.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Tl.syncDiff(this.state,e,t,n),s())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const r=this.cloneDeep(e),i=this.transformState(t),o={},a={};return this.map(r,(e,t)=>{i[e]||(a[e]=t)}),this.map(i,(e,t)=>{const n=r[e];if(n){const s=t.map(e=>e.presence_ref),r=n.map(e=>e.presence_ref),i=t.filter(e=>r.indexOf(e.presence_ref)<0),l=n.filter(e=>s.indexOf(e.presence_ref)<0);i.length>0&&(o[e]=i),l.length>0&&(a[e]=l)}else o[e]=t}),this.syncDiff(r,{joins:o,leaves:a},n,s)}static syncDiff(e,t,n,s){const{joins:r,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(r,(t,s)=>{var r;const i=null!==(r=e[t])&&void 0!==r?r:[];if(e[t]=this.cloneDeep(s),i.length>0){const n=e[t].map(e=>e.presence_ref),s=i.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...s)}n(t,i,s)}),this.map(i,(t,n)=>{let r=e[t];if(!r)return;const i=n.map(e=>e.presence_ref);r=r.filter(e=>i.indexOf(e.presence_ref)<0),e[t]=r,s(t,r,n),0===r.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(kl||(kl={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(xl||(xl={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Sl||(Sl={}));class Cl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=sl.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new bl(this,rl.join,this.params,this.timeout),this.rejoinTimer=new cl(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=sl.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=sl.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=sl.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=sl.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=sl.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rl.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Tl(this),this.broadcastEndpointURL=_l(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==sl.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,l=null!==(s=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==s?s:[],c=!!this.bindings[xl.PRESENCE]&&this.bindings[xl.PRESENCE].length>0||!0===(null===(r=this.params.config.presence)||void 0===r?void 0:r.enabled),u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(Sl.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(Sl.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var s;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,r=null!==(s=null===t||void 0===t?void 0:t.length)&&void 0!==s?s:0,i=[];for(let s=0;s<r;s++){const r=t[s],{filter:{event:o,schema:a,table:l,filter:c}}=r,u=n&&n[s];if(!u||u.event!==o||u.schema!==a||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=sl.errored,void(null===e||void 0===e||e(Sl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},r),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e(Sl.SUBSCRIBED))}null===e||void 0===e||e(Sl.SUBSCRIBED)}).receive("error",t=>{this.state=sl.errored,null===e||void 0===e||e(Sl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(Sl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===sl.joined&&e===xl.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var s,r,i;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(r=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===r?void 0:r.broadcast)||void 0===i?void 0:i.ack)||n("ok"),o.receive("ok",()=>n("ok")),o.receive("error",()=>n("error")),o.receive("timeout",()=>n("timed out"))});{const{event:i,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(r){return"AbortError"===r.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=sl.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(rl.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new bl(this,rl.leave,{},e),n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=sl.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const s=new AbortController,r=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(r),i}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let s=new bl(this,e,t,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,r;const i=e.toLocaleLowerCase(),{close:o,error:a,leave:l,join:c}=rl;if(n&&[o,a,l,c].indexOf(i)>=0&&n!==this._joinRef())return;let u=this._onMessage(i,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,n,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===s?void 0:s.toLocaleLowerCase())===i}).map(e=>e.callback(u,n)):null===(r=this.bindings[i])||void 0===r||r.filter(e=>{var n,s,r,o,a,l;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,o=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(s=t.ids)||void 0===s?void 0:s.includes(i))&&("*"===o||(null===o||void 0===o?void 0:o.toLocaleLowerCase())===(null===(r=t.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const n=null===(a=null===(o=null===e||void 0===e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:s,type:r,errors:i}=e,o={schema:t,table:n,commit_timestamp:s,eventType:r,new:{},old:{},errors:i};u=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===sl.closed}_isJoined(){return this.state===sl.joined}_isJoining(){return this.state===sl.joining}_isLeaving(){return this.state===sl.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const s=e.toLocaleLowerCase(),r={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(r):this.bindings[s]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===n&&Cl.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(rl.close,{},e)}_onError(e){this._on(rl.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=sl.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=ul(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=ul(e.columns,e.old_record)),t}}const El=()=>{},Al=25e3,Ol=10,Pl=100,Rl=[1e3,2e3,5e3,1e4];class Nl{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=tl,this.transport=null,this.heartbeatIntervalMs=Al,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=El,this.ref=0,this.reconnectTimer=null,this.logger=El,this.conn=null,this.sendBuffer=[],this.serializer=new ll,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(s=null===t||void 0===t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(il.websocket),this.httpEndpoint=_l(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Za.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case nl.connecting:return ol.Connecting;case nl.open:return ol.Open;case nl.closing:return ol.Closing;default:return ol.Closed}}isConnected(){return this.connectionState()===ol.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),s=this.getChannels().find(e=>e.topic===n);if(s)return s;{const n=new Cl("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:s,ref:r}=e,i=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(r,")"),s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Pl)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(a){this.log("error","error in heartbeat callback",a)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:s,ref:r}=e,i=r?"(".concat(r,")"):"",o=s.status||"";this.log("receive","".concat(o," ").concat(t," ").concat(n," ").concat(i).trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,s,r)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(rl.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return"".concat(e).concat(n).concat(s)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:el};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(rl.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(s){this.log("error","error in ".concat(e," callback"),s)}})}catch(n){this.log("error","error triggering ".concat(e," callbacks"),n)}}_setupReconnectionTimer(){this.reconnectTimer=new cl(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ol)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,s,r,i,o,a,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:tl,this.heartbeatIntervalMs=null!==(s=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==s?s:Al,this.worker=null!==(r=null===e||void 0===e?void 0:e.worker)&&void 0!==r&&r,this.accessToken=null!==(i=null===e||void 0===e?void 0:e.accessToken)&&void 0!==i?i:null,this.heartbeatCallback=null!==(o=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==o?o:El,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(a=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==a?a:e=>Rl[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class Ml extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Il(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Dl extends Ml{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class jl extends Ml{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ll=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const Fl=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},Vl=e=>{if(Array.isArray(e))return e.map(e=>Vl(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,s]=e;const r=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=Vl(s)}),t};var ql=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const zl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ul=(e,t,s)=>ql(void 0,void 0,void 0,function*(){const r=yield Ll(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof r&&!(null===s||void 0===s?void 0:s.noResolveJson)?e.json().then(n=>{const s=e.status||500,r=(null===n||void 0===n?void 0:n.statusCode)||s+"";t(new Dl(zl(n),s,r))}).catch(e=>{t(new jl(zl(e),e))}):t(new jl(zl(e),e))}),Bl=(e,t,n,s)=>{const r={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&s?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(s)?(r.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r.body=JSON.stringify(s)):r.body=s,(null===t||void 0===t?void 0:t.duplex)&&(r.duplex=t.duplex),Object.assign(Object.assign({},r),n)):r};function Wl(e,t,n,s,r,i){return ql(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,Bl(t,s,r,i)).then(e=>{if(!e.ok)throw e;return(null===s||void 0===s?void 0:s.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(e=>Ul(e,a,s))})})}function Hl(e,t,n,s){return ql(this,void 0,void 0,function*(){return Wl(e,"GET",t,n,s)})}function Gl(e,t,n,s,r){return ql(this,void 0,void 0,function*(){return Wl(e,"POST",t,s,r,n)})}function Ql(e,t,n,s,r){return ql(this,void 0,void 0,function*(){return Wl(e,"PUT",t,s,r,n)})}function Kl(e,t,n,s,r){return ql(this,void 0,void 0,function*(){return Wl(e,"DELETE",t,s,r,n)})}var $l=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class Yl{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return $l(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Il(e))return{data:null,error:e};throw e}})}}var Xl=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class Jl{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new Yl(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return Xl(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Il(e))return{data:null,error:e};throw e}})}}var Zl=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const ec={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class nc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Fl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,s){return Zl(this,void 0,void 0,function*(){try{let r;const i=Object.assign(Object.assign({},tc),s);let o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const a=i.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(r=new FormData,r.append("cacheControl",i.cacheControl),a&&r.append("metadata",this.encodeMetadata(a)),r.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(r=n,r.append("cacheControl",i.cacheControl),a&&r.append("metadata",this.encodeMetadata(a))):(r=n,o["cache-control"]="max-age=".concat(i.cacheControl),o["content-type"]=i.contentType,a&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null===s||void 0===s?void 0:s.headers)&&(o=Object.assign(Object.assign({},o),s.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?Ql:Gl)(this.fetch,"".concat(this.url,"/object/").concat(c),r,Object.assign({headers:o},(null===i||void 0===i?void 0:i.duplex)?{duplex:i.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Il(r))return{data:null,error:r};throw r}})}upload(e,t,n){return Zl(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return Zl(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),i=this._getFinalPath(r),o=new URL(this.url+"/object/upload/sign/".concat(i));o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:tc.upsert},s),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]="max-age=".concat(t.cacheControl),i["content-type"]=t.contentType);return{data:{path:r,fullPath:(yield Ql(this.fetch,o.toString(),e,{headers:i})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Il(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,t){return Zl(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(s["x-upsert"]="true");const r=yield Gl(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:s}),i=new URL(this.url+r.url),o=i.searchParams.get("token");if(!o)throw new Ml("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Il(n))return{data:null,error:n};throw n}})}update(e,t,n){return Zl(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Zl(this,void 0,void 0,function*(){try{return{data:yield Gl(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Il(s))return{data:null,error:s};throw s}})}copy(e,t,n){return Zl(this,void 0,void 0,function*(){try{return{data:{path:(yield Gl(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Il(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return Zl(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),r=yield Gl(this.fetch,"".concat(this.url,"/object/sign/").concat(s),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return r={signedUrl:encodeURI("".concat(this.url).concat(r.signedURL).concat(i))},{data:r,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Il(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return Zl(this,void 0,void 0,function*(){try{const s=yield Gl(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),r=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(r)):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Il(s))return{data:null,error:s};throw s}})}download(e,t){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),r=s?"?".concat(s):"",i=this._getFinalPath(e);return new Jl(()=>Hl(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(i).concat(r),{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return Zl(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Hl(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:Vl(e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Il(n))return{data:null,error:n};throw n}})}exists(e){return Zl(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,s){return ql(this,void 0,void 0,function*(){return Wl(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Il(n)&&n instanceof jl){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],r=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==r&&s.push(r);const i="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==o&&s.push(o);let a=s.join("&");return""!==a&&(a="?".concat(a)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(i,"/public/").concat(n).concat(a))}}}remove(e){return Zl(this,void 0,void 0,function*(){try{return{data:yield Kl(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Il(t))return{data:null,error:t};throw t}})}list(e,t,n){return Zl(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},ec),t),{prefix:e||""});return{data:yield Gl(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Il(s))return{data:null,error:s};throw s}})}listV2(e,t){return Zl(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Gl(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Il(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const sc={"X-Client-Info":"storage-js/".concat("2.12.2")};var rc=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class ic{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const r=new URL(e);if(null===s||void 0===s?void 0:s.useNewHostname){/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."))}this.url=r.href,this.headers=Object.assign(Object.assign({},sc),t),this.fetch=Fl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return rc(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Il(e))return{data:null,error:e};throw e}})}getBucket(e){return rc(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Il(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return rc(this,void 0,void 0,function*(){try{return{data:yield Gl(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Il(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return rc(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Il(n))return{data:null,error:n};throw n}})}emptyBucket(e){return rc(this,void 0,void 0,function*(){try{return{data:yield Gl(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Il(t))return{data:null,error:t};throw t}})}deleteBucket(e){return rc(this,void 0,void 0,function*(){try{return{data:yield Kl(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Il(t))return{data:null,error:t};throw t}})}}class oc extends ic{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new nc(this.url,this.headers,e,this.fetch)}}let ac="";ac="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const lc={headers:{"X-Client-Info":"supabase-js-".concat(ac,"/").concat("2.58.0")}},cc={schema:"public"},uc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hc={};var dc=n(630),pc=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const fc=e=>{let t;return t=e||("undefined"===typeof fetch?dc.default:fetch),function(){return t(...arguments)}},mc=(e,t,n)=>{const s=fc(n),r="undefined"===typeof Headers?dc.Headers:Headers;return(n,i)=>pc(void 0,void 0,void 0,function*(){var o;const a=null!==(o=yield t())&&void 0!==o?o:e;let l=new r(null===i||void 0===i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(a)),s(n,Object.assign(Object.assign({},i),{headers:l}))})};var gc=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};const vc="2.72.0",yc=3e4,_c=9e4,bc={"X-Client-Info":"gotrue-js/".concat(vc)},wc="X-Supabase-Api-Version",kc={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},xc=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Sc extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Tc(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Cc extends Sc{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Ec extends Sc{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ac extends Sc{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class Oc extends Ac{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Pc extends Ac{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rc extends Ac{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Nc extends Ac{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mc extends Ac{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ic extends Ac{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Dc(e){return Tc(e)&&"AuthRetryableFetchError"===e.name}class jc extends Ac{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Lc extends Ac{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Fc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Vc=" \t\n\r=".split(""),qc=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Vc.length;t+=1)e[Vc[t].charCodeAt(0)]=-2;for(let t=0;t<Fc.length;t+=1)e[Fc[t].charCodeAt(0)]=t;return e})();function zc(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Fc[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Fc[e]),t.queuedBits-=6}}function Uc(e,t,n){const s=qc[e];if(!(s>-1)){if(-2===s)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Bc(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,s,n)};for(let o=0;o<e.length;o+=1)Uc(e.charCodeAt(o),r,i);return t.join("")}function Wc(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function Hc(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}Wc(s,t)}}function Gc(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let r=0;r<e.length;r+=1)Uc(e.charCodeAt(r),n,s);return new Uint8Array(t)}function Qc(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>zc(e,n,s)),zc(null,n,s),t.join("")}const Kc=()=>"undefined"!==typeof window&&"undefined"!==typeof document,$c={tested:!1,writable:!1},Yc=()=>{if(!Kc())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if($c.tested)return $c.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),$c.tested=!0,$c.writable=!0}catch(t){$c.tested=!0,$c.writable=!1}return $c.writable};const Xc=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},Jc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Zc=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(s){return n}},eu=async(e,t)=>{await e.removeItem(t)};class tu{constructor(){this.promise=new tu.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function nu(e){const t=e.split(".");if(3!==t.length)throw new Lc("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!xc.test(t[n]))throw new Lc("JWT not in base64url format");return{header:JSON.parse(Bc(t[0])),payload:JSON.parse(Bc(t[1])),signature:Gc(t[2]),raw:{header:t[0],payload:t[1]}}}function su(e){return("0"+e.toString(16)).substr(-2)}async function ru(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function iu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let s=0;s<56;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,su).join("")}();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await Jc(e,"".concat(t,"-code-verifier"),r);const i=await ru(s);return[i,s===i?"plain":"s256"]}tu.promiseConstructor=Promise;const ou=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const au=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lu(e){if(!au.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function cu(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function uu(e){return JSON.parse(JSON.stringify(e))}var hu=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};const du=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),pu=[502,503,504];async function fu(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new Ic(du(e),0);if(pu.includes(e.status))throw new Ic(du(e),e.status);let s,r;try{s=await e.json()}catch(o){throw new Ec(du(o),o)}const i=function(e){const t=e.headers.get(wc);if(!t)return null;if(!t.match(ou))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(o){return null}}(e);if(i&&i.getTime()>=kc.timestamp&&"object"===typeof s&&s&&"string"===typeof s.code?r=s.code:"object"===typeof s&&s&&"string"===typeof s.error_code&&(r=s.error_code),r){if("weak_password"===r)throw new jc(du(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===r)throw new Oc}else if("object"===typeof s&&s&&"object"===typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new jc(du(s),e.status,s.weak_password.reasons);throw new Cc(du(s),e.status||500,r)}async function mu(e,t,n,s){var r;const i=Object.assign({},null===s||void 0===s?void 0:s.headers);i[wc]||(i[wc]=kc.name),(null===s||void 0===s?void 0:s.jwt)&&(i.Authorization="Bearer ".concat(s.jwt));const o=null!==(r=null===s||void 0===s?void 0:s.query)&&void 0!==r?r:{};(null===s||void 0===s?void 0:s.redirectTo)&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await async function(e,t,n,s,r,i){const o=((e,t,n,s)=>{const r={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))})(t,s,r,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Ic(du(l),0)}a.ok||await fu(a);if(null===s||void 0===s?void 0:s.noResolveJson)return a;try{return await a.json()}catch(l){await fu(l)}}(e,t,n+a,{headers:i,noResolveJson:null===s||void 0===s?void 0:s.noResolveJson},{},null===s||void 0===s?void 0:s.body);return(null===s||void 0===s?void 0:s.xform)?null===s||void 0===s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}function gu(e){var t;let n=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function vu(e){const t=gu(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function yu(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function _u(e){return{data:e,error:null}}function bu(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i}=e,o=hu(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i},user:Object.assign({},o)},error:null}}function wu(e){return e}const ku=["global","local","others"];var xu=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};class Su{constructor(e){let{url:t="",headers:n={},fetch:s}=e;this.url=t,this.headers=n,this.fetch=Xc(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ku[0];if(ku.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(ku.join(", ")));try{return await mu(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Tc(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await mu(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:yu})}catch(n){if(Tc(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=xu(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=null===n||void 0===n?void 0:n.newEmail,delete s.newEmail),await mu(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:s,headers:this.headers,xform:bu,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Tc(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await mu(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:yu})}catch(t){if(Tc(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,r,i,o,a;try{const l={nextPage:null,lastPage:0,total:0},c=await mu(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(r=null===(s=null===e||void 0===e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==r?r:""},xform:wu});if(c.error)throw c.error;const u=await c.json(),h=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(a=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Tc(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){lu(e);try{return await mu(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:yu})}catch(t){if(Tc(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){lu(e);try{return await mu(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:yu})}catch(n){if(Tc(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];lu(e);try{return await mu(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:yu})}catch(n){if(Tc(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){lu(e.userId);try{const{data:t,error:n}=await mu(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Tc(t))return{data:null,error:t};throw t}}async _deleteFactor(e){lu(e.userId),lu(e.id);try{return{data:await mu(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(Tc(t))return{data:null,error:t};throw t}}}function Tu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Cu=!!(globalThis&&Yc()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Eu extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Au extends Eu{}async function Ou(e,t,n){Cu&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Cu&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw Cu&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Au('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Cu)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Cu&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Cu&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}))}function Pu(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error('@supabase/auth-js: Address "'.concat(e,'" is invalid.'));return e.toLowerCase()}function Ru(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Nu={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Mu(e,t,n){return await n()}const Iu={};class Du{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Du.nextInstanceID,Du.nextInstanceID+=1,this.instanceID>0&&Kc()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Nu),e);if(this.logDebugMessages=!!s.debug,"function"===typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Su({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Xc(s.fetch),this.lock=s.lock||Mu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Kc()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Ou:this.lock=Mu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Yc()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tu(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Tu(this.memoryStorage)),Kc()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Iu[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Iu[this.storageKey]=Object.assign(Object.assign({},Iu[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Iu[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Iu[this.storageKey]=Object.assign(Object.assign({},Iu[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(vc,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(s){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Kc()&&this.detectSessionInUrl&&"none"!==n){const{data:s,error:r}=await this._getSessionFromURL(t,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),function(e){return Tc(e)&&"AuthImplicitGrantRedirectError"===e.name}(r)){const t=null===(e=r.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:r}}return await this._removeSession(),{error:r}}const{session:i,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout(async()=>{"recovery"===o?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Tc(t)?{error:t}:{error:new Ec("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const r=await mu(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:gu}),{data:i,error:o}=r;if(o||!i)return{data:{user:null,session:null},error:o};const a=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(r){if(Tc(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(e){var t,n,s;try{let r;if("email"in e){const{email:n,password:s,options:i}=e;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await iu(this.storage,this.storageKey)),r=await mu(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo,body:{email:n,password:s,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:a},xform:gu})}else{if(!("phone"in e))throw new Rc("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:o}=e;r=await mu(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null===o||void 0===o?void 0:o.data)&&void 0!==n?n:{},channel:null!==(s=null===o||void 0===o?void 0:o.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:gu})}}const{data:i,error:o}=r;if(o||!i)return{data:{user:null,session:null},error:o};const a=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(r){if(Tc(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:s,options:r}=e;t=await mu(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:vu})}else{if(!("phone"in e))throw new Rc("You must provide either an email or phone number and a password");{const{phone:n,password:s,options:r}=e;t=await mu(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:vu})}}const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Pc}}catch(t){if(Tc(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,r;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}}async signInWithEthereum(e){var t,n,s,r,i,o,a,l,c,u,h;let d,p;if("message"in e)d=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:f,options:m}=e;let g;if(Kc())if("object"===typeof h)g=h;else{const e=window;if(!("ethereum"in e)||"object"!==typeof e.ethereum||!("request"in e.ethereum)||"function"!==typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!==typeof h||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=h}const v=new URL(null!==(t=null===m||void 0===m?void 0:m.url)&&void 0!==t?t:window.location.href),y=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!y||0===y.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=Pu(y[0]);let b=null===(n=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!b){const e=await g.request({method:"eth_chainId"});b=parseInt(e,16)}d=function(e){var t;const{chainId:n,domain:s,expirationTime:r,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:h,version:d}=e;if(!Number.isInteger(n))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(n));if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(o));if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==d)throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(d));if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(e.statement));const p=Pu(e.address),f=u?"".concat(u,"://").concat(s):s,m=e.statement?"".concat(e.statement,"\n"):"",g="".concat(f," wants you to sign in with your Ethereum account:\n").concat(p,"\n\n").concat(m);let v="URI: ".concat(h,"\nVersion: ").concat(d,"\nChain ID: ").concat(n).concat(o?"\nNonce: ".concat(o):"","\nIssued At: ").concat(i.toISOString());if(r&&(v+="\nExpiration Time: ".concat(r.toISOString())),a&&(v+="\nNot Before: ".concat(a.toISOString())),l&&(v+="\nRequest ID: ".concat(l)),c){let e="\nResources:";for(const t of c){if(!t||"string"!==typeof t)throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(t));e+="\n- ".concat(t)}v+=e}return"".concat(g,"\n").concat(v)}({domain:v.host,address:_,statement:f,uri:v.href,version:"1",chainId:b,nonce:null===(s=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(i=null===(r=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===r?void 0:r.issuedAt)&&void 0!==i?i:new Date,expirationTime:null===(o=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===o?void 0:o.expirationTime,notBefore:null===(a=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===a?void 0:a.notBefore,requestId:null===(l=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===c?void 0:c.resources}),p=await g.request({method:"personal_sign",params:[Ru(d),_]})}try{const{data:t,error:n}=await mu(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:d,signature:p},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:gu});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Pc}}catch(f){if(Tc(f))return{data:{user:null,session:null},error:f};throw f}}async signInWithSolana(e){var t,n,s,r,i,o,a,l,c,u,h,d;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:h,wallet:d,statement:m,options:g}=e;let v;if(Kc())if("object"===typeof d)v=d;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof d||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=d}const y=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=["".concat(y.host," wants you to sign in with your Solana account:"),v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1","URI: ".concat(y.href),"Issued At: ".concat(null!==(s=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==s?s:(new Date).toISOString()),...(null===(r=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===r?void 0:r.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(u=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:n}=await mu(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Qc(f)},(null===(h=e.options)||void 0===h?void 0:h.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:gu});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Pc}}catch(m){if(Tc(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await Zc(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,s]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:r}=await mu(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:gu});if(await eu(this.storage,"".concat(this.storageKey,"-code-verifier")),r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==s&&void 0!==s?s:null}),error:r}):{data:{user:null,session:null,redirectType:null},error:new Pc}}catch(r){if(Tc(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:r,nonce:i}=e,o=await mu(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:s,access_token:r,nonce:i,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:gu}),{data:a,error:l}=o;return l?{data:{user:null,session:null},error:l}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l}):{data:{user:null,session:null},error:new Pc}}catch(t){if(Tc(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,r,i;try{if("email"in e){const{email:s,options:r}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await iu(this.storage,this.storageKey));const{error:a}=await mu(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:s,data:null!==(t=null===r||void 0===r?void 0:r.data)&&void 0!==t?t:{},create_user:null===(n=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},code_challenge:i,code_challenge_method:o},redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:n}=e,{data:o,error:a}=await mu(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(s=null===n||void 0===n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(r=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(i=null===n||void 0===n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null===o||void 0===o?void 0:o.message_id},error:a}}throw new Rc("You must provide either an email or phone number.")}catch(o){if(Tc(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,n;try{let s,r;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,r=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:o}=await mu(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:s,xform:gu});if(o)throw o;if(!i)throw new Error("An error occurred on token verification.");const a=i.session,l=i.user;return(null===a||void 0===a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(s){if(Tc(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let r=null,i=null;return"pkce"===this.flowType&&([r,i]=await iu(this.storage,this.storageKey)),await mu(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:i}),headers:this.headers,xform:_u})}catch(r){if(Tc(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Oc;const{error:s}=await mu(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Tc(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:s,options:r}=e,{error:i}=await mu(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:s,options:r}=e,{data:i,error:o}=await mu(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o}}throw new Rc("You must provide either an email or phone number and a type")}catch(t){if(Tc(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Zc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<_c;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.userStorage){const t=await Zc(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=cu()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,s)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,s))})}return{data:{session:e},error:null}}const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await mu(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:yu}):await this._useSession(async e=>{var t,n,s;const{data:r,error:i}=e;if(i)throw i;return(null===(t=r.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await mu(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(s=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0,xform:yu}):{data:{user:null},error:new Oc}})}catch(t){if(Tc(t))return function(e){return Tc(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await eu(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:s,error:r}=n;if(r)throw r;if(!s.session)throw new Oc;const i=s.session;let o=null,a=null;"pkce"===this.flowType&&null!=e.email&&([o,a]=await iu(this.storage,this.storageKey));const{data:l,error:c}=await mu(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:a}),jwt:i.access_token,xform:yu});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(Tc(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Oc;const t=Date.now()/1e3;let n=t,s=!0,r=null;const{payload:i}=nu(e.access_token);if(i.exp&&(n=i.exp,s=n<=t),s){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};r=t}else{const{data:s,error:i}=await this._getUser(e.access_token);if(i)throw i;r={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(t){if(Tc(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:s,error:r}=t;if(r)throw r;e=null!==(n=s.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Oc;const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Tc(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Kc())throw new Nc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Nc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Mc("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Nc("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Mc("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:r,refresh_token:i,expires_in:o,expires_at:a,token_type:l}=e;if(!r||!o||!i||!l)throw new Nc("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(o);let h=c+u;a&&(h=parseInt(a));const d=h-c;1e3*d<=yc&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(d,"s, should have been closer to ").concat(u,"s"));const p=h-u;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,c);const{data:f,error:m}=await this._getUser(r);if(m)throw m;const g={provider_token:n,provider_refresh_token:s,access_token:r,expires_in:u,expires_at:h,refresh_token:i,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(Tc(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Zc(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:s,error:r}=t;if(r)return{error:r};const i=null===(n=s.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return Tc(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await eu(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:s},error:r}=t;if(r)throw r;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(r){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,s=null;"pkce"===this.flowType&&([n,s]=await iu(this.storage,this.storageKey,!0));try{return await mu(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(Tc(r))return{data:null,error:r};throw r}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Tc(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async t=>{var n,s,r,i,o;const{data:a,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:!0});return await mu(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(o=null===(i=a.session)||void 0===i?void 0:i.access_token)&&void 0!==o?o:void 0})});if(s)throw s;return Kc()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(Tc(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:r,error:i}=t;if(i)throw i;return await mu(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(s=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0})})}catch(t){if(Tc(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const r=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await mu(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:gu})),s=(e,t)=>{const n=200*Math.pow(2,e);return t&&Dc(t)&&Date.now()+n-r<yc},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await n(i);if(!s(i,null,t))return void e(t)}catch(r){if(!s(i,r))return void t(r)}})()}))}catch(r){if(this._debug(t,"error",r),Tc(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}var n,s}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Kc()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Zc(this.storage,this.storageKey);if(r&&this.userStorage){let t=await Zc(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:r.user},await Jc(this.userStorage,this.storageKey+"-user",t)),r.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:cu()}else if(r&&!r.user&&!r.user){const e=await Zc(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(r.user=e.user,await eu(this.storage,this.storageKey+"-user"),await Jc(this.storage,this.storageKey,r)):r.user=cu()}if(this._debug(n,"session from storage",r),!this._isValidSession(r))return this._debug(n,"session is not valid"),void(null!==r&&await this._removeSession());const i=1e3*(null!==(t=r.expires_at)&&void 0!==t?t:1/0)-Date.now()<_c;if(this._debug(n,"session has".concat(i?"":" not"," expired with margin of ").concat(_c,"s")),i){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=await this._callRefreshToken(r.refresh_token);e&&(console.error(e),Dc(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(r.user&&!0===r.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(r.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(r.user=e.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){return this._debug(n,"error",r),void console.error(r)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Oc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(s,"begin");try{this.refreshingDeferred=new tu;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Oc;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(r){if(this._debug(s,"error",r),Tc(r)){const e={session:null,error:r};return Dc(r)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s="#_notifyAllSubscribers(".concat(e,")");this._debug(s,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],r=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(r){s.push(r)}});if(await Promise.all(r),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await Jc(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const s=uu(e);await Jc(this.storage,this.storageKey,s)}else{const e=uu(t);await Jc(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await eu(this.storage,this.storageKey),await eu(this.storage,this.storageKey+"-code-verifier"),await eu(this.storage,this.storageKey+"-user"),this.userStorage&&await eu(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Kc()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),yc);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*n.expires_at-t)/yc);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(s," ticks, a tick lasts ").concat(yc,"ms, refresh threshold is ").concat(3," ticks")),s<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Eu))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kc()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&s.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&s.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await iu(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});s.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);s.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&s.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(s.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await mu(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Tc(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:l}=await mu(this.fetch,"POST","".concat(this.url,"/factors"),{body:o,headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(s=null===a||void 0===a?void 0:a.totp)||void 0===s?void 0:s.qr_code)&&(a.totp.qr_code="data:image/svg+xml;utf-8,".concat(a.totp.qr_code)),{data:a,error:null})})}catch(t){if(Tc(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;if(r)return{data:null,error:r};const{data:i,error:o}=await mu(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})})}catch(t){if(Tc(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await mu(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Tc(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],s=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),r=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:s,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:r}=e;if(r)return{data:null,error:r};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=nu(s.access_token);let o=null;i.aal&&(o=i.aal);let a=o;(null!==(n=null===(t=s.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(a="aal2");return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:i.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:s,error:r}=await mu(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(r)throw r;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=n,t=s.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:s,payload:r,signature:i,raw:{header:o,payload:a}}=nu(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(r.exp);const l=s.alg&&!s.alg.startsWith("HS")&&s.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(s.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:r,header:s,signature:i},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,i,function(e){const t=[];return Hc(e,e=>t.push(e)),new Uint8Array(t)}("".concat(o,".").concat(a))))throw new Lc("Invalid JWT signature");return{data:{claims:r,header:s,signature:i},error:null}}catch(n){if(Tc(n))return{data:null,error:n};throw n}}}Du.nextInstanceID=0;const ju=Du;class Lu extends ju{constructor(e){super(e)}}var Fu=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function a(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class Vu{constructor(e,t,n){var s,r,i;this.supabaseUrl=e,this.supabaseKey=t;const o=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(s){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a="sb-".concat(o.hostname.split(".")[0],"-auth-token"),l=function(e,t){var n,s;const{db:r,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:h}=t,d={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},null!==(n=null===h||void 0===h?void 0:h.headers)&&void 0!==n?n:{}),null!==(s=null===a||void 0===a?void 0:a.headers)&&void 0!==s?s:{})}),accessToken:()=>gc(this,void 0,void 0,function*(){return""})};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}(null!==n&&void 0!==n?n:{},{db:cc,realtime:hc,auth:Object.assign(Object.assign({},uc),{storageKey:a}),global:lc});this.storageKey=null!==(s=l.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(r=l.global.headers)&&void 0!==r?r:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(i=l.auth)&&void 0!==i?i:{},this.headers,l.global.fetch),this.fetch=mc(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new Qa(new URL("rest/v1",o).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new oc(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Ha(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Fu(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:s,persistSession:r,detectSessionInUrl:i,storage:o,userStorage:a,storageKey:l,flowType:c,lock:u,debug:h}=e;const d={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Lu({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),t),storageKey:l,autoRefreshToken:s,persistSession:r,detectSessionInUrl:i,storage:o,userStorage:a,flowType:c,lock:u,debug:h,fetch:n,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new Nl(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const qu="https://vjdydqrjzuddnynzkrhx.supabase.co",zu="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZqZHlkcXJqenVkZG55bnprcmh4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2NjIwNzIsImV4cCI6MjA3NTIzODA3Mn0.cLmGhySDCuazLgFp0kT8L2knR4AHVfmXhPj71c28az4";let Uu=null;qu&&zu&&(Uu=new Vu(qu,zu,{auth:{persistSession:!1},global:{headers:{"x-client-info":"beatlab-share/1.0"}}}));const Bu=()=>Boolean(Uu),Wu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Hu=e=>{const t=(e=>{const t=new Uint32Array(e);return crypto.getRandomValues(t),t})(e);let n="";for(let s=0;s<e;s+=1)n+=Wu[t[s]%62];return n},Gu=()=>{const e=Uu;if(!e)throw new Error("Supabase client not configured");return e},Qu=e=>e<3?8:e<6?9:10,Ku=async e=>{var t;if(!Bu())throw new Error("Supabase credentials missing");const n=Gu(),s=u(e),r=await(async e=>{const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(e=>e.toString(16).padStart(2,"0")).join("")})(s),i=await n.from("patterns").select("id").eq("hash",r).maybeSingle();if(i.error&&"PGRST116"!==i.error.code)throw i.error;if(null!==(t=i.data)&&void 0!==t&&t.id)return i.data.id;for(let c=0;c<9;c+=1){var o,a;const e=Hu(Qu(c)),t=await n.from("patterns").insert({id:e,payload:s,hash:r,v:1}).select("id").maybeSingle();if(!t.error&&null!==(o=t.data)&&void 0!==o&&o.id)return t.data.id;var l;if("23505"!==(null===(a=t.error)||void 0===a?void 0:a.code))throw null!==(l=t.error)&&void 0!==l?l:new Error("Failed to insert pattern")}throw new Error("Exceeded attempts to generate unique id")},$u=function(){false},Yu=e=>e.endsWith("/")?e:"".concat(e,"/"),Xu=t=>{const[n,s]=(0,e.useState)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16;if(!Ca())return e;try{const t=window.localStorage.getItem(ja),n=parseInt(t,10);return Number.isInteger(n)?n:e}catch(t){return e}}(da)),r={Empty:(()=>{const e={};return t.forEach(t=>{e[t.name]=Array(n).fill(!1)}),e})(),"Rock Beat":{Kick:[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1],Snare:[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],"Closed Hi-Hat":[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],"Open Hi-Hat":[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],Clap:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],Crash:[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],"Tom Low":[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],"Tom High":[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]},"Hip-Hop":{Kick:[!0,!1,!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!0,!1,!1,!1],Snare:[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],"Closed Hi-Hat":[!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0],"Open Hi-Hat":[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],Clap:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],Crash:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],"Tom Low":[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],"Tom High":[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]},Techno:{Kick:[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1],Snare:[!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1],"Closed Hi-Hat":[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],"Open Hi-Hat":[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],Clap:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],Crash:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],"Tom Low":[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],"Tom High":[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]},Breakbeat:{Kick:[!0,!1,!1,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!1,!1],Snare:[!1,!1,!0,!1,!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!0,!1],"Closed Hi-Hat":[!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0],"Open Hi-Hat":[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],Clap:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],Crash:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],"Tom Low":[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],"Tom High":[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]}},[i,o]=(0,e.useState)(()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;const n=Ea(Ia,null);return Ra(n,e,t)}(t,n)),[l,c]=(0,e.useState)(ha),[h,d]=(0,e.useState)(!1),[p,f]=(0,e.useState)(-1),[m,g]=(0,e.useState)("Empty"),[v,y]=(0,e.useState)(()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;const n=Ea(Da,{});if(!n||"object"!==typeof n)return{};const s={};return Object.entries(n).forEach(n=>{var r;let[i,o]=n;s[i]=Ma(o,e,null!==(r=null===o||void 0===o?void 0:o.stepCount)&&void 0!==r?r:t)}),s}(t)),_=(0,e.useRef)({}),b=(0,e.useRef)(null),w=(0,e.useRef)([]),k=(0,e.useRef)(i);(0,e.useEffect)(()=>{k.current=i,(e=>{Aa(Ia,e)})(i)},[i]);const[x,S]=(0,e.useState)(()=>{const e={};return t.forEach(t=>{e[t.name]=pa}),e}),[T,C]=(0,e.useState)(pa),[E,A]=(0,e.useState)(()=>Array(ya.length).fill(!1)),[O,P]=(0,e.useState)(()=>Array(ya.length).fill(pa)),R=(0,e.useRef)(null),N=(0,e.useRef)(null),M=(0,e.useRef)(null),I=(0,e.useRef)(null),D=(0,e.useRef)(null),j=(0,e.useRef)(null),L=(0,e.useRef)(null),F=(0,e.useRef)(null),V=(0,e.useRef)(null),q=(0,e.useRef)(null),z=(0,e.useRef)(null),U=(0,e.useRef)(null),B=(0,e.useMemo)(()=>[N,I,j,F,q,U],[]),W=[R,M,D,L,V,z],[H,G]=(0,e.useState)(ga),[Q,K]=(0,e.useState)(va),$=(0,e.useRef)(null),Y=(0,e.useRef)({}),X=(0,e.useRef)(null),J=(0,e.useRef)(null);(0,e.useEffect)(()=>{$u("Initializing Tone.js instruments..."),w.current=[];const e=e=>(w.current.push(e),e),s=new Si(-10);if("function"===typeof s.toDestination)s.toDestination();else{var r;if("function"!==typeof s.connect||!aa)return $u("Skipping Tone initialization: master volume routing unavailable."),null===(r=s.dispose)||void 0===r||r.call(s),()=>{};s.connect(aa)}e(s),$.current=s,X.current=e(new wo(H,"lowpass").connect($.current)),J.current=new na("fft",256),$.current.connect(J.current),Y.current={},t.forEach(e=>{Y.current[e.name]=new Si(x[e.name]).connect(X.current)}),_.current={Kick:new To({envelope:{attack:.005,decay:.4,sustain:0,release:.1}}).connect(Y.current.Kick),Snare:new Co({noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:.01,release:.05}}).connect(Y.current.Snare),"Closed Hi-Hat":new Co({noise:{type:"white"},envelope:{attack:.001,decay:.05,sustain:.01,release:.02}}).connect(Y.current["Closed Hi-Hat"]),"Open Hi-Hat":new Co({noise:{type:"white"},envelope:{attack:.001,decay:.2,sustain:.05,release:.05}}).connect(Y.current["Open Hi-Hat"]),Clap:new Co({noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:.01,release:.05}}).connect(Y.current.Clap),Crash:new Co({noise:{type:"white"},envelope:{attack:.005,decay:.5,sustain:.1,release:.5}}).connect(Y.current.Crash),"Tom Low":new To({envelope:{attack:.005,decay:.3,sustain:0,release:.1}}).connect(Y.current["Tom Low"]),"Tom High":new To({envelope:{attack:.005,decay:.3,sustain:0,release:.1}}).connect(Y.current["Tom High"])},$u("Tone.js instruments initialized.");const i=e(new Xo(4,2.5,.5).connect($.current));i.start();const o=e(new ea("8n",.5).connect(i));R.current=new So({harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}).connect(o);const a=["C4","E4","G4","B4","C5","B4","G4","E4"],l=[{time:"0:0",note:a[0],duration:"8n"},{time:"0:1",note:a[1],duration:"16n"},{time:"0:2",note:a[2],duration:"8n"},{time:"0:3",note:a[3],duration:"16n"},{time:"1:0",note:a[4],duration:"8n"},{time:"1:1",note:a[5],duration:"16n"},{time:"1:2",note:a[6],duration:"8n"},{time:"1:3",note:a[7],duration:"16n"}];N.current=new Vo((e,t)=>{R.current.triggerAttackRelease(t.note,t.duration,e)},l),N.current.loop=!0,N.current.loopEnd="2m",M.current=new jo(yo,{oscillator:{type:"triangle"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}}).connect($.current);I.current=new Vo((e,t)=>{M.current.triggerAttackRelease(t.notes,"2n",e)},[{time:"0:0",notes:["C4","E4","G4"]},{time:"0:2",notes:["G3","B3","D4"]},{time:"1:0",notes:["A3","C4","E4"]},{time:"1:2",notes:["F3","A3","C4"]}]),I.current.loop=!0,I.current.loopEnd="2m";const c=e(new wo(1200,"lowpass").connect($.current)),u=e(new Jo(.4).connect(c));D.current=new xo({oscillator:{type:"sawtooth"},envelope:{attack:.01,decay:.2,sustain:.2,release:.1}}).connect(u);j.current=new Vo((e,t)=>{D.current.triggerAttackRelease(t.note,t.duration,e)},[{time:"0:0",note:"C3",duration:"8n"},{time:"0:1.5",note:"C3",duration:"16n"},{time:"0:2",note:"G2",duration:"8n"},{time:"0:3",note:"G2",duration:"16n"},{time:"1:0",note:"C3",duration:"8n"},{time:"1:1.5",note:"C3",duration:"16n"},{time:"1:2",note:"A2",duration:"8n"},{time:"1:3",note:"A2",duration:"16n"}]),j.current.loop=!0,j.current.loopEnd="2m";const h=e(new wo(200,"lowpass").connect($.current));L.current=new jo(So,{harmonicity:1,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.8,decay:.4,sustain:.8,release:2},modulation:{type:"sine"},modulationEnvelope:{attack:.8,decay:0,sustain:1,release:2}}).connect(h);F.current=new Vo((e,t)=>{L.current.triggerAttackRelease(t.notes,"4m",e)},[{time:"0:0",notes:["C2","G2","C3","E3"]},{time:"2:0",notes:["F2","C3","F3","A3"]},{time:"4:0",notes:["G2","D3","G3","B3"]},{time:"6:0",notes:["E2","B2","E3","G#3"]}]),F.current.loop=!0,F.current.loopEnd="4m";const d=e(new ta(5).connect($.current));V.current=(new Do).connect(d);q.current=new Vo((e,t)=>{V.current.triggerAttackRelease(t.note,"8n",e)},[{time:"0:0",note:"C5"},{time:"0:1",note:"E5"},{time:"0:2",note:"G5"},{time:"0:3",note:"B5"},{time:"1:0",note:"C6"},{time:"1:1",note:"B5"},{time:"1:2",note:"G5"},{time:"1:3",note:"E5"},{time:"2:0",note:"D5"},{time:"2:1",note:"F5"},{time:"2:2",note:"A5"},{time:"2:3",note:"C6"},{time:"3:0",note:"B5"},{time:"3:1",note:"A5"},{time:"3:2",note:"F5"},{time:"3:3",note:"D5"}]),q.current.loop=!0,q.current.loopEnd="2m";const p=e(new Ho(4).connect($.current));z.current=new Co({noise:{type:"white"},envelope:{attack:.001,decay:.1,sustain:0}}).connect(p);return U.current=new Vo(e=>{z.current.triggerAttackRelease("16n",e)},[{time:"0:0:3"},{time:"0:1:2"},{time:"0:2:1"},{time:"0:3:0"},{time:"1:0:3"},{time:"1:1:2"},{time:"1:2:1"},{time:"1:3:0"},{time:"2:0:2"},{time:"2:1:1"},{time:"2:2:3"},{time:"2:3:0"},{time:"3:0:1"},{time:"3:1:3"},{time:"3:2:2"},{time:"3:3:0"}]),U.current.loop=!0,U.current.loopEnd="2m",b.current=new qo((e,n)=>{f(n),t.forEach(t=>{k.current[t.name][n]&&("membrane"===t.type?_.current[t.name].triggerAttackRelease(t.note,"8n",e):"noise"===t.type&&_.current[t.name].triggerAttackRelease("8n",e))})},Array.from({length:n},(e,t)=>t),"16n").start(0),$u("Tone.Sequence set up."),oa.loop=!0,oa.loopEnd="4m",()=>{$u("Disposing Tone.js instruments and sequence..."),oa.stop(),oa.cancel(0),b.current&&(b.current.stop(),b.current.dispose(),b.current=null),B.forEach(e=>{e.current&&(e.current.stop(0),e.current.dispose(),e.current=null)}),W.forEach(e=>{e.current&&(e.current.dispose(),e.current=null)}),Object.values(_.current).forEach(e=>e.dispose()),_.current={},Object.values(Y.current).forEach(e=>e.dispose()),Y.current={},w.current.forEach(e=>{var t;if(e&&"function"===typeof e.stop)try{e.stop()}catch(n){$u("Failed to stop node during cleanup",n)}null===e||void 0===e||null===(t=e.dispose)||void 0===t||t.call(e)}),w.current=[],J.current&&(J.current.dispose(),J.current=null),$.current=null,X.current=null,$u("Disposal complete.")}},[]),(0,e.useEffect)(()=>{b.current&&(b.current.stop(),b.current.dispose(),b.current=new qo((e,n)=>{f(n),t.forEach(t=>{k.current[t.name][n]&&("membrane"===t.type?_.current[t.name].triggerAttackRelease(t.note,"8n",e):"noise"===t.type&&_.current[t.name].triggerAttackRelease("8n",e))})},Array.from({length:n},(e,t)=>t),"16n").start(0))},[n,t]),(0,e.useEffect)(()=>{$u("BPM changed to:",l),oa.bpm.value=l},[l]);const Z=(0,e.useCallback)(()=>{$u("Stop button clicked. Transport state:",oa.state),oa.stop(),B.forEach(e=>{e.current&&e.current.stop(0)}),d(!1),f(-1),$u("Transport stopped.")},[B]),ee=(0,e.useCallback)((e,r)=>{if(r.pattern){const e=r.stepCount||n,i=Na(r.pattern,t,e);o(i),r.bpm&&c(r.bpm),r.stepCount&&s(r.stepCount),S(r.drumVolumes),C(r.masterVolume),G(r.filterFreq),K(r.filterQ),A([!!r.loop1Playing,!!r.loop2Playing,!!r.loop3Playing,!!r.loop4Playing,!!r.loop5Playing,!!r.loop6Playing]),P([Number.isFinite(r.loop1Volume)?r.loop1Volume:pa,Number.isFinite(r.loop2Volume)?r.loop2Volume:pa,Number.isFinite(r.loop3Volume)?r.loop3Volume:pa,Number.isFinite(r.loop4Volume)?r.loop4Volume:pa,Number.isFinite(r.loop5Volume)?r.loop5Volume:pa,Number.isFinite(r.loop6Volume)?r.loop6Volume:pa])}else o(Na(r,t,n));g(e),Z()},[Z,t,n]),[te,ne]=(0,e.useState)(null),[se,re]=(0,e.useState)(!0);(0,e.useEffect)(()=>{oa.loop=se},[se]);(0,e.useEffect)(()=>{$.current&&($.current.volume.value=T)},[T]),(0,e.useEffect)(()=>{Object.entries(x).forEach(e=>{let[t,n]=e;Y.current[t]&&(Y.current[t].volume.value=n)})},[x]),(0,e.useEffect)(()=>{X.current&&(X.current.frequency.value=H)},[H]),(0,e.useEffect)(()=>{X.current&&(X.current.Q.value=Q)},[Q]),(0,e.useEffect)(()=>{[N,I,j,F,q,U].forEach((e,t)=>{e.current&&(e.current.mute=!E[t])})},[E]),(0,e.useEffect)(()=>{[R,M,D,L,V,z].forEach((e,t)=>{e.current&&(e.current.volume.value=O[t])})},[O]);return{pattern:i,bpm:l,stepCount:n,isPlaying:h,currentStep:p,currentPatternName:m,savedPatterns:v,drumVolumes:x,masterVolume:T,loopPlaying:E,loopVolume:O,filterFreq:H,filterQ:Q,activePad:te,isLooping:se,toggleStep:(e,t)=>{o(n=>a(a({},n),{},{[e]:n[e].map((e,n)=>n===t?!e:e)}))},handlePlay:()=>{$u("Play button clicked. Transport state:",oa.state),"started"!==oa.state&&(oa.start(),B.forEach(e=>{e.current&&e.current.start(0)}),d(!0),$u("Transport started."))},handleStop:Z,handleBpmChange:e=>{(e=>{const t=Number(e);Number.isFinite(t)&&c(t)})(e.target.value)},handleStepCountChange:e=>{const n=parseInt(e.target.value,10);if(!Number.isInteger(n)||n<=0)return;const r=Na(k.current,t,n);o(r),s(n),(e=>{if(Number.isInteger(e)&&Ca())try{window.localStorage.setItem(ja,String(e))}catch(t){}})(n)},loadPattern:ee,savePattern:()=>{const e=prompt("Enter a name for your pattern:");if(e){const s={pattern:i,drumVolumes:x,masterVolume:T,filterFreq:H,filterQ:Q,stepCount:n,loop1Playing:!!E[0],loop1Volume:O[0],loop2Playing:!!E[1],loop2Volume:O[1],loop3Playing:!!E[2],loop3Volume:O[2],loop4Playing:!!E[3],loop4Volume:O[3],loop5Playing:!!E[4],loop5Volume:O[4],loop6Playing:!!E[5],loop6Volume:O[5]},r=Ma(s,t,n),o=a(a({},v),{},{[e]:r});y(o),La(o),g(e),alert('Pattern "'.concat(e,'" saved!'))}},deletePattern:e=>{if(window.confirm('Are you sure you want to delete pattern "'.concat(e,'"?'))){const t=a({},v);delete t[e],y(t),La(t),m===e&&ee("Empty",r.Empty),alert('Pattern "'.concat(e,'" deleted!'))}},toggleLoop:()=>{re(e=>!e)},handleDrumVolumeChange:(e,t)=>{S(n=>a(a({},n),{},{[e]:parseFloat(t)}))},handleMasterVolumeChange:e=>{C(parseFloat(e.target.value))},handleFilterFreqChange:e=>{G(parseFloat(e.target.value))},handleFilterQChange:e=>{K(parseFloat(e.target.value))},toggleLoopAt:e=>{A(t=>{const n=[...t];return n[e]=!n[e],n})},handleLoopVolumeChangeAt:(e,t)=>{const n=parseFloat(t.target.value);P(t=>{const s=[...t];return s[e]=n,s})},playSound:e=>{const n=t.find(t=>t.name===e);if(n){const t="8n",s=_.current[n.name];if(!s)return;"membrane"===n.type?s.triggerAttackRelease(n.note,t):"noise"===n.type&&s.triggerAttackRelease(t),ne(e),setTimeout(()=>ne(null),100)}},predefinedPatterns:Fa(t,n),analyser:J.current,getSharablePatternUrl:async()=>{const e=(()=>{const e={pattern:i,bpm:l,stepCount:n,drumVolumes:x,masterVolume:T,filterFreq:H,filterQ:Q,loop1Playing:!!E[0],loop1Volume:O[0],loop2Playing:!!E[1],loop2Volume:O[1],loop3Playing:!!E[2],loop3Volume:O[2],loop4Playing:!!E[3],loop4Volume:O[3],loop5Playing:!!E[4],loop5Volume:O[4],loop6Playing:!!E[5],loop6Volume:O[5]};return Ma(e,t,n)})(),s=(()=>{if("undefined"===typeof window)return"";const{origin:e,pathname:t}=window.location,n="/BeatLab";if(n)try{const t=new URL(n,e);return Yu("".concat(t.origin).concat(t.pathname))}catch(s){const t=n.replace(/\/+$/g,"").replace(/^\/+/,"");return Yu(t?"".concat(e,"/").concat(t):e)}return e.includes("github.io")||t.toLowerCase().includes("/beatlab")?Yu("".concat(e,"/BeatLab")):Yu(e)})(),r=u(e),o="".concat(s,"?p=").concat(r);try{const t=await Ku(e);return{url:"".concat(s).concat(t),fallbackUrl:o,fallbackPayload:r,isFallback:!1}}catch(a){return{url:o,fallbackUrl:o,fallbackPayload:r,isFallback:!0,error:a}}}}},Ju=[{name:"Kick",note:"C2",type:"membrane"},{name:"Snare",note:"E2",type:"noise"},{name:"Closed Hi-Hat",note:"F#2",type:"noise"},{name:"Open Hi-Hat",note:"A#2",type:"noise"},{name:"Clap",note:"C#3",type:"noise"},{name:"Crash",note:"F3",type:"noise"},{name:"Tom Low",note:"D2",type:"membrane"},{name:"Tom High",note:"G2",type:"membrane"}];const Zu=function(){const[t,n]=(0,e.useState)(!1),s=Xu(Ju);return(0,e.useEffect)(()=>{const e=e=>{if("undefined"===typeof window)return;const t=new URL(window.location.href);let n=!1;e.forEach(e=>{t.searchParams.has(e)&&(t.searchParams.delete(e),n=!0)}),n&&window.history.replaceState(null,"","".concat(t.origin).concat(t.pathname).concat(t.search).concat(t.hash))},t=async e=>{const t=e.pathname.split("/").filter(Boolean);if(!t.length)return!1;const n=t[t.length-1],r=1===t.length&&"beatlab"===t[0].toLowerCase();if(!/^[A-Za-z0-9]{1,10}$/.test(n)||r)return!1;try{const e=await(async e=>{if(!Bu())throw new Error("Supabase credentials missing");const t=Gu(),{data:n,error:s}=await t.from("patterns").select("payload").eq("id",e).maybeSingle();if(s){if("PGRST116"===s.code)return null;throw s}return null!==n&&void 0!==n&&n.payload?h(n.payload):null})(n);if(e)return s.loadPattern("Shared Pattern",e),!0}catch(i){console.error("Failed to load shared pattern by id:",i)}return!1},n=t=>{const n=t.searchParams.get("pattern");if(!n)return!1;const r=(e=>{try{const t=c().decompressFromEncodedURIComponent(e);return JSON.parse(t)}catch(t){return console.error("Failed to decode pattern:",t),null}})(n);return!!r&&(s.loadPattern("Shared Pattern",r),e(["pattern"]),!0)};(async()=>{(()=>{if("undefined"===typeof window)return;const{search:e,origin:t,hash:n}=window.location;if(!e.startsWith("?"))return;const s=new URLSearchParams(e),r=s.get("p");if(!r||!r.startsWith("/"))return;const i=s.get("q"),o=s.get("h"),a=i?"?".concat(i):"",l=o?"#".concat(o):n;window.history.replaceState(null,"","".concat(t).concat(r).concat(a).concat(l))})();const r=new URL(window.location.href);await t(r)||(t=>{const n=t.searchParams.get("p");if(!n||n.startsWith("/"))return!1;const r=h(n);return!!r&&(s.loadPattern("Shared Pattern",r),e(["p"]),!0)})(r)||n(r)})()},[]),(0,ca.jsx)("div",{className:"App ".concat(t?"":"welcome"),children:t?(0,ca.jsxs)("div",{className:"app-container",children:[(0,ca.jsxs)("div",{className:"middle-column",children:[(0,ca.jsx)(wa,a({},s)),(0,ca.jsx)(Ta,a(a({},s),{},{predefinedPatterns:s.predefinedPatterns})),(0,ca.jsx)(ua,a(a({},s),{},{drumSounds:Ju})),(0,ca.jsx)(xa,a({},s))]}),(0,ca.jsx)("div",{className:"right-column",children:(0,ca.jsx)(ka,a(a({},s),{},{drumSounds:Ju}))})]}):(0,ca.jsxs)("div",{className:"start-screen",children:[(0,ca.jsx)(Sa,{}),(0,ca.jsx)("h1",{children:"BeatLab"}),(0,ca.jsx)("button",{onClick:async()=>{try{console.log("Attempting to start audio context..."),"running"!==la.state&&(await la.resume(),console.log("Audio context resumed. State:",la.state)),await Gr.resume(),console.log("Tone.start() completed. Audio context state:",la.state);const e=(new yo).toDestination();e.triggerAttackRelease("C4","8n"),console.log("Audio ping: C4 played."),setTimeout(()=>e.dispose(),1e3),n(!0)}catch(e){console.error("Failed to start audio context:",e),alert("Failed to start audio. Please check your browser console for more details.")}},children:"Start Creating"})]})})},eh=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:s,getFCP:r,getLCP:i,getTTFB:o}=t;n(e),s(e),r(e),i(e),o(e)})};t.createRoot(document.getElementById("root")).render((0,ca.jsx)(e.StrictMode,{children:(0,ca.jsx)(Zu,{})})),eh()})()})();
//# sourceMappingURL=main.84f9ca4e.js.map